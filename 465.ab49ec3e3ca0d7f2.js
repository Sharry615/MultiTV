"use strict";(self.webpackChunkaltbalaji_web=self.webpackChunkaltbalaji_web||[]).push([[465],{1465:(F,h,d)=>{d.r(h),d.d(h,{HomepageModule:()=>J});var _=d(9808),p=d(4521),y=d(4004),a=d(5e3),I=d(2468),D=d(6529),m=d(4733),S=d(6759),E=d(870),N=d(1322),v=d(9685),C=d(9085),w=d(8642);const H=[{path:"",component:(()=>{class r{constructor(o,l,i,f,s,n,e,t,g){this.route=o,this._dd=l,this._hc=i,this.DEC_SER=f,this.router=s,this.ed=n,this._ar=e,this.deviceService=t,this.fcs=g,this.busyGettingData=!1,this.sliderData=[],this.abc=[],this.homeData=[],this.cardData=[],this.home_category=[],this.regional_offset=0,this.display_count=0,this.display_offset=0,this.display_limit=4,this.windowSize=0,this.defaultImages=localStorage.getItem("defaultImages"),this.FavoriteData=[],this.newContinueWatching=[],this.RegionalData=[],this.loginId=JSON.parse(localStorage.getItem("taploginInfo")||"{}"),this._ar.queryParamMap.subscribe(c=>{null==c.get("id")&&(localStorage.setItem("active","HOME"),this.ed.active.next("HOME"))}),this.ed.playDetailVideo.subscribe(c=>{if("0"!=c){let M=localStorage.getItem("DisplayCount");this.display_limit=M}}),this.ed.reload.subscribe(c=>{1==c&&location.reload()}),this.timeZoneOffset=new Date}ngOnInit(){this.getSub(),this.windowSize=window.innerWidth,this._dd.apipip().subscribe(o=>{localStorage.setItem("ipSaveData",JSON.stringify(o))}),this.trackMe(),this.npawEventMode("navigate","navigate","HomePage")}get deviceDetection(){return this.deviceService.getDeviceInfo()}ngAfterViewInit(){if(this.route.paramMap.subscribe(o=>{if(this.cat_id=o.get("id"),null==this.cat_id){this.navMain=localStorage.getItem("navbarData"),this.navNew=JSON.parse(this.navMain);for(let l=0;l<this.navNew.length;l++)this.path=this.navNew[l].name,("HOME"==this.path||"Home"==this.path)&&(this.cat_id=this.navNew[l].id)}else this.cat_id=o.get("id")}),this._dd.getHomeData(this.display_offset,this.display_limit,this.cat_id).pipe((0,y.U)(o=>{this.DEC_SER.getDecryptedData(null==o?void 0:o.result);let l=JSON.parse(this.DEC_SER.decryptData);this.homeData=l,localStorage.setItem("DisplayCount",this.homeData.display_count),this.home_category=l.dashboard.home_category;const i=localStorage.getItem("taploginInfo"),f=JSON.parse(i);f&&(this._dd.getHomeFavorites(f.id).subscribe(s=>{if(1==s.code){this.DEC_SER.getDecryptedData(null==s?void 0:s.result);let n=JSON.parse(this.DEC_SER.decryptData);this.FavoriteData=n.content_id,this.home_category.forEach(e=>{e.cat_cntn.forEach(t=>{for(let g in this.FavoriteData)t.id==this.FavoriteData[g]&&(t.is_favourite=1)})})}}),this.home_category.forEach(s=>{"continue_watching"==s.category_type&&this._dd.continueWatch(f.id).subscribe(e=>{if(1==e.code){this.DEC_SER.getDecryptedData(null==e?void 0:e.result);let t=JSON.parse(this.DEC_SER.decryptData);this.newContinueWatching=t.content;for(let g in t.content)s.cat_cntn.push(t.content[g]);this.pushHomeData()}});const n=localStorage.getItem("regional");"language"==s.category_type&&n&&this._dd.regionalLang(this.regional_offset).subscribe(e=>{if(1==e.code){this.DEC_SER.getDecryptedData(null==e?void 0:e.result);let t=JSON.parse(this.DEC_SER.decryptData);this.RegionalData=t.content;for(let g in t.content)s.cat_cntn.push(t.content[g]);this.pushHomeData()}})})),localStorage.setItem("banner_type",this.home_category[0].category_type),this.pushHomeData(),this.display_offset=l.display_offset,this.display_count=l.display_count,this._hc.pushHomeCategoryData(this.home_category),this.ed.showFooter.next(!0)})).subscribe(),"taploginInfo"in localStorage){const o=localStorage.getItem("taploginInfo");JSON.parse(o),this.router.url.substring(1)}}pushHomeData(){this.home_category.map(o=>{if(null!=o.multiple_layout){let l={};l=o.multiple_layout.find(i=>"web"===i.platform),void 0!==l&&(o.totalSlides=l.slider,o.type=l.layout,o.cat_cntn.forEach(i=>{var s=i.duration.split(":");i.result=Math.round(i.play_duration/(60*+s[0]*60+60*+s[1]+ +s[2])*100),i.sliderImg="",i.sliderIdentifier="",1==i.is_group&&null!=i.groupInfo?"feature_banner"==o.category_type?null!=i.groupInfo.global_thumb?i.groupInfo.global_thumb.forEach(e=>{null!=e&&("square"==e.layout&&(e.layout="circle"),e.layout==l.layout&&(null==e||e.image_size.filter(t=>{360==Number(t.width)||854==Number(t.width)?(i.sliderImg=t.url,i.sliderIdentifier=t.identifier):""==i.sliderImg&&(i.sliderImg=null==e?void 0:e.image_size[0].url,i.sliderIdentifier=null==e?void 0:e.image_size[0].identifier)})))}):null!=i.groupInfo.season_banner&&i.groupInfo.season_banner.forEach(e=>{null!=e&&e.layout==l.layout&&(null==e||e.image_size.filter(t=>{854==Number(t.width)?(i.sliderImg=t.url,i.sliderIdentifier=t.identifier):""==i.sliderImg&&(i.sliderImg=null==e?void 0:e.image_size[0].url,i.sliderIdentifier=null==e?void 0:e.image_size[0].identifier)}))}):"default"==o.category_type||"language"==o.category_type||"Binge_it_all"==o.category_type?null!=i.groupInfo.global_thumb?i.groupInfo.global_thumb.forEach(e=>{null!=e&&("square"==e.layout&&(e.layout="circle"),e.layout==l.layout&&(null==e||e.image_size.filter(t=>{360==Number(t.width)||854==Number(t.width)?(i.sliderImg=t.url,i.sliderIdentifier=t.identifier):""==i.sliderImg&&(i.sliderImg=null==e?void 0:e.image_size[0].url,i.sliderIdentifier=null==e?void 0:e.image_size[0].identifier)})))}):null!=i.groupInfo.thumbs&&i.groupInfo.thumbs.forEach(e=>{null!=e&&("square"==e.layout&&(e.layout="circle"),e.layout==l.layout&&(null==e||e.image_size.filter(t=>{360==Number(t.width)||854==Number(t.width)?(i.sliderImg=t.url,i.sliderIdentifier=t.identifier):""==i.sliderImg&&(i.sliderImg=null==e?void 0:e.image_size[0].url,i.sliderIdentifier=null==e?void 0:e.image_size[0].identifier)})))}):"continue_watching"==o.category_type&&i.layout_thumbs.forEach(e=>{"square"==e.layout&&(e.layout="circle"),e.layout==l.layout&&(null==e||e.image_size.filter(t=>{360==Number(t.width)||854==Number(t.width)?(i.sliderImg=t.url,i.sliderIdentifier=t.identifier):""==i.sliderImg&&(i.sliderImg=null==e?void 0:e.image_size[0].url,i.sliderIdentifier=null==e?void 0:e.image_size[0].identifier)}))}):0==i.is_group&&null!=i.layout_thumbs&&i.layout_thumbs.forEach(e=>{"square"==e.layout&&(e.layout="circle"),e.layout==l.layout&&(null==e||e.image_size.filter(t=>{"feature_banner"==o.category_type?854==Number(t.width)?(i.sliderImg=t.url,i.sliderIdentifier=t.identifier):""==i.sliderImg&&(i.sliderImg=null==e?void 0:e.image_size[0].url,i.sliderIdentifier=null==e?void 0:e.image_size[0].identifier):("default"==o.category_type||"continue_watching"==o.category_type||"language"==o.category_type||"Binge_it_all"==o.category_type)&&(360==Number(t.width)||854==Number(t.width)?(i.sliderImg=t.url,i.sliderIdentifier=t.identifier):""==i.sliderImg&&(i.sliderImg=null==e?void 0:e.image_size[0].url,i.sliderIdentifier=null==e?void 0:e.image_size[0].identifier))}))}),"genre"==o.category_type&&null!=i.layout_thumbs&&i.layout_thumbs.forEach(e=>{e.layout==l.layout&&(null==e||e.image_size.filter(t=>{360==Number(t.width)||854==Number(t.width)?(i.sliderImg=t.url,i.sliderIdentifier=t.identifier):""==i.sliderImg&&(i.sliderImg=null==e?void 0:e.image_size[0].url,i.sliderIdentifier=null==e?void 0:e.image_size[0].identifier)}))})}))}})}onScrollingFinished(){if(this.busyGettingData)return;this.busyGettingData=!0;let o=0;this.home_category.forEach(l=>{"cat_id"in l&&o++}),this.display_count>o&&this.display_offset<this.display_count&&this._dd.getHomeData(this.display_offset,this.display_limit,this.cat_id).pipe((0,y.U)(l=>{this.DEC_SER.getDecryptedData(null==l?void 0:l.result);let i=JSON.parse(this.DEC_SER.decryptData);localStorage.setItem("latestLimit",String(this.display_limit)),this.display_offset=i.display_offset,this.display_count=i.display_count;let f=[];f=i.dashboard.home_category,this.busyGettingData=!1,f.forEach(s=>{s.cat_cntn.forEach(n=>{for(let e in this.FavoriteData)n.id==this.FavoriteData[e]&&(n.is_favourite=1)}),this.home_category=[...this.home_category,s],this.pushHomeData(),this._hc.pushHomeCategoryData(this.home_category)})})).subscribe()}trackMe(){this.userDetails=localStorage.getItem("taploginInfo")||"Free","Free"==this.userDetails?(this.userInfo=this.userDetails,gtag("event","Home-Page",{action:"Home-Page"})):(this.userInfo=JSON.parse(this.userDetails).id,gtag("event","Home-Page",{user_id:this.userInfo,action:"Home-Page"}))}onWindowResize(){this.windowSize=window.innerWidth}npawEventMode(o,l,i){new w.Plugin({accountCode:"multitv"}).appAnalytics.fireNav({route:"https://uat.altt.co.in/",page:`${i}`})}getSub(){var o=localStorage.getItem("is_subscriber"),l=localStorage.getItem("taploginInfo"),i=JSON.parse(l);i&&this._dd.getSubtitle(i.id).subscribe(f=>{this.DEC_SER.getDecryptedData(null==f?void 0:f.result);const n=JSON.parse(this.DEC_SER.decryptData);var e=this.loginId;if(e.is_parental=n.parental.is_parental,localStorage.setItem("taploginInfo",JSON.stringify(e)),"1"==n.parental.is_parental&&"1"==o){this.fcs.LevelSetToSetting.next(n.parental.restriction_title);var t=this.loginId;t.restriction_level=n.parental.restriction_level,localStorage.setItem("taploginInfo",JSON.stringify(t));var g=this.loginId;g.restriction_title=n.parental.restriction_title,localStorage.setItem("taploginInfo",JSON.stringify(g)),this.region=n.payload.language_key}this.region=n.payload.language_key,localStorage.setItem("regional",n.payload.language_key)})}}return r.\u0275fac=function(o){return new(o||r)(a.Y36(p.gz),a.Y36(I.D),a.Y36(D.L),a.Y36(m.n),a.Y36(p.F0),a.Y36(S.q),a.Y36(p.gz),a.Y36(E.x0),a.Y36(N.V))},r.\u0275cmp=a.Xpm({type:r,selectors:[["app-homepage"]],decls:2,vars:5,consts:[["infinite-scroll","",3,"infiniteScrollDistance","infiniteScrollThrottle","infiniteScrollDisabled","scrolled"],[3,"sdasd","homeCategory"]],template:function(o,l){1&o&&(a.TgZ(0,"div",0),a.NdJ("scrolled",function(){return l.onScrollingFinished()}),a._UZ(1,"app-carousel",1),a.qZA()),2&o&&(a.Q6J("infiniteScrollDistance",5)("infiniteScrollThrottle",800)("infiniteScrollDisabled",l.busyGettingData),a.xp6(1),a.Q6J("sdasd",l.cat_id)("homeCategory",l.home_category))},directives:[v.Ry,C.F],styles:[""]}),r})()}];let z=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=a.oAB({type:r}),r.\u0275inj=a.cJS({imports:[[p.Bz.forChild(H)],p.Bz]}),r})();var O=d(7316),R=d(2658);let J=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=a.oAB({type:r}),r.\u0275inj=a.cJS({imports:[[_.ez,z,O.b,v.Rq,R.E]]}),r})()}}]);