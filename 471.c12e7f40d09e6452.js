(self.webpackChunkaltbalaji_web=self.webpackChunkaltbalaji_web||[]).push([[471],{6131:(at,je,J)=>{"use strict";J.d(je,{O:()=>ae});var j=J(5e3),p=J(7206);let ae=(()=>{class W{constructor(){this.secretKey="89H49I12T20E5424",this.IV="0543737198408118",this.detectBrowserName()}detectBrowserName(){const z=window.navigator.userAgent.toLowerCase();switch(!0){case z.indexOf("edge")>-1:case z.indexOf("opr")>-1&&!!window.opr:case z.indexOf("chrome")>-1&&!!window.chrome:return"web";case z.indexOf("trident")>-1:return"ie";case z.indexOf("firefox")>-1:return"web";case z.indexOf("safari")>-1:return"ios";default:return"other"}}getDecryptedDataIos(z){let ee=p.enc.Utf8.parse(this.secretKey),X=p.enc.Utf8.parse(this.IV),Y=p.enc.Base64.stringify(p.enc.Hex.parse(z)),U=p.AES.decrypt(Y,ee,{iv:X,mode:p.mode.CBC,padding:p.pad.Pkcs7});this.decryptData=U.toString(p.enc.Utf8)}decode(z){let ee=p.enc.Base64.parse(z);return p.enc.Utf8.stringify(ee)}}return W.\u0275fac=function(z){return new(z||W)},W.\u0275prov=j.Yz7({token:W,factory:W.\u0275fac,providedIn:"root"}),W})()},5402:(at,je,J)=>{"use strict";J.d(je,{s:()=>ue});var j=J(5e3),p=J(3075),ae=J(5226),W=J.n(ae),he=J(5579),z=J(8966),ee=J(1322),X=J(6759),Y=J(2468),U=J(4733),Me=J(4521),Z=J(7093),Be=J(9808),it=J(5245),ft=J(4390);const Ye=["searchInput"];function de(be,Ne){if(1&be&&(j.TgZ(0,"div",10),j._UZ(1,"img",11),j.qZA()),2&be){const _e=j.oxw();j.xp6(1),j.s9C("src",_e.baseJson.verify_parental.logo.web,j.LSH)}}function We(be,Ne){if(1&be&&(j.TgZ(0,"p"),j._uU(1),j.qZA()),2&be){const _e=j.oxw();j.xp6(1),j.hij(" ",_e.baseJson.verify_parental.heading.text," ")}}function Ae(be,Ne){if(1&be&&(j.TgZ(0,"p",12),j._uU(1),j.qZA()),2&be){const _e=j.oxw();j.xp6(1),j.Oqu(_e.incorrectPinMsg)}}function De(be,Ne){if(1&be){const _e=j.EpF();j.TgZ(0,"ng-otp-input",13,14),j.NdJ("onInputChange",function(O){return j.CHM(_e),j.oxw().onOtpChange(O)}),j.qZA()}if(2&be){const _e=j.oxw();j.Q6J("formCtrl",_e.otpInputCurrent)("config",_e.config)}}function Te(be,Ne){if(1&be){const _e=j.EpF();j.TgZ(0,"p",15),j.TgZ(1,"a",4),j.NdJ("click",function(){return j.CHM(_e),j.oxw().resetPin()}),j._uU(2),j.qZA(),j.qZA()}if(2&be){const _e=j.oxw();j.xp6(2),j.hij(" ",_e.baseJson.verify_parental.reset_btn.text,"")}}let ue=(()=>{class be{constructor(_e,k,O,G,ye,se,Se){this.dialogRef=_e,this.fcs=k,this.dialog=O,this.ed=G,this.ds=ye,this.dep_ser=se,this.router=Se,this.isSuccess=new j.vpe,this.loginId=JSON.parse(localStorage.getItem("taploginInfo")||"{}"),this.show=!1,this.baseJson=[],this.submitParetal=0,this.otpInputCurrent=new p.NI("",p.kI.compose([p.kI.required,p.kI.minLength(4)])),this.config={allowNumbersOnly:!0,length:4,isPasswordInput:!0,timer:1,inputStyles:{width:"65px",height:"85px",color:"white",border:"none",outline:"none","font-size":"40px ","background-color":"#3D3D3D"}}}ngOnInit(){var _e=localStorage.getItem("taploginInfo"),k=JSON.parse(_e);this.user_id=k.id,this.popupAlertData=localStorage.getItem("popUpForm"),this.baseJson=JSON.parse(this.popupAlertData)}onOtpChange(_e){if(0==this.submitParetal)if(4==_e.length){this.submitParetal=1;const k=new FormData;k.append("u_id",this.user_id),k.append("pin",this.otpInputCurrent.value),this.ds.parentalAuth(k).subscribe(O=>{1==O.code?(this.isSuccess.emit(!0),this.dialogRef.close()):(this.submitParetal=0,this.show=!0,this.incorrectPinMsg=O.error)})}else this.show=!1}close(){this.dialogRef.close(),this.fcs.sendToVideols.next(!0)}forgotPassword(){this.dialog.open(he.o,{panelClass:"forgotPassword",width:"566px",height:"524px",data:{name:this.loginId.email}})}submit(){}getSwalmsg(_e,k){W().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:1e3,timerProgressBar:!0,didOpen:G=>{G.addEventListener("mouseenter",W().stopTimer),G.addEventListener("mouseleave",W().resumeTimer)}}).fire({icon:k,title:_e})}resetPin(){this.router.navigate(["/account"]),this.dialogRef.close(),this.ed.openSettingAccount.next(!0),this.ed.openChangePin.next(!0)}}return be.\u0275fac=function(_e){return new(_e||be)(j.Y36(z.so),j.Y36(ee.V),j.Y36(z.uw),j.Y36(X.q),j.Y36(Y.D),j.Y36(U.n),j.Y36(Me.F0))},be.\u0275cmp=j.Xpm({type:be,selectors:[["app-chech-pin-parental"]],viewQuery:function(_e,k){if(1&_e&&j.Gf(Ye,5),2&_e){let O;j.iGM(O=j.CRH())&&(k.searchInput=O)}},outputs:{isSuccess:"isSuccess"},decls:15,vars:5,consts:[["fxLayout","column","fxLayoutGap","10px"],[1,"parental-control-content"],["class","alt-login-img",4,"ngIf"],[1,"close-btn"],[3,"click"],[1,"parental-heading-1"],[4,"ngIf"],["style","color: #FF8787 !important;",4,"ngIf"],["class","myText","autocomplete","off",3,"formCtrl","config","onInputChange",4,"ngIf"],["class","resetPin",4,"ngIf"],[1,"alt-login-img"],["alt","ALTBalaji",2,"width","65px",3,"src"],[2,"color","#FF8787 !important"],["autocomplete","off",1,"myText",3,"formCtrl","config","onInputChange"],["ngOtpInput",""],[1,"resetPin"]],template:function(_e,k){1&_e&&(j.TgZ(0,"div",0),j.TgZ(1,"div",1),j.YNc(2,de,2,1,"div",2),j.TgZ(3,"span",3),j.TgZ(4,"mat-icon",4),j.NdJ("click",function(){return k.close()}),j._uU(5,"close"),j.qZA(),j.qZA(),j.TgZ(6,"div",5),j.YNc(7,We,2,1,"p",6),j.YNc(8,Ae,2,1,"p",7),j.TgZ(9,"div"),j.TgZ(10,"form"),j.YNc(11,De,2,2,"ng-otp-input",8),j._UZ(12,"br"),j._UZ(13,"br"),j.YNc(14,Te,3,1,"p",9),j.qZA(),j.qZA(),j.qZA(),j.qZA(),j.qZA()),2&_e&&(j.xp6(2),j.Q6J("ngIf",1==k.baseJson.verify_parental.logo.is_allow),j.xp6(5),j.Q6J("ngIf",1==k.baseJson.verify_parental.heading.is_allow),j.xp6(1),j.Q6J("ngIf",k.show),j.xp6(3),j.Q6J("ngIf",1==k.baseJson.verify_parental.pin_field.is_allow),j.xp6(3),j.Q6J("ngIf",1==k.baseJson.verify_parental.reset_btn.is_allow))},directives:[Z.xw,Z.SQ,Be.O5,it.Hw,p._Y,p.JL,p.F,ft.df],styles:[".parental-control-content[_ngcontent-%COMP%]{position:relative;text-align:center}.parental-control-content[_ngcontent-%COMP%]   .parental-heading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;font-family:GothamMedium!important;text-align:center;color:#fff}.parental-control-content[_ngcontent-%COMP%]   .alt-login-img[_ngcontent-%COMP%]{position:relative;top:-56px}.parental-control-content[_ngcontent-%COMP%]   .parental-heading-1[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;font-family:GothamMedium!important;text-align:center;color:#fff}.parental-control-content[_ngcontent-%COMP%]   .parental-heading-1[_ngcontent-%COMP%]   .otp-form[_ngcontent-%COMP%]{text-align:center}.close-btn[_ngcontent-%COMP%]{position:absolute;top:-10px;right:-12px;background:transparent;border:none;outline:none;cursor:pointer;color:#fff}.submitBtn[_ngcontent-%COMP%]{background-color:red;width:76%;color:#fff;border:none}.resetPin[_ngcontent-%COMP%]{color:#fff}.resetPin[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{border-bottom:1px solid white!important;cursor:pointer}ng-otp-input[_ngcontent-%COMP%]{filter:none!important}"]}),be})()},6958:(at,je,J)=>{"use strict";J.d(je,{Q:()=>oo});var j=J(8966),p=J(5e3),ae=J(9808),W=J(6759),he=J(4004),z=J(6442);class ee{constructor(){if(ee._instance)throw new Error("Singleton class. Cannot instantiate.");ee._instance=this}static get instance(){return this._instance}createTitleComponent(){const x=z.M.getComponent("Component");return z.M.extend(x,{constructor:function(v,w){x.apply(this,arguments),w.text&&this.updateTextContent(w.text)},createEl:function(){return z.M.dom.createEl("div",{className:"vjs-title-bar"})},updateTextContent:function(v){z.M.dom.emptyEl(this.el()),z.M.dom.appendContent(this.el(),v)}})}createButtonComponent(){const x=z.M.getComponent("Button");return z.M.extend(x,{constructor:function(v,w){void 0===w.show&&(w.show=!1),x.apply(this,arguments),this.on("click",()=>{w.show=!w.show,this.showHideLog(v,!w.show)})},createEl:function(){return z.M.dom.createEl("button",{className:"vjs-custom-button",innerHTML:"",tabIndex:0},{role:"button","aria-live":"polite"})},showHideLog:function(v,w){w&&v.dispose()}})}registerTitleComponent(){const x=this.createTitleComponent();z.M.registerComponent("TitleBar",x)}registerCustomButton(){const x=this.createButtonComponent();z.M.registerComponent("CustomButton",x)}}ee._instance=new ee;const X=ee.instance;var Y=J(17),U=J(9226),Me=J.n(U),Z=J(1421),Be=J.n(Z),Ye=function(x,v){v.isImmediatePropagationStopped=function(){return!0},v.cancelBubble=!0,v.isPropagationStopped=function(){return!0}},de=function(x,v,w){Ye(0,w),x.trigger({type:v+w.type,originalEvent:w})};function ue(m){var x,v;"playing"===m.type?(v=m,(x=this).ads.isInAdMode()&&(x.ads.isContentResuming()?x.ads._contentEnding&&de(x,"content",v):de(x,"ad",v))):"ended"===m.type?function(x,v){x.ads.isInAdMode()?x.ads.isContentResuming()?(Ye(0,v),x.trigger("resumeended")):de(x,"ad",v):!x.ads._contentHasEnded&&!x.ads.stitchedAds()&&(de(x,"content",v),x.trigger("readyforpostroll"))}(this,m):"loadstart"===m.type||"loadeddata"===m.type||"loadedmetadata"===m.type?function(x,v){if(!("loadstart"===v.type&&!x.ads._hasThereBeenALoadStartDuringPlayerLife||"loadeddata"===v.type&&!x.ads._hasThereBeenALoadedData||"loadedmetadata"===v.type&&!x.ads._hasThereBeenALoadedMetaData))if(x.ads.inAdBreak())de(x,"ad",v);else{if(x.currentSrc()!==x.ads.contentSrc)return;de(x,"content",v)}}(this,m):"play"===m.type?function(x,v){x.ads.inAdBreak()?de(x,"ad",v):x.ads.isContentResuming()&&de(x,"content",v)}(this,m):this.ads.isInAdMode()&&(this.ads.isContentResuming()?de(this,"content",m):de(this,"ad",m))}var Ne={},k=function(){(function(x){if(Y.default.dom.isInFrame()&&"function"!=typeof Me().__tcfapi){for(var w,v=Me(),P={};v;){try{if(v.frames.__tcfapiLocator){w=v;break}}catch(V){}if(v===Me().top)break;v=v.parent}if(!w)return;Me().__tcfapi=function(V,ie,Ce,ve){var Ve=Math.random()+"",Je={__tcfapiCall:{command:V,parameter:ve,version:ie,callId:Ve}};P[Ve]=Ce,w.postMessage(Je,"*")},Me().addEventListener("message",function(V){var ie={};try{ie="string"==typeof V.data?JSON.parse(V.data):V.data}catch(ve){}var Ce=ie.__tcfapiReturn;Ce&&"function"==typeof P[Ce.callId]&&(P[Ce.callId](Ce.returnValue,Ce.success),P[Ce.callId]=null)},!1)}})(),"function"==typeof Me().__tcfapi&&Me().__tcfapi("addEventListener",2,function(x,v){v&&(Ne=x)})},O=function(x,v){return v?encodeURIComponent(x):x},G=function(x,v,w){if(x&&x[w])for(var P=x[w],V=Object.keys(P),ie=0;ie<V.length;ie++)v["{mediainfo."+w+"."+V[ie]+"}"]=P[V[ie]]};function ye(m,x,v){var w=this,P={};m=m.replace(/{([^}=]+)=([^}]+)}/g,function(ve,Ve,Je){return P["{"+Ve+"}"]=Je,"{"+Ve+"}"}),void 0===x&&(x=!1);var V={};for(var ie in void 0!==v&&(V=v),V["{player.id}"]=this.options_["data-player"]||this.id_,V["{player.height}"]=this.currentHeight(),V["{player.width}"]=this.currentWidth(),V["{mediainfo.id}"]=this.mediainfo?this.mediainfo.id:"",V["{mediainfo.name}"]=this.mediainfo?this.mediainfo.name:"",V["{mediainfo.duration}"]=this.mediainfo?this.mediainfo.duration:"",V["{player.duration}"]=this.duration(),V["{player.pageUrl}"]=Y.default.dom.isInFrame()?Be().referrer:Me().location.href,V["{playlistinfo.id}"]=this.playlistinfo?this.playlistinfo.id:"",V["{playlistinfo.name}"]=this.playlistinfo?this.playlistinfo.name:"",V["{timestamp}"]=(new Date).getTime(),V["{document.referrer}"]=Be().referrer,V["{window.location.href}"]=Me().location.href,V["{random}"]=Math.floor(1e12*Math.random()),["description","tags","reference_id","ad_keys"].forEach(function(ve){V["{mediainfo."+ve+"}"]=w.mediainfo&&w.mediainfo[ve]?w.mediainfo[ve]:P["{mediainfo."+ve+"}"]?P["{mediainfo."+ve+"}"]:""}),G(this.mediainfo,V,"custom_fields"),G(this.mediainfo,V,"customFields"),Object.keys(Ne).forEach(function(ve){V["{tcf."+ve+"}"]=Ne[ve]}),V["{tcf.gdprAppliesInt}"]=Ne.gdprApplies?1:0,V)m=m.split(ie).join(O(V[ie],x));for(var Ce in m=m.replace(/{pageVariable\.([^}]+)}/g,function(ve,Ve){for(var Je,tt=Me(),qe=Ve.split("."),He=0;He<qe.length;He++)He===qe.length-1?Je=tt[qe[He]]:tt=tt[qe[He]];var Ue=typeof Je;return null===Je?"null":void 0===Je?P["{pageVariable."+Ve+"}"]?P["{pageVariable."+Ve+"}"]:(Y.default.log.warn('Page variable "'+Ve+'" not found'),""):"string"!==Ue&&"number"!==Ue&&"boolean"!==Ue?(Y.default.log.warn('Page variable "'+Ve+'" is not a supported type'),""):O(String(Je),x)}),P)m=m.replace(Ce,P[Ce]);return m}var se={processMetadataTracks:function(m,x){for(var v=m.textTracks(),w=function(ie){"metadata"===ie.kind&&(m.ads.cueTextTracks.setMetadataTrackMode(ie),x(m,ie))},P=0;P<v.length;P++)w(v[P]);v.addEventListener("addtrack",function(V){w(V.track)})},setMetadataTrackMode:function(m){},getSupportedAdCue:function(m,x){return x},isSupportedAdCue:function(m,x){return!0},getCueId:function(m,x){return x.id}},Se=function(x,v){return void 0!==v&&x.ads.includedCues[v]},xe=function(x,v){void 0!==v&&""!==v&&(x.ads.includedCues[v]=!0)};function Ie(){!1!==this.ads._shouldBlockPlay&&(this.paused()||(this.ads.debug("Playback was canceled by cancelContentPlay"),this.pause()),this.ads._cancelledPlay=!0)}se.processAdTrack=function(m,x,v,w){m.ads.includedCues={};for(var P=0;P<x.length;P++){var V=x[P],ie=this.getSupportedAdCue(m,V);if(!this.isSupportedAdCue(m,V))return void Y.default.log.warn("Skipping as this is not a supported ad cue.",V);var Ce=this.getCueId(m,V),ve=V.startTime;if(Se(m,Ce))return void Y.default.log("Skipping ad already seen with ID "+Ce);w&&w(m,ie,Ce,ve),v(m,ie,Ce,ve),xe(m,Ce)}};var ge={},fe=Y.default;ge.isMiddlewareMediatorSupported=function(){return!fe.browser.IS_IOS&&!fe.browser.IS_ANDROID&&!!(fe.use&&fe.middleware&&fe.middleware.TERMINATOR)},ge.playMiddleware=function(m){return{setSource:function(v,w){w(null,v)},callPlay:function(){if(m.ads&&!0===m.ads._shouldBlockPlay)return m.ads.debug("Using playMiddleware to block content playback"),m.ads._playBlocked=!0,fe.middleware.TERMINATOR},play:function(v,w){m.ads&&m.ads._playBlocked&&v?(m.ads.debug("Play call to Tech was terminated."),m.trigger("play"),m.addClass("vjs-has-started"),m.ads._playBlocked=!1):w&&w.catch&&w.catch(function(P){"NotAllowedError"===P.name&&!Y.default.browser.IS_SAFARI&&m.trigger("pause")})}}},ge.testHook=function(m){fe=m};var Pe=ge.playMiddleware,ze=ge.isMiddlewareMediatorSupported,we=function(){function m(){}return m.getState=function(v){if(v&&m.states_&&m.states_[v])return m.states_[v]},m.registerState=function(v,w){if("string"!=typeof v||!v)throw new Error('Illegal state name, "'+v+'"; must be a non-empty string.');return m.states_||(m.states_={}),m.states_[v]=w,w},m}(),et=function(){function m(v){this.player=v}m._getName=function(){return"Anonymous State"};var x=m.prototype;return x.transitionTo=function(w){var P=this.player;this.cleanup(P);var V=new w(P);P.ads._state=V,P.ads.debug(this.constructor._getName()+" -> "+V.constructor._getName());for(var ie=arguments.length,Ce=new Array(ie>1?ie-1:0),ve=1;ve<ie;ve++)Ce[ve-1]=arguments[ve];V.init.apply(V,[P].concat(Ce))},x.init=function(){},x.cleanup=function(){},x.onPlay=function(){},x.onPlaying=function(){},x.onEnded=function(){},x.onAdEnded=function(){},x.onAdsReady=function(){Y.default.log.warn("Unexpected adsready event")},x.onAdsError=function(){},x.onAdsCanceled=function(){},x.onAdTimeout=function(){},x.onAdStarted=function(){},x.onContentChanged=function(){},x.onContentResumed=function(){},x.onReadyForPostroll=function(){Y.default.log.warn("Unexpected readyforpostroll event")},x.onNoPreroll=function(){},x.onNoPostroll=function(){},x.startLinearAdMode=function(){Y.default.log.warn("Unexpected startLinearAdMode invocation (State via "+this.constructor._getName()+")")},x.endLinearAdMode=function(){Y.default.log.warn("Unexpected endLinearAdMode invocation (State via "+this.constructor._getName()+")")},x.skipLinearAdMode=function(){Y.default.log.warn("Unexpected skipLinearAdMode invocation (State via "+this.constructor._getName()+")")},x.isAdState=function(){throw new Error("isAdState unimplemented for "+this.constructor._getName())},x.isWaitingForAdBreak=function(){return!1},x.isContentResuming=function(){return!1},x.inAdBreak=function(){return!1},x.handleEvent=function(w){var P=this.player;"play"===w?this.onPlay(P):"adsready"===w?this.onAdsReady(P):"adserror"===w?this.onAdsError(P):"adscanceled"===w?this.onAdsCanceled(P):"adtimeout"===w?this.onAdTimeout(P):"ads-ad-started"===w?this.onAdStarted(P):"contentchanged"===w?this.onContentChanged(P):"contentresumed"===w?this.onContentResumed(P):"readyforpostroll"===w?this.onReadyForPostroll(P):"playing"===w?this.onPlaying(P):"ended"===w?this.onEnded(P):"nopreroll"===w?this.onNoPreroll(P):"nopostroll"===w?this.onNoPostroll(P):"adended"===w&&this.onAdEnded(P)},m}();function mt(m,x){m.prototype=Object.create(x.prototype),m.prototype.constructor=m,m.__proto__=x}we.registerState("State",et);var _t=function(m){function x(w){var P;return(P=m.call(this,w)||this).contentResuming=!1,P.waitingForAdBreak=!1,P}mt(x,m);var v=x.prototype;return v.isAdState=function(){return!0},v.onPlaying=function(){var P=we.getState("ContentPlayback");this.contentResuming&&this.transitionTo(P)},v.onContentResumed=function(){var P=we.getState("ContentPlayback");this.contentResuming&&this.transitionTo(P)},v.isWaitingForAdBreak=function(){return this.waitingForAdBreak},v.isContentResuming=function(){return this.contentResuming},v.inAdBreak=function(){return!0===this.player.ads._inLinearAdMode},x}(et);we.registerState("AdState",_t);var Ct=function(m){function x(){return m.apply(this,arguments)||this}mt(x,m);var v=x.prototype;return v.isAdState=function(){return!1},v.onContentChanged=function(P){var V=we.getState("BeforePreroll"),ie=we.getState("Preroll");P.ads.debug("Received contentchanged event (ContentState)"),P.paused()?this.transitionTo(V):(this.transitionTo(ie,!1),P.pause(),P.ads._pausedOnContentupdate=!0)},x}(et);we.registerState("ContentState",Ct);var ii,wt=we.getState("ContentState");we.registerState("AdsDone",function(m){function x(){return m.apply(this,arguments)||this}mt(x,m),x._getName=function(){return"AdsDone"};var v=x.prototype;return v.init=function(P){P.ads._contentHasEnded=!0,P.trigger("ended")},v.startLinearAdMode=function(){Y.default.log.warn("Unexpected startLinearAdMode invocation (AdsDone)")},x}(wt));var Tt_start=function Bt(m){m.ads.debug("Starting ad break"),m.ads._inLinearAdMode=!0,m.trigger("adstart"),m.ads.shouldTakeSnapshots()&&(m.ads.snapshot=function Pi(m){var x;x=Y.default.browser.IS_IOS&&m.ads.isLive(m)&&m.seekable().length>0?m.currentTime()-m.seekable().end(0):m.currentTime();var v=m.$(".vjs-tech"),w=m.textTracks?m.textTracks():[],P=[],V={ended:m.ended(),currentSrc:m.currentSrc(),sources:m.currentSources(),src:m.tech_.src(),currentTime:x,type:m.currentType()};v&&(V.style=v.getAttribute("style"));for(var ie=0;ie<w.length;ie++){var Ce=w[ie];P.push({track:Ce,mode:Ce.mode}),Ce.mode="disabled"}return V.suppressedTracks=P,V}(m)),m.ads.shouldPlayContentBehindAd(m)&&(m.ads.preAdVolume_=m.volume(),m.volume(0)),m.addClass("vjs-ad-playing"),m.hasClass("vjs-live")&&m.removeClass("vjs-live"),m.ads.removeNativePoster()},Tt_end=function ci(m,x){m.ads.debug("Ending ad break"),void 0===x&&(x=function(){}),m.ads.adType=null,m.ads._inLinearAdMode=!1,m.trigger("adend"),m.removeClass("vjs-ad-playing"),m.ads.isLive(m)&&m.addClass("vjs-live"),m.ads.shouldTakeSnapshots()?function pt(m,x){var v=m.ads.snapshot;if(void 0===x&&(x=function(){}),!0===m.ads.disableNextSnapshotRestore)return m.ads.disableNextSnapshotRestore=!1,delete m.ads.snapshot,void x();var ie,w=m.$(".vjs-tech"),P=20,V=v.suppressedTracks,Ce=function(){for(var qe=0;qe<V.length;qe++)(ie=V[qe]).track.mode=ie.mode},ve=function(){var qe;if(Y.default.browser.IS_IOS&&m.ads.isLive(m)){if(v.currentTime<0&&(qe=m.seekable().length>0?m.seekable().end(0)+v.currentTime:m.currentTime(),m.currentTime(qe)),m.paused()){var He=m.play();He&&He.catch&&He.catch(function(Oe){Y.default.log.warn("Play promise rejected in IOS snapshot resume",Oe)})}}else if(v.ended)m.currentTime(m.duration());else{m.currentTime(v.currentTime);var Ue=m.play();Ue&&Ue.catch&&Ue.catch(function(Oe){Y.default.log.warn("Play promise rejected in snapshot resume",Oe)})}m.ads.shouldRemoveAutoplay_&&(m.autoplay(!1),m.ads.shouldRemoveAutoplay_=!1)},Ve=function tt(){if(m.off("contentcanplay",tt),ii&&m.clearTimeout(ii),(w=m.el().querySelector(".vjs-tech")).readyState>1||void 0===w.seekable||w.seekable.length>0)return ve();if(P--)m.setTimeout(tt,50);else try{ve()}catch(qe){Y.default.log.warn("Failed to resume the content after an advertisement",qe)}};if("style"in v&&w.setAttribute("style",v.style||""),m.ads.videoElementRecycled())m.one("resumeended",function(){delete m.ads.snapshot,x()}),m.one("contentloadedmetadata",Ce),Y.default.browser.IS_IOS&&!m.autoplay()&&(m.autoplay(!0),m.ads.shouldRemoveAutoplay_=!0),m.src(v.sources),m.one("contentcanplay",Ve),ii=m.setTimeout(Ve,2e3);else{if(Ce(),!m.ended()){var Je=m.play();Je&&Je.catch&&Je.catch(function(tt){Y.default.log.warn("Play promise rejected in snapshot restore",tt)})}delete m.ads.snapshot,x()}}(m,x):(m.volume(m.ads.preAdVolume_),x())},Sr=we.getState("AdState");we.registerState("Preroll",function(m){function x(){return m.apply(this,arguments)||this}mt(x,m),x._getName=function(){return"Preroll"};var v=x.prototype;return v.init=function(P,V,ie){if(this.waitingForAdBreak=!0,P.addClass("vjs-ad-loading"),ie||P.ads.nopreroll_)return this.resumeAfterNoPreroll(P);var Ce=P.ads.settings.timeout;"number"==typeof P.ads.settings.prerollTimeout&&(Ce=P.ads.settings.prerollTimeout),this._timeout=P.setTimeout(function(){P.trigger("adtimeout")},Ce),V?this.handleAdsReady():this.adsReady=!1},v.onAdsReady=function(P){P.ads.inAdBreak()?Y.default.log.warn("Unexpected adsready event (Preroll)"):(P.ads.debug("Received adsready event (Preroll)"),this.handleAdsReady())},v.handleAdsReady=function(){this.adsReady=!0,this.readyForPreroll()},v.afterLoadStart=function(P){var V=this.player;V.ads._hasThereBeenALoadStartDuringPlayerLife?P():(V.ads.debug("Waiting for loadstart..."),V.one("loadstart",function(){V.ads.debug("Received loadstart event"),P()}))},v.noPreroll=function(){var P=this;this.afterLoadStart(function(){P.player.ads.debug("Skipping prerolls due to nopreroll event (Preroll)"),P.resumeAfterNoPreroll(P.player)})},v.readyForPreroll=function(){var P=this.player;this.afterLoadStart(function(){P.ads.debug("Triggered readyforpreroll event (Preroll)"),P.trigger("readyforpreroll")})},v.onAdsCanceled=function(P){var V=this;P.ads.debug("adscanceled (Preroll)"),this.afterLoadStart(function(){V.resumeAfterNoPreroll(P)})},v.onAdsError=function(P){var V=this;Y.default.log("adserror (Preroll)"),this.inAdBreak()?P.ads.endLinearAdMode():this.afterLoadStart(function(){V.resumeAfterNoPreroll(P)})},v.startLinearAdMode=function(){var P=this.player;!this.adsReady||P.ads.inAdBreak()||this.isContentResuming()?Y.default.log.warn("Unexpected startLinearAdMode invocation (Preroll)"):(this.clearTimeout(P),P.ads.adType="preroll",this.waitingForAdBreak=!1,Tt_start(P),P.ads._shouldBlockPlay=!1)},v.onAdStarted=function(P){P.removeClass("vjs-ad-loading")},v.endLinearAdMode=function(){var P=this.player;this.inAdBreak()&&(P.removeClass("vjs-ad-loading"),P.addClass("vjs-ad-content-resuming"),this.contentResuming=!0,Tt_end(P))},v.skipLinearAdMode=function(){var P=this,V=this.player;V.ads.inAdBreak()||this.isContentResuming()?Y.default.log.warn("Unexpected skipLinearAdMode invocation"):this.afterLoadStart(function(){V.trigger("adskip"),V.ads.debug("skipLinearAdMode (Preroll)"),P.resumeAfterNoPreroll(V)})},v.onAdTimeout=function(P){var V=this;this.afterLoadStart(function(){P.ads.debug("adtimeout (Preroll)"),V.resumeAfterNoPreroll(P)})},v.onNoPreroll=function(P){P.ads.inAdBreak()||this.isContentResuming()?Y.default.log.warn("Unexpected nopreroll event (Preroll)"):this.noPreroll()},v.resumeAfterNoPreroll=function(P){if(this.contentResuming=!0,P.ads._shouldBlockPlay=!1,this.cleanupPartial(P),P.ads._playRequested||P.ads._pausedOnContentupdate)if(P.paused()){P.ads.debug("resumeAfterNoPreroll: attempting to resume playback (Preroll)");var V=P.play();V&&V.then&&V.then(null,function(ie){})}else P.ads.debug("resumeAfterNoPreroll: already playing (Preroll)"),P.trigger("play"),P.trigger("playing")},v.cleanup=function(P){P.ads._hasThereBeenALoadStartDuringPlayerLife||Y.default.log.warn("Leaving Preroll state before loadstart event can cause issues."),this.cleanupPartial(P)},v.cleanupPartial=function(P){P.removeClass("vjs-ad-loading"),P.removeClass("vjs-ad-content-resuming"),this.clearTimeout(P)},v.clearTimeout=function(P){P.clearTimeout(this._timeout),this._timeout=null},x}(Sr));var nr=function(m){function x(){return m.apply(this,arguments)||this}mt(x,m),x._getName=function(){return"BeforePreroll"};var v=x.prototype;return v.init=function(P){this.adsReady=!1,this.shouldResumeToContent=!1,P.ads._shouldBlockPlay=!P.ads.settings.allowVjsAutoplay||!P.autoplay()},v.onAdsReady=function(P){P.ads.debug("Received adsready event (BeforePreroll)"),this.adsReady=!0},v.onPlay=function(P){var V=we.getState("Preroll");P.ads.debug("Received play event (BeforePreroll)"),this.transitionTo(V,this.adsReady,this.shouldResumeToContent)},v.onAdsCanceled=function(P){P.ads.debug("adscanceled (BeforePreroll)"),this.shouldResumeToContent=!0},v.onAdsError=function(){this.player.ads.debug("adserror (BeforePreroll)"),this.shouldResumeToContent=!0},v.onNoPreroll=function(){this.player.ads.debug("Skipping prerolls due to nopreroll event (BeforePreroll)"),this.shouldResumeToContent=!0},v.skipLinearAdMode=function(){var P=this.player;P.trigger("adskip"),P.ads.debug("skipLinearAdMode (BeforePreroll)"),this.shouldResumeToContent=!0},v.onContentChanged=function(){this.init(this.player)},x}(we.getState("ContentState"));we.registerState("BeforePreroll",nr);var kt=we.getState("AdState");we.registerState("Midroll",function(m){function x(){return m.apply(this,arguments)||this}mt(x,m),x._getName=function(){return"Midroll"};var v=x.prototype;return v.init=function(P){P.ads.adType="midroll",Tt_start(P),P.addClass("vjs-ad-loading")},v.onAdStarted=function(P){P.removeClass("vjs-ad-loading")},v.endLinearAdMode=function(){var P=this.player;this.inAdBreak()&&(this.contentResuming=!0,P.addClass("vjs-ad-content-resuming"),P.removeClass("vjs-ad-loading"),Tt_end(P))},v.onAdsError=function(P){this.inAdBreak()&&P.ads.endLinearAdMode()},v.cleanup=function(P){P.removeClass("vjs-ad-loading"),P.removeClass("vjs-ad-content-resuming")},x}(kt));var mi=function(m){function x(){return m.apply(this,arguments)||this}mt(x,m),x._getName=function(){return"Postroll"};var v=x.prototype;return v.init=function(P){if(this.waitingForAdBreak=!0,P.ads._contentEnding=!0,P.ads.nopostroll_){this.resumeContent(P);var ie=we.getState("AdsDone");this.transitionTo(ie)}else{P.addClass("vjs-ad-loading");var V=P.ads.settings.timeout;"number"==typeof P.ads.settings.postrollTimeout&&(V=P.ads.settings.postrollTimeout),this._postrollTimeout=P.setTimeout(function(){P.trigger("adtimeout")},V)}},v.startLinearAdMode=function(){var P=this.player;P.ads.inAdBreak()||this.isContentResuming()?Y.default.log.warn("Unexpected startLinearAdMode invocation (Postroll)"):(P.ads.adType="postroll",P.clearTimeout(this._postrollTimeout),this.waitingForAdBreak=!1,Tt_start(P))},v.onAdStarted=function(P){P.removeClass("vjs-ad-loading")},v.endLinearAdMode=function(){var P=this,V=this.player,ie=we.getState("AdsDone");this.inAdBreak()&&(V.removeClass("vjs-ad-loading"),this.resumeContent(V),Tt_end(V,function(){P.transitionTo(ie)}))},v.skipLinearAdMode=function(){var P=this.player;P.ads.inAdBreak()||this.isContentResuming()?Y.default.log.warn("Unexpected skipLinearAdMode invocation"):(P.ads.debug("Postroll abort (skipLinearAdMode)"),P.trigger("adskip"),this.abort(P))},v.onAdTimeout=function(P){P.ads.debug("Postroll abort (adtimeout)"),this.abort(P)},v.onAdsError=function(P){P.ads.debug("Postroll abort (adserror)"),P.ads.inAdBreak()?P.ads.endLinearAdMode():this.abort(P)},v.onContentChanged=function(P){if(this.isContentResuming()){var V=we.getState("BeforePreroll");this.transitionTo(V)}else if(!this.inAdBreak()){var ie=we.getState("Preroll");this.transitionTo(ie)}},v.onNoPostroll=function(P){this.isContentResuming()||this.inAdBreak()?Y.default.log.warn("Unexpected nopostroll event (Postroll)"):this.abort(P)},v.resumeContent=function(P){this.contentResuming=!0,P.addClass("vjs-ad-content-resuming")},v.abort=function(P){var V=we.getState("AdsDone");this.resumeContent(P),P.removeClass("vjs-ad-loading"),this.transitionTo(V)},v.cleanup=function(P){P.removeClass("vjs-ad-content-resuming"),P.clearTimeout(this._postrollTimeout),P.ads._contentEnding=!1},x}(we.getState("AdState"));we.registerState("Postroll",mi);var rt=function(m){function x(){return m.apply(this,arguments)||this}mt(x,m),x._getName=function(){return"ContentPlayback"};var v=x.prototype;return v.init=function(P){P.ads._shouldBlockPlay=!1},v.onAdsReady=function(P){P.ads.debug("Received adsready event (ContentPlayback)"),P.ads.nopreroll_||(P.ads.debug("Triggered readyforpreroll event (ContentPlayback)"),P.trigger("readyforpreroll"))},v.onReadyForPostroll=function(P){var V=we.getState("Postroll");P.ads.debug("Received readyforpostroll event"),this.transitionTo(V)},v.startLinearAdMode=function(){var P=we.getState("Midroll");this.transitionTo(P)},x}(we.getState("ContentState"));we.registerState("ContentPlayback",rt);var ba=function(m){function x(){return m.apply(this,arguments)||this}mt(x,m),x._getName=function(){return"StitchedContentPlayback"};var v=x.prototype;return v.init=function(){this.player.ads._shouldBlockPlay=!1},v.onContentChanged=function(){this.player.ads.debug("Received contentchanged event ("+this.constructor._getName()+")")},v.startLinearAdMode=function(){var P=we.getState("StitchedAdRoll");this.transitionTo(P)},x}(we.getState("ContentState"));we.registerState("StitchedContentPlayback",ba);var Cr=function(m){function x(){return m.apply(this,arguments)||this}mt(x,m),x._getName=function(){return"StitchedAdRoll"};var v=x.prototype;return v.init=function(){this.waitingForAdBreak=!1,this.contentResuming=!1,this.player.ads.adType="stitched",Tt_start(this.player)},v.onPlaying=function(){},v.onContentResumed=function(){},v.onAdEnded=function(){this.endLinearAdMode(),this.player.trigger("ended")},v.endLinearAdMode=function(){var P=we.getState("StitchedContentPlayback");Tt_end(this.player),this.transitionTo(P)},x}(we.getState("AdState"));we.registerState("StitchedAdRoll",Cr);var ar=ge.isMiddlewareMediatorSupported,Sa=Y.default.getTech("Html5").Events,Qi={timeout:5e3,prerollTimeout:void 0,postrollTimeout:void 0,debug:!1,stitchedAds:!1,contentIsLive:void 0,liveCuePoints:!0,allowVjsAutoplay:Y.default.options.normalizeAutoplay||!1},sr=function(x){var v=this,w=Y.default.mergeOptions(Qi,x),P=[];Sa.concat(["firstplay","loadedalldata"]).forEach(function(Ce){-1===P.indexOf(Ce)&&P.push(Ce)}),v.on(P,ue),ar()||function Ke(m,x){x&&Y.default.log("Using cancelContentPlay to block content playback"),m.on("play",Ie)}(v,w.debug),v.setTimeout(function(){!v.ads._hasThereBeenALoadStartDuringPlayerLife&&""!==v.src()&&Y.default.log.error("videojs-contrib-ads has not seen a loadstart event 5 seconds after being initialized, but a source is present. This indicates that videojs-contrib-ads was initialized too late. It must be initialized immediately after video.js in the same tick. As a result, some ads will not play and some media events will be incorrect. For more information, see http://videojs.github.io/videojs-contrib-ads/integrator/getting-started.html")},5e3),v.on("ended",function(){v.hasClass("vjs-has-started")||v.addClass("vjs-has-started")}),v.on("contenttimeupdate",function(){v.removeClass("vjs-waiting")}),v.on(["addurationchange","adcanplay"],function(){if(!v.ads.settings.stitchedAds&&!v.hasStarted()&&(!v.ads.snapshot||v.currentSrc()!==v.ads.snapshot.currentSrc)&&v.ads.inAdBreak()){var Ce=v.play();Ce&&Ce.catch&&Ce.catch(function(ve){Y.default.log.warn("Play promise rejected when playing ad",ve)})}}),v.on("nopreroll",function(){v.ads.debug("Received nopreroll event"),v.ads.nopreroll_=!0}),v.on("nopostroll",function(){v.ads.debug("Received nopostroll event"),v.ads.nopostroll_=!0}),v.on("playing",function(){v.ads._cancelledPlay=!1,v.ads._pausedOnContentupdate=!1}),v.on("play",function(){v.ads._playRequested=!0}),v.one("loadstart",function(){v.ads._hasThereBeenALoadStartDuringPlayerLife=!0}),v.on("loadeddata",function(){v.ads._hasThereBeenALoadedData=!0}),v.on("loadedmetadata",function(){v.ads._hasThereBeenALoadedMetaData=!0}),v.ads=function ft(m){return{disableNextSnapshotRestore:!1,_contentEnding:!1,_contentHasEnded:!1,_hasThereBeenALoadStartDuringPlayerLife:!1,_hasThereBeenALoadedData:!1,_hasThereBeenALoadedMetaData:!1,_inLinearAdMode:!1,_shouldBlockPlay:!1,_playBlocked:!1,_playRequested:!1,adType:null,VERSION:"6.9.0",reset:function(){m.ads.disableNextSnapshotRestore=!1,m.ads._contentEnding=!1,m.ads._contentHasEnded=!1,m.ads.snapshot=null,m.ads.adType=null,m.ads._hasThereBeenALoadedData=!1,m.ads._hasThereBeenALoadedMetaData=!1,m.ads._cancelledPlay=!1,m.ads._shouldBlockPlay=!1,m.ads._playBlocked=!1,m.ads.nopreroll_=!1,m.ads.nopostroll_=!1,m.ads._playRequested=!1},startLinearAdMode:function(){m.ads._state.startLinearAdMode()},endLinearAdMode:function(){m.ads._state.endLinearAdMode()},skipLinearAdMode:function(){m.ads._state.skipLinearAdMode()},stitchedAds:function(v){return void 0!==v&&(Y.default.log.warn("Using player.ads.stitchedAds() as a setter is deprecated, it should be set as an option upon initialization of contrib-ads."),this.settings.stitchedAds=!!v),this.settings.stitchedAds},videoElementRecycled:function(){if(m.ads.shouldPlayContentBehindAd(m))return!1;if(!this.snapshot)throw new Error("You cannot use videoElementRecycled while there is no snapshot.");var v=m.tech_.src()!==this.snapshot.src,w=m.currentSrc()!==this.snapshot.currentSrc;return v||w},isLive:function(v){return void 0===v&&(v=m),"boolean"==typeof v.ads.settings.contentIsLive?v.ads.settings.contentIsLive:v.duration()===1/0||"8"===Y.default.browser.IOS_VERSION&&0===v.duration()},shouldPlayContentBehindAd:function(v){if(void 0===v&&(v=m),v)return!!v.ads.settings.liveCuePoints&&!Y.default.browser.IS_IOS&&!Y.default.browser.IS_ANDROID&&v.duration()===1/0;throw new Error("shouldPlayContentBehindAd requires a player as a param")},shouldTakeSnapshots:function(v){return void 0===v&&(v=m),!this.shouldPlayContentBehindAd(v)&&!this.stitchedAds()},isInAdMode:function(){return this._state.isAdState()},isWaitingForAdBreak:function(){return this._state.isWaitingForAdBreak()},isContentResuming:function(){return this._state.isContentResuming()},isAdPlaying:function(){return this._state.inAdBreak()},inAdBreak:function(){return this._state.inAdBreak()},removeNativePoster:function(){var v=m.$(".vjs-tech");v&&v.removeAttribute("poster")},debug:function(){if(this.settings.debug){for(var v=arguments.length,w=new Array(v),P=0;P<v;P++)w[P]=arguments[P];1===w.length&&"string"==typeof w[0]?Y.default.log("ADS: "+w[0]):Y.default.log.apply(Y.default,["ADS:"].concat(w))}}}}(v),v.ads.settings=w,w.stitchedAds=!!w.stitchedAds,v.ads._state=w.stitchedAds?new(we.getState("StitchedContentPlayback"))(v):new(we.getState("BeforePreroll"))(v),v.ads._state.init(v),v.ads.cueTextTracks=se,v.ads.adMacroReplacement=ye.bind(v),function be(m){m.ads.contentSrc=m.currentSrc(),m.ads._seenInitialLoadstart=!1,m.on("loadstart",function(){if(!m.ads.inAdBreak()){var w=m.currentSrc();w!==m.ads.contentSrc&&(m.ads._seenInitialLoadstart&&m.trigger({type:"contentchanged"}),m.trigger({type:"contentupdate",oldValue:m.ads.contentSrc,newValue:w}),m.ads.contentSrc=w),m.ads._seenInitialLoadstart=!0}})}(v),v.on("contentchanged",v.ads.reset);var ie=function(){var ve=v.textTracks();if(!v.ads.shouldPlayContentBehindAd(v)&&v.ads.inAdBreak()&&v.tech_.featuresNativeTextTracks&&Y.default.browser.IS_IOS&&!Array.isArray(v.textTracks()))for(var Ve=0;Ve<ve.length;Ve++){var Je=ve[Ve];"showing"===Je.mode&&(Je.mode="disabled")}};v.ready(function(){v.textTracks().addEventListener("change",ie)}),v.on(["play","playing","ended","adsready","adscanceled","adskip","adserror","adtimeout","adended","ads-ad-started","contentchanged","dispose","contentresumed","readyforpostroll","nopreroll","nopostroll"],function(Ce){v.ads._state.handleEvent(Ce.type)}),v.on("dispose",function(){v.ads.reset(),v.textTracks().removeEventListener("change",ie)}),k(),v.ads.listenToTcf=k};sr.VERSION="6.9.0",function dt(m){!function(){if(Y.default.getPlugin)return Boolean(Y.default.getPlugin("ads"));var x=Y.default.getComponent("Player");return Boolean(x&&x.prototype.ads)}()&&((Y.default.registerPlugin||Y.default.plugin)("ads",m),ze()&&!Y.default.usingContribAdsMiddleware_&&(Y.default.use("*",Pe),Y.default.usingContribAdsMiddleware_=!0,Y.default.log.debug("Play middleware has been registered with videojs")))}(sr);var ct=function(x,v,w){this.vjsPlayer=x,this.controller=w,this.contentTrackingTimer=null,this.contentComplete=!1,this.updateTimeIntervalHandle=null,this.updateTimeInterval=1e3,this.seekCheckIntervalHandle=null,this.seekCheckInterval=1e3,this.resizeCheckIntervalHandle=null,this.resizeCheckInterval=250,this.seekThreshold=100,this.contentEndedListeners=[],this.contentSource="",this.contentSourceType="",this.contentPlayheadTracker={currentTime:0,previousTime:0,seeking:!1,duration:0},this.vjsPlayerDimensions={width:this.getPlayerWidth(),height:this.getPlayerHeight()},this.vjsControls=this.vjsPlayer.getChild("controlBar"),this.h5Player=null,this.vjsPlayer.one("play",this.setUpPlayerIntervals.bind(this)),this.boundContentEndedListener=this.localContentEndedListener.bind(this),this.vjsPlayer.on("contentended",this.boundContentEndedListener),this.vjsPlayer.on("dispose",this.playerDisposedListener.bind(this)),this.vjsPlayer.on("readyforpreroll",this.onReadyForPreroll.bind(this)),this.vjsPlayer.on("adtimeout",this.onAdTimeout.bind(this)),this.vjsPlayer.ready(this.onPlayerReady.bind(this)),"onPlay"===this.controller.getSettings().requestMode&&this.vjsPlayer.one("play",this.controller.requestAds.bind(this.controller)),this.vjsPlayer.ads(v)};ct.prototype.setUpPlayerIntervals=function(){this.updateTimeIntervalHandle=setInterval(this.updateCurrentTime.bind(this),this.updateTimeInterval),this.seekCheckIntervalHandle=setInterval(this.checkForSeeking.bind(this),this.seekCheckInterval),this.resizeCheckIntervalHandle=setInterval(this.checkForResize.bind(this),this.resizeCheckInterval)},ct.prototype.updateCurrentTime=function(){this.contentPlayheadTracker.seeking||(this.contentPlayheadTracker.currentTime=this.vjsPlayer.currentTime())},ct.prototype.checkForSeeking=function(){var m=this.vjsPlayer.currentTime();this.contentPlayheadTracker.seeking=Math.abs(1e3*(m-this.contentPlayheadTracker.previousTime))>this.seekCheckInterval+this.seekThreshold,this.contentPlayheadTracker.previousTime=this.vjsPlayer.currentTime()},ct.prototype.checkForResize=function(){var m=this.getPlayerWidth(),x=this.getPlayerHeight();(m!=this.vjsPlayerDimensions.width||x!=this.vjsPlayerDimensions.height)&&(this.vjsPlayerDimensions.width=m,this.vjsPlayerDimensions.height=x,this.controller.onPlayerResize(m,x))},ct.prototype.localContentEndedListener=function(){for(var m in this.contentComplete||(this.contentComplete=!0,this.controller.onContentComplete()),this.contentEndedListeners)"function"==typeof this.contentEndedListeners[m]&&this.contentEndedListeners[m]();clearInterval(this.updateTimeIntervalHandle),clearInterval(this.seekCheckIntervalHandle),clearInterval(this.resizeCheckIntervalHandle),this.vjsPlayer.el()&&this.vjsPlayer.one("play",this.setUpPlayerIntervals.bind(this))},ct.prototype.onNoPostroll=function(){this.vjsPlayer.trigger("nopostroll")},ct.prototype.playerDisposedListener=function(){this.contentEndedListeners=[],this.controller.onPlayerDisposed(),this.contentComplete=!0,this.vjsPlayer.off("contentended",this.boundContentEndedListener),this.vjsPlayer.ads.adTimeoutTimeout&&clearTimeout(this.vjsPlayer.ads.adTimeoutTimeout);var m=[this.updateTimeIntervalHandle,this.seekCheckIntervalHandle,this.resizeCheckIntervalHandle];for(var x in m)m[x]&&clearInterval(m[x])},ct.prototype.onReadyForPreroll=function(){this.controller.onPlayerReadyForPreroll()},ct.prototype.onAdTimeout=function(){this.controller.onAdTimeout()},ct.prototype.onPlayerReady=function(){this.h5Player=document.getElementById(this.getPlayerId()).getElementsByClassName("vjs-tech")[0],this.h5Player.hasAttribute("autoplay")&&this.controller.setSetting("adWillAutoPlay",!0),this.onVolumeChange(),this.vjsPlayer.on("fullscreenchange",this.onFullscreenChange.bind(this)),this.vjsPlayer.on("volumechange",this.onVolumeChange.bind(this)),this.controller.onPlayerReady()},ct.prototype.onFullscreenChange=function(){this.vjsPlayer.isFullscreen()?this.controller.onPlayerEnterFullscreen():this.controller.onPlayerExitFullscreen()},ct.prototype.onVolumeChange=function(){var m=this.vjsPlayer.muted()?0:this.vjsPlayer.volume();this.controller.onPlayerVolumeChanged(m)},ct.prototype.injectAdContainerDiv=function(m){this.vjsControls.el().parentNode.appendChild(m)},ct.prototype.getContentPlayer=function(){return this.h5Player},ct.prototype.getVolume=function(){return this.vjsPlayer.muted()?0:this.vjsPlayer.volume()},ct.prototype.setVolume=function(m){this.vjsPlayer.volume(m),this.vjsPlayer.muted(0==m)},ct.prototype.unmute=function(){this.vjsPlayer.muted(!1)},ct.prototype.mute=function(){this.vjsPlayer.muted(!0)},ct.prototype.play=function(){this.vjsPlayer.play()},ct.prototype.togglePlayback=function(){this.vjsPlayer.paused()?this.vjsPlayer.play():this.vjsPlayer.pause()},ct.prototype.getPlayerWidth=function(){var m=(getComputedStyle(this.vjsPlayer.el())||{}).width;return(!m||0===parseFloat(m))&&(m=(this.vjsPlayer.el().getBoundingClientRect()||{}).width),parseFloat(m)||this.vjsPlayer.width()},ct.prototype.getPlayerHeight=function(){var m=(getComputedStyle(this.vjsPlayer.el())||{}).height;return(!m||0===parseFloat(m))&&(m=(this.vjsPlayer.el().getBoundingClientRect()||{}).height),parseFloat(m)||this.vjsPlayer.height()},ct.prototype.getPlayerOptions=function(){return this.vjsPlayer.options_},ct.prototype.getPlayerId=function(){return this.vjsPlayer.id()},ct.prototype.toggleFullscreen=function(){this.vjsPlayer.isFullscreen()?this.vjsPlayer.exitFullscreen():this.vjsPlayer.requestFullscreen()},ct.prototype.getContentPlayheadTracker=function(){return this.contentPlayheadTracker},ct.prototype.onAdError=function(m){this.vjsControls.show();var x=void 0!==m.getError?m.getError():m.stack;this.vjsPlayer.trigger({type:"adserror",data:{AdError:x,AdErrorEvent:m}})},ct.prototype.onAdLog=function(m){var x=m.getAdData(),v=void 0!==x.adError?x.adError.getMessage():void 0;this.vjsPlayer.trigger({type:"adslog",data:{AdError:v,AdEvent:m}})},ct.prototype.onAdBreakStart=function(){this.contentSource=this.vjsPlayer.currentSrc(),this.contentSourceType=this.vjsPlayer.currentType(),this.vjsPlayer.off("contentended",this.boundContentEndedListener),this.vjsPlayer.ads.startLinearAdMode(),this.vjsControls.hide(),this.vjsPlayer.pause()},ct.prototype.onAdBreakEnd=function(){this.vjsPlayer.on("contentended",this.boundContentEndedListener),this.vjsPlayer.ads.inAdBreak()&&this.vjsPlayer.ads.endLinearAdMode(),this.vjsControls.show()},ct.prototype.onAdStart=function(){this.vjsPlayer.trigger("ads-ad-started")},ct.prototype.onAllAdsCompleted=function(){1==this.contentComplete&&(this.contentSource&&this.vjsPlayer.currentSrc()!=this.contentSource&&this.vjsPlayer.src({src:this.contentSource,type:this.contentSourceType}),this.controller.onContentAndAdsCompleted())},ct.prototype.onAdsReady=function(){this.vjsPlayer.trigger("adsready")},ct.prototype.changeSource=function(m){this.vjsPlayer.currentSrc()&&(this.vjsPlayer.currentTime(0),this.vjsPlayer.pause()),m&&this.vjsPlayer.src(m),this.vjsPlayer.one("loadedmetadata",this.seekContentToZero.bind(this))},ct.prototype.seekContentToZero=function(){this.vjsPlayer.currentTime(0)},ct.prototype.triggerPlayerEvent=function(m,x){this.vjsPlayer.trigger(m,x)},ct.prototype.addContentEndedListener=function(m){this.contentEndedListeners.push(m)},ct.prototype.reset=function(){this.vjsPlayer.off("contentended",this.boundContentEndedListener),this.vjsPlayer.on("contentended",this.boundContentEndedListener),this.vjsControls.show(),this.vjsPlayer.ads.inAdBreak()&&this.vjsPlayer.ads.endLinearAdMode(),this.contentPlayheadTracker.currentTime=0,this.contentComplete=!1};var ht=function(x){this.controller=x,this.adContainerDiv=document.createElement("div"),this.controlsDiv=document.createElement("div"),this.countdownDiv=document.createElement("div"),this.seekBarDiv=document.createElement("div"),this.progressDiv=document.createElement("div"),this.playPauseDiv=document.createElement("div"),this.muteDiv=document.createElement("div"),this.sliderDiv=document.createElement("div"),this.sliderLevelDiv=document.createElement("div"),this.fullscreenDiv=document.createElement("div"),this.boundOnMouseUp=this.onMouseUp.bind(this),this.boundOnMouseMove=this.onMouseMove.bind(this),this.adPlayheadTracker={currentTime:0,duration:0,isPod:!1,adPosition:0,totalAds:0},this.controlPrefix=this.controller.getPlayerId()+"_",this.showCountdown=!0,!1===this.controller.getSettings().showCountdown&&(this.showCountdown=!1),this.isAdNonlinear=!1,this.createAdContainer()};ht.prototype.createAdContainer=function(){this.assignControlAttributes(this.adContainerDiv,"ima-ad-container"),this.adContainerDiv.style.position="absolute",this.adContainerDiv.style.zIndex=1111,this.adContainerDiv.addEventListener("mouseenter",this.showAdControls.bind(this),!1),this.adContainerDiv.addEventListener("mouseleave",this.hideAdControls.bind(this),!1),this.adContainerDiv.addEventListener("click",this.onAdContainerClick.bind(this),!1),this.createControls(),this.controller.injectAdContainerDiv(this.adContainerDiv)},ht.prototype.createControls=function(){this.assignControlAttributes(this.controlsDiv,"ima-controls-div"),this.controlsDiv.style.width="100%",this.controller.getIsMobile()?this.countdownDiv.style.display="none":(this.assignControlAttributes(this.countdownDiv,"ima-countdown-div"),this.countdownDiv.innerHTML=this.controller.getSettings().adLabel,this.countdownDiv.style.display=this.showCountdown?"block":"none"),this.assignControlAttributes(this.seekBarDiv,"ima-seek-bar-div"),this.seekBarDiv.style.width="100%",this.assignControlAttributes(this.progressDiv,"ima-progress-div"),this.assignControlAttributes(this.playPauseDiv,"ima-play-pause-div"),this.addClass(this.playPauseDiv,"ima-playing"),this.playPauseDiv.addEventListener("click",this.onAdPlayPauseClick.bind(this),!1),this.assignControlAttributes(this.muteDiv,"ima-mute-div"),this.addClass(this.muteDiv,"ima-non-muted"),this.muteDiv.addEventListener("click",this.onAdMuteClick.bind(this),!1),this.assignControlAttributes(this.sliderDiv,"ima-slider-div"),this.sliderDiv.addEventListener("mousedown",this.onAdVolumeSliderMouseDown.bind(this),!1),this.controller.getIsIos()&&(this.sliderDiv.style.display="none"),this.assignControlAttributes(this.sliderLevelDiv,"ima-slider-level-div"),this.assignControlAttributes(this.fullscreenDiv,"ima-fullscreen-div"),this.addClass(this.fullscreenDiv,"ima-non-fullscreen"),this.fullscreenDiv.addEventListener("click",this.onAdFullscreenClick.bind(this),!1),this.adContainerDiv.appendChild(this.controlsDiv),this.controlsDiv.appendChild(this.countdownDiv),this.controlsDiv.appendChild(this.seekBarDiv),this.controlsDiv.appendChild(this.playPauseDiv),this.controlsDiv.appendChild(this.muteDiv),this.controlsDiv.appendChild(this.sliderDiv),this.controlsDiv.appendChild(this.fullscreenDiv),this.seekBarDiv.appendChild(this.progressDiv),this.sliderDiv.appendChild(this.sliderLevelDiv)},ht.prototype.onAdPlayPauseClick=function(){this.controller.onAdPlayPauseClick()},ht.prototype.onAdMuteClick=function(){this.controller.onAdMuteClick()},ht.prototype.onAdFullscreenClick=function(){this.controller.toggleFullscreen()},ht.prototype.onAdsPaused=function(){this.controller.sdkImpl.adPlaying=!1,this.addClass(this.playPauseDiv,"ima-paused"),this.removeClass(this.playPauseDiv,"ima-playing"),this.showAdControls()},ht.prototype.onAdsResumed=function(){this.onAdsPlaying(),this.showAdControls()},ht.prototype.onAdsPlaying=function(){this.controller.sdkImpl.adPlaying=!0,this.addClass(this.playPauseDiv,"ima-playing"),this.removeClass(this.playPauseDiv,"ima-paused")},ht.prototype.updateAdUi=function(m,x,v,w,P){var V=Math.floor(x/60),ie=Math.floor(x%60);ie.toString().length<2&&(ie="0"+ie);var Ce=": ";P>1&&(Ce=" ("+w+" "+this.controller.getSettings().adLabelNofN+" "+P+"): "),this.countdownDiv.innerHTML=this.controller.getSettings().adLabel+Ce+V+":"+ie,this.progressDiv.style.width=m/v*100+"%"},ht.prototype.unmute=function(){this.addClass(this.muteDiv,"ima-non-muted"),this.removeClass(this.muteDiv,"ima-muted"),this.sliderLevelDiv.style.width=100*this.controller.getPlayerVolume()+"%"},ht.prototype.mute=function(){this.addClass(this.muteDiv,"ima-muted"),this.removeClass(this.muteDiv,"ima-non-muted"),this.sliderLevelDiv.style.width="0%"},ht.prototype.onAdVolumeSliderMouseDown=function(){document.addEventListener("mouseup",this.boundOnMouseUp,!1),document.addEventListener("mousemove",this.boundOnMouseMove,!1)},ht.prototype.onMouseMove=function(m){this.changeVolume(m)},ht.prototype.onMouseUp=function(m){this.changeVolume(m),document.removeEventListener("mouseup",this.boundOnMouseUp),document.removeEventListener("mousemove",this.boundOnMouseMove)},ht.prototype.changeVolume=function(m){var x=(m.clientX-this.sliderDiv.getBoundingClientRect().left)/this.sliderDiv.offsetWidth;x*=100,x=Math.min(Math.max(x,0),100),this.sliderLevelDiv.style.width=x+"%",0==this.percent?(this.addClass(this.muteDiv,"ima-muted"),this.removeClass(this.muteDiv,"ima-non-muted")):(this.addClass(this.muteDiv,"ima-non-muted"),this.removeClass(this.muteDiv,"ima-muted")),this.controller.setVolume(x/100)},ht.prototype.showAdContainer=function(){this.adContainerDiv.style.display="block"},ht.prototype.hideAdContainer=function(){this.adContainerDiv.style.display="none"},ht.prototype.onAdContainerClick=function(){this.isAdNonlinear&&this.controller.togglePlayback()},ht.prototype.reset=function(){this.hideAdContainer()},ht.prototype.onAdError=function(){this.hideAdContainer()},ht.prototype.onAdBreakStart=function(m){this.showAdContainer();var x=m.getAd().getContentType();this.controlsDiv.style.display="application/javascript"!==x||this.controller.getSettings().showControlsForJSAds?"block":"none",this.onAdsPlaying(),this.hideAdControls()},ht.prototype.onAdBreakEnd=function(){var m=this.controller.getCurrentAd();(null==m||m.isLinear())&&this.hideAdContainer(),this.controlsDiv.style.display="none",this.countdownDiv.innerHTML=""},ht.prototype.onAllAdsCompleted=function(){this.hideAdContainer()},ht.prototype.onLinearAdStart=function(){this.removeClass(this.adContainerDiv,"bumpable-ima-ad-container"),this.isAdNonlinear=!1},ht.prototype.onNonLinearAdLoad=function(){this.adContainerDiv.style.display="block",this.addClass(this.adContainerDiv,"bumpable-ima-ad-container"),this.isAdNonlinear=!0},ht.prototype.onPlayerEnterFullscreen=function(){this.addClass(this.fullscreenDiv,"ima-fullscreen"),this.removeClass(this.fullscreenDiv,"ima-non-fullscreen")},ht.prototype.onPlayerExitFullscreen=function(){this.addClass(this.fullscreenDiv,"ima-non-fullscreen"),this.removeClass(this.fullscreenDiv,"ima-fullscreen")},ht.prototype.onPlayerVolumeChanged=function(m){0==m?(this.addClass(this.muteDiv,"ima-muted"),this.removeClass(this.muteDiv,"ima-non-muted"),this.sliderLevelDiv.style.width="0%"):(this.addClass(this.muteDiv,"ima-non-muted"),this.removeClass(this.muteDiv,"ima-muted"),this.sliderLevelDiv.style.width=100*m+"%")},ht.prototype.showAdControls=function(){this.controller.getSettings().disableAdControls||this.addClass(this.controlsDiv,"ima-controls-div-showing")},ht.prototype.hideAdControls=function(){this.removeClass(this.controlsDiv,"ima-controls-div-showing")},ht.prototype.assignControlAttributes=function(m,x){m.id=this.controlPrefix+x,m.className=this.controlPrefix+x+" "+x},ht.prototype.getClassRegexp=function(m){return new RegExp("(^|[^A-Za-z-])"+m+"((?![A-Za-z-])|$)","gi")},ht.prototype.elementHasClass=function(m,x){return this.getClassRegexp(x).test(m.className)},ht.prototype.addClass=function(m,x){m.className=m.className.trim()+" "+x},ht.prototype.removeClass=function(m,x){var v=this.getClassRegexp(x);m.className=m.className.trim().replace(v,"")},ht.prototype.getAdContainerDiv=function(){return this.adContainerDiv},ht.prototype.setShowCountdown=function(m){this.showCountdown=m,this.countdownDiv.style.display=this.showCountdown?"block":"none"};var Ns="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(m){return typeof m}:function(m){return m&&"function"==typeof Symbol&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},S=function(x){this.controller=x,this.adDisplayContainer=null,this.adDisplayContainerInitialized=!1,this.adsLoader=null,this.adsManager=null,this.adsRenderingSettings=null,this.adsResponse=null,this.currentAd=null,this.adTrackingTimer=null,this.allAdsCompleted=!1,this.adsActive=!1,this.adPlaying=!1,this.adMuted=!1,this.adBreakReadyListener=void 0,this.contentCompleteCalled=!1,this.isAdTimedOut=!1,this.adsManagerDimensions={width:0,height:0},this.autoPlayAdBreaks=!0,!1===this.controller.getSettings().autoPlayAdBreaks&&(this.autoPlayAdBreaks=!1),this.controller.getSettings().locale&&google.ima.settings.setLocale(this.controller.getSettings().locale),this.controller.getSettings().disableFlashAds&&google.ima.settings.setDisableFlashAds(this.controller.getSettings().disableFlashAds),this.controller.getSettings().disableCustomPlaybackForIOS10Plus&&google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.controller.getSettings().disableCustomPlaybackForIOS10Plus),this.controller.getSettings().ppid&&google.ima.settings.setPpid(this.controller.getSettings().ppid),this.controller.getSettings().featureFlags&&google.ima.settings.setFeatureFlags(this.controller.getSettings().featureFlags)};S.prototype.initAdObjects=function(){this.adDisplayContainer=new google.ima.AdDisplayContainer(this.controller.getAdContainerDiv(),this.controller.getContentPlayer()),this.adsLoader=new google.ima.AdsLoader(this.adDisplayContainer),this.adsLoader.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),0==this.controller.getSettings().vpaidAllowed&&this.adsLoader.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.DISABLED),void 0!==this.controller.getSettings().vpaidMode&&this.adsLoader.getSettings().setVpaidMode(this.controller.getSettings().vpaidMode),this.controller.getSettings().locale&&this.adsLoader.getSettings().setLocale(this.controller.getSettings().locale),this.controller.getSettings().numRedirects&&this.adsLoader.getSettings().setNumRedirects(this.controller.getSettings().numRedirects),this.controller.getSettings().sessionId&&this.adsLoader.getSettings().setSessionId(this.controller.getSettings().sessionId),this.adsLoader.getSettings().setPlayerType("videojs-ima"),this.adsLoader.getSettings().setPlayerVersion("2.1.0"),this.adsLoader.getSettings().setAutoPlayAdBreaks(this.autoPlayAdBreaks),this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded.bind(this),!1),this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsLoaderError.bind(this),!1),this.controller.playerWrapper.vjsPlayer.trigger({type:"ads-loader",adsLoader:this.adsLoader})},S.prototype.requestAds=function(){var m=new google.ima.AdsRequest;if(this.controller.getSettings().adTagUrl?m.adTagUrl=this.controller.getSettings().adTagUrl:m.adsResponse=this.controller.getSettings().adsResponse,this.controller.getSettings().forceNonLinearFullSlot&&(m.forceNonLinearFullSlot=!0),this.controller.getSettings().vastLoadTimeout&&(m.vastLoadTimeout=this.controller.getSettings().vastLoadTimeout),this.controller.getSettings().omidMode&&window.console.warn("The additional setting `omidMode` has been removed. Use `omidVendorAccess` instead."),this.controller.getSettings().omidVendorAccess){m.omidAccessModeRules={};var x=this.controller.getSettings().omidVendorAccess;Object.keys(x).forEach(function(w){m.omidAccessModeRules[w]=x[w]})}m.linearAdSlotWidth=this.controller.getPlayerWidth(),m.linearAdSlotHeight=this.controller.getPlayerHeight(),m.nonLinearAdSlotWidth=this.controller.getSettings().nonLinearWidth||this.controller.getPlayerWidth(),m.nonLinearAdSlotHeight=this.controller.getSettings().nonLinearHeight||this.controller.getPlayerHeight(),m.setAdWillAutoPlay(this.controller.adsWillAutoplay()),m.setAdWillPlayMuted(this.controller.adsWillPlayMuted());var v=this.controller.getSettings().adsRequest;v&&"object"===(void 0===v?"undefined":Ns(v))&&Object.keys(v).forEach(function(w){m[w]=v[w]}),this.adsLoader.requestAds(m),this.controller.playerWrapper.vjsPlayer.trigger({type:"ads-request",AdsRequest:m})},S.prototype.onAdsManagerLoaded=function(m){this.createAdsRenderingSettings(),this.adsManager=m.getAdsManager(this.controller.getContentPlayheadTracker(),this.adsRenderingSettings),this.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.AD_BREAK_READY,this.onAdBreakReady.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.onContentResumeRequested.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,this.onAllAdsCompleted.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,this.onAdLoaded.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,this.onAdStarted.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,this.onAdComplete.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPED,this.onAdComplete.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.LOG,this.onAdLog.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.PAUSED,this.onAdPaused.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.RESUMED,this.onAdResumed.bind(this)),this.controller.playerWrapper.vjsPlayer.trigger({type:"ads-manager",adsManager:this.adsManager}),this.autoPlayAdBreaks||this.initAdsManager();var v=this.controller.getSettings().preventLateAdStart;v?v&&!this.isAdTimedOut&&this.controller.onAdsReady():this.controller.onAdsReady(),this.controller.getSettings().adsManagerLoadedCallback&&this.controller.getSettings().adsManagerLoadedCallback()},S.prototype.onAdsLoaderError=function(m){window.console.warn("AdsLoader error: "+m.getError()),this.controller.onErrorLoadingAds(m),this.adsManager&&this.adsManager.destroy()},S.prototype.initAdsManager=function(){try{var m=this.controller.getPlayerWidth(),x=this.controller.getPlayerHeight();this.adsManagerDimensions.width=m,this.adsManagerDimensions.height=x,this.adsManager.init(m,x,google.ima.ViewMode.NORMAL),this.adsManager.setVolume(this.controller.getPlayerVolume()),this.initializeAdDisplayContainer()}catch(v){this.onAdError(v)}},S.prototype.createAdsRenderingSettings=function(){if(this.adsRenderingSettings=new google.ima.AdsRenderingSettings,this.adsRenderingSettings.restoreCustomPlaybackStateOnAdBreakComplete=!0,this.controller.getSettings().adsRenderingSettings)for(var m in this.controller.getSettings().adsRenderingSettings)""!==m&&(this.adsRenderingSettings[m]=this.controller.getSettings().adsRenderingSettings[m])},S.prototype.onAdError=function(m){var x=void 0!==m.getError?m.getError():m.stack;window.console.warn("Ad error: "+x),this.adsManager.destroy(),this.controller.onAdError(m),this.adsActive=!1,this.adPlaying=!1},S.prototype.onAdBreakReady=function(m){this.adBreakReadyListener(m)},S.prototype.onContentPauseRequested=function(m){this.adsActive=!0,this.adPlaying=!0,this.controller.onAdBreakStart(m)},S.prototype.onContentResumeRequested=function(m){this.adsActive=!1,this.adPlaying=!1,this.controller.onAdBreakEnd()},S.prototype.onAllAdsCompleted=function(m){this.allAdsCompleted=!0,this.controller.onAllAdsCompleted()},S.prototype.onAdLoaded=function(m){m.getAd().isLinear()||(this.controller.onNonLinearAdLoad(),this.controller.playContent())},S.prototype.onAdStarted=function(m){this.currentAd=m.getAd(),this.currentAd.isLinear()?(this.adTrackingTimer=setInterval(this.onAdPlayheadTrackerInterval.bind(this),250),this.controller.onLinearAdStart()):this.controller.onNonLinearAdStart()},S.prototype.onAdPaused=function(){this.controller.onAdsPaused()},S.prototype.onAdResumed=function(m){this.controller.onAdsResumed()},S.prototype.onAdComplete=function(){this.currentAd.isLinear()&&clearInterval(this.adTrackingTimer)},S.prototype.onAdLog=function(m){this.controller.onAdLog(m)},S.prototype.onAdPlayheadTrackerInterval=function(){if(null!==this.adsManager){var m=this.adsManager.getRemainingTime(),x=this.currentAd.getDuration(),v=x-m;v=v>0?v:0;var w=0,P=void 0;this.currentAd.getAdPodInfo()&&(P=this.currentAd.getAdPodInfo().getAdPosition(),w=this.currentAd.getAdPodInfo().getTotalAds()),this.controller.onAdPlayheadUpdated(v,m,x,P,w)}},S.prototype.onContentComplete=function(){this.adsLoader&&(this.adsLoader.contentComplete(),this.contentCompleteCalled=!0),(this.adsManager&&this.adsManager.getCuePoints()&&!this.adsManager.getCuePoints().includes(-1)||!this.adsManager)&&this.controller.onNoPostroll(),this.allAdsCompleted&&this.controller.onContentAndAdsCompleted()},S.prototype.onPlayerDisposed=function(){this.adTrackingTimer&&clearInterval(this.adTrackingTimer),this.adsManager&&(this.adsManager.destroy(),this.adsManager=null)},S.prototype.onPlayerReadyForPreroll=function(){if(this.autoPlayAdBreaks){this.initAdsManager();try{this.controller.showAdContainer(),this.adsManager.setVolume(this.controller.getPlayerVolume()),this.adsManager.start()}catch(m){this.onAdError(m)}}},S.prototype.onAdTimeout=function(){this.isAdTimedOut=!0},S.prototype.onPlayerReady=function(){this.initAdObjects(),(this.controller.getSettings().adTagUrl||this.controller.getSettings().adsResponse)&&"onLoad"===this.controller.getSettings().requestMode&&this.requestAds()},S.prototype.onPlayerEnterFullscreen=function(){this.adsManager&&this.adsManager.resize(window.screen.width,window.screen.height,google.ima.ViewMode.FULLSCREEN)},S.prototype.onPlayerExitFullscreen=function(){this.adsManager&&this.adsManager.resize(this.controller.getPlayerWidth(),this.controller.getPlayerHeight(),google.ima.ViewMode.NORMAL)},S.prototype.onPlayerVolumeChanged=function(m){this.adsManager&&this.adsManager.setVolume(m),this.adMuted=0==m},S.prototype.onPlayerResize=function(m,x){this.adsManager&&(this.adsManagerDimensions.width=m,this.adsManagerDimensions.height=x,this.adsManager.resize(m,x,google.ima.ViewMode.NORMAL))},S.prototype.getCurrentAd=function(){return this.currentAd},S.prototype.setAdBreakReadyListener=function(m){this.adBreakReadyListener=m},S.prototype.isAdPlaying=function(){return this.adPlaying},S.prototype.isAdMuted=function(){return this.adMuted},S.prototype.pauseAds=function(){this.adsManager.pause(),this.adPlaying=!1},S.prototype.resumeAds=function(){this.adsManager.resume(),this.adPlaying=!0},S.prototype.unmute=function(){this.adsManager.setVolume(1),this.adMuted=!1},S.prototype.mute=function(){this.adsManager.setVolume(0),this.adMuted=!0},S.prototype.setVolume=function(m){this.adsManager.setVolume(m),this.adMuted=0==m},S.prototype.initializeAdDisplayContainer=function(){this.adDisplayContainer&&(this.adDisplayContainerInitialized||(this.adDisplayContainer.initialize(),this.adDisplayContainerInitialized=!0))},S.prototype.playAdBreak=function(){this.autoPlayAdBreaks||(this.controller.showAdContainer(),this.adsManager.setVolume(this.controller.getPlayerVolume()),this.adsManager.start())},S.prototype.addEventListener=function(m,x){this.adsManager&&this.adsManager.addEventListener(m,x)},S.prototype.getAdsManager=function(){return this.adsManager},S.prototype.reset=function(){this.adsActive=!1,this.adPlaying=!1,this.adTrackingTimer&&clearInterval(this.adTrackingTimer),this.adsManager&&(this.adsManager.destroy(),this.adsManager=null),this.adsLoader&&!this.contentCompleteCalled&&this.adsLoader.contentComplete(),this.contentCompleteCalled=!1,this.allAdsCompleted=!1};var C=function(x,v){this.settings={},this.contentAndAdsEndedListeners=[],this.isMobile=navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/Android/i),this.isIos=navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i),this.initWithSettings(v);var P=Object.assign({},{debug:this.settings.debug,timeout:this.settings.timeout,prerollTimeout:this.settings.prerollTimeout},v.contribAdsSettings||{});this.playerWrapper=new ct(x,P,this),this.adUi=new ht(this),this.sdkImpl=new S(this)};C.IMA_DEFAULTS={adLabel:"Advertisement",adLabelNofN:"of",debug:!1,disableAdControls:!1,prerollTimeout:1e3,preventLateAdStart:!1,requestMode:"onLoad",showControlsForJSAds:!0,timeout:5e3},C.prototype.initWithSettings=function(m){this.settings=Object.assign({},C.IMA_DEFAULTS,m||{}),this.warnAboutDeprecatedSettings(),this.showCountdown=!0,!1===this.settings.showCountdown&&(this.showCountdown=!1)},C.prototype.warnAboutDeprecatedSettings=function(){var m=this;["adWillAutoplay","adsWillAutoplay","adWillPlayMuted","adsWillPlayMuted"].forEach(function(v){void 0!==m.settings[v]&&console.warn("WARNING: videojs.ima setting "+v+" is deprecated")})},C.prototype.getSettings=function(){return this.settings},C.prototype.getIsMobile=function(){return this.isMobile},C.prototype.getIsIos=function(){return this.isIos},C.prototype.injectAdContainerDiv=function(m){this.playerWrapper.injectAdContainerDiv(m)},C.prototype.getAdContainerDiv=function(){return this.adUi.getAdContainerDiv()},C.prototype.getContentPlayer=function(){return this.playerWrapper.getContentPlayer()},C.prototype.getContentPlayheadTracker=function(){return this.playerWrapper.getContentPlayheadTracker()},C.prototype.requestAds=function(){this.sdkImpl.requestAds()},C.prototype.setSetting=function(m,x){this.settings[m]=x},C.prototype.onErrorLoadingAds=function(m){this.adUi.onAdError(),this.playerWrapper.onAdError(m)},C.prototype.onAdPlayPauseClick=function(){this.sdkImpl.isAdPlaying()?(this.adUi.onAdsPaused(),this.sdkImpl.pauseAds()):(this.adUi.onAdsPlaying(),this.sdkImpl.resumeAds())},C.prototype.onAdMuteClick=function(){this.sdkImpl.isAdMuted()?(this.playerWrapper.unmute(),this.adUi.unmute(),this.sdkImpl.unmute()):(this.playerWrapper.mute(),this.adUi.mute(),this.sdkImpl.mute())},C.prototype.setVolume=function(m){this.playerWrapper.setVolume(m),this.sdkImpl.setVolume(m)},C.prototype.getPlayerVolume=function(){return this.playerWrapper.getVolume()},C.prototype.toggleFullscreen=function(){this.playerWrapper.toggleFullscreen()},C.prototype.onAdError=function(m){this.adUi.onAdError(),this.playerWrapper.onAdError(m)},C.prototype.onAdBreakStart=function(m){this.playerWrapper.onAdBreakStart(),this.adUi.onAdBreakStart(m)},C.prototype.showAdContainer=function(){this.adUi.showAdContainer()},C.prototype.onAdBreakEnd=function(){this.playerWrapper.onAdBreakEnd(),this.adUi.onAdBreakEnd()},C.prototype.onAllAdsCompleted=function(){this.adUi.onAllAdsCompleted(),this.playerWrapper.onAllAdsCompleted()},C.prototype.onAdsPaused=function(){this.adUi.onAdsPaused()},C.prototype.onAdsResumed=function(){this.adUi.onAdsResumed()},C.prototype.onAdPlayheadUpdated=function(m,x,v,w,P){this.adUi.updateAdUi(m,x,v,w,P)},C.prototype.onAdLog=function(m){this.playerWrapper.onAdLog(m)},C.prototype.getCurrentAd=function(){return this.sdkImpl.getCurrentAd()},C.prototype.playContent=function(){this.playerWrapper.play()},C.prototype.onLinearAdStart=function(){this.adUi.onLinearAdStart(),this.playerWrapper.onAdStart()},C.prototype.onNonLinearAdLoad=function(){this.adUi.onNonLinearAdLoad()},C.prototype.onNonLinearAdStart=function(){this.adUi.onNonLinearAdLoad(),this.playerWrapper.onAdStart()},C.prototype.getPlayerWidth=function(){return this.playerWrapper.getPlayerWidth()},C.prototype.getPlayerHeight=function(){return this.playerWrapper.getPlayerHeight()},C.prototype.onAdsReady=function(){this.playerWrapper.onAdsReady()},C.prototype.onPlayerResize=function(m,x){this.sdkImpl.onPlayerResize(m,x)},C.prototype.onContentComplete=function(){this.sdkImpl.onContentComplete()},C.prototype.onNoPostroll=function(){this.playerWrapper.onNoPostroll()},C.prototype.onContentAndAdsCompleted=function(){for(var m in this.contentAndAdsEndedListeners)"function"==typeof this.contentAndAdsEndedListeners[m]&&this.contentAndAdsEndedListeners[m]()},C.prototype.onPlayerDisposed=function(){this.contentAndAdsEndedListeners=[],this.sdkImpl.onPlayerDisposed()},C.prototype.onPlayerReadyForPreroll=function(){this.sdkImpl.onPlayerReadyForPreroll()},C.prototype.onAdTimeout=function(){this.sdkImpl.onAdTimeout()},C.prototype.onPlayerReady=function(){this.sdkImpl.onPlayerReady()},C.prototype.onPlayerEnterFullscreen=function(){this.adUi.onPlayerEnterFullscreen(),this.sdkImpl.onPlayerEnterFullscreen()},C.prototype.onPlayerExitFullscreen=function(){this.adUi.onPlayerExitFullscreen(),this.sdkImpl.onPlayerExitFullscreen()},C.prototype.onPlayerVolumeChanged=function(m){this.adUi.onPlayerVolumeChanged(m),this.sdkImpl.onPlayerVolumeChanged(m)},C.prototype.setContentWithAdTag=function(m,x){this.reset(),this.settings.adTagUrl=x||this.settings.adTagUrl,this.playerWrapper.changeSource(m)},C.prototype.setContentWithAdsResponse=function(m,x){this.reset(),this.settings.adsResponse=x||this.settings.adsResponse,this.playerWrapper.changeSource(m)},C.prototype.setContentWithAdsRequest=function(m,x){this.reset(),this.settings.adsRequest=x||this.settings.adsRequest,this.playerWrapper.changeSource(m)},C.prototype.reset=function(){this.sdkImpl.reset(),this.playerWrapper.reset(),this.adUi.reset()},C.prototype.addContentEndedListener=function(m){this.playerWrapper.addContentEndedListener(m)},C.prototype.addContentAndAdsEndedListener=function(m){this.contentAndAdsEndedListeners.push(m)},C.prototype.setAdBreakReadyListener=function(m){this.sdkImpl.setAdBreakReadyListener(m)},C.prototype.setShowCountdown=function(m){this.adUi.setShowCountdown(m),this.showCountdown=m,this.adUi.countdownDiv.style.display=this.showCountdown?"block":"none"},C.prototype.initializeAdDisplayContainer=function(){this.sdkImpl.initializeAdDisplayContainer()},C.prototype.playAdBreak=function(){this.sdkImpl.playAdBreak()},C.prototype.addEventListener=function(m,x){this.sdkImpl.addEventListener(m,x)},C.prototype.getAdsManager=function(){return this.sdkImpl.getAdsManager()},C.prototype.getPlayerId=function(){return this.playerWrapper.getPlayerId()},C.prototype.changeAdTag=function(m){this.reset(),this.settings.adTagUrl=m},C.prototype.pauseAd=function(){this.adUi.onAdsPaused(),this.sdkImpl.pauseAds()},C.prototype.resumeAd=function(){this.adUi.onAdsPlaying(),this.sdkImpl.resumeAds()},C.prototype.togglePlayback=function(){this.playerWrapper.togglePlayback()},C.prototype.adsWillAutoplay=function(){return void 0!==this.settings.adsWillAutoplay?this.settings.adsWillAutoplay:void 0!==this.settings.adWillAutoplay?this.settings.adWillAutoplay:!!this.playerWrapper.getPlayerOptions().autoplay},C.prototype.adsWillPlayMuted=function(){return void 0!==this.settings.adsWillPlayMuted?this.settings.adsWillPlayMuted:void 0!==this.settings.adWillPlayMuted?this.settings.adWillPlayMuted:void 0!==this.playerWrapper.getPlayerOptions().muted?this.playerWrapper.getPlayerOptions().muted:0==this.playerWrapper.getVolume()},C.prototype.triggerPlayerEvent=function(m,x){this.playerWrapper.triggerPlayerEvent(m,x)};var N=function(x,v,w){this.vjsPlayer=x,this.daiController=w,this.vjsControls=this.vjsPlayer.getChild("controlBar"),this.h5Player=null,this.vjsPlayer.on("dispose",this.playerDisposedListener.bind(this)),this.vjsPlayer.on("pause",this.onPause.bind(this)),this.vjsPlayer.on("play",this.onPlay.bind(this)),this.vjsPlayer.on("seeked",this.onSeekEnd.bind(this)),this.vjsPlayer.ready(this.onPlayerReady.bind(this)),this.vjsPlayer.ads(v)};N.prototype.playerDisposedListener=function(){this.contentEndedListeners=[],this.daiController.onPlayerDisposed()},N.prototype.onPause=function(){this.daiController.isInAdBreak()&&this.vjsControls.show()},N.prototype.onPlay=function(){this.daiController.isInAdBreak()&&this.vjsControls.hide()},N.prototype.onSeekEnd=function(){this.daiController.onSeekEnd(this.vjsPlayer.currentTime())},N.prototype.onPlayerReady=function(){this.h5Player=document.getElementById(this.getPlayerId()).getElementsByClassName("vjs-tech")[0],this.daiController.onPlayerReady()},N.prototype.getStreamPlayer=function(){return this.h5Player},N.prototype.getVjsPlayer=function(){return this.vjsPlayer},N.prototype.getPlayerOptions=function(){return this.vjsPlayer.options_},N.prototype.getPlayerId=function(){return this.vjsPlayer.id()},N.prototype.onAdError=function(m){this.vjsControls.show();var x=void 0!==m.getError?m.getError():m.stack;this.vjsPlayer.trigger({type:"adserror",data:{AdError:x,AdErrorEvent:m}})},N.prototype.onAdBreakStart=function(){this.vjsControls.hide()},N.prototype.onAdBreakEnd=function(){this.vjsControls.show()},N.prototype.reset=function(){this.vjsControls.show()};var K=function(x){this.daiController=x,this.streamPlayer=null,this.vjsPlayer=null,this.streamManager=null,this.uiSettings=new google.ima.dai.api.UiSettings,this.isAdBreak=!1,this.isSnapback=!1,this.snapForwardTime=0,this.metadataLoaded={},this.SOURCE_TYPES={hls:"application/x-mpegURL",dash:"application/dash+xml"}};K.prototype.initImaDai=function(){this.streamPlayer=this.daiController.getStreamPlayer(),this.vjsPlayer=this.daiController.getVjsPlayer(),this.createAdUiDiv(),this.daiController.getSettings().locale&&this.uiSettings.setLocale(this.daiController.getSettings().locale),this.streamManager=new google.ima.dai.api.StreamManager(this.streamPlayer,this.adUiDiv,this.uiSettings),this.streamPlayer.addEventListener("pause",this.onStreamPause),this.streamPlayer.addEventListener("play",this.onStreamPlay),this.streamManager.addEventListener([google.ima.dai.api.StreamEvent.Type.LOADED,google.ima.dai.api.StreamEvent.Type.ERROR,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED],this.onStreamEvent.bind(this),!1),this.vjsPlayer.textTracks().onaddtrack=this.onAddTrack.bind(this),this.vjsPlayer.trigger({type:"stream-manager",StreamManager:this.streamManager}),this.requestStream()},K.prototype.onAddTrack=function(m){var x=this,v=m.track;"metadata"===v.kind&&(v.mode="hidden",v.oncuechange=function(w){var P=!0,V=!1,ie=void 0;try{for(var ve,Ce=v.activeCues_[Symbol.iterator]();!(P=(ve=Ce.next()).done);P=!0){var Ve=ve.value,Je={};Je[Ve.value.key]=Ve.value.data,x.streamManager.onTimedMetadata(Je)}}catch(tt){V=!0,ie=tt}finally{try{!P&&Ce.return&&Ce.return()}finally{if(V)throw ie}}})},K.prototype.createAdUiDiv=function(){var m=document.createElement("div");m.id="ad-ui",m.style.height="calc(100% - 3em)",this.streamPlayer.parentNode.appendChild(m),this.adUiDiv=m},K.prototype.onStreamPause=function(){this.isAdBreak&&(this.adUiDiv.style.display="none")},K.prototype.onStreamPlay=function(){this.isAdBreak&&(this.adUiDiv.style.display="block")},K.prototype.onSeekEnd=function(m){if("live"!==this.daiController.getSettings().streamType){if(this.isSnapback)return void(this.isSnapback=!1);var v=this.streamManager.previousCuePointForStreamTime(m);v&&!v.played&&(this.isSnapback=!0,this.snapForwardTime=m,this.vjsPlayer.currentTime(v.start))}},K.prototype.onStreamEvent=function(m){switch(m.type){case google.ima.dai.api.StreamEvent.Type.LOADED:this.loadUrl(m.getStreamData().url);break;case google.ima.dai.api.StreamEvent.Type.ERROR:window.console.warn("Error loading stream, attempting to play backup stream. "+m.getStreamData().errorMessage),this.daiController.onErrorLoadingAds(m),this.daiController.getSettings().fallbackStreamUrl&&this.loadurl(this.daiController.getSettings().fallbackStreamUrl);break;case google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED:this.isAdBreak=!0,this.adUiDiv.style.display="block",this.daiController.onAdBreakStart();break;case google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED:this.isAdBreak=!1,this.adUiDiv.style.display="none",this.daiController.onAdBreakEnd(),this.snapForwardTime&&this.snapForwardTime>this.vjsPlayer.currentTime()&&(this.vjsPlayer.currentTime(this.snapForwardTime),this.snapForwardTime=0)}},K.prototype.loadUrl=function(m){this.vjsPlayer.ready(function(){var x=this.daiController.getSettings().streamFormat;this.vjsPlayer.src({src:m,type:this.SOURCE_TYPES[x]});var v=this.daiController.getSettings().bookmarkTime;if(v){var w=this.streamManager.streamTimeForContentTime(v);this.isSnapback=!0,this.vjsPlayer.currentTime(w)}}.bind(this))},K.prototype.requestStream=function(){var m=void 0,x=this.daiController.getSettings().streamType;if("vod"===x?((m=new google.ima.dai.api.VODStreamRequest).contentSourceId=this.daiController.getSettings().cmsId,m.videoId=this.daiController.getSettings().videoId):"live"===x?(m=new google.ima.dai.api.LiveStreamRequest).assetKey=this.daiController.getSettings().assetKey:window.console.warn("No valid stream type selected"),m.format=this.daiController.getSettings().streamFormat,this.daiController.getSettings().apiKey&&(m.apiKey=this.daiController.getSettings().apiKey),this.daiController.getSettings().authToken&&(m.authToken=this.daiController.getSettings().authToken),this.daiController.getSettings().adTagParameters&&(m.adTagParameters=this.daiController.getSettings().adTagParameters),this.daiController.getSettings().streamActivityMonitorId&&(m.streamActivityMonitorId=this.daiController.getSettings().streamActivityMonitorId),this.daiController.getSettings().omidMode){m.omidAccessModeRules={};var v=this.daiController.getSettings().omidMode;v.FULL&&(m.omidAccessModeRules[google.ima.OmidAccessMode.FULL]=v.FULL),v.DOMAIN&&(m.omidAccessModeRules[google.ima.OmidAccessMode.DOMAIN]=v.DOMAIN),v.LIMITED&&(m.omidAccessModeRules[google.ima.OmidAccessMode.LIMITED]=v.LIMITED)}this.streamManager.requestStream(m),this.vjsPlayer.trigger({type:"stream-request",StreamRequest:m})},K.prototype.onPlayerReady=function(){this.initImaDai()},K.prototype.onPlayerDisposed=function(){this.streamManager&&this.streamManager.reset()},K.prototype.getStreamManager=function(){return this.StreamManager},K.prototype.reset=function(){this.StreamManager&&this.StreamManager.reset()};var pe=function(x,v){this.inAdBreak=!1,this.settings={},this.isMobile=navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/Android/i),this.isIos=navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i),this.initWithSettings(v);var P=Object.assign({},{debug:this.settings.debug,timeout:this.settings.timeout,prerollTimeout:this.settings.prerollTimeout},v.contribAdsSettings||{});this.playerWrapper=new N(x,P,this),this.sdkImpl=new K(this)};function st(m,x){if(!(m instanceof x))throw new TypeError("Cannot call a class as a function")}pe.IMA_DEFAULTS={adLabel:"Advertisement",adLabelNofN:"of",debug:!1,disableAdControls:!1,showControlsForJSAds:!0},pe.prototype.initWithSettings=function(m){this.settings=Object.assign({},pe.IMA_DEFAULTS,m||{}),this.warnAboutDeprecatedSettings(),this.showCountdown=!0,!1===this.settings.showCountdown&&(this.showCountdown=!1)},pe.prototype.warnAboutDeprecatedSettings=function(){var m=this;[].forEach(function(v){void 0!==m.settings[v]&&console.warn("WARNING: videojs.imaDai setting "+v+" is deprecated")})},pe.prototype.getSettings=function(){return this.settings},pe.prototype.getIsMobile=function(){return this.isMobile},pe.prototype.getIsIos=function(){return this.isIos},pe.prototype.getStreamPlayer=function(){return this.playerWrapper.getStreamPlayer()},pe.prototype.getVjsPlayer=function(){return this.playerWrapper.getVjsPlayer()},pe.prototype.requestStream=function(){this.sdkImpl.requestStream()},pe.prototype.setSetting=function(m,x){this.settings[m]=x},pe.prototype.onErrorLoadingAds=function(m){this.playerWrapper.onAdError(m)},pe.prototype.onAdError=function(m){this.playerWrapper.onAdError(m)},pe.prototype.onAdBreakStart=function(){this.inAdBreak=!0,this.playerWrapper.onAdBreakStart()},pe.prototype.onAdBreakEnd=function(){this.inAdBreak=!1,this.playerWrapper.onAdBreakEnd()},pe.prototype.onPlayerDisposed=function(){this.contentAndAdsEndedListeners=[],this.sdkImpl.onPlayerDisposed()},pe.prototype.isInAdBreak=function(){return this.inAdBreak},pe.prototype.onSeekEnd=function(m){this.sdkImpl.onSeekEnd(m)},pe.prototype.onPlayerReady=function(){this.sdkImpl.onPlayerReady()},pe.prototype.reset=function(){this.sdkImpl.reset(),this.playerWrapper.reset()},pe.prototype.addEventListener=function(m,x){this.sdkImpl.addEventListener(m,x)},pe.prototype.getStreamManager=function(){return this.sdkImpl.getStreamManager()},pe.prototype.getPlayerId=function(){return this.playerWrapper.getPlayerId()},pe.prototype.streamWillAutoplay=function(){return void 0!==this.settings.streamWillAutoplay?this.settings.streamWillAutoplay:!!this.playerWrapper.getPlayerOptions().autoplay},pe.prototype.triggerPlayerEvent=function(m,x){this.playerWrapper.triggerPlayerEvent(m,x)};var St=function(x,v){this.controller=new C(x,v),this.addContentAndAdsEndedListener=function(w){this.controller.addContentAndAdsEndedListener(w)}.bind(this),this.addContentEndedListener=function(w){this.controller.addContentEndedListener(w)}.bind(this),this.addEventListener=function(w,P){this.controller.addEventListener(w,P)}.bind(this),this.changeAdTag=function(w){this.controller.changeAdTag(w)}.bind(this),this.getAdsManager=function(){return this.controller.getAdsManager()}.bind(this),this.initializeAdDisplayContainer=function(){this.controller.initializeAdDisplayContainer()}.bind(this),this.pauseAd=function(){this.controller.pauseAd()}.bind(this),this.playAdBreak=function(){this.controller.playAdBreak()}.bind(this),this.requestAds=function(){this.controller.requestAds()}.bind(this),this.resumeAd=function(){this.controller.resumeAd()}.bind(this),this.setAdBreakReadyListener=function(w){this.controller.setAdBreakReadyListener(w)}.bind(this),this.setContentWithAdTag=function(w,P){this.controller.setContentWithAdTag(w,P)}.bind(this),this.setContentWithAdsResponse=function(w,P){this.controller.setContentWithAdsResponse(w,P)}.bind(this),this.setContentWithAdsRequest=function(w,P){this.controller.setContentWithAdsRequest(w,P)}.bind(this),this.setShowCountdown=function(w){this.controller.setShowCountdown(w)}.bind(this)},ni=function(x,v){this.controller=new pe(x,v),this.streamEndedListener=function(w){this.controller.addStreamEndedListener(w)}.bind(this),this.addEventListener=function(w,P){this.controller.addEventListener(w,P)}.bind(this),this.getStreamManager=function(){return this.controller.getStreamManager()}.bind(this)},yi=function m(x,v){st(this,m),"hls"===(x=x.toLowerCase())||"dash"===x?"dash"!==x?"string"==typeof v?(this.streamFormat=x,this.assetKey=v):window.console.error("assetKey error: value must be string."):window.console.error("streamFormat error: DASH streams are notcurrently supported by this plugin."):window.console.error("VodStream error: incorrect streamFormat.")},Li=function m(x,v,w){st(this,m),"hls"===(x=x.toLowerCase())||"dash"===x?"dash"!==x?"string"==typeof v?"string"==typeof w?(this.streamFormat=x,this.cmsId=v,this.videoId=w):window.console.error("videoId error: value must be string."):window.console.error("cmsId error: value must be string."):window.console.error("streamFormat error: DASH streams are notcurrently supported by this plugin."):window.console.error("VodStream error: incorrect streamFormat.")},Bi=Y.default.registerPlugin||Y.default.plugin;Bi("ima",function(x){this.ima=new St(this,x)}),Bi("imaDai",function(x,v){if(x instanceof yi)v.streamType="live",v.assetKey=x.assetKey;else{if(!(x instanceof Li))return void window.console.error("initDai() first parameter must be an instance of LiveStream or VodStream.");v.streamType="vod",v.cmsId=x.cmsId,v.videoId=x.videoId}v.streamFormat=x.streamFormat,this.imaDai=new ni(this,v)});const _i=()=>{const m=z.M.getComponent("Component");return z.M.extend(m,{constructor:function(){m.apply(this,arguments)}})},Wi=()=>{const m=z.M.getComponent("Component");return z.M.extend(m,{constructor:function(){m.apply(this,arguments),this.on("keyup",x=>{var v;this.setState({note:null===(v=x.target)||void 0===v?void 0:v.value})})}})},or=()=>{const m=z.M.getComponent("Component");return z.M.extend(m,{constructor:function(){m.apply(this,arguments)}})},jt=()=>{const m=z.M.getComponent("Component");return z.M.extend(m,{constructor:function(){m.apply(this,arguments)}})},wr=z.M.getComponent("Button");const ln=z.M.getPlugin("plugin");z.M.registerComponent("NotesComponent",class Ui extends wr{constructor(x,v){super(x,v),this.controlText(this.localize(this.options_.notesBtnTooltip))}buildCSSClass(){return`vjs-notes-btn notes-icon ${super.buildCSSClass()}`}registerComponents(){const x=or(),v=Wi(),w=jt(),P=_i();z.M.registerComponent("NotesWrapperComponent",x),z.M.registerComponent("NotesInputComponent",v),z.M.registerComponent("NotesSaveBtnComponent",w),z.M.registerComponent("CurrentTimeComponent",P)}handleClick(){this.registerComponents();const x=this.player_.addChild("NotesWrapperComponent");x.addChild("CurrentTimeComponent"),x.addChild("NotesInputComponent"),x.addChild("NotesSaveBtnComponent").on("click",()=>{})}}),z.M.registerPlugin("notesButton",class Fs extends ln{constructor(x,v){super(x,v),x.on("ready",()=>{this.onPlayerReady(x,this.getOptions(v))})}onPlayerReady(x,v){x.controlBar.notes=x.controlBar.addChild("NotesComponent",{fwdBtnTooltip:v.notesBtnTooltip},v.notesBtnPosition)}getOptions(x){return z.M.mergeOptions({notesBtnTooltip:"season"},{notesBtnPosition:16},x)}});const Bs=()=>{const m=z.M.getComponent("Component");return z.M.extend(m,{constructor:function(x,v){m.apply(this,arguments)},createEl:function(){return z.M.dom.createEl("canvas",{className:"vjs-sprites"},{id:"sprites",hidden:!0})}})},Us=z.M.getPlugin("plugin");class js extends Us{constructor(x,v){super(x,v),x.on("ready",()=>{if(!v.spritesUrl)throw new Error("Must provide Sprites Url");this.onPlayerReady(x,v)})}onPlayerReady(x,v){const P=x.addChild("SpritesComponent",v).el_,V=new Image;let ie;V.onerror=Ce=>{this.handleError(Ce,P)},V.src=v.spritesUrl,V.onload=()=>{ie=this.onThumbnailLoad(V,P)},x.controlBar.progressControl.on("mousemove",Ce=>{P.style.left=Ce.pageX-80+"px";let ve=x.controlBar.progressControl.seekBar.calculateDistance(Ce)*x.duration();ve===x.duration()&&(ve-=.1);var Ve=this.roundTo(ve,30);ie.update(Ve/30),ie.render()}),x.controlBar.progressControl.on("mouseenter",Ce=>{P.hidden=!1}),x.controlBar.progressControl.on("mouseleave",Ce=>{P.hidden=!0})}roundTo(x,v){const w=x%v;return w<=x/2?x-w:x+v-w}handleError(x,v){v.hidden=!0}onThumbnailLoad(x,v){v.width=224,v.height=127;const w=x.width/v.width,P=this.getSprites({context:v.getContext("2d"),image:x,numberOfFrames:w||1,width:x.width,height:x.width,frameIndex:0});return P.render(),P}getSprites(x){let v=Object.assign({},x,{update:w=>{v.frameIndex=w},render:()=>{}});return v.render=this.drawImageOnCanvas.bind(v),v}drawImageOnCanvas(){this.context.clearRect(0,0,this.width,this.height),this.context.drawImage(this.image,this.frameIndex*this.width/this.numberOfFrames,0,this.width/this.numberOfFrames,this.height,0,0,this.width/this.numberOfFrames,this.height)}}(()=>{const m=Bs();z.M.registerComponent("SpritesComponent",m),z.M.registerPlugin("sprites",js)})();var Vs=J(870),Hs=J(5405),$s=J(2468),Ws=J(4733),xa=J(4521),qs=J(7279),zs=J(6131),Hn=J(1461);const Gs=["slickModal"],Ks=["target"];function Ca(m,x){if(1&m&&(p.TgZ(0,"a"),p._UZ(1,"img",26),p.qZA()),2&m){const v=p.oxw(2);p.xp6(1),p.s9C("src",v.LbandImageOne,p.LSH)}}function Xs(m,x){if(1&m&&(p.TgZ(0,"a",27),p._UZ(1,"img",26),p.qZA()),2&m){const v=p.oxw(2);p.s9C("href",v.LbandShareUrl,p.LSH),p.xp6(1),p.s9C("src",v.LbandImageOne,p.LSH)}}function Qs(m,x){if(1&m&&(p.TgZ(0,"div",24),p.YNc(1,Ca,2,1,"a",20),p.YNc(2,Xs,2,2,"a",25),p.qZA()),2&m){const v=p.oxw();p.xp6(1),p.Q6J("ngIf",""==v.LbandShareUrl),p.xp6(1),p.Q6J("ngIf",""!=v.LbandShareUrl)}}function Ys(m,x){if(1&m&&(p.TgZ(0,"a"),p._UZ(1,"img",29),p.qZA()),2&m){const v=p.oxw(2);p.xp6(1),p.s9C("src",v.LBandImageTwo,p.LSH)}}function Js(m,x){if(1&m&&(p.TgZ(0,"a",27),p._UZ(1,"img",29),p.qZA()),2&m){const v=p.oxw(2);p.s9C("href",v.LbandShareUrl,p.LSH),p.xp6(1),p.s9C("src",v.LBandImageTwo,p.LSH)}}function Zs(m,x){if(1&m&&(p.TgZ(0,"div",28),p.YNc(1,Ys,2,1,"a",20),p.YNc(2,Js,2,2,"a",25),p.qZA()),2&m){const v=p.oxw();p.xp6(1),p.Q6J("ngIf",""==v.LbandShareUrl),p.xp6(1),p.Q6J("ngIf",""!=v.LbandShareUrl)}}function eo(m,x){if(1&m){const v=p.EpF();p.TgZ(0,"div",30),p.TgZ(1,"a",31),p._UZ(2,"img",32),p.qZA(),p.TgZ(3,"img",33),p.NdJ("click",function(){return p.CHM(v),p.oxw().astoncross()}),p.qZA(),p.qZA()}if(2&m){const v=p.oxw();p.xp6(1),p.s9C("href",v.LbandShareUrl,p.LSH),p.xp6(1),p.s9C("src",v.LBandImageTwo,p.LSH)}}function Vt(m,x){if(1&m){const v=p.EpF();p.TgZ(0,"div",44),p.NdJ("click",function(){const V=p.CHM(v).$implicit,ie=p.oxw(2);return ie.getEpisode(V.id,V.total_episode),ie.getId(V.id)}),p._UZ(1,"input",45),p.TgZ(2,"label",46),p._uU(3),p.qZA(),p.qZA()}if(2&m){const v=x.$implicit,w=p.oxw(2);p.xp6(1),p.s9C("id",v.id),p.Q6J("checked",v.id==w.checked),p.xp6(1),p.s9C("for",v.id),p.xp6(1),p.Oqu(v.title)}}function $n(m,x){if(1&m&&(p.TgZ(0,"small"),p._uU(1),p.qZA()),2&m){const v=p.oxw().$implicit;p.xp6(1),p.lnq(" ",v.duration.slice(3,5)," m \xa0 | \xa0 ",v.year," \xa0 | \xa0 U/A ",v.age_group,"+ ")}}function kr(m,x){if(1&m&&(p.TgZ(0,"small"),p._uU(1),p.qZA()),2&m){const v=p.oxw().$implicit;p.xp6(1),p.AsE(" ",v.duration.slice(3,5)," m \xa0 | \xa0 ",v.year," \xa0 | \xa0 A ")}}function to(m,x){if(1&m&&(p.TgZ(0,"small"),p._uU(1),p.qZA()),2&m){const v=p.oxw().$implicit;p.xp6(1),p.AsE(" ",v.duration.slice(3,5)," m \xa0 | \xa0 ",v.year," \xa0 | \xa0 U ")}}function Ea(m,x){if(1&m){const v=p.EpF();p.TgZ(0,"div",47),p.TgZ(1,"h6",48),p._uU(2),p.qZA(),p.TgZ(3,"h6",49),p._uU(4),p.qZA(),p.TgZ(5,"img",50),p.NdJ("click",function(){const P=p.CHM(v),V=P.$implicit,ie=P.index;return p.oxw(2).playEpisode(V,ie)})("error",function(P){return p.CHM(v),p.oxw(2).onImgError(P)}),p.qZA(),p.YNc(6,$n,2,3,"small",20),p.YNc(7,kr,2,2,"small",20),p.YNc(8,to,2,2,"small",20),p.TgZ(9,"p",51),p._uU(10),p.qZA(),p.TgZ(11,"p",52),p._uU(12),p.qZA(),p.qZA()}if(2&m){const v=x.$implicit;p.xp6(2),p.AsE(" ",v.episode_number," : ",v.title.slice(0,10),".. "),p.xp6(2),p.AsE(" ",v.episode_number," : ",v.title.slice(0,15),".. "),p.xp6(1),p.Q6J("src",v.sliderImg,p.LSH),p.xp6(1),p.Q6J("ngIf",-1!=v.age_group&&999!=v.age_group&&""!=v.age_group),p.xp6(1),p.Q6J("ngIf",-1==v.age_group&&""!=v.age_group),p.xp6(1),p.Q6J("ngIf",999==v.age_group&&""!=v.age_group),p.xp6(2),p.hij(" ",v.des.slice(0,65),"... "),p.xp6(2),p.hij(" ",v.des.slice(0,35),"... ")}}function ai(m,x){if(1&m){const v=p.EpF();p.TgZ(0,"div",34),p.TgZ(1,"div",35),p.YNc(2,Vt,4,4,"div",36),p.TgZ(3,"div",37),p.TgZ(4,"img",38),p.NdJ("click",function(){return p.CHM(v),p.oxw().crossEpisode()}),p.qZA(),p.qZA(),p.qZA(),p.TgZ(5,"div",39),p.TgZ(6,"div",40),p.TgZ(7,"ngx-slick-carousel",41,42),p.NdJ("init",function(P){return p.CHM(v),p.oxw().slickInit(P)})("breakpoint",function(P){return p.CHM(v),p.oxw().breakpoint(P)})("afterChange",function(P){return p.CHM(v),p.oxw().afterChange(P)})("beforeChange",function(P){return p.CHM(v),p.oxw().beforeChange(P)}),p.YNc(9,Ea,13,10,"div",43),p.qZA(),p.qZA(),p.qZA(),p.qZA()}if(2&m){const v=p.oxw();p.xp6(2),p.Q6J("ngForOf",v.data.groupInfo.child),p.xp6(5),p.Q6J("config",v.slideConfig),p.xp6(2),p.Q6J("ngForOf",v.EpiData)}}function io(m,x){if(1&m&&(p.TgZ(0,"span",56),p.TgZ(1,"p",57),p._uU(2),p.qZA(),p.qZA()),2&m){const v=p.oxw(3);p.xp6(2),p.hij(" ",v.data.agegroup_player_title,"")}}function un(m,x){if(1&m&&(p.TgZ(0,"div",54),p.YNc(1,io,3,1,"span",55),p.qZA()),2&m){const v=p.oxw(2);p.xp6(1),p.Q6J("ngIf",null!=v.data.agegroup_player_title)}}function Wn(m,x){if(1&m&&(p.TgZ(0,"div"),p.YNc(1,un,2,1,"div",53),p.qZA()),2&m){const v=p.oxw();p.xp6(1),p.Q6J("ngIf",v.agetime&&1==v.ageshow.is_allow)}}function ro(m,x){if(1&m){const v=p.EpF();p.TgZ(0,"div",58),p.TgZ(1,"button",59),p.NdJ("click",function(){return p.CHM(v),p.oxw().skipIntro()}),p._uU(2),p.qZA(),p.qZA()}if(2&m){const v=p.oxw();p.xp6(2),p.Oqu(v.data.skip_duration[0].title)}}function no(m,x){if(1&m){const v=p.EpF();p.TgZ(0,"div",60),p.TgZ(1,"button",59),p.NdJ("click",function(){return p.CHM(v),p.oxw().skipRecap()}),p._uU(2),p.qZA(),p.qZA()}if(2&m){const v=p.oxw();p.xp6(2),p.Oqu(v.data.skip_duration[1].title)}}function ao(m,x){if(1&m){const v=p.EpF();p.TgZ(0,"div",61),p.TgZ(1,"button",59),p.NdJ("click",function(){return p.CHM(v),p.oxw().skipCredit()}),p._uU(2),p.qZA(),p.qZA()}if(2&m){const v=p.oxw();p.xp6(2),p.Oqu(v.data.skip_duration[2].title)}}J(17),J(3478),J(735),J(3652);var dn=J(8642);let so=(()=>{class m{constructor(v,w,P,V,ie,Ce,ve,Ve,Je){this.ed=v,this.deviceService=w,this._FPS=P,this.ds=V,this.DEC_SER=ie,this.router=Ce,this.mat=ve,this.networkConnectionService=Ve,this.DEC_SER_IOS=Je,this.bandimage=[],this.windowSize=0,this.options={},this.isOttLoggedIn=!1,this.display_offset=0,this.showepisode=!1,this.agetime=!0,this.val=[],this.tarilerPlay=localStorage.getItem("tarilerplay")||{},this.isSubsInfo=localStorage.getItem("is_subscriber")||{},this.videosrc=[],this.junk=!1,this.setF=!1,this.arr=[],this.defaultImages=[],this.taploginInfo=localStorage.getItem("taploginInfo")||{},this.connected=!0,this.slideConfig={slidesToShow:6,dots:!1,arrows:!0,slidesToScroll:1,infinite:!1,autoplay:!1,autoplaySpeed:2e3,responsive:[{breakpoint:1024,settings:{slidesToShow:4,dots:!1,arrows:!1,slidesToScroll:1,autoplay:!1,autoplaySpeed:2e3}},{breakpoint:480,settings:{slidesToShow:2,dots:!1,arrows:!1,slidesToScroll:1,autoplay:!1,autoplaySpeed:2e3}}]},this.resetDelay1=()=>{clearTimeout(this.inactivityTimeout),this.inactivityTimeout=setTimeout(()=>{this.player.userActive(!1),$(".vjs-overlay").hide(),$(".close-btn").hide()},5e3)},this.ed.isUserLoggedIn.subscribe(tt=>{1==tt&&(this.isOttLoggedIn=tt)}),setTimeout(()=>{window.innerWidth<992&&$(".vjs-notes-btn").on("touchstart",()=>{this.slickModal.unslick(),$(".episodeSelector").appendTo($("#video-player")),this.slickModal.initSlick(this.slideConfig),$(".episodeSelector").show()}),$(".vjs-notes-btn").click(()=>{this.slickModal.unslick(),$(".episodeSelector").appendTo($("#video-player")),this.slickModal.initSlick(this.slideConfig),$(".episodeSelector").show()})},2e3)}ngOnInit(){this.networkConnectionService.connected$.subscribe(v=>{this.connected=v,1==this.connected&&setTimeout(()=>{this.player.currentTime(this.player.cache_.currentTime)},1e3)}),this.getBrowserName=this.detectBrowserName(),setTimeout(()=>{1==this.isSubsInfo&&"1"!=localStorage.getItem("tarilerplay")&&1==this.lBandShow.is_allow&&this.getLbandData()},500),this.jsondata(),setTimeout(()=>{1==this.data.is_live&&($(".vjs-progress-control").addClass("hideprogress"),$(".vjs-seek-button").addClass("hideprogress"),$(".vjs-play-control").addClass("hideprogress"),$(".vjs-time-control").addClass("hideprogress"),$(".vjs-notes-btn").addClass("hideprogress"),$(".vjs-icon-previous-item").addClass("hideprogress"),$(".vjs-icon-next-item").addClass("hideprogress"))},1e3),setTimeout(()=>{var v=localStorage.getItem("tarilerplay");1==this.data.is_group&&"1"!=v?this.player.overlay({overlays:[{start:"playing",content:`${this.data.season_number} ${this.data.episode_number} : ${this.data.title}`,align:"center"}]}):"1"!=v?this.player.overlay({overlays:[{start:"playing",content:this.data.title,align:"center"}]}):"1"==v&&1==this.data.is_group?this.player.overlay({overlays:[{start:"playing",content:`${this.data.series_title} ${this.data.season_title} Trailer`,align:"center"}]}):"1"==v&&0==this.data.is_group&&this.player.overlay({overlays:[{start:"playing",content:`${this.data.title} Trailer`,align:"center"}]})},1e3),setTimeout(()=>{1==this.ageshow.is_allow&&setTimeout(()=>{this.agetime=!1},1e3*this.ageshow.duration_in_sec)},1e3),setTimeout(()=>{$(".vjs-notes-btn").attr("title","Season-Selector"),$(".vjs-icon-hd").attr("title","Settings"),$(".vjs-icon-hd-main").attr("title","Settings")},1e3),this.defaultImages=localStorage.getItem("defaultImages"),this.getid=localStorage.getItem("taploginInfo")||"111111",this.getID=JSON.parse(this.getid).id||"111111",this.windowSize=window.innerWidth,this.isOttLoggedIn=!!Object.keys(this.taploginInfo).length,1==this.data.is_group&&null!=this.data.groupInfo&&0!=this.data.groupInfo.child.length&&(this.maxcounter=this.data.groupInfo.child[0].total_episode),0==this.data.drm&&this.getm3u8Url(this.data.id)}detectBrowserName(){const v=window.navigator.userAgent.toLowerCase();switch(!0){case v.indexOf("edge")>-1:return"edge";case v.indexOf("opr")>-1&&!!window.opr:return"opera";case v.indexOf("chrome")>-1&&!!window.chrome:return"chrome";case v.indexOf("trident")>-1:return"ie";case v.indexOf("firefox")>-1:return"firefox";case v.indexOf("safari")>-1:return"safari";default:return"other"}}astoncross(){document.getElementById("astonband").style.display="none"}getLbandData(){if(1==this.isSubsInfo){var v=localStorage.getItem("ott_subscriptionPlan"),w=JSON.parse(v);this.ds.lBand(w.packages_list[0].package_id).subscribe(V=>{if(1==V.code){this.DEC_SER.getDecryptedData(null==V?void 0:V.result);let ie=JSON.parse(this.DEC_SER.decryptData);this.bandimage=ie.ad_data,setTimeout(()=>{this.player.on("timeupdate",()=>{for(let Ge=0;Ge<this.bandimage.length;Ge++){var Ce=Math.floor(this.player.duration()),Je=Math.floor(Ce/this.bandimage.length)*Ge;if(Math.floor(this.player.currentTime())-20==Je)if("lband"==this.bandimage[Ge].source_type){$("#ffffffffffffffffffffffff").appendTo($("#video-player")),$("#gggggggggggggggggggggggggg").appendTo($("#video-player")),this.LbandShareUrl=this.bandimage[Ge].share_url,this.LbandImageOne=this.bandimage[Ge].img_url[0].url,this.LBandImageTwo=this.bandimage[Ge].img_url[1].url;var tt=document.getElementById("ffffffffffffffffffffffff");tt.style.display="block",tt.style.position="absolute",tt.style.height="80%",tt.style.transition="2s";var qe=document.getElementById("gggggggggggggggggggggggggg");qe.style.display="block",qe.style.position="absolute",qe.style.bottom="0",qe.style.height="20%";var He=document.getElementsByClassName("vjs-tech")[0];He.style.height="80%",He.style.width="80%",$(".video-js .vjs-tech").css("height","83%"),$(".video-js .vjs-tech").css("width","115%"),setTimeout(()=>{document.getElementById("ffffffffffffffffffffffff").style.display="none",document.getElementById("gggggggggggggggggggggggggg").style.display="none",document.getElementById("video-player"),$(".video-js .vjs-tech").css("height","100%"),$(".video-js .vjs-tech").css("width","100%")},1e3*this.lBandShow.end_time_sec)}else if("aston_band"==this.bandimage[Ge].source_type){let ei=window.innerWidth;1!=this.lBandShow.close_button&&(document.getElementById("astoncancel").style.display="none"),$("#astonband").appendTo($("#video-player")),this.LBandImageTwo=this.bandimage[Ge].img_url[0].url,this.LbandShareUrl=this.bandimage[Ge].share_url;var Oe=document.getElementById("astonband");Oe.style.display="flex",Oe.style.position="absolute",Oe.style.width="100%",Oe.style.zIndex="999999999",Oe.style.bottom=ei<920?"21%":ei<=1370?"14%":"10%",Oe.style.justifyContent="center",setTimeout(()=>{Oe.style.display="none"},1e3*this.lBandShow.end_time_sec)}}})},1e3)}})}}getEpisode(v,w){this.tt=w,this.EpiData=[],this.slickModal.unslick(),this.ds.getEpisodeData(this.display_offset,w,v).pipe((0,he.U)(P=>{if(1==P.code){$(".episodeSelector").appendTo($("#video-player")),this.slickModal.initSlick(this.slideConfig),this.DEC_SER.getDecryptedData(null==P?void 0:P.result);let V=JSON.parse(this.DEC_SER.decryptData);this.EpiData=V.content,this.EpiData.forEach(ie=>{this.EpiData.map(qe=>{qe.sliderImg="",qe.sliderIdentifier="",1==qe.is_group&&null!=qe.groupInfo?qe.layout_thumbs.forEach(He=>{null!=He&&"rectangle_16x9"==He.layout&&(null==He||He.image_size.filter(Ue=>{360==Number(Ue.width)||854==Number(Ue.width)?(qe.sliderImg=Ue.url,qe.sliderIdentifier=Ue.identifier):""==qe.sliderImg&&(qe.sliderImg=null==He?void 0:He.image_size[0].url,qe.sliderIdentifier=null==He?void 0:He.image_size[0].identifier)}))}):0==qe.is_group&&qe.layout_thumbs.forEach(He=>{"rectangle_16x9"==He.layout&&(null==He||He.image_size.filter(Ue=>{360==Number(Ue.width)||854==Number(Ue.width)?(qe.sliderImg=Ue.url,qe.sliderIdentifier=Ue.identifier):""==qe.sliderImg&&(qe.sliderImg=null==He?void 0:He.image_size[0].url,qe.sliderIdentifier=null==He?void 0:He.image_size[0].identifier)}))})});var Ce=ie.duration.slice(0,2),ve=ie.duration.slice(3,5),Ve=ie.duration.slice(6,8),Je=60*Ce;if(this.hours_minutes=Ve>30?Number(Je)+Number(ve)+1:Number(Je)+Number(ve),this.mainelement=ie.title,null!=ie.sprite_url)var tt=ie.sprite_url.web;else tt="";this.videosrc.push({sources:[{src:ie.url,title:this.mainelement,id:ie.id,access:ie.access_type,age:ie.age_group,drm:ie.drm,season:ie.season_number,episode:ie.episode_number,kId:ie.k_id,spriteThumbnails:{url:tt}}]}),this.arr.push(ie.id)})}})).subscribe()}getId(v){this.setF=!0,this.p=v,this.checked=v}onImgError(v){v.target.src=JSON.parse(this.defaultImages).rectangle.path}getm3u8Url(v){this.userId=localStorage.getItem("taploginInfo"),this.user=JSON.parse(this.userId),this.user?this.ds.getMainUrl(v,this.user.id).subscribe(w=>{if(1==w.code){this.DEC_SER.getDecryptedData(null==w?void 0:w.result);let P=JSON.parse(this.DEC_SER.decryptData);this.m3u8Main=P.url,this.playDuration=P.played_duration}}):this.ds.getMainUrl(v,"").subscribe(w=>{if(1==w.code){this.DEC_SER.getDecryptedData(null==w?void 0:w.result);let P=JSON.parse(this.DEC_SER.decryptData);this.m3u8Main=P.url,this.playDuration=P.played_duration}})}drmContent(v,w,P,V,ie){if("safari"==this.getBrowserName)this.userId=localStorage.getItem("taploginInfo"),this.user=JSON.parse(this.userId),this.user?this.ds.getMainUrl(v,this.user.id).subscribe(Ue=>{if(1==Ue.code){this.DEC_SER_IOS.getDecryptedDataIos(null==Ue?void 0:Ue.result);let Oe=JSON.parse(this.DEC_SER_IOS.decryptData);v=Oe.id,w=Oe.k_id,P=Oe.url,this.playDuration=Oe.played_duration,V=Oe.price_type}}):this.ds.getMainUrl(v,"").subscribe(Ue=>{if(1==Ue.code){this.DEC_SER_IOS.getDecryptedDataIos(null==Ue?void 0:Ue.result);let Oe=JSON.parse(this.DEC_SER_IOS.decryptData);v=Oe.id,w=Oe.k_id,P=Oe.url,this.playDuration=Oe.played_duration,V=Oe.price_type}}),setTimeout(()=>{this.player.src({src:P,spriteThumbnails:{url:ie}}),""!=ie&&this.player.spriteThumbnails({interval:5,url:ie,width:224,height:127,responsive:600}),this.player.hlsQualitySelector()},500),setTimeout(()=>{this.player.play(),setTimeout(()=>{this.player.currentTime(this.playDuration)},200)},1e3);else{this.userId=localStorage.getItem("taploginInfo"),this.user=JSON.parse(this.userId),this.user?this.ds.getMainUrl(v,this.user.id).subscribe(Ue=>{if(1==Ue.code){this.DEC_SER.getDecryptedData(null==Ue?void 0:Ue.result);let Oe=JSON.parse(this.DEC_SER.decryptData);v=Oe.id,w=Oe.k_id,P=Oe.url,this.playDuration=Oe.played_duration,V=Oe.price_type}}):this.ds.getMainUrl(v,"").subscribe(Ue=>{if(1==Ue.code){this.DEC_SER.getDecryptedData(null==Ue?void 0:Ue.result);let Oe=JSON.parse(this.DEC_SER.decryptData);v=Oe.id,w=Oe.k_id,P=Oe.url,this.playDuration=Oe.played_duration,V=Oe.price_type}}),this.userId=localStorage.getItem("taploginInfo"),this.user=JSON.parse(this.userId);var Ce=localStorage.getItem("auth_token"),ve=localStorage.getItem("ott_subscriptionPlan"),Ve=JSON.parse(ve),Je=(new DeviceUUID).get(),tt=btoa(Je);if("paid"==V)if(this.user&&1!=this.isSubsInfo)var qe={content_id:v,k_id:w,licence_duration:"300",package_id:"",download:"0",content_type:"1",rental_duration:"300",security_level:"3",user_id:String(this.user.id)},He=btoa(JSON.stringify(qe));else this.user&&1==this.isSubsInfo?(qe={content_id:v,k_id:w,licence_duration:"300",package_id:Ve.packages_list[0].package_id,download:"0",content_type:"1",rental_duration:"300",security_level:"3",user_id:String(this.user.id)},He=btoa(JSON.stringify(qe))):(qe={content_id:v,k_id:w,licence_duration:"300",package_id:"",download:"0",content_type:"1",rental_duration:"300",security_level:"3",user_id:""},He=btoa(JSON.stringify(qe)));else this.user&&1!=this.isSubsInfo?(qe={content_id:v,k_id:w,licence_duration:"300",package_id:"",download:"0",content_type:"0",rental_duration:"300",security_level:"3",user_id:String(this.user.id)},He=btoa(JSON.stringify(qe))):this.user&&1==this.isSubsInfo?(qe={content_id:v,k_id:w,licence_duration:"300",package_id:Ve.packages_list[0].package_id,download:"0",content_type:"0",rental_duration:"300",security_level:"3",user_id:String(this.user.id)},He=btoa(JSON.stringify(qe))):(qe={content_id:v,k_id:w,licence_duration:"300",package_id:"",download:"0",content_type:"0",rental_duration:"300",security_level:"3",user_id:""},He=btoa(JSON.stringify(qe)));this.player=(0,z.M)("video-player"),setTimeout(()=>{this.player.src({src:P,type:"application/dash+xml",keySystemOptions:[{name:"com.widevine.alpha",options:{serverURL:"https://widevine-dash.ezdrm.com/widevine-php/widevine-foreignkey.php?pX=C947D1&user_id="+tt+"&type=widevine&authorization="+Ce+"&payload="+He}},{name:"com.microsoft.playready",options:{serverURL:"https://playready.ezdrm.com/cency/preauth.aspx?pX=6F180A&user_id="+tt+"&type=playready&authorization="+Ce+"&payload="+He}}],spriteThumbnails:{url:ie}}),""!=ie&&this.player.spriteThumbnails({interval:5,url:ie,width:224,height:127,responsive:600})},500),setTimeout(()=>{this.player.play(),setTimeout(()=>{this.player.currentTime(this.playDuration)},200)},1500)}}ngAfterViewInit(){setTimeout(()=>{$(".vjs-icon-hd-main").on("click",()=>{$(".vjs-subs-caps-button .vjs-menu-content").hide()}),$(".vjs-subs-caps-button").on("click",()=>{$(".vjs-subs-caps-button .vjs-menu-content").show(),$(".hd-mode").hide()})},1e3),1==this.data.is_group&&null!=this.data.groupInfo&&0!=this.data.groupInfo.child.length&&(this.checked=this.data.season_id),X.registerTitleComponent(),X.registerCustomButton(),this.player=(0,z.M)(this.target.nativeElement,this.options,this.onPlayerReady.bind(this)),this.player.landscapeFullscreen({fullscreen:{enterOnRotate:!0,exitOnRotate:!0,alwaysInLandscapeMode:!0,iOS:!0}}),this.inactivityTimeout=null,window.innerWidth>992&&$("#video-player").mousemove(Ce=>{$("#video-player").find(".control-overlay-buttons").show(),this.player.controls(!0),$(".vjs-overlay").show(),$(".close-btn").show(),null!=this.inactivityTimeout&&clearTimeout(this.inactivityTimeout),this.inactivityTimeout=setTimeout(()=>{$("#video-player").find(".control-overlay-buttons").hide(),this.player.controls(!1),$(".vjs-overlay").hide(),$(".close-btn").hide(),$("#bitrateLevels1").hide()},5e3)}),$("#video-player").on("touchstart",()=>{$(".vjs-overlay").show(),$(".close-btn").show(),setTimeout(()=>{$(".vjs-overlay").hide(),$(".close-btn").hide()},5e3)});var V=localStorage.getItem("tarilerplay");if(0==this.data.is_group&&"1"!=V&&("paid"==this.data.access_type&&1==this.data.drm?(this.drmContent(this.data.id,this.data.k_id,this.data.url,this.data.access_type,null!=this.data.sprite_url?this.data.sprite_url.web:""),this.player.overlay({overlays:[{start:"playing",content:this.data.title,align:"center"}]}),this.player.on("timeupdate",()=>{Math.floor(this.player.currentTime())==this.introSeconds?$(".title").show():(Math.floor(this.player.currentTime())>=this.introSeconds1||Math.floor(this.player.currentTime())<=this.introSeconds)&&$(".title").hide(),Math.floor(this.player.currentTime())==this.recapSeconds?$(".title1").show():(Math.floor(this.player.currentTime())>=this.recapSeconds1||Math.floor(this.player.currentTime())<=this.recapSeconds)&&$(".title1").hide(),Math.floor(this.player.currentTime())==this.creditSeconds?$(".title2").show():(Math.floor(this.player.currentTime())>=this.creditSeconds1||Math.floor(this.player.currentTime())<=this.creditSeconds)&&$(".title2").hide()})):"paid"==this.data.access_type&&0==this.data.drm&&(this.getm3u8Url(this.data.id),setTimeout(()=>{this.player.src({src:this.m3u8Main}),this.player.play(),this.player.hlsQualitySelector()},1e3)),"paid"==this.data.access_type&&1==this.data.drm)){var w=z.M.getComponent("Button"),P=z.M.extend(w,{constructor:function(){w.apply(this,arguments),this.addClass("vjs-icon-hd-main"),this.controlText("Setting")},handleClick:Ce=>{$("#bitrateLevels1").appendTo($("#video-player")),$("#bitrateLevels1").toggle()}});z.M.registerComponent("settingButton",P),this.player.getChild("controlBar").addChild("settingButton",{},14)}V=localStorage.getItem("tarilerplay"),1==this.data.is_group&&"1"!=V&&("paid"==this.data.access_type&&1==this.data.drm&&(this.drmContent(this.data.id,this.data.k_id,this.data.url,this.data.access_type,null!=this.data.sprite_url?this.data.sprite_url.web:""),this.player.overlay({overlays:[{start:"playing",content:`${this.data.season_number} ${this.data.episode_number} : ${this.data.title}`,align:"center"}]}),"paid"==this.data.access_type&&(w=z.M.getComponent("Button"),P=z.M.extend(w,{constructor:function(){w.apply(this,arguments),this.addClass("vjs-icon-hd-main"),this.controlText("Setting")},handleClick:Ve=>{$("#bitrateLevels1").appendTo($("#video-player")),$("#bitrateLevels1").toggle()}}),z.M.registerComponent("settingButton",P),this.player.getChild("controlBar").addChild("settingButton",{},14)),this.player.on("timeupdate",()=>{Math.floor(this.player.currentTime())==this.introSeconds?$(".title").show():(Math.floor(this.player.currentTime())>=this.introSeconds1||Math.floor(this.player.currentTime())<=this.introSeconds)&&$(".title").hide(),Math.floor(this.player.currentTime())==this.recapSeconds?$(".title1").show():(Math.floor(this.player.currentTime())>=this.recapSeconds1||Math.floor(this.player.currentTime())<=this.recapSeconds)&&$(".title1").hide(),Math.floor(this.player.currentTime())==this.creditSeconds?$(".title2").show():(Math.floor(this.player.currentTime())>=this.creditSeconds1||Math.floor(this.player.currentTime())<=this.creditSeconds)&&$(".title2").hide()})),this.player.ready(()=>{this.player=window.videoPlayer||{},this.player=(0,z.M)("video-player"),this.player.on("timeupdate",()=>{Math.floor(this.player.currentTime())==this.introSeconds?$(".title").show():(Math.floor(this.player.currentTime())>=this.introSeconds1||Math.floor(this.player.currentTime())<=this.introSeconds)&&$(".title").hide(),Math.floor(this.player.currentTime())==this.recapSeconds?$(".title1").show():(Math.floor(this.player.currentTime())>=this.recapSeconds1||Math.floor(this.player.currentTime())<=this.recapSeconds)&&$(".title1").hide(),Math.floor(this.player.currentTime())==this.creditSeconds?$(".title2").show():(Math.floor(this.player.currentTime())>=this.creditSeconds1||Math.floor(this.player.currentTime())<=this.creditSeconds)&&$(".title2").hide()}),(Ce=>{this.ds.getEpisodeData(this.display_offset,this.maxcounter,this.data.season_id).pipe((0,he.U)(ve=>{if(1==ve.code){this.DEC_SER.getDecryptedData(null==ve?void 0:ve.result);let qe=JSON.parse(this.DEC_SER.decryptData);this.EpiData=qe.content,qe.content&&this.EpiData.forEach(He=>{this.EpiData.map(qt=>{qt.sliderImg="",qt.sliderIdentifier="",1==qt.is_group&&null!=qt.groupInfo?qt.layout_thumbs.forEach(vt=>{null!=vt&&"rectangle_16x9"==vt.layout&&(null==vt||vt.image_size.filter(fi=>{360==Number(fi.width)||854==Number(fi.width)?(qt.sliderImg=fi.url,qt.sliderIdentifier=fi.identifier):""==qt.sliderImg&&(qt.sliderImg=null==vt?void 0:vt.image_size[0].url,qt.sliderIdentifier=null==vt?void 0:vt.image_size[0].identifier)}))}):0==qt.is_group&&qt.layout_thumbs.forEach(vt=>{"rectangle_16x9"==vt.layout&&(null==vt||vt.image_size.filter(fi=>{360==Number(fi.width)||854==Number(fi.width)?(qt.sliderImg=fi.url,qt.sliderIdentifier=fi.identifier):""==qt.sliderImg&&(qt.sliderImg=null==vt?void 0:vt.image_size[0].url,qt.sliderIdentifier=null==vt?void 0:vt.image_size[0].identifier)}))})});var Ue=He.duration.slice(0,2),Oe=He.duration.slice(3,5),Ge=He.duration.slice(6,8),ei=60*Ue;if(this.hours_minutes=Ge>30?Number(ei)+Number(Oe)+1:Number(ei)+Number(Oe),this.mainelement=He.title,null!=He.sprite_url)var Ir=He.sprite_url.web;else Ir="";this.videosrc.push({sources:[{src:He.url,title:this.mainelement,id:He.id,access:He.access_type,age:He.age_group,drm:He.drm,season:He.season_number,episode:He.episode_number,kId:He.k_id,spriteThumbnails:{url:Ir}}]}),this.arr.push(He.id)}),this.itemget=0,this.itemget>=this.videosrc.length&&(this.itemget=0),setTimeout(()=>{0==this.itemget?($(".vjs-icon-previous-item").prop("disabled",!0),$(".vjs-icon-previous-item").css("opacity","0.5")):($(".vjs-icon-previous-item").prop("disabled",!1),$(".vjs-icon-previous-item").css("opacity","1.0"))},500),1==this.arr.length&&setTimeout(()=>{$(".vjs-icon-previous-item").prop("disabled",!0),$(".vjs-icon-previous-item").css("opacity","0.5"),$(".vjs-icon-next-item").prop("disabled",!0),$(".vjs-icon-next-item").css("opacity","0.5")},500),this.data.hasOwnProperty("index")&&""!=this.data.index?(this.itemget=this.data.index-1,this.arr.length==this.data.index&&setTimeout(()=>{$(".vjs-icon-next-item").prop("disabled",!0),$(".vjs-icon-next-item").css("opacity","0.5")},1e3)):this.itemget=0,this.videosrc.length-1!=this.itemget&&this.player.on("ended",()=>{this.itemget++,this.contentPlaybackEnded=!0,this.agetime=!0,setTimeout(()=>{1==this.ageshow.is_allow&&setTimeout(()=>{this.agetime=!1},1e3*this.ageshow.duration_in_sec)},1e3),$(this.player.posterImage.contentEl()).hide(),0==this.videosrc[this.itemget].sources[0].drm?(this.getm3u8Url(this.videosrc[this.itemget].sources[0].id),setTimeout(()=>{this.player.src({src:this.m3u8Main}),setTimeout(()=>{this.player.play(),setTimeout(()=>{this.player.currentTime(this.playDuration)},200)},200)},500)):1==this.isSubsInfo?1==this.videosrc[this.itemget].sources[0].drm&&"paid"==this.videosrc[this.itemget].sources[0].access&&this.drmContent(this.videosrc[this.itemget].sources[0].id,this.videosrc[this.itemget].sources[0].kId,this.videosrc[this.itemget].sources[0].src,this.videosrc[this.itemget].sources[0].access,this.videosrc[this.itemget].sources[0].spriteThumbnails.url):(this.mat.closeAll(),localStorage.setItem("woohoo","1"),this.router.navigate(["/subscribe"])),$(".moveToVideoJs").show(),setTimeout(()=>{$(".moveToVideoJs").hide()},5e3),this.player.overlay({overlays:[{start:"playing",content:`${this.videosrc[this.itemget].sources[0].season} ${this.videosrc[this.itemget].sources[0].episode} : ${this.videosrc[this.itemget].sources[0].title}`,align:"center"}]}),0!=this.itemget&&($(".vjs-icon-previous-item").prop("disabled",!1),$(".vjs-icon-previous-item").css("opacity","1.0")),this.videosrc.length-1==this.itemget?($(".vjs-icon-next-item").prop("disabled",!0),$(".vjs-icon-next-item").css("opacity","0.5")):($(".vjs-icon-next-item").prop("disabled",!1),$(".vjs-icon-next-item").css("opacity","1.0")),$("#ffffffffffffffffffffffff").hide(),$("#gggggggggggggggggggggggggg").hide(),$("#astonband").hide(),$(".video-js .vjs-tech").css("height","100%"),$(".video-js .vjs-tech").css("width","100%");const He=localStorage.getItem("taploginInfo")||{};var Ue=JSON.parse(He);const Oe=new FormData;Oe.append("c_id",this.videosrc[this.itemget-1].sources[0].id),Oe.append("u_id",null==Ue?void 0:Ue.id),this.ds.clearContinueWatching(Oe).subscribe(Ge=>{})});var Ve=z.M.getComponent("Button"),Je=z.M.extend(Ve,{constructor:function(){Ve.apply(this,arguments),this.addClass("vjs-icon-previous-item"),this.controlText("Previous")},handleClick:He=>{this.agetime=!0,setTimeout(()=>{1==this.ageshow.is_allow&&setTimeout(()=>{this.agetime=!1},1e3*this.ageshow.duration_in_sec)},1e3),0==this.videosrc[this.itemget].sources[0].drm?(this.getm3u8Url(this.videosrc[this.itemget].sources[0].id),setTimeout(()=>{this.player.src({src:this.m3u8Main}),setTimeout(()=>{this.player.play(),setTimeout(()=>{this.player.currentTime(this.playDuration)},200)},200)},500)):1==this.isSubsInfo?(this.itemget--,1==this.videosrc[this.itemget].sources[0].drm&&"paid"==this.videosrc[this.itemget].sources[0].access&&this.drmContent(this.videosrc[this.itemget].sources[0].id,this.videosrc[this.itemget].sources[0].kId,this.videosrc[this.itemget].sources[0].src,this.videosrc[this.itemget].sources[0].access,this.videosrc[this.itemget].sources[0].spriteThumbnails.url)):(this.mat.closeAll(),localStorage.setItem("woohoo","1"),this.router.navigate(["/subscribe"])),$(".moveToVideoJs").show(),setTimeout(()=>{$(".moveToVideoJs").hide()},5e3),this.player.overlay({overlays:[{start:"playing",content:`${this.videosrc[this.itemget].sources[0].season} ${this.videosrc[this.itemget].sources[0].episode} : ${this.videosrc[this.itemget].sources[0].title}`,align:"center"}]}),0==this.itemget&&($(".vjs-icon-previous-item").prop("disabled",!0),$(".vjs-icon-previous-item").css("opacity","0.5")),this.videosrc.length-1!=this.itemget&&$(".vjs-icon-next-item").prop("disabled",!1),$(".vjs-icon-next-item").css("opacity","1.0"),$("#ffffffffffffffffffffffff").hide(),$("#gggggggggggggggggggggggggg").hide(),$("#astonband").hide(),$(".video-js .vjs-tech").css("height","100%"),$(".video-js .vjs-tech").css("width","100%");const Ue=localStorage.getItem("taploginInfo");let Oe={c_id:this.videosrc[this.itemget+1].sources[0].id,dod:'{ "os_version": "6.0", "app_version": "2.8", "network_type": "wifi", "network_provider": "" }',dd:"",type:2,content_title:this.data.title,total_duration:this.player.cache_.duration,pd:Math.floor(this.player.cache_.currentTime),cat_id:this.data.category_ids[0],age_group:this.data.age_group,gender:"Male",network_provider:"Airtel",customer_name:"User"};Oe.dd=`{ "make_model": "${this.deviceService.browser}", "os": "android", "manufacturer": "HTC", "screen_resolution": "${window.innerWidth} * ${window.innerHeight}", "push_device_token": "", "device_type": "web", "platform": "${this.deviceService.deviceType}", "device_unique_id": "${this._FPS.deviceVisitorId}" }`;const Ge=new FormData;for(const ei in Oe)Ge.append(ei,Oe[ei]);Ge.append("u_id",JSON.parse(Ue).id),Ge.append("country","India"),Ge.append("country_code","IN"),this.ds.analyticsSubmit(Ge).subscribe(ei=>{})}}),tt=z.M.extend(Ve,{constructor:function(){Ve.apply(this,arguments),this.addClass("vjs-icon-next-item"),this.controlText("Next")},handleClick:He=>{this.agetime=!0,setTimeout(()=>{1==this.ageshow.is_allow&&setTimeout(()=>{this.agetime=!1},1e3*this.ageshow.duration_in_sec)},1e3),this.itemget++,0==this.videosrc[this.itemget].sources[0].drm?(this.getm3u8Url(this.videosrc[this.itemget].sources[0].id),setTimeout(()=>{this.player.src({src:this.m3u8Main}),setTimeout(()=>{this.player.play(),setTimeout(()=>{this.player.currentTime(this.playDuration)},200)},200)},500)):1==this.isSubsInfo?1==this.videosrc[this.itemget].sources[0].drm&&"paid"==this.videosrc[this.itemget].sources[0].access&&this.drmContent(this.videosrc[this.itemget].sources[0].id,this.videosrc[this.itemget].sources[0].kId,this.videosrc[this.itemget].sources[0].src,this.videosrc[this.itemget].sources[0].access,this.videosrc[this.itemget].sources[0].spriteThumbnails.url):(this.mat.closeAll(),localStorage.setItem("woohoo","1"),this.router.navigate(["/subscribe"])),$(".moveToVideoJs").show(),setTimeout(()=>{$(".moveToVideoJs").hide()},5e3),this.player.overlay({overlays:[{start:"playing",content:`${this.videosrc[this.itemget].sources[0].season} ${this.videosrc[this.itemget].sources[0].episode} : ${this.videosrc[this.itemget].sources[0].title}`,align:"center"}]}),0!=this.itemget&&($(".vjs-icon-previous-item").prop("disabled",!1),$(".vjs-icon-previous-item").css("opacity","1.0")),this.videosrc.length-1==this.itemget?($(".vjs-icon-next-item").prop("disabled",!0),$(".vjs-icon-next-item").css("opacity","0.5")):($(".vjs-icon-next-item").prop("disabled",!1),$(".vjs-icon-next-item").css("opacity","1.0")),$("#ffffffffffffffffffffffff").hide(),$("#gggggggggggggggggggggggggg").hide(),$("#astonband").hide(),$(".video-js .vjs-tech").css("height","100%"),$(".video-js .vjs-tech").css("width","100%");const Ue=localStorage.getItem("taploginInfo");let Oe={c_id:this.videosrc[this.itemget-1].sources[0].id,dod:'{ "os_version": "6.0", "app_version": "2.8", "network_type": "wifi", "network_provider": "" }',dd:"",type:2,content_title:this.data.title,total_duration:this.player.cache_.duration,pd:Math.floor(this.player.cache_.currentTime),cat_id:this.data.category_ids[0],age_group:this.data.age_group,gender:"Male",network_provider:"Airtel",customer_name:"User"};Oe.dd=`{ "make_model": "${this.deviceService.browser}", "os": "android", "manufacturer": "HTC", "screen_resolution": "${window.innerWidth} * ${window.innerHeight}", "push_device_token": "", "device_type": "web", "platform": "${this.deviceService.deviceType}", "device_unique_id": "${this._FPS.deviceVisitorId}" }`;const Ge=new FormData;for(const ei in Oe)Ge.append(ei,Oe[ei]);Ge.append("u_id",JSON.parse(Ue).id),Ge.append("country","India"),Ge.append("country_code","IN"),this.ds.analyticsSubmit(Ge).subscribe(ei=>{})}});z.M.registerComponent("prevButton",Je),z.M.registerComponent("nextButton",tt),this.player.getChild("controlBar").addChild("prevButton",{},0),this.player.getChild("controlBar").addChild("nextButton",{},2)}})).subscribe()})(),null!=this.data.groupInfo&&0!=this.data.groupInfo.child.length&&this.player.notesButton({})})),this.config={slidesToShow:8,dots:!1,arrows:!0,slidesToScroll:2,autoplay:!1,infinite:!1,autoplaySpeed:2e3,responsive:[{breakpoint:480,settings:{slidesToShow:2}}]},this.options1={adTagUrl:"http://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/ad_rule_samples&ciu_szs=300x250&ad_rule=1&impl=s&gdfp_req=1&env=vp&output=xml_vmap1&unviewed_position_start=1&cust_params=sample_ar%3Dpremidpostpod%26deployment%3Dgmf-js&cmsid=496&vid=short_onecue&correlator="},0==this.data.is_group&&this.player.on("ended",()=>{const Ce=localStorage.getItem("taploginInfo")||{};var ve=JSON.parse(Ce);const Ve=new FormData;Ve.append("c_id",this.data.id),Ve.append("u_id",null==ve?void 0:ve.id),this.ds.clearContinueWatching(Ve).subscribe(Je=>{})}),"1"==(V=localStorage.getItem("tarilerplay"))&&1!=this.isSubsInfo&&(this.player.notesButton({}),setTimeout(()=>{$(".vjs-notes-btn").hide()},1e3)),"1"==localStorage.getItem("tarilerplay")&&this.player.on("ended",()=>{1==this.isSubsInfo&&(setTimeout(()=>{$(".vjs-notes-btn").hide(),$(".vjs-seek-button").hide()},10),this.player.overlay({overlays:[{start:"playing",align:"center"}]}),this.player.on("play",()=>{this.player.overlay(1==this.data.is_group?{overlays:[{start:"playing",content:`${this.data.series_title} ${this.data.season_title} Trailer`,align:"center"}]}:{overlays:[{start:"playing",content:`${this.data.title} Trailer`,align:"center"}]})})),1!=this.isSubsInfo&&setTimeout(()=>{this.agetime=!0,setTimeout(()=>{1==this.ageshow.is_allow&&setTimeout(()=>{this.agetime=!1},1e3*this.ageshow.duration_in_sec)},1e3)},500),"1"==localStorage.getItem("tarilerplay")&&(1!=this.isSubsInfo&&1==this.data.is_group&&$(".vjs-notes-btn").show(),localStorage.getItem("tarilerplay"),1==this.data.is_group&&"free"==this.data.access_type&&1!=this.isSubsInfo?this.playtrailerconfig():1==this.isSubsInfo||1!=this.isSubsInfo&&(this.mat.closeAll(),localStorage.setItem("woohoo","1"),this.router.navigate(["/subscribe"]),localStorage.setItem("tarilerplay","0")),localStorage.setItem("tarilerplay","0"),$(".vjs-seek-button").hide())}),this.player.on("play",()=>{$(".vjs-seek-button").show()}),this.player.overlay(1==this.data.is_group?{overlays:[{start:"playing",content:`${this.data.season_number} ${this.data.episode_number} : ${this.data.title}`,align:"center"}]}:{overlays:[{start:"playing",content:this.data.title,align:"center"}]})}getqualitycustom(){this.player.on("loadeddata",()=>{if("paid"==this.data.access_type){const v=this.player.dash.mediaPlayer;this.player.dashQualityLevels=v.getBitrateInfoListFor("video"),this.player.trigger("dashQualityLevels"),9==this.player.dashQualityLevels.length&&this.player.on("dashQualityLevels",w=>{let P=w.target.player.dashQualityLevels;const V=document.getElementById("bitrateLevels1");let ie=document.getElementById("quality1");ie.innerHTML=`${P[0].height}p`,ie.setAttribute("height",P[0].height),ie.classList.add("activeMode0"),ie.setAttribute("index",0),ie.onclick=Ge=>{this.player.dashQualityLevelsSelected=Ge.target.getAttribute("index"),this.player.trigger("dashQualityLevelsSelected"),$("#bitrateLevels1").hide(),$("ul li.activeModeauto").removeClass("activeModeauto"),$("ul li.activemode").removeClass("activemode"),ie.classList.add("activemode")},V.appendChild(ie);let Ce=document.getElementById("quality2");Ce.innerHTML=`${P[1].height}p`,Ce.setAttribute("height",P[1].height),Ce.classList.add("activeMode1"),Ce.setAttribute("index",1),Ce.onclick=Ge=>{this.player.dashQualityLevelsSelected=Ge.target.getAttribute("index"),this.player.trigger("dashQualityLevelsSelected"),$("#bitrateLevels1").hide(),$("ul li.activeModeauto").removeClass("activeModeauto"),$("ul li.activemode").removeClass("activemode"),Ce.classList.add("activemode")},V.appendChild(Ce);let ve=document.getElementById("quality3");ve.innerHTML=`${P[2].height}p`,ve.setAttribute("height",P[2].height),ve.classList.add("activeMode2"),ve.setAttribute("index",2),ve.onclick=Ge=>{this.player.dashQualityLevelsSelected=Ge.target.getAttribute("index"),this.player.trigger("dashQualityLevelsSelected"),$("#bitrateLevels1").hide(),$("ul li.activeModeauto").removeClass("activeModeauto"),$("ul li.activemode").removeClass("activemode"),ve.classList.add("activemode")},V.appendChild(ve);let Ve=document.getElementById("quality4");Ve.innerHTML=`${P[3].height}p`,Ve.setAttribute("height",P[3].height),Ve.classList.add("activeMode3"),Ve.setAttribute("index",3),Ve.onclick=Ge=>{this.player.dashQualityLevelsSelected=Ge.target.getAttribute("index"),this.player.trigger("dashQualityLevelsSelected"),$("#bitrateLevels1").hide(),$("ul li.activeModeauto").removeClass("activeModeauto"),$("ul li.activemode").removeClass("activemode"),Ve.classList.add("activemode")},V.appendChild(Ve);let Je=document.getElementById("quality5");Je.innerHTML=`${P[4].height}p`,Je.setAttribute("height",P[4].height),Je.classList.add("activeMode4"),Je.setAttribute("index",4),Je.onclick=Ge=>{this.player.dashQualityLevelsSelected=Ge.target.getAttribute("index"),this.player.trigger("dashQualityLevelsSelected"),$("#bitrateLevels1").hide(),$("ul li.activeModeauto").removeClass("activeModeauto"),$("ul li.activemode").removeClass("activemode"),Je.classList.add("activemode")},V.appendChild(Je);let tt=document.getElementById("quality6");tt.innerHTML=`${P[5].height}pl`,tt.setAttribute("height",P[5].height),tt.classList.add("activeMode5"),tt.setAttribute("index",5),tt.onclick=Ge=>{this.player.dashQualityLevelsSelected=Ge.target.getAttribute("index"),this.player.trigger("dashQualityLevelsSelected"),$("#bitrateLevels1").hide(),$("ul li.activeModeauto").removeClass("activeModeauto"),$("ul li.activemode").removeClass("activemode"),tt.classList.add("activemode")},V.appendChild(tt);let qe=document.getElementById("quality7");qe.innerHTML=`${P[6].height}ph`,qe.setAttribute("height",P[6].height),qe.classList.add("activeMode6"),qe.setAttribute("index",6),qe.onclick=Ge=>{this.player.dashQualityLevelsSelected=Ge.target.getAttribute("index"),this.player.trigger("dashQualityLevelsSelected"),$("#bitrateLevels1").hide(),$("ul li.activeModeauto").removeClass("activeModeauto"),$("ul li.activemode").removeClass("activemode"),qe.classList.add("activemode")},V.appendChild(qe);let He=document.getElementById("quality8");He.innerHTML=`${P[7].height}pl`,He.setAttribute("height",P[7].height),He.classList.add("activeMode7"),He.setAttribute("index",7),He.onclick=Ge=>{this.player.dashQualityLevelsSelected=Ge.target.getAttribute("index"),this.player.trigger("dashQualityLevelsSelected"),$("#bitrateLevels1").hide(),$("ul li.activeModeauto").removeClass("activeModeauto"),$("ul li.activemode").removeClass("activemode"),He.classList.add("activemode")},V.appendChild(He);let Ue=document.getElementById("quality9");Ue.innerHTML=`${P[8].height}ph`,Ue.setAttribute("height",P[8].height),Ue.classList.add("activeMode8"),Ue.setAttribute("index",8),Ue.onclick=Ge=>{this.player.dashQualityLevelsSelected=Ge.target.getAttribute("index"),this.player.trigger("dashQualityLevelsSelected"),$("#bitrateLevels1").hide(),$("ul li.activeModeauto").removeClass("activeModeauto"),$("ul li.activemode").removeClass("activemode"),Ue.classList.add("activemode")},V.appendChild(Ue);let Oe=document.getElementById("quality10");Oe.innerHTML="Auto",Oe.setAttribute("height","auto"),Oe.classList.add("activeMode6"),Oe.setAttribute("index",1),Oe.onclick=Ge=>{this.player.dashQualityLevelsSelected=Ge.target.getAttribute("index"),this.player.trigger("dashQualityLevelsSelected"),$("#bitrateLevels1").hide(),$("ul li.activeModeauto").removeClass("activeModeauto"),$("ul li.activemode").removeClass("activemode"),Oe.classList.add("activemode")},V.appendChild(Oe)}),3==this.player.dashQualityLevels.length&&(this.player.on("dashQualityLevels",w=>{let P=w.target.player.dashQualityLevels;const V=document.getElementById("bitrateLevels1");let ie=document.getElementById("quality1");ie.innerHTML=`${P[0].height}p`,ie.setAttribute("height",P[0].height),ie.classList.add("activeMode0"),ie.setAttribute("index",0),ie.onclick=Ge=>{this.player.dashQualityLevelsSelected=Ge.target.getAttribute("index"),this.player.trigger("dashQualityLevelsSelected"),$("#bitrateLevels1").hide(),$("ul li.activeModeauto").removeClass("activeModeauto"),$("ul li.activemode").removeClass("activemode"),ie.classList.add("activemode")},V.appendChild(ie);let Ce=document.getElementById("quality2");Ce.innerHTML=`${P[1].height}p`,Ce.setAttribute("height",P[1].height),Ce.classList.add("activeMode1"),Ce.setAttribute("index",1),Ce.onclick=Ge=>{this.player.dashQualityLevelsSelected=Ge.target.getAttribute("index"),this.player.trigger("dashQualityLevelsSelected"),$("#bitrateLevels1").hide(),$("ul li.activeModeauto").removeClass("activeModeauto"),$("ul li.activemode").removeClass("activemode"),Ce.classList.add("activemode")},V.appendChild(Ce);let ve=document.getElementById("quality3");ve.innerHTML=`${P[2].height}p`,ve.setAttribute("height",P[2].height),ve.classList.add("activeMode2"),ve.setAttribute("index",2),ve.onclick=Ge=>{this.player.dashQualityLevelsSelected=Ge.target.getAttribute("index"),this.player.trigger("dashQualityLevelsSelected"),$("#bitrateLevels1").hide(),$("ul li.activeModeauto").removeClass("activeModeauto"),$("ul li.activemode").removeClass("activemode"),ve.classList.add("activemode")},V.appendChild(ve);let Ve=document.getElementById("quality10");Ve.innerHTML="Auto",Ve.setAttribute("height","auto"),Ve.classList.add("activeMode6"),Ve.setAttribute("index",1),Ve.onclick=Ge=>{this.player.dashQualityLevelsSelected=Ge.target.getAttribute("index"),this.player.trigger("dashQualityLevelsSelected"),$("#bitrateLevels1").hide(),$("ul li.activeModeauto").removeClass("activeModeauto"),$("ul li.activemode").removeClass("activemode"),Ve.classList.add("activemode")},V.appendChild(Ve);let Je=document.getElementById("quality4");Je.innerHTML=`${P[3].height}p`,Je.setAttribute("height",P[3].height),Je.classList.add("activeMode3"),Je.setAttribute("index",3),Je.onclick=Ge=>{this.player.dashQualityLevelsSelected=Ge.target.getAttribute("index"),this.player.trigger("dashQualityLevelsSelected"),$("#bitrateLevels1").hide(),$("ul li.activeModeauto").removeClass("activeModeauto"),$("ul li.activemode").removeClass("activemode"),Je.classList.add("activemode")},V.appendChild(Je);let tt=document.getElementById("quality5");tt.innerHTML=`${P[4].height}p`,tt.setAttribute("height",P[4].height),tt.classList.add("activeMode4"),tt.setAttribute("index",4),tt.onclick=Ge=>{this.player.dashQualityLevelsSelected=Ge.target.getAttribute("index"),this.player.trigger("dashQualityLevelsSelected"),$("#bitrateLevels1").hide(),$("ul li.activeModeauto").removeClass("activeModeauto"),$("ul li.activemode").removeClass("activemode"),tt.classList.add("activemode")},V.appendChild(tt);let qe=document.getElementById("quality6");qe.innerHTML=`${P[5].height}pl`,qe.setAttribute("height",P[5].height),qe.classList.add("activeMode5"),qe.setAttribute("index",5),qe.onclick=Ge=>{this.player.dashQualityLevelsSelected=Ge.target.getAttribute("index"),this.player.trigger("dashQualityLevelsSelected"),$("#bitrateLevels1").hide(),$("ul li.activeModeauto").removeClass("activeModeauto"),$("ul li.activemode").removeClass("activemode"),qe.classList.add("activemode")},V.appendChild(qe);let He=document.getElementById("quality7");He.innerHTML=`${P[6].height}ph`,He.setAttribute("height",P[6].height),He.classList.add("activeMode6"),He.setAttribute("index",6),He.onclick=Ge=>{this.player.dashQualityLevelsSelected=Ge.target.getAttribute("index"),this.player.trigger("dashQualityLevelsSelected"),$("#bitrateLevels1").hide(),$("ul li.activeModeauto").removeClass("activeModeauto"),$("ul li.activemode").removeClass("activemode"),He.classList.add("activemode")},V.appendChild(He);let Ue=document.getElementById("quality8");Ue.innerHTML=`${P[7].height}pl`,Ue.setAttribute("height",P[7].height),Ue.classList.add("activeMode7"),Ue.setAttribute("index",7),Ue.onclick=Ge=>{this.player.dashQualityLevelsSelected=Ge.target.getAttribute("index"),this.player.trigger("dashQualityLevelsSelected"),$("#bitrateLevels1").hide(),$("ul li.activeModeauto").removeClass("activeModeauto"),$("ul li.activemode").removeClass("activemode"),Ue.classList.add("activemode")},V.appendChild(Ue);let Oe=document.getElementById("quality9");Oe.innerHTML=`${P[8].height}ph`,Oe.setAttribute("height",P[8].height),Oe.classList.add("activeMode8"),Oe.setAttribute("index",8),Oe.onclick=Ge=>{this.player.dashQualityLevelsSelected=Ge.target.getAttribute("index"),this.player.trigger("dashQualityLevelsSelected"),$("#bitrateLevels1").hide(),$("ul li.activeModeauto").removeClass("activeModeauto"),$("ul li.activemode").removeClass("activemode"),Oe.classList.add("activemode")},V.appendChild(Oe)}),setTimeout(()=>{$("#quality4").hide(),$("#quality5").hide(),$("#quality6").hide(),$("#quality7").hide(),$("#quality8").hide(),$("#quality9").hide()},100)),this.player.on("dashQualityLevelsSelected",w=>{let P=w.target.player.dashQualityLevelsSelected,V={streaming:{abr:{autoSwitchBitrate:{}}}};V.streaming.abr.autoSwitchBitrate.video=!1,v.updateSettings(V),v.setQualityFor("video",P,!0)})}})}playtrailerconfig(){1==this.data.drm&&"paid"==this.data.access_type?(this.userId=localStorage.getItem("taploginInfo"),this.user=JSON.parse(this.userId),this.drmContent(this.data.id,this.data.k_id,this.data.url,this.data.access_type,null!=this.data.sprite_url?this.data.sprite_url.web:""),this.player.overlay({overlays:[{start:"playing",content:`${this.data.season_number} ${this.data.episode_number} : ${this.data.title}`,align:"center"}]}),this.player.on("timeupdate",()=>{Math.floor(this.player.currentTime())==this.introSeconds?$(".title").show():(Math.floor(this.player.currentTime())>=this.introSeconds1||Math.floor(this.player.currentTime())<=this.introSeconds)&&$(".title").hide(),Math.floor(this.player.currentTime())==this.recapSeconds?$(".title1").show():(Math.floor(this.player.currentTime())>=this.recapSeconds1||Math.floor(this.player.currentTime())<=this.recapSeconds)&&$(".title1").hide(),Math.floor(this.player.currentTime())==this.creditSeconds?$(".title2").show():(Math.floor(this.player.currentTime())>=this.creditSeconds1||Math.floor(this.player.currentTime())<=this.creditSeconds)&&$(".title2").hide()})):0==this.data.drm&&"paid"==this.data.access_type&&(this.getm3u8Url(this.data.id),setTimeout(()=>{this.player.src({src:this.m3u8Main}),this.player.play(),this.player.hlsQualitySelector()},500)),this.player.ready(()=>{this.player=window.videoPlayer||{},this.player=(0,z.M)("video-player"),this.player.on("timeupdate",()=>{Math.floor(this.player.currentTime())==this.introSeconds?$(".title").show():(Math.floor(this.player.currentTime())>=this.introSeconds1||Math.floor(this.player.currentTime())<=this.introSeconds)&&$(".title").hide(),Math.floor(this.player.currentTime())==this.recapSeconds?$(".title1").show():(Math.floor(this.player.currentTime())>=this.recapSeconds1||Math.floor(this.player.currentTime())<=this.recapSeconds)&&$(".title1").hide(),Math.floor(this.player.currentTime())==this.creditSeconds?$(".title2").show():(Math.floor(this.player.currentTime())>=this.creditSeconds1||Math.floor(this.player.currentTime())<=this.creditSeconds)&&$(".title2").hide()}),(v=>{this.ds.getEpisodeData(this.display_offset,this.maxcounter,this.data.season_id).pipe((0,he.U)(w=>{if(1==w.code){this.DEC_SER.getDecryptedData(null==w?void 0:w.result);let Ce=JSON.parse(this.DEC_SER.decryptData);this.EpiData=Ce.content,Ce.content&&this.EpiData.forEach(ve=>{this.EpiData.map(Ue=>{Ue.sliderImg="",Ue.sliderIdentifier="",1==Ue.is_group&&null!=Ue.groupInfo?Ue.layout_thumbs.forEach(Oe=>{null!=Oe&&"rectangle_16x9"==Oe.layout&&(null==Oe||Oe.image_size.filter(Ge=>{360==Number(Ge.width)||854==Number(Ge.width)?(Ue.sliderImg=Ge.url,Ue.sliderIdentifier=Ge.identifier):""==Ue.sliderImg&&(Ue.sliderImg=null==Oe?void 0:Oe.image_size[0].url,Ue.sliderIdentifier=null==Oe?void 0:Oe.image_size[0].identifier)}))}):0==Ue.is_group&&Ue.layout_thumbs.forEach(Oe=>{"rectangle_16x9"==Oe.layout&&(null==Oe||Oe.image_size.filter(Ge=>{360==Number(Ge.width)||854==Number(Ge.width)?(Ue.sliderImg=Ge.url,Ue.sliderIdentifier=Ge.identifier):""==Ue.sliderImg&&(Ue.sliderImg=null==Oe?void 0:Oe.image_size[0].url,Ue.sliderIdentifier=null==Oe?void 0:Oe.image_size[0].identifier)}))})});var Ve=ve.duration.slice(0,2),Je=ve.duration.slice(3,5),tt=ve.duration.slice(6,8),qe=60*Ve;if(this.hours_minutes=tt>30?Number(qe)+Number(Je)+1:Number(qe)+Number(Je),this.mainelement=ve.title,null!=ve.sprite_url)var He=ve.sprite_url.web;else He="";this.videosrc.push({sources:[{src:ve.url,title:this.mainelement,id:ve.id,access:ve.access_type,age:ve.age_group,drm:ve.drm,season:ve.season_number,episode:ve.episode_number,kId:ve.k_id,spriteThumbnails:{url:He}}]}),this.arr.push(ve.id)}),this.itemget=0,this.itemget>=this.videosrc.length&&(this.itemget=0),setTimeout(()=>{0==this.itemget?($(".vjs-icon-previous-item").prop("disabled",!0),$(".vjs-icon-previous-item").css("opacity","0.5")):($(".vjs-icon-previous-item").prop("disabled",!1),$(".vjs-icon-previous-item").css("opacity","1.0"))},500),1==this.arr.length&&setTimeout(()=>{$(".vjs-icon-previous-item").prop("disabled",!0),$(".vjs-icon-previous-item").css("opacity","0.5"),$(".vjs-icon-next-item").prop("disabled",!0),$(".vjs-icon-next-item").css("opacity","0.5")},500),this.data.hasOwnProperty("index")&&""!=this.data.index?(this.itemget=this.data.index-1,this.arr.length==this.data.index&&setTimeout(()=>{$(".vjs-icon-next-item").prop("disabled",!0),$(".vjs-icon-next-item").css("opacity","0.5")},1e3)):this.itemget=0,this.videosrc.length-1!=this.itemget&&this.player.on("ended",()=>{this.contentPlaybackEnded=!0,this.agetime=!0,setTimeout(()=>{1==this.ageshow.is_allow&&setTimeout(()=>{this.agetime=!1},1e3*this.ageshow.duration_in_sec)},1e3),$(this.player.posterImage.contentEl()).hide(),this.itemget++,0==this.videosrc[this.itemget].sources[0].drm?(this.getm3u8Url(this.videosrc[this.itemget].sources[0].id),setTimeout(()=>{this.player.src({src:this.m3u8Main}),setTimeout(()=>{this.player.play(),setTimeout(()=>{this.player.currentTime(this.playDuration)},200)},200)},500)):1==this.isSubsInfo?1==this.videosrc[this.itemget].sources[0].drm&&"paid"==this.videosrc[this.itemget].sources[0].access&&this.drmContent(this.videosrc[this.itemget].sources[0].id,this.videosrc[this.itemget].sources[0].kId,this.videosrc[this.itemget].sources[0].src,this.videosrc[this.itemget].sources[0].access,this.videosrc[this.itemget].sources[0].spriteThumbnails.url):(this.mat.closeAll(),localStorage.setItem("woohoo","1"),this.router.navigate(["/subscribe"])),$(".moveToVideoJs").show(),setTimeout(()=>{$(".moveToVideoJs").hide()},5e3),this.player.overlay({overlays:[{start:"playing",content:`${this.videosrc[this.itemget].sources[0].season} ${this.videosrc[this.itemget].sources[0].episode} : ${this.videosrc[this.itemget].sources[0].title}`,align:"center"}]}),0!=this.itemget&&($(".vjs-icon-previous-item").prop("disabled",!1),$(".vjs-icon-previous-item").css("opacity","1.0")),this.videosrc.length-1==this.itemget?($(".vjs-icon-next-item").prop("disabled",!0),$(".vjs-icon-next-item").css("opacity","0.5")):($(".vjs-icon-next-item").prop("disabled",!1),$(".vjs-icon-next-item").css("opacity","1.0")),$("#ffffffffffffffffffffffff").hide(),$("#gggggggggggggggggggggggggg").hide(),$("#astonband").hide(),$(".video-js .vjs-tech").css("height","100%"),$(".video-js .vjs-tech").css("width","100%");const ve=localStorage.getItem("taploginInfo")||{};var Ve=JSON.parse(ve);const Je=new FormData;Je.append("c_id",this.videosrc[this.itemget-1].sources[0].id),Je.append("u_id",null==Ve?void 0:Ve.id),this.ds.clearContinueWatching(Je).subscribe(tt=>{})});var P=z.M.getComponent("Button"),V=z.M.extend(P,{constructor:function(){P.apply(this,arguments),this.addClass("vjs-icon-previous-item"),this.controlText("Previous")},handleClick:ve=>{this.agetime=!0,setTimeout(()=>{1==this.ageshow.is_allow&&setTimeout(()=>{this.agetime=!1},1e3*this.ageshow.duration_in_sec)},1e3),0==this.videosrc[this.itemget].sources[0].drm?(this.itemget--,this.getm3u8Url(this.videosrc[this.itemget].sources[0].id),setTimeout(()=>{this.player.src({src:this.m3u8Main}),setTimeout(()=>{this.player.play(),setTimeout(()=>{this.player.currentTime(this.playDuration)},200)},200)},500)):1==this.isSubsInfo?(this.itemget--,1==this.videosrc[this.itemget].sources[0].drm&&"paid"==this.videosrc[this.itemget].sources[0].access&&this.drmContent(this.videosrc[this.itemget].sources[0].id,this.videosrc[this.itemget].sources[0].kId,this.videosrc[this.itemget].sources[0].src,this.videosrc[this.itemget].sources[0].access,this.videosrc[this.itemget].sources[0].spriteThumbnails.url)):(this.mat.closeAll(),localStorage.setItem("woohoo","1"),this.router.navigate(["/subscribe"])),$(".moveToVideoJs").show(),setTimeout(()=>{$(".moveToVideoJs").hide()},5e3),this.player.overlay({overlays:[{start:"playing",content:`${this.videosrc[this.itemget].sources[0].season} ${this.videosrc[this.itemget].sources[0].episode} : ${this.videosrc[this.itemget].sources[0].title}`,align:"center"}]}),0==this.itemget&&($(".vjs-icon-previous-item").prop("disabled",!0),$(".vjs-icon-previous-item").css("opacity","0.5")),this.videosrc.length-1!=this.itemget&&$(".vjs-icon-next-item").prop("disabled",!1),$(".vjs-icon-next-item").css("opacity","1.0"),$("#ffffffffffffffffffffffff").hide(),$("#gggggggggggggggggggggggggg").hide(),$("#astonband").hide(),$(".video-js .vjs-tech").css("height","100%"),$(".video-js .vjs-tech").css("width","100%");const Ve=localStorage.getItem("taploginInfo");let Je={c_id:this.videosrc[this.itemget+1].sources[0].id,dod:'{ "os_version": "6.0", "app_version": "2.8", "network_type": "wifi", "network_provider": "" }',dd:"",type:2,content_title:this.data.title,total_duration:this.player.cache_.duration,pd:Math.floor(this.player.cache_.currentTime),cat_id:this.data.category_ids[0],age_group:this.data.age_group,gender:"Male",network_provider:"Airtel",customer_name:"User"};Je.dd=`{ "make_model": "${this.deviceService.browser}", "os": "android", "manufacturer": "HTC", "screen_resolution": "${window.innerWidth} * ${window.innerHeight}", "push_device_token": "", "device_type": "web", "platform": "${this.deviceService.deviceType}", "device_unique_id": "${this._FPS.deviceVisitorId}" }`;const tt=new FormData;for(const qe in Je)tt.append(qe,Je[qe]);tt.append("u_id",JSON.parse(Ve).id),tt.append("country","India"),tt.append("country_code","IN"),this.ds.analyticsSubmit(tt).subscribe(qe=>{})}}),ie=z.M.extend(P,{constructor:function(){P.apply(this,arguments),this.addClass("vjs-icon-next-item"),this.controlText("Next")},handleClick:ve=>{this.agetime=!0,setTimeout(()=>{1==this.ageshow.is_allow&&setTimeout(()=>{this.agetime=!1},1e3*this.ageshow.duration_in_sec)},1e3),this.itemget++,0==this.videosrc[this.itemget].sources[0].drm?(this.getm3u8Url(this.videosrc[this.itemget].sources[0].id),setTimeout(()=>{this.player.src({src:this.m3u8Main}),setTimeout(()=>{this.player.play(),setTimeout(()=>{this.player.currentTime(this.playDuration)},200)},200)},500)):1==this.isSubsInfo?1==this.videosrc[this.itemget].sources[0].drm&&"paid"==this.videosrc[this.itemget].sources[0].access&&this.drmContent(this.videosrc[this.itemget].sources[0].id,this.videosrc[this.itemget].sources[0].kId,this.videosrc[this.itemget].sources[0].src,this.videosrc[this.itemget].sources[0].access,this.videosrc[this.itemget].sources[0].spriteThumbnails.url):(this.mat.closeAll(),localStorage.setItem("woohoo","1"),this.router.navigate(["/subscribe"])),$(".moveToVideoJs").show(),setTimeout(()=>{$(".moveToVideoJs").hide()},5e3),this.player.overlay({overlays:[{start:"playing",content:`${this.videosrc[this.itemget].sources[0].season} ${this.videosrc[this.itemget].sources[0].episode} : ${this.videosrc[this.itemget].sources[0].title}`,align:"center"}]}),0!=this.itemget&&($(".vjs-icon-previous-item").prop("disabled",!1),$(".vjs-icon-previous-item").css("opacity","1.0")),this.videosrc.length-1==this.itemget?($(".vjs-icon-next-item").prop("disabled",!0),$(".vjs-icon-next-item").css("opacity","0.5")):($(".vjs-icon-next-item").prop("disabled",!1),$(".vjs-icon-next-item").css("opacity","1.0")),$("#ffffffffffffffffffffffff").hide(),$("#gggggggggggggggggggggggggg").hide(),$("#astonband").hide(),$(".video-js .vjs-tech").css("height","100%"),$(".video-js .vjs-tech").css("width","100%");const Ve=localStorage.getItem("taploginInfo");let Je={c_id:this.videosrc[this.itemget-1].sources[0].id,dod:'{ "os_version": "6.0", "app_version": "2.8", "network_type": "wifi", "network_provider": "" }',dd:"",type:2,content_title:this.data.title,total_duration:this.player.cache_.duration,pd:Math.floor(this.player.cache_.currentTime),cat_id:this.data.category_ids[0],age_group:this.data.age_group,gender:"Male",network_provider:"Airtel",customer_name:"User"};Je.dd=`{ "make_model": "${this.deviceService.browser}", "os": "android", "manufacturer": "HTC", "screen_resolution": "${window.innerWidth} * ${window.innerHeight}", "push_device_token": "", "device_type": "web", "platform": "${this.deviceService.deviceType}", "device_unique_id": "${this._FPS.deviceVisitorId}" }`;const tt=new FormData;for(const qe in Je)tt.append(qe,Je[qe]);tt.append("u_id",JSON.parse(Ve).id),tt.append("country","India"),tt.append("country_code","IN"),this.ds.analyticsSubmit(tt).subscribe(qe=>{})}});z.M.registerComponent("prevButton",V),z.M.registerComponent("nextButton",ie),this.player.getChild("controlBar").addChild("prevButton",{},0),this.player.getChild("controlBar").addChild("nextButton",{},2)}})).subscribe()})(),null!=this.data.groupInfo&&0!=this.data.groupInfo.child.length&&this.player.notesButton({})})}crossEpisode(){$(".episodeSelector").hide(),this.player.play()}jsondata(){this.ds.faqData().subscribe(v=>{this.ageshow=v.Player[0].UA_setting,this.lBandShow=v.Player[0].ads_visible})}playEpisode(v,w){$("#ffffffffffffffffffffffff").hide(),$("#gggggggggggggggggggggggggg").hide(),$("#astonband").hide(),$(".video-js .vjs-tech").css("height","100%"),$(".video-js .vjs-tech").css("width","100%"),this.itemget=w,$(".episodeSelector").hide(),this.agetime=!0,setTimeout(()=>{1==this.ageshow.is_allow&&setTimeout(()=>{this.agetime=!1},1e3*this.ageshow.duration_in_sec)},1e3),this.player.overlay({overlays:[{start:"playing",content:`${v.season_number} ${v.episode_number} : ${v.title}`,align:"center"}]}),0==this.itemget&&($(".vjs-icon-previous-item").prop("disabled",!0),$(".vjs-icon-previous-item").css("opacity","0.5")),this.videosrc.length-1!=this.itemget&&$(".vjs-icon-next-item").prop("disabled",!1),$(".vjs-icon-next-item").css("opacity","1.0"),0!=this.itemget&&($(".vjs-icon-previous-item").prop("disabled",!1),$(".vjs-icon-previous-item").css("opacity","1.0")),this.videosrc.length-1==this.itemget?($(".vjs-icon-next-item").prop("disabled",!0),$(".vjs-icon-next-item").css("opacity","0.5")):($(".vjs-icon-next-item").prop("disabled",!1),$(".vjs-icon-next-item").css("opacity","1.0")),"paid"==v.access_type&&1==this.isSubsInfo?(this.userId=localStorage.getItem("taploginInfo"),this.user=JSON.parse(this.userId),this.player=(0,z.M)("video-player"),this.drmContent(v.id,v.k_id,v.url,v.access_type,null!=v.sprite_url?v.sprite_url.web:"")):0==v.drm||"free"==v.access_type?(this.getm3u8Url(v.id),setTimeout(()=>{this.player.src({src:this.m3u8Main}),setTimeout(()=>{this.player.play(),setTimeout(()=>{this.player.currentTime(this.playDuration)},200)},200)},500)):(this.mat.closeAll(),this.router.navigate(["/subscribe"])),this.player.on("timeupdate",()=>{Math.floor(this.player.currentTime())==this.introSeconds?$(".title").show():(Math.floor(this.player.currentTime())>=this.introSeconds1||Math.floor(this.player.currentTime())<=this.introSeconds)&&$(".title").hide(),Math.floor(this.player.currentTime())==this.recapSeconds?$(".title1").show():(Math.floor(this.player.currentTime())>=this.recapSeconds1||Math.floor(this.player.currentTime())<=this.recapSeconds)&&$(".title1").hide(),Math.floor(this.player.currentTime())==this.creditSeconds?$(".title2").show():(Math.floor(this.player.currentTime())>=this.creditSeconds1||Math.floor(this.player.currentTime())<=this.creditSeconds)&&$(".title2").hide()});const P=localStorage.getItem("taploginInfo");let V={c_id:v.id,dod:'{ "os_version": "6.0", "app_version": "2.8", "network_type": "wifi", "network_provider": "" }',dd:"",type:2,content_title:this.data.title,total_duration:this.player.cache_.duration,pd:Math.floor(this.player.cache_.currentTime),cat_id:this.data.category_ids[0],age_group:this.data.age_group,gender:"Male",network_provider:"Airtel",customer_name:"User"};V.dd=`{ "make_model": "${this.deviceService.browser}", "os": "android", "manufacturer": "HTC", "screen_resolution": "${window.innerWidth} * ${window.innerHeight}", "push_device_token": "", "device_type": "web", "platform": "${this.deviceService.deviceType}", "device_unique_id": "${this._FPS.deviceVisitorId}" }`;const ie=new FormData;for(const Ce in V)ie.append(Ce,V[Ce]);ie.append("u_id",JSON.parse(P).id),ie.append("country","India"),ie.append("country_code","IN"),this.ds.analyticsSubmit(ie).subscribe(Ce=>{})}slickInit(v){}breakpoint(v){}afterChange(v){}beforeChange(v){}skipIntro(){this.player.currentTime(this.introSeconds1)}skipRecap(){this.player.currentTime(this.recapSeconds1)}skipCredit(){this.player.currentTime(this.creditSeconds1)}analytics(){if(1==this.data.is_group){const v=localStorage.getItem("taploginInfo");let w={c_id:this.videosrc[this.itemget].sources[0].id,dod:'{ "os_version": "6.0", "app_version": "2.8", "network_type": "wifi", "network_provider": "" }',dd:"",type:2,content_title:this.data.title,total_duration:this.player.cache_.duration,pd:Math.floor(this.player.cache_.currentTime),cat_id:this.data.category_ids[0],age_group:this.data.age_group,gender:"Male",network_provider:"Airtel",customer_name:"User"};w.dd=`{ "make_model": "${this.deviceService.browser}", "os": "android", "manufacturer": "HTC", "screen_resolution": "${window.innerWidth} * ${window.innerHeight}", "push_device_token": "", "device_type": "web", "platform": "${this.deviceService.deviceType}", "device_unique_id": "${this._FPS.deviceVisitorId}" }`;const P=new FormData;for(const V in w)P.append(V,w[V]);P.append("u_id",JSON.parse(v).id),P.append("country","India"),P.append("country_code","IN"),this.ds.analyticsSubmit(P).subscribe(V=>{})}else{const v=localStorage.getItem("taploginInfo");let w={c_id:this.data.id,dod:'{ "os_version": "6.0", "app_version": "2.8", "network_type": "wifi", "network_provider": "" }',dd:"",type:2,content_title:this.data.title,total_duration:this.player.cache_.duration,pd:Math.floor(this.player.cache_.currentTime),cat_id:this.data.category_ids[0],age_group:this.data.age_group,gender:"Male",network_provider:"Airtel",customer_name:"User"};w.dd=`{ "make_model": "${this.deviceService.browser}", "os": "android", "manufacturer": "HTC", "screen_resolution": "${window.innerWidth} * ${window.innerHeight}", "push_device_token": "", "device_type": "web", "platform": "${this.deviceService.deviceType}", "device_unique_id": "${this._FPS.deviceVisitorId}" }`;const P=new FormData;for(const V in w)P.append(V,w[V]);P.append("u_id",JSON.parse(v).id),P.append("country","India"),P.append("country_code","IN"),this.ds.analyticsSubmit(P).subscribe(V=>{})}}onPlayerReady(){if("1"==(ie=localStorage.getItem("tarilerplay"))&&("firefox"==this.getBrowserName?this.player.qualityMenu():this.player.hlsQualitySelector()),"1"!=ie&&0==this.data.drm&&("firefox"==this.getBrowserName?this.player.qualityMenu():this.player.hlsQualitySelector()),"free"==this.data.access_type&&setTimeout(()=>{this.player.currentTime(this.data.play_duration)},1e3),null!=this.data.sprite_url&&this.player.spriteThumbnails({interval:5,url:this.data.sprite_url.web,width:224,height:127,responsive:600}),"safari"==this.getBrowserName?this.player.hlsQualitySelector():"paid"==this.data.access_type&&1==this.data.drm&&"1"!=ie?(this.getqualitycustom(),this.getqualitycustom()):"free"==this.data.access_type&&1==this.data.drm&&"1"!=ie&&this.player.hlsQualitySelector(),"free"==this.data.access_type&&setTimeout(()=>{this.player.currentTime(this.data.play_duration)},1e3),this.player.on("loadeddata",()=>{for(var ve=this.player.textTracks(),Ve=0;Ve<ve.length;Ve++){ve[Ve].label="English"}}),setTimeout(()=>{this.player.ready(()=>{setTimeout(()=>{this.player.play()},500),window.innerWidth<992&&(this.player.requestFullscreen(),this.player.on("fullscreenchange",()=>{this.player.isFullscreen()||this.mat.closeAll()})),$(".ageshow").appendTo($("#video-player"))})},500),this.trackMe(this.data.title),this.npawEvent(this.data.title),null===localStorage.getItem("taploginInfo"))this.USER_ACCOUNT_id="unregitered user";else{const ve=localStorage.getItem("taploginInfo");this.USER_ACCOUNT_id=JSON.parse(ve)}var v=new dn.Plugin({accountCode:"multitv","user.name":this.USER_ACCOUNT_id.id,"app.name":"Video Player","app.releaseVersion":"v1.0.0"});v.registerAdapter(this.player,'{\n  "bcoveImaAdsAdapter.adapter,isUsed": "return typeof google !== \'undefined\' && this.player.ima3 && this.player.ads",\n  "bcoveImaAdsAdapter.adapter,getVersion": "var ret=null;if(typeof google!==\'undefined\'&&google.ima){ret=\'bcove-ima \'+google.ima.VERSION};return ret",\n  "bcoveImaAdsAdapter.adapter,getPlayhead": "var player=this.getVideo().getAdapter().player;if(this.player.ima3){if(this.player.ima3&&this.player.ima3.adPlayer){player=this.player.ima3.adPlayer}};return player.currentTime()",\n  "bcoveImaAdsAdapter.adapter,getDuration": "var ret=null;if(this.player.ads&&this.player.ads.ad&&this.player.ads.ad.duration){ret=this.player.ads.ad.duration}else{var player=this.plugin.player;if(this.player.ima3){player=this.player.ima3.adPlayer};ret=(player&&player.duration)?player.duration():null};return ret",\n  "bcoveImaAdsAdapter.adapter,getPosition": "var ret=this.getNpawReference().Constants.AdPosition.Midroll;if(this.player.ads&&this.player.ads.ad){switch(this.player.ads.ad.type){case\'PREROLL\':ret=this.getNpawReference().Constants.AdPosition.Preroll;break;case\'MIDROLL\':ret=this.getNpawReference().Constants.AdPosition.Midroll;break;case\'POSTROLL\':ret=this.getNpawReference().Constants.AdPosition.Postroll;break}}else if(this.getVideo().getAdapter().getPlayhead()>=this.getVideo().getAdapter().getDuration()){ret=this.getNpawReference().Constants.AdPosition.Postroll};if(!this.getVideo().getAdapter().flags.isJoined){ret=this.getNpawReference().Constants.AdPosition.Preroll};return ret",\n  "bcoveImaAdsAdapter.adapter,getResource": "var ret=\'unknown\';if(this.player.ima3){ret=this.player.ima3.currentAd.getMediaUrl()};return ret",\n  "bcoveImaAdsAdapter.adapter,getTitle": "var ret=null;if(this.player.ima3&&this.player.ima3.currentAd){ret=this.player.ima3.currentAd.getTitle()};return ret",\n  "bcoveImaAdsAdapter.adapter,getPlayerVersion": "var ret=null;if(this.player.ima3){ret=this.player.ima3.VERSION};return ret",\n  "bcoveImaAdsAdapter.adapter,getGivenBreaks": "var ret=null;if(this.player.ima3){ret=this.player.ima3.adsManager.getCuePoints().length};return ret",\n  "bcoveImaAdsAdapter.adapter,getBreaksTime": "var ret=null;if(this.player.ima3){var cuelist=this.player.ima3.adsManager.getCuePoints();for(var index in cuelist){if((!cuelist[index]&&cuelist[index]!==0)||cuelist[index]===-1){cuelist[index]=this.getVideo().getAdapter().getDuration()}};ret=cuelist};return ret",\n  "bcoveImaAdsAdapter.adapter,getGivenAds": "var ret=null;if(this.player.ima3&&this.player.ima3.currentAd&&this.player.ima3.currentAd.getAdPodInfo()){ret=this.player.ima3.currentAd.getAdPodInfo().getTotalAds()};return ret",\n  "bcoveImaAdsAdapter.adapter,getAudioEnabled": "var ret=null;if(this.player.muted()){ret=false}else{ret=!!this.player.volume()};return ret",\n  "bcoveImaAdsAdapter.adapter,getIsSkippable": "var ret=false;if(this.player.ima3){ret=this.player.ima3.currentAd&&this.player.ima3.currentAd.isSkippable()};return ret",\n  "bcoveImaAdsAdapter.adapter,getIsFullscreen": "var ret=null;if(this.getPlugin().deviceDetector.isIphone()){ret=!this.getPlugin().deviceDetector.isInBackground}else{var container=null;if(this.player.ima3){container=this.player.ima3.el};ret=container?(window.innerHeight<=container.clientHeight+30&&window.innerWidth<=container.clientWidth+30):false};return ret",\n  "bcoveImaAdsAdapter.adapter,getIsVisible": "var ret=null;if(this.getPlugin().deviceDetector.isIphone()){ret=!this.getPlugin().deviceDetector.isInBackground}else if(this.player.ima3){ret=this.getNpawUtils().calculateAdViewability(this.player.ima3.el)};return ret",\n  "bcoveImaAdsAdapter.adapter,getBitrate": "var bitrate=-1;if(this.player.ima3&&this.player.ima3.currentAd&&this.player.ima3.currentAd.getVastMediaBitrate()){bitrate=this.player.ima3.currentAd.getVastMediaBitrate()};return bitrate",\n  "bcoveImaAdsAdapter.adapter,getCreativeId": "var ret=null;if(this.player.ima3&&this.player.ima3.currentAd){ret=this.player.ima3.currentAd.getCreativeAdId()||this.player.ima3.currentAd.getCreativeId()}else if(this.titles){ret=this.titles[(this.getVideo().requestBuilder.lastSent.adNumber||1)-1]._creativeId};return ret",\n  "bcoveImaAdsAdapter.adapter,registerListeners": "this.monitorPlayhead(true,false);this.references={\'ima3-started\':this.startJoinListener.bind(this),\'ima3-paused\':this.pausedListener.bind(this),\'ima3-resumed\':this.resumedListener.bind(this),\'ima3-complete\':this.adEndedListener.bind(this),\'ima3-skipped\':this.skippedListener.bind(this),\'ima3-ad-error\':this.errorListener.bind(this),\'ads-pod-ended\':this.podEndListener.bind(this),\'ads-click\':this.clickListener.bind(this),\'ads-first-quartile\':this.firstQuartileListener.bind(this),\'ads-midpoint\':this.secondQuartileListener.bind(this),\'ads-third-quartile\':this.thirdQuartileListener.bind(this)};if(this.player){for(var key in this.references){this.player.on(key,this.references[key])}}",\n  "bcoveImaAdsAdapter.adapter,startJoinListener,e": "if(this.getVideo().getAdapter()){this.getVideo().getAdapter().firePause()};this.fireStart();this.fireJoin()",\n  "bcoveImaAdsAdapter.adapter,pausedListener,e": "this.firePause()",\n  "bcoveImaAdsAdapter.adapter,resumedListener,e": "this.fireResume()",\n  "bcoveImaAdsAdapter.adapter,skippedListener,e": "this.fireSkip();if(this.getVideo().getAdapter())this.getVideo().getAdapter().fireResume()",\n  "bcoveImaAdsAdapter.adapter,adEndedListener,e": "var playheadVal=this.getVideo().requestBuilder.lastSent.adPosition===this.getNpawReference().Constants.AdPosition.Preroll?0:this.getVideo().getAdapter().lastPlayhead;this.fireStop({playhead:playheadVal,adPlayhead:this.getDuration()})",\n  "bcoveImaAdsAdapter.adapter,errorListener,e": "if(this.player.ima3){if(e.getError&&e.getError()){var error=e.getError();this.fireError(error.getCode(),error.getMessage())}else{this.fireError()}}",\n  "bcoveImaAdsAdapter.adapter,clickListener,e": "if(this.player.ima3){var clickurl=null;if(this.player.ima3.currentAd&&this.player.ima3.currentAd.g){clickurl=this.player.ima3.currentAd.g.clickThroughUrl};this.fireClick(clickurl)}",\n  "bcoveImaAdsAdapter.adapter,firstQuartileListener,e": "this.fireQuartile(1)",\n  "bcoveImaAdsAdapter.adapter,secondQuartileListener,e": "this.fireQuartile(2)",\n  "bcoveImaAdsAdapter.adapter,thirdQuartileListener,e": "this.fireQuartile(3)",\n  "bcoveImaAdsAdapter.adapter,podEndListener,e": "this.fireBreakStop()",\n  "bcoveImaAdsAdapter.adapter,unregisterListeners": "if(this.monitor)this.monitor.stop();if(this.player&&this.references){for(var key in this.references){this.player.off(key,this.references[key])};delete this.references}",\n  "bcoveImaAdsAdapter.adapter,adPlayerErrorListener,e": "var error=e.data.AdError;var noResponseErrors=[1012,1005,301,402,302];var emptyResponse=[1007,1009,303];var wrongResponse=[403,100,503,101,102];if(noResponseErrors.indexOf(error.getErrorCode())>=0){this.fireManifest(youbora.Constants.ManifestError.NO_RESPONSE,error.getMessage())}else if(emptyResponse.indexOf(error.getErrorCode())>=0){this.fireManifest(youbora.Constants.ManifestError.EMPTY,error.getMessage())}else if(wrongResponse.indexOf(error.getErrorCode())>=0){this.fireManifest(youbora.Constants.ManifestError.WRONG,error.getMessage())}else{this.fireError(error.getErrorCode(),error.getMessage())}",\n\n  "genericAdsAdapter.adapter,initProperties": "console.log(\'init properties\');this.isGeneric=true",\n  "genericAdsAdapter.adapter,getVersion": "return\'7.0.5--videojs-ads\'",\n  "genericAdsAdapter.adapter,registerListeners": "this.references={adstart:this.adStartListener.bind(this),adend:this.adEndListener.bind(this),adskip:this.adSkipListener.bind(this),adserror:this.errorListener.bind(this),\'ads-click\':this.clickListener.bind(this)};if(this.player){for(var key in this.references){this.player.on(key,this.references[key])}}",\n  "genericAdsAdapter.adapter,unregisterListeners": "if(this.player&&this.references){for(var key in this.references){this.player.off(key,this.references[key])};delete this.references}",\n  "genericAdsAdapter.adapter,adStartListener,e": "this.firePlayerLog(\'adStartListener\',{});this.fireStart();this.fireJoin()",\n  "genericAdsAdapter.adapter,adEndListener,e": "this.firePlayerLog(\'adEndListener\',{});this.fireStop()",\n  "genericAdsAdapter.adapter,adSkipListener,e": "this.firePlayerLog(\'adSkipListener\',{});this.fireSkip()",\n  "genericAdsAdapter.adapter,errorListener,e": "this.firePlayerLog(\'adErrorListener\',{});this.fireError()",\n  "genericAdsAdapter.adapter,clickListener,e": "this.firePlayerLog(\'adClickListener\',{});this.fireClick()",\n\n  "contribHlsTech,isUsed,adapter":"return!!this.getHls(adapter)",\n  "contribHlsTech,getRendition,adapter":"var ret=null;var media=this.getHls(adapter).playlists.media();if(adapter.player.qualityLevels){var qualityLevels=adapter.player.qualityLevels();var selected=qualityLevels[qualityLevels.selectedIndex];if(selected){ret=this.getNpawUtils().buildRenditionString(selected.width,selected.height,selected.bitrate)}}else if(media&&media.attributes){var att=media.attributes;if(att.RESOLUTION){ret=this.getNpawUtils().buildRenditionString(att.RESOLUTION.width,att.RESOLUTION.height,att.BANDWIDTH)}else if(att.BANDWIDTH){ret=this.getNpawUtils().buildRenditionString(att.BANDWIDTH)}else if(att.NAME){ret=att.NAME}};return ret",\n  "contribHlsTech,getHls,adapter":"return adapter.getTech().vhs||adapter.getTech().hls||adapter.getTech().hls_||adapter.getTech().hlsplayer",\n  "contribHlsTech,getTotalBytes,adapter":"var hls=this.getHls(adapter);var ret=hls.bytesReceived;if(!ret&&hls.stats){ret=hls.stats.mediaBytesTransferred-adapter.acumBytes};return ret",\n  "contribHlsTech,getBitrate,adapter":"var ret=null;var media=this.getHls(adapter).playlists.media();if(adapter.player.qualityLevels){var qualityLevels=adapter.player.qualityLevels();var selected=qualityLevels[qualityLevels.selectedIndex];if(selected){ret=selected.bitrate}}else if(media&&media.attributes&&media.attributes.BANDWIDTH){ret=media.attributes.BANDWIDTH}else if(adapter.player.tech_&&adapter.player.tech_.vhs&&adapter.player.tech_.vhs.stats){ret=adapter.player.tech_.vhs.stats.bandwidth}else if(adapter.player.tech_&&adapter.player.tech_.hls&&adapter.player.tech_.hls.bandwidth){ret=adapter.player.tech_.hls.bandwidth}else if(adapter.player.hls&&adapter.player.hls.bandwidth){ret=adapter.player.hls.bandwidth};return ret",\n\n  "dashTech,getResource,adapter":"return this._getDashPlayer(adapter).getSource()",\n  "dashTech,_getDashPlayer,adapter":"return adapter.player.dash.mediaPlayer",\n  "dashTech,isUsed,adapter":"return adapter.player.dash&&adapter.player.dash.mediaPlayer&&!adapter.player.dash.shakaPlayer",\n  "dashTech,getRendition,adapter":"var ret=null;var player=this._getDashPlayer(adapter);if(player){var level=player.getQualityFor(\'video\');if(level){var renditionInfo=player.getBitrateInfoListFor(\'video\')[level];if(renditionInfo){ret=this.getNpawUtils().buildRenditionString(renditionInfo.width,renditionInfo.height,renditionInfo.bitrate)}}};return ret",\n  "dashTech,getBitrate,adapter":"var ret=null;var player=this._getDashPlayer(adapter);if(player){var level=player.getQualityFor(\'video\');if(level){ret=player.getBitrateInfoListFor(\'video\')[level].bitrate}};return ret",\n\n  "dashShakaTech,getBitrate,adapter":"return adapter.player.dash.shakaPlayer.getStats().streamBandwidth",\n  "dashShakaTech,getResource,adapter":"var ret=\'\';var sp=adapter.player.dash.shakaPlayer;if(typeof sp.getManifestUri===\'function\'){ret=sp.getManifestUri()}else if(typeof sp.getAssetUri===\'function\'){ret=sp.getAssetUri()};return ret",\n  "dashShakaTech,isUsed,adapter":"return adapter.player.dash&&adapter.player.dash.shakaPlayer",\n  "dashShakaTech,getRendition,adapter":"var shaka=adapter.player.dash.shakaPlayer;var stats=shaka.getStats();var ret=this.getNpawUtils().buildRenditionString(stats.width,stats.height,stats.streamBandwidth);var tracks=shaka.getVariantTracks();for(var i in tracks){var track=tracks[i];if(track.active&&track.type===\'video\'){ret=this.getNpawUtils().buildRenditionString(track.width,track.height,track.bandwidth)}};return ret",\n\n  "hlsJsTech,getTech,adapter":"var tech=adapter.getTech();return tech.vhs||tech.hls||tech.hls_||tech.hlsplayer",\n  "hlsJsTech,getRendition,adapter":"var ret=null;var currentLevel=this.getTech(adapter).currentLevel;if(typeof currentLevel!==\'undefined\'&&currentLevel!==-1&&!!this.getTech(adapter).levels){var level=this.getTech(adapter).levels[currentLevel];if(level){ret=this.getNpawUtils().buildRenditionString(level.width,level.height,level.bitrate)}};return ret",\n  "hlsJsTech,isUsed,adapter":"return!!this.getTech(adapter)",\n  "hlsJsTech,getHls,adapter":"return this.getTech(adapter)",\n  "hlsJsTech,getResource,adapter":"var ret=null;if(this.getTech(adapter)&&this.getTech(adapter).url){ret=this.getTech(adapter).url}else if(this.getHls(adapter)&&this.getHls(adapter).source_){ret=this.getHls(adapter).source_.src};return ret",\n  "hlsJsTech,getBitrate,adapter":"var ret=null;var currentLevel=this.getTech(adapter).currentLevel;if(typeof currentLevel!==\'undefined\'&&currentLevel!==-1&&!!this.getTech(adapter).levels){var level=this.getTech(adapter).levels[currentLevel];if(level&&level.bitrate){ret=level.bitrate}};return ret",\n\n  "shakaTech,getResource,adapter":"var ret = \'\';var sp = this._getShaka(adapter);if (typeof sp.getManifestUri === \'function\'){ret = sp.getManifestUri()} else if (typeof sp.getCurrentSrc === \'function\') {ret = sp.getCurrentSrc()} return ret",\n  "shakaTech,getBitrate,adapter":"var ret = -1;var sp = this._getShaka(adapter);if (typeof sp.getStats === \'function\') {ret = sp.getStats().streamBandwidth} else if ((typeof sp.getVideoTracks === \'function\') && (typeof sp.getVideoTrackCurrentIndex === \'function\')) {var videoIndex = sp.getVideoTrackCurrentIndex(); var videoTracks = sp.getVideoTracks(); for (var i in videoTracks) { var track = videoTracks[i]; if (track.index == videoIndex) {ret = track.bitrate} } };return ret",\n  "shakaTech,isUsed,adapter":"return!!this._getShaka(adapter)",\n  "shakaTech,getRendition,adapter":"var shaka=this._getShaka(adapter); var stats=shaka.getStats();var ret=this.getNpawUtils().buildRenditionString(stats.width,stats.height,stats.streamBandwidth);var tracks=shaka.getVariantTracks();for(var i in tracks){var track=tracks[i];if(track.active&&track.type===\'video\'){ret=this.getNpawUtils().buildRenditionString(track.width,track.height,track.bandwidth);break}};return ret",\n  "shakaTech,_getShaka,adapter":"var tech=adapter.getTech(); return tech.shakaPlayer||tech._shakaplayerInstance",\n\n  "adapter,isInAds":"try{return (this.player.ads && this.player.ads.inAdBreak && (typeof this.player.ads.inAdBreak === \'function\') && this.player.ads.inAdBreak())}catch(e){return false}",\n  "adapter,getBitrate":"var ret=null;var tech=this.getUsedTech();if(tech&&tech.getBitrate){ret=tech.getBitrate(this)};return ret",\n  "adapter,checkExistsPlayer":"try{return this.checkExistsObjectOnPage(this.player.el())}catch(err){return true}",\n  "adapter,pauseListener,e":"this.firePlayerLog(\'pauseListener\',{});this.firePause({},\'pauseListener\')",\n  "adapter,bufferingListener,e":"this.firePlayerLog(\'bufferingListener\',{});if(!this.flags.isSeeking){this.fireBufferBegin({},false,\'bufferingListener\')}",\n  "adapter,getRendition":"var ret=null;var tech=this.getUsedTech();if(tech&&tech.getRendition){ret=tech.getRendition(this)};return ret",\n  "adapter,getPlayerVersion":"var ret=null;if(typeof videojs!==\'undefined\'){ret=videojs.VERSION};return ret",\n  "adapter,playListener,e":"this.firePlayerLog(\'playListener\',{});if(this.isInAds()){return};if(!this.flags.isStarted){this.lastSrc=this.getResource();this._startEvent(\'playListenerNotStarted\')}else{if(this.lastSrc&&this.lastSrc!==this.getResource()){this.fireStop({},\'playListenerNewResource\');this.acumBytesFunc();this.lastPlayhead=undefined;this._startEvent(\'playListenerNewResource\');this.lastSrc=this.getResource()}}",\n  "adapter,loadAdsAdapter": "if(this.getVideo()){if(this.getVideo().getAdsAdapter()===null||this.getVideo().getAdsAdapter().isGeneric){var adapter=null;if(this.getAdapterClass(\'bcoveImaAdsAdapter\').isUsed(this)){adapter=this.getAdapterClass(\'bcoveImaAdsAdapter\');}else if(this.getVideo().getAdsAdapter()===null){adapter=this.getAdapterClass(\'genericAdsAdapter\');adapter.initProperties()};if(adapter){this.getVideo().setAdsAdapter(adapter,this.plugin,true)}}else{if(this.getVideo().getAdsAdapter().registerImaEvents)this.getVideo().getAdsAdapter().registerImaEvents()}}",\n  "adapter,errorModifyer,fatal,nonfatal,ignore":"this.fatalList=fatal||[];this.nonFatalList=nonfatal||[];this.ignoreList=ignore||[]",\n  "adapter,getPlayrate":"return this.player.playbackRate()",\n  "adapter,timeupdateListener,e":"if(this.isInAds()){return};if(this.getPlayhead()>0.1){this.fireJoin({},\'timeupdateListener\');if(this.joinPolling)this.joinPolling.stop();if(!this.flags.isPaused&&this.lastSeekPlayhead&&this.lastSeekPlayhead!==this.getPlayhead()){this.fireSeekEnd({},\'timeupdateListener\');this.lastSeekPlayhead=false}};if(!this.flags.isJoined){if(this.lastPlayhead===undefined){this.lastPlayhead=this.getPlayhead()};if(this.lastPlayhead!==this.getPlayhead()){if(this.player.options_&&this.plugin&&!this.getVideo().options[\'content.id\']){this.getVideo().options[\'content.id\']=this.player.options_[\'data-video-id\']};this.fireStart({},\'timeupdateListener\');this.fireJoin({},\'timeupdateListener\');if(this.joinPolling)this.joinPolling.stop();this.lastPlayhead=undefined}};if(this.getVideo()._adsAdapter&&!this.getVideo()._adsAdapter.flags.isStarted){this.lastPlayhead=this.getPlayhead()}",\n  "adapter,getPlayhead":"var ret=this.player.currentTime();if(this.getVideo()._adsAdapter&&this.getVideo()._adsAdapter.flags.isStarted){ret=this.lastPlayhead||ret};return ret",\n  "adapter,getDuration":"var ret=this.player.duration();if(this.player.mediainfo&&typeof this.player.mediainfo.duration!==\'undefined\'){ret=this.player.mediainfo.duration};return ret",\n  "adapter,aderrorListener,e":"this.loadAdsAdapter();if(this.getVideo().getAdsAdapter()&&this.getVideo().getAdsAdapter().adPlayerErrorListener){this.getVideo().getAdsAdapter().adPlayerErrorListener(e)}",\n  "adapter,_jointimePolling,e":"if(this.getVideo()){if(!this.getVideo().getAdsAdapter()||!this.getVideo().getAdsAdapter().flags.isStarted){if(this.lastPlayhead!==0&&typeof this.lastPlayhead===\'number\'&&this.lastPlayhead!==this.getPlayhead()){this.fireJoin({},\'jointimePolling\');if(this.joinPolling){this.joinPolling.stop()}};this.lastPlayhead=this.getPlayhead()}}else if(this.joinPolling){this.joinPolling.stop()}",\n  "adapter,acumBytesFunc":"this.acumBytes+=this.getTotalBytes()||0",\n  "adapter,adsEndedListener,e":"this.firePlayerLog(\'adsEndedListener\',{});this.adsEnded=true;if(this.getVideo().requestBuilder.lastSent.adPosition===this.getNpawReference().Constants.AdPosition.Postroll){this.getVideo().fireStop({},\'adsEndedListener\');this.acumBytesFunc();this.lastPlayhead=undefined}",\n  "adapter,getVersion":"return\'7.0.5-videojs-js\'",\n  "adapter,seekedListener,e":"this.firePlayerLog(\'seekedListener\',{});this.fireSeekEnd({},\'seekedListener\');this.lastSeekPlayhead=this.getPlayhead()",\n  "adapter,getTech":"return this.player.tech({IWillNotUseThisInPlugins:true})",\n  "adapter,unregisterListeners":"if(this.monitor)this.monitor.stop();if(this.player&&this.references){try{for(var key in this.references){this.player.off(key,this.references[key])}}catch(err){};delete this.references}",\n  "adapter,_startEvent,triggerListener":"this.loadAdsAdapter();if(this.player.options_&&this.plugin&&!this.plugin.options[\'content.id\']){this.plugin.options[\'content.id\']=this.player.options_[\'data-video-id\']};this.fireStart({},triggerListener);if(!this.flags.isJoined){if(!this.joinPolling){this.joinPolling=new (this.getNpawReference()).Timer(this._jointimePolling.bind(this),500)};this.joinPolling.start()}",\n  "adapter,getIsLive":"var ret=null;if(this.player.mediainfo){ret=true;if(typeof this.player.mediainfo.duration===\'number\'){ret=(this.player.mediainfo.duration<1||this.player.mediainfo.duration===Infinity)}};if(this.player.duration&&(typeof this.player.duration===\'function\')){ret=true;var duration=this.player.duration();if(typeof duration===\'number\'){ret=(duration<1||duration===Infinity)}};if(this.player.isLive&&this.player.isLive===\'function\'){ret=this.player.isLive()};return ret",\n  "adapter,conditionalStop,e":"this.firePlayerLog(\'conditionalStop\',{});if(this.isInAds()){return};if(this.plugin){this.adsEnded=false;this.fireStop({},\'conditionalStop\');if(this.plugin&&!this.getVideo().options[\'content.id\']){this.getVideo().options[\'content.id\']=null};this.acumBytesFunc();this.lastPlayhead=undefined}",\n  "adapter,getTitle":"var ret=null;if(this.player.mediainfo){ret=this.player.mediainfo.name};return ret",\n  "adapter,getTotalBytes":"var ret=null;var tech=this.getUsedTech();if(tech&&tech.getTotalBytes){ret=tech.getTotalBytes(this)};return ret",\n  "adapter,registerListeners":"this.monitorPlayhead(false,false,1200);this.acumBytes=0;this.ignoreList=[];this.fatalList=[];this.nonFatalList=[];this.references={loadstart:this.loadstartListener.bind(this),adsready:this.loadAdsAdapter.bind(this),play:this.playListener.bind(this),timeupdate:this.timeupdateListener.bind(this),pause:this.pauseListener.bind(this),playing:this.playingListener.bind(this),ended:this.conditionalStop.bind(this),dispose:this.disposeListener.bind(this),seeking:this.seekingListener.bind(this),seeked:this.seekedListener.bind(this),error:this.errorListener.bind(this),adserror:this.aderrorListener.bind(this),adsEnded:this.adsEndedListener.bind(this),texttrackchange:this.textListener.bind(this),waiting:this.bufferingListener.bind(this)};if(this.player){for(var key in this.references){this.player.on(key,this.references[key])}};setTimeout(this.loadAdsAdapter.bind(this),50)",\n  "adapter,getResource":"var ret=null;var tech=this.getUsedTech();if(tech&&tech.getResource){ret=tech.getResource(this)};if(!ret){ret=this.player.currentSrc()};return ret",\n  "adapter,textListener,e":"if(this.player.textTracks){var tracks=this.player.textTracks();var len=tracks.length;for(var i=0;i<len;++i){if(tracks[i]&&tracks[i].mode===\'showing\'){this.getVideo().options[\'content.subtitles\']=tracks[i].label||tracks[i].language}}}",\n  "adapter,seekingListener,e":"this.firePlayerLog(\'seekingListener\',{});this.fireSeekBegin({},false,\'seekingListener\')",\n  "adapter,disposeListener,e":"this.firePlayerLog(\'disposeListener\',{});if(this.plugin){this.getVideo().fireStop({},\'disposeListener\');this.getVideo().removeAdsAdapter();this.getVideo().removeAdapter()}",\n  "adapter,loadstartListener,e":"this.firePlayerLog(\'loadstartListener\',{});this.loadAdsAdapter()",\n  "adapter,getPlayerName":"var name=\'videojs\';if(this.getAdapterClass(\'contribHlsTech\').isUsed(this)){name+=\'-hls\'}else if(this.getAdapterClass(\'hlsJsTech\').isUsed(this)){name+=\'-hlsjs\'}else if(this.getAdapterClass(\'shakaTech\').isUsed(this)){name+=\'-shaka\'}else if(this.getAdapterClass(\'dashShakaTech\').isUsed(this)){name+=\'-dash-shaka\'}else if(this.getAdapterClass(\'dashTech\').isUsed(this)){name+=\'-dash\'};if(this.player.FreeWheelPlugin){name+=\'-fw\'};if(this.player.mediainfo){name+=\'-bcove\'};return name",\n  "adapter,playingListener,e":"this.firePlayerLog(\'playingListener\',{});this._startEvent(\'playingListener\');this.fireResume({},\'playingListener\');if(this.getPlayhead()<1){this.fireSeekEnd({},\'playingListener\')};this.fireBufferEnd({},\'playingListener\')",\n  "adapter,getUsedTech":"var ret=null;if(this.getPlugin().getAdaptersProperties().usedTech){switch(this.getPlugin().getAdaptersProperties().usedTech.toLowerCase()){case\'hls\':if(this.getAdapterClass(\'contribHlsTech\').isUsed(this)){ret=this.getAdapterClass(\'contribHlsTech\')};break;case\'hlsjs\':if(this.getAdapterClass(\'hlsJsTech\').isUsed(this)){ret=this.getAdapterClass(\'hlsJsTech\')};break;case\'shaka\':if(this.getAdapterClass(\'shakaTech\').isUsed(this)){ret=this.getAdapterClass(\'shakaTech\')};break;case\'dashshaka\':if(this.getAdapterClass(\'dashShakaTech\').isUsed(this)){ret=this.getAdapterClass(\'dashShakaTech\')};break;case\'dash\':if(this.getAdapterClass(\'dashTech\').isUsed(this)){ret=this.getAdapterClass(\'dashTech\')};break};if(ret!=null){return ret}};if(this.getAdapterClass(\'contribHlsTech\').isUsed(this)){ret=this.getAdapterClass(\'contribHlsTech\')}else if(this.getAdapterClass(\'hlsJsTech\').isUsed(this)){ret=this.getAdapterClass(\'hlsJsTech\')}else if(this.getAdapterClass(\'shakaTech\').isUsed(this)){ret=this.getAdapterClass(\'shakaTech\')}else if(this.getAdapterClass(\'dashShakaTech\').isUsed(this)){ret=this.getAdapterClass(\'dashShakaTech\')}else if(this.getAdapterClass(\'dashTech\').isUsed(this)){ret=this.getAdapterClass(\'dashTech\')};return ret",\n  "adapter,errorListener,e":"this.firePlayerLog(\'errorListener\',{});var ignore=false;var fatal=false;var code=null;var msg=null;if(code!==null){if(this.ignoreList.includes(code)){ignore=true};if(!fatal&&this.fatalList.includes(code)){fatal=true}else if(fatal&&this.nonFatalList.includes(code)){fatal=false}};if(!ignore){if(fatal){this.fireFatalError(code,msg,undefined,undefined,\'errorListener\');this.acumBytesFunc();this.lastPlayhead=undefined;this.crashed=true}else{this.fireError(code,msg,undefined,undefined,\'errorListener\')}}"\n}',{"content.isLive":!0,"content.title":this.data.title});var P=localStorage.getItem("deviceDetails"),V=JSON.parse(P),ie=localStorage.getItem("tarilerplay");v.setOptions("1"==ie?1==this.data.is_group?{"content.isLive":!1,"content.title":`${this.data.series_title} ${this.data.season_title} Trailer`,"content.program":"Trailer","content.resource":this.data.url,"content.cdnNode":"nodeName","content.cdnType":1,"content.season":`${this.data.season_title}: ${this.data.series_title}`,"content.episodeTitle":`${this.data.episode_number} : ${this.data.title}`,"content.channel":"channel name","content.id":this.data.id,"content.type":this.data.categories,"content.genre":this.data.categories.meta_genre,"content.language":this.data.categories.meta_language,"content.subtitles":"unknown","content.contractedResolution":"unknown","content.drm":this.data.drm,"device.name":V.device_type,"device.model":V.make_model,"device.osName":V.os,"content.playbackType":"vod"}:{"content.isLive":!1,"content.title":`${this.data.title} Trailer`,"content.program":"Trailer","content.resource":this.data.url,"content.cdnNode":"nodeName","content.cdnType":1,"content.season":"","content.episodeTitle":"","content.channel":"channel name","content.id":this.data.id,"content.type":this.data.categories,"content.genre":this.data.categories.meta_genre,"content.language":this.data.categories.meta_language,"content.subtitles":"unknown","content.contractedResolution":"unknown","content.drm":this.data.drm,"device.name":V.device_type,"device.model":V.make_model,"device.osName":V.os,"content.playbackType":"vod"}:{"content.isLive":!1,"content.title":this.data.title,"content.program":this.data.categories,"content.resource":this.data.url,"content.cdnNode":"nodeName","content.cdnType":1,"content.season":`${this.data.season_title}: ${this.data.series_title}`,"content.episodeTitle":`${this.data.episode_number} : ${this.data.title}`,"content.channel":"channel name","content.id":this.data.id,"content.type":this.data.categories,"content.genre":this.data.categories.meta_genre,"content.language":this.data.categories.meta_language,"content.subtitles":"unknown","content.contractedResolution":"unknown","content.drm":this.data.drm,"device.name":V.device_type,"device.model":V.make_model,"device.osName":V.os,"content.playbackType":"vod"}),this.player.on("error",()=>{var ve=this.player.error_.code,Ve=this.player.error_.message;v.getAdapter().fireError(ve,Ve,Ve)}),this.networkConnectionService.connected$.subscribe(ve=>{this.connected=ve,0==this.connected&&v.getAdapter().fireFatalError("Connection Lost")})}ngOnChanges(v){v.data&&1==this.data.is_group&&null!=this.data.groupInfo&&0!=this.data.groupInfo.child.length&&(this.maxcounter=this.data.groupInfo.child[0].total_episode)}trackMe(v){this.userDetails=localStorage.getItem("taploginInfo")||"Free","Free"==this.userDetails?(this.userInfo=this.userDetails,gtag("event","Fullscreen Mode",{content_title:v})):(this.userInfo=JSON.parse(this.userDetails).id,gtag("event","Fullscreen Mode",{user_id:this.userInfo,content_title:v}))}npawEvent(v){if(null===localStorage.getItem("taploginInfo"))this.USER_ACCOUNT_id="unregitered user";else{const P=localStorage.getItem("taploginInfo");this.USER_ACCOUNT_id=JSON.parse(P)}dn.Log.logLevel=dn.Log.Level.VERBOSE;var w=new dn.Plugin({accountCode:"multitv","user.name":this.USER_ACCOUNT_id.id});w.appAnalytics.begin(),w.appAnalytics.fireSessionStart(),w.appAnalytics.fireEvent("Content-Stream",{Title:`${v}`},{foundItems:25})}ngOnDestroy(){$(".vjs-overlay").hide(),$(".trailerRemove").show(),this.player&&(localStorage.getItem("taploginInfo")&&1!=this.tarilerPlay&&this.analytics(),this.player.dispose())}}return m.\u0275fac=function(v){return new(v||m)(p.Y36(W.q),p.Y36(Vs.x0),p.Y36(Hs.c),p.Y36($s.D),p.Y36(Ws.n),p.Y36(xa.F0),p.Y36(j.uw),p.Y36(qs.n),p.Y36(zs.O))},m.\u0275cmp=p.Xpm({type:m,selectors:[["app-video-player"]],viewQuery:function(v,w){if(1&v&&(p.Gf(Gs,5),p.Gf(Ks,7)),2&v){let P;p.iGM(P=p.CRH())&&(w.slickModal=P.first),p.iGM(P=p.CRH())&&(w.target=P.first)}},inputs:{options:"options",data:"data",trailerUrlPlay:"trailerUrlPlay"},features:[p.TTD],decls:34,vars:8,consts:[[2,"height","100%","width","100%"],[2,"display","flex","width","100%","height","100%"],["id","ffffffffffffffffffffffff",4,"ngIf"],["contextmenu","false","id","video-player","data-setup","{}","preload","auto","playsinline","",1,"video-js","vjs-big-play-centered"],["target",""],["id","gggggggggggggggggggggggggg",4,"ngIf"],["id","astonband",4,"ngIf"],[1,"bit-main"],["id","bitrateLevels1",1,"hd-mode"],["id","quality1"],["id","quality2"],["id","quality3"],["id","quality4"],["id","quality5"],["id","quality6"],["id","quality7"],["id","quality8"],["id","quality9"],["id","quality10",1,"activeModeauto"],["class","episodeSelector",4,"ngIf"],[4,"ngIf"],["class","title",4,"ngIf"],["class","title1",4,"ngIf"],["class","title2",4,"ngIf"],["id","ffffffffffffffffffffffff"],["target","_blank",3,"href",4,"ngIf"],["height","100%","width","100%","alt","ALTT",3,"src"],["target","_blank",3,"href"],["id","gggggggggggggggggggggggggg"],["width","100%","height","100%","alt","ALTT",3,"src"],["id","astonband"],["target","_blank",2,"width","75%",3,"href"],["width","100%","height","100%","alt","ALTT",2,"margin","0 auto",3,"src"],["id","astoncancel","src","assets/svgs/playercross.svg","alt","",1,"astoncross",3,"click"],[1,"episodeSelector"],[1,"tabset-screen",2,"display","flex"],["class","tabset",3,"click",4,"ngFor","ngForOf"],[1,"crossepisode"],["src","assets/svgs/playercross.svg","alt","alt",3,"click"],[1,"tab-panels"],[1,"player-slick-carousel"],[1,"carousel",3,"config","init","breakpoint","afterChange","beforeChange"],["slickModal","slick-carousel"],["ngxSlickItem","","class","slide",4,"ngFor","ngForOf"],[1,"tabset",3,"click"],["type","radio","name","tabset","aria-controls","marzen",3,"id","checked"],[3,"for"],["ngxSlickItem","",1,"slide"],[1,"season-head-2"],[1,"season-head"],["alt","ALTBalaji","width","100%",1,"mySlidesMain",3,"src","click","error"],[1,"slide-para"],[1,"slide-para-2"],["class","ageshow",4,"ngIf"],[1,"ageshow"],["class","age",4,"ngIf"],[1,"age"],[1,"ua-p"],[1,"title"],[3,"click"],[1,"title1"],[1,"title2"]],template:function(v,w){1&v&&(p.TgZ(0,"div",0),p.TgZ(1,"div",1),p.YNc(2,Qs,3,2,"div",2),p._UZ(3,"video",3,4),p.qZA(),p.YNc(5,Zs,3,2,"div",5),p.YNc(6,eo,4,2,"div",6),p.qZA(),p.TgZ(7,"div",7),p.TgZ(8,"ul",8),p.TgZ(9,"li",9),p._uU(10," 144p "),p.qZA(),p.TgZ(11,"li",10),p._uU(12," 240p "),p.qZA(),p.TgZ(13,"li",11),p._uU(14," 360p "),p.qZA(),p.TgZ(15,"li",12),p._uU(16," 480p "),p.qZA(),p.TgZ(17,"li",13),p._uU(18," 540p "),p.qZA(),p.TgZ(19,"li",14),p._uU(20," 720pl "),p.qZA(),p.TgZ(21,"li",15),p._uU(22," 720ph "),p.qZA(),p.TgZ(23,"li",16),p._uU(24," 1080pl "),p.qZA(),p.TgZ(25,"li",17),p._uU(26," 1080ph "),p.qZA(),p.TgZ(27,"li",18),p._uU(28," Auto "),p.qZA(),p.qZA(),p.qZA(),p.YNc(29,ai,10,3,"div",19),p.YNc(30,Wn,2,1,"div",20),p.YNc(31,ro,3,1,"div",21),p.YNc(32,no,3,1,"div",22),p.YNc(33,ao,3,1,"div",23)),2&v&&(p.xp6(2),p.Q6J("ngIf",1==w.isSubsInfo&&null!=w.bandimage),p.xp6(3),p.Q6J("ngIf",1==w.isSubsInfo&&null!=w.bandimage),p.xp6(1),p.Q6J("ngIf",1==w.isSubsInfo&&null!=w.bandimage),p.xp6(23),p.Q6J("ngIf",null!=w.data.groupInfo),p.xp6(1),p.Q6J("ngIf",null!=w.ageshow),p.xp6(1),p.Q6J("ngIf",null!=w.data.skip_duration&&w.data.skip_duration.length&&1===w.data.skip_duration.length),p.xp6(1),p.Q6J("ngIf",null!=w.data.skip_duration&&w.data.skip_duration.length&&2===w.data.skip_duration.length),p.xp6(1),p.Q6J("ngIf",null!=w.data.skip_duration&&w.data.skip_duration.length&&3===w.data.skip_duration.length))},directives:[ae.O5,ae.sg,Hn.vE,Hn.Xg],styles:['span[_ngcontent-%COMP%]{border:1px solid white;opacity:.9;border-radius:3px;font-size:16px;font-family:GothamMedium!important}.season-head[_ngcontent-%COMP%]{font-size:14px;display:block}.season-head-2[_ngcontent-%COMP%]{font-size:16px;display:none}.slide-para-2[_ngcontent-%COMP%]{display:none}.age[_ngcontent-%COMP%]{position:absolute;top:24px;z-index:99;color:#fff;left:1%}#newElement[_ngcontent-%COMP%]{background-color:#2f312f;padding:40px 20px}.episodeSelector[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;z-index:999999999999999!important;color:#fff;width:100%;background:transparent linear-gradient(0deg,#2D2D2D 28%,#0A0A0A96 80%,#30303000 100%) 0% 0% no-repeat padding-box}.crossepisode[_ngcontent-%COMP%]{margin-top:20px;margin-right:20px;cursor:pointer;position:absolute;right:0;top:0;z-index:999}.crossepisode[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:18px}.title[_ngcontent-%COMP%], .title1[_ngcontent-%COMP%], .title2[_ngcontent-%COMP%]{display:none;position:absolute;z-index:99;width:100%;color:#fff;left:20px;bottom:80px}.title1[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .title2[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fff;opacity:.8;border:none;color:#000;padding:10px 25px;text-align:center;text-decoration:none;display:inline-block;font-size:20px;font-weight:bolder;border-radius:10px}.maintitle[_ngcontent-%COMP%]{position:absolute;top:4%;z-index:99;left:50%;text-transform:capitalize;color:#fff;font-size:23px;font-weight:bolder}.player-slick-carousel[_ngcontent-%COMP%]{position:relative;z-index:999999!important}.player-slick-carousel[_ngcontent-%COMP%]    {width:100%;overflow:hidden}.player-slick-carousel[_ngcontent-%COMP%]     .slick-arrow{z-index:9}.player-slick-carousel[_ngcontent-%COMP%]     .slick-slider .slide img.d-block.img-fluid.w-100.default-carousel-main{border-radius:10px}.player-slick-carousel[_ngcontent-%COMP%]     .slick-prev{margin-top:-19px;width:5%;left:0%;background:linear-gradient(to right,rgba(30,30,30,.9803921569) 70%,rgba(4,0,14,0) 100%,rgba(0,0,0,0) 189%);padding-top:5%;padding-bottom:5%;color:#72202000!important}.player-slick-carousel[_ngcontent-%COMP%]     .slick-next{margin-top:-19px;width:5%;right:0%;background:linear-gradient(to left,rgba(30,30,30,.9803921569) 45%,rgba(4,0,14,0) 100%,rgba(0,0,0,0) 100%);padding-top:5%;padding-bottom:5%;color:#72202000!important}.player-slick-carousel[_ngcontent-%COMP%]     .slick-next:before{content:url(/assets/svgs/right-arrow.svg)!important;position:absolute;right:20%;top:42%}.player-slick-carousel[_ngcontent-%COMP%]     .slick-prev:before{background-color:transparent;content:url(/assets/svgs/left-arrow.svg)!important;position:absolute;left:20%;top:42%}.player-slick-carousel[_ngcontent-%COMP%]     .mySlidesMain{border:1px solid #FFFFFF85;border-radius:4px;cursor:pointer}.player-slick-carousel[_ngcontent-%COMP%]     .slick-list{padding:0!important}.player-slick-carousel[_ngcontent-%COMP%]     .slick-dots{bottom:-38px}.player-slick-carousel[_ngcontent-%COMP%]     .slick-slide{margin:0 3px}.player-slick-carousel[_ngcontent-%COMP%]     .slick-list{margin:0 3px}.player-slick-carousel[_ngcontent-%COMP%]     .slick-dots li button{border:0!important;background:#fafafa!important;display:block!important;width:8px;height:8px;outline:none!important;line-height:0px!important;border-radius:10px!important;font-size:0px!important;color:transparent!important;padding:5px!important;cursor:pointer!important;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.player-slick-carousel[_ngcontent-%COMP%]     .slick-dots li.slick-active button:before{color:green;background:#ff112c;width:23px;height:10px;content:"";border-radius:8px;opacity:1}.player-slick-carousel[_ngcontent-%COMP%]     .slick-dots li{position:relative!important}.player-slick-carousel[_ngcontent-%COMP%]     .slick-dots li.slick-active button{height:0;width:23px}.player-slick-carousel[_ngcontent-%COMP%]     .slick-dots li.slick button{height:0}.player-slick-carousel[_ngcontent-%COMP%]     .slick-dots li button:before{color:transparent}.slide[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#ff9401;font-family:GothamLight;font-size:12px;position:relative;top:8px}.title[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fff;opacity:.8;border:none;color:#000;padding:10px 25px;text-align:center;text-decoration:none;display:inline-block;font-size:20px;font-weight:bolder;border-radius:10px}.vjs-overlay[_ngcontent-%COMP%]   .vjs-overlay-center[_ngcontent-%COMP%]   .vjs-overlay-background[_ngcontent-%COMP%]{display:none!important}.slick-card-carousel[_ngcontent-%COMP%]{position:absolute;bottom:5%;color:#fff;z-index:99}.episodeSelector[_ngcontent-%COMP%]   .tabset[_ngcontent-%COMP%] > input[type=radio][_ngcontent-%COMP%]{position:absolute;left:-200vw}.episodeSelector[_ngcontent-%COMP%]   .tabset[_ngcontent-%COMP%]   .tab-panel[_ngcontent-%COMP%]{display:none}.episodeSelector[_ngcontent-%COMP%]   .tabset[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]:first-child:checked ~ .tab-panels[_ngcontent-%COMP%] > .tab-panel[_ngcontent-%COMP%]:first-child, .episodeSelector[_ngcontent-%COMP%]   .tabset[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]:nth-child(3):checked ~ .tab-panels[_ngcontent-%COMP%] > .tab-panel[_ngcontent-%COMP%]:nth-child(2), .episodeSelector[_ngcontent-%COMP%]   .tabset[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]:nth-child(5):checked ~ .tab-panels[_ngcontent-%COMP%] > .tab-panel[_ngcontent-%COMP%]:nth-child(3), .episodeSelector[_ngcontent-%COMP%]   .tabset[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]:nth-child(7):checked ~ .tab-panels[_ngcontent-%COMP%] > .tab-panel[_ngcontent-%COMP%]:nth-child(4), .episodeSelector[_ngcontent-%COMP%]   .tabset[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]:nth-child(9):checked ~ .tab-panels[_ngcontent-%COMP%] > .tab-panel[_ngcontent-%COMP%]:nth-child(5), .episodeSelector.tabset[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]:nth-child(11):checked ~ .tab-panels[_ngcontent-%COMP%] > .tab-panel[_ngcontent-%COMP%]:nth-child(6){display:block}.episodeSelector[_ngcontent-%COMP%]{display:none}.episodeSelector[_ngcontent-%COMP%]   .tabset[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{display:inline-block;padding:5px 20px;border:3px solid transparent;border-bottom:0;cursor:pointer;font-weight:600;position:relative;top:9px}.tabset[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{font-family:GOTHAMBOLD;font-size:24px}.epis-1[_ngcontent-%COMP%]{width:15%}.slide[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.slide-para[_ngcontent-%COMP%]{display:block;font-size:12px;font-family:GothamLight!important;color:#b4b4b4;font-weight:600;width:95%;margin:14px 0!important}.slide-heading[_ngcontent-%COMP%]{text-transform:capitalize;font-size:16px;font: 16px/107px Gotham HTF;letter-spacing:0px;font-weight:700}.perent-episode[_ngcontent-%COMP%]{display:flex}.tabset[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{border-bottom:3px solid #fff;margin-bottom:7px}.tabset-screen[_ngcontent-%COMP%]{display:flex;border-bottom:2px solid #9b9b9b;position:relative;top:-20px}.tab-panel[_ngcontent-%COMP%]{padding:15px 0;border-top:3px solid #847e7e}h6[_ngcontent-%COMP%]{font-family:GothamMedium!important}@media screen and (max-width: 992px){.tabset[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{font-family:GOTHAMBOLD;font-size:10px}.crossepisode[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:14px}.crossepisode[_ngcontent-%COMP%]{margin-top:-6px;margin-right:4px}span[_ngcontent-%COMP%]{border:1px solid white;opacity:.9;border-radius:3px;font-size:12px;font-family:GothamMedium!important}.age[_ngcontent-%COMP%]{top:6px!important}.season-head[_ngcontent-%COMP%]{font-size:12px!important;display:none!important}.season-head-2[_ngcontent-%COMP%]{font-size:12px!important;display:block!important}.slide-para[_ngcontent-%COMP%]{display:none!important}.slide-para-2[_ngcontent-%COMP%]{font-size:12px;font-family:GothamLight;display:block!important;color:#b4b4b4;font-weight:600;width:95%;margin:14px 0!important}}.my-class[_ngcontent-%COMP%]{display:none!important}.ua-p[_ngcontent-%COMP%]{margin:0;color:#fff!important;font-weight:700;padding:4px 8px}#astonband[_ngcontent-%COMP%]{display:none}.astoncross[_ngcontent-%COMP%]{position:absolute;right:11.5%;top:-15%;width:.9%;cursor:pointer}@media only screen and (max-width:920px){.astoncross[_ngcontent-%COMP%]{width:2%;top:-33%;right:10%}}']}),m})();var qn=J(8642);let oo=(()=>{class m{constructor(v,w,P,V){this.dialogRef=v,this.data=w,this.location=P,this.ed=V,this.videoJsOptions={withCredentials:!0,controls:!0,loadingSpinner:!0,plugins:{seekButtons:{forward:10,back:10}},fill:!0,height:"620",liveui:!0,width:"1280",sources:[{src:this.data.url.url}],inactivityTimeout:0,userActions:{doubleClick:!0,hotkeys:function(ie){38===ie.which&&this.volume(this.volume()+.2),40===ie.which&&this.volume(this.volume()-.2),39===ie.which&&this.currentTime(this.currentTime()+10),37===ie.which&&this.currentTime(this.currentTime()-10),77===ie.which&&(this.muted()?this.muted(!1):this.muted(!0)),32===ie.which&&(this.paused()?this.play():this.pause())}}}}ngOnInit(){this.test=this.data,"1"==this.test.trailerUrlPlay&&(this.testData=this.test.trailerUrlPlay),setTimeout(()=>{$(".close-btn").appendTo($("#video-player"))},1e3)}close(){$(".vjs-overlay").hide(),this.dialogRef.close(),this.ed.pauseDetailVideo.next(!1),localStorage.setItem("tarilerplay","0"),this.npawEvent(),localStorage.removeItem("getOrder")}npawEvent(){qn.Log.logLevel=qn.Log.Level.VERBOSE;var v=new qn.Plugin({accountCode:"multitv","user.name":"103"});v.appAnalytics.begin(),v.appAnalytics.fireSessionStart(),v.appAnalytics.fireEvent("Completion-watch")}}return m.\u0275fac=function(v){return new(v||m)(p.Y36(j.so),p.Y36(j.WI),p.Y36(ae.Ye),p.Y36(W.q))},m.\u0275cmp=p.Xpm({type:m,selectors:[["app-videojs-dialog"]],decls:5,vars:3,consts:[["fxLayout","column","fxLayoutGap","10px"],[1,"popup"],[1,"close-btn",3,"click"],["src","assets/svgs/playercross.svg","alt","ALTBalaji"],[3,"options","data","trailerUrlPlay"]],template:function(v,w){1&v&&(p.TgZ(0,"div",0),p.TgZ(1,"div",1),p.TgZ(2,"div",2),p.NdJ("click",function(){return w.close()}),p._UZ(3,"img",3),p.qZA(),p._UZ(4,"app-video-player",4),p.qZA(),p.qZA()),2&v&&(p.xp6(4),p.Q6J("options",w.videoJsOptions)("data",w.data.url)("trailerUrlPlay",w.testData))},directives:[so],styles:[".close-btn[_ngcontent-%COMP%]{position:absolute;top:4%;right:3%;z-index:11;cursor:pointer;color:#fff}.close-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%}@media screen and (max-width: 532px){.close-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:65%!important;position:relative;bottom:6px;left:9px}}"]}),m})()},6442:(at,je,J)=>{"use strict";J.d(je,{M:()=>j});const j=videojs},3992:(at,je,J)=>{"use strict";var j=J(9226);at.exports=function(he,z){return void 0===z&&(z=!1),function(ee,X,Y){if(ee)he(ee);else if(X.statusCode>=400&&X.statusCode<=599){var U=Y;if(z)if(j.TextDecoder){var Me=function ae(W){return void 0===W&&(W=""),W.toLowerCase().split(";").reduce(function(he,z){var ee=z.split("="),Y=ee[1];return"charset"===ee[0].trim()?Y.trim():he},"utf-8")}(X.headers&&X.headers["content-type"]);try{U=new TextDecoder(Me).decode(Y)}catch(Z){}}else U=String.fromCharCode.apply(null,new Uint8Array(Y));he({cause:U})}else he(null,Y)}}},745:(at,je,J)=>{"use strict";var j=J(9226),p=J(434),ae=J(2703);function ee(Z,Be,it){var ft=Z;return ae(Be)?(it=Be,"string"==typeof Z&&(ft={uri:Z})):ft=p({},Be,{uri:Z}),ft.callback=it,ft}function X(Z,Be,it){return Y(Be=ee(Z,Be,it))}function Y(Z){if(void 0===Z.callback)throw new Error("callback argument missing");var Be=!1,it=function(Se,xe,Ke){Be||(Be=!0,Z.callback(Se,xe,Ke))};function Ye(){var se=void 0;if(se=Ae.response?Ae.response:Ae.responseText||function U(Z){try{if("document"===Z.responseType)return Z.responseXML;if(""===Z.responseType&&(!Z.responseXML||"parsererror"!==Z.responseXML.documentElement.nodeName))return Z.responseXML}catch(it){}return null}(Ae),O)try{se=JSON.parse(se)}catch(Se){}return se}function de(se){return clearTimeout(G),se instanceof Error||(se=new Error(""+(se||"Unknown XMLHttpRequest Error"))),se.statusCode=0,it(se,ye)}function We(){if(!Te){var se;clearTimeout(G);var Se=ye,xe=null;return 0!==(se=Z.useXDR&&void 0===Ae.status?200:1223===Ae.status?204:Ae.status)?(Se={body:Ye(),statusCode:se,method:be,headers:{},url:ue,rawRequest:Ae},Ae.getAllResponseHeaders&&(Se.headers=function(Be){var it={};return Be&&Be.trim().split("\n").forEach(function(ft){var Ye=ft.indexOf(":"),de=ft.slice(0,Ye).trim().toLowerCase(),We=ft.slice(Ye+1).trim();void 0===it[de]?it[de]=We:Array.isArray(it[de])?it[de].push(We):it[de]=[it[de],We]}),it}(Ae.getAllResponseHeaders()))):xe=new Error("Internal XMLHttpRequest Error"),it(xe,Se,Se.body)}}var Ae=Z.xhr||null;Ae||(Ae=Z.cors||Z.useXDR?new X.XDomainRequest:new X.XMLHttpRequest);var De,Te,G,ue=Ae.url=Z.uri||Z.url,be=Ae.method=Z.method||"GET",Ne=Z.body||Z.data,_e=Ae.headers=Z.headers||{},k=!!Z.sync,O=!1,ye={body:void 0,headers:{},statusCode:0,method:be,url:ue,rawRequest:Ae};if("json"in Z&&!1!==Z.json&&(O=!0,_e.accept||_e.Accept||(_e.Accept="application/json"),"GET"!==be&&"HEAD"!==be&&(_e["content-type"]||_e["Content-Type"]||(_e["Content-Type"]="application/json"),Ne=JSON.stringify(!0===Z.json?Ne:Z.json))),Ae.onreadystatechange=function ft(){4===Ae.readyState&&setTimeout(We,0)},Ae.onload=We,Ae.onerror=de,Ae.onprogress=function(){},Ae.onabort=function(){Te=!0},Ae.ontimeout=de,Ae.open(be,ue,!k,Z.username,Z.password),k||(Ae.withCredentials=!!Z.withCredentials),!k&&Z.timeout>0&&(G=setTimeout(function(){if(!Te){Te=!0,Ae.abort("timeout");var se=new Error("XMLHttpRequest timeout");se.code="ETIMEDOUT",de(se)}},Z.timeout)),Ae.setRequestHeader)for(De in _e)_e.hasOwnProperty(De)&&Ae.setRequestHeader(De,_e[De]);else if(Z.headers&&!function z(Z){for(var Be in Z)if(Z.hasOwnProperty(Be))return!1;return!0}(Z.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in Z&&(Ae.responseType=Z.responseType),"beforeSend"in Z&&"function"==typeof Z.beforeSend&&Z.beforeSend(Ae),Ae.send(Ne||null),Ae}X.httpHandler=J(3992),at.exports=X,at.exports.default=X,X.XMLHttpRequest=j.XMLHttpRequest||function Me(){},X.XDomainRequest="withCredentials"in new X.XMLHttpRequest?X.XMLHttpRequest:j.XDomainRequest,function he(Z,Be){for(var it=0;it<Z.length;it++)Be(Z[it])}(["get","put","post","patch","head","delete"],function(Z){X["delete"===Z?"del":Z]=function(Be,it,ft){return(it=ee(Be,it,ft)).method=Z.toUpperCase(),Y(it)}})},9401:(at,je)=>{"use strict";function j(W,he){return void 0===he&&(he=Object),he&&"function"==typeof he.freeze?he.freeze(W):W}var p=j({HTML:"text/html",isHTML:function(W){return W===p.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),ae=j({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(W){return W===ae.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});je.find=function J(W,he,z){if(void 0===z&&(z=Array.prototype),W&&"function"==typeof z.find)return z.find.call(W,he);for(var ee=0;ee<W.length;ee++)if(Object.prototype.hasOwnProperty.call(W,ee)){var X=W[ee];if(he.call(void 0,X,ee,W))return X}},je.freeze=j,je.MIME_TYPE=p,je.NAMESPACE=ae},1991:(at,je,J)=>{var p=J(9401),ae=J(6853),W=J(4436),he=J(8702),z=ae.DOMImplementation,ee=p.NAMESPACE,X=he.ParseError,Y=he.XMLReader;function U(de){this.options=de||{locator:{}}}function Z(){this.cdata=!1}function Be(de,We){We.lineNumber=de.lineNumber,We.columnNumber=de.columnNumber}function it(de){if(de)return"\n@"+(de.systemId||"")+"#[line:"+de.lineNumber+",col:"+de.columnNumber+"]"}function ft(de,We,Ae){return"string"==typeof de?de.substr(We,Ae):de.length>=We+Ae||We?new java.lang.String(de,We,Ae)+"":de}function Ye(de,We){de.currentElement?de.currentElement.appendChild(We):de.doc.appendChild(We)}U.prototype.parseFromString=function(de,We){var Ae=this.options,De=new Y,Te=Ae.domBuilder||new Z,ue=Ae.errorHandler,be=Ae.locator,Ne=Ae.xmlns||{},_e=/\/x?html?$/.test(We),k=_e?W.HTML_ENTITIES:W.XML_ENTITIES;return be&&Te.setDocumentLocator(be),De.errorHandler=function Me(de,We,Ae){if(!de){if(We instanceof Z)return We;de=We}var De={},Te=de instanceof Function;function ue(be){var Ne=de[be];!Ne&&Te&&(Ne=2==de.length?function(_e){de(be,_e)}:de),De[be]=Ne&&function(_e){Ne("[xmldom "+be+"]\t"+_e+it(Ae))}||function(){}}return Ae=Ae||{},ue("warning"),ue("error"),ue("fatalError"),De}(ue,Te,be),De.domBuilder=Ae.domBuilder||Te,_e&&(Ne[""]=ee.HTML),Ne.xml=Ne.xml||ee.XML,de&&"string"==typeof de?De.parse(de,Ne,k):De.errorHandler.error("invalid doc source"),Te.doc},Z.prototype={startDocument:function(){this.doc=(new z).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(de,We,Ae,De){var Te=this.doc,ue=Te.createElementNS(de,Ae||We),be=De.length;Ye(this,ue),this.currentElement=ue,this.locator&&Be(this.locator,ue);for(var Ne=0;Ne<be;Ne++){de=De.getURI(Ne);var _e=De.getValue(Ne),k=(Ae=De.getQName(Ne),Te.createAttributeNS(de,Ae));this.locator&&Be(De.getLocator(Ne),k),k.value=k.nodeValue=_e,ue.setAttributeNode(k)}},endElement:function(de,We,Ae){this.currentElement=this.currentElement.parentNode},startPrefixMapping:function(de,We){},endPrefixMapping:function(de){},processingInstruction:function(de,We){var Ae=this.doc.createProcessingInstruction(de,We);this.locator&&Be(this.locator,Ae),Ye(this,Ae)},ignorableWhitespace:function(de,We,Ae){},characters:function(de,We,Ae){if(de=ft.apply(this,arguments)){if(this.cdata)var De=this.doc.createCDATASection(de);else De=this.doc.createTextNode(de);this.currentElement?this.currentElement.appendChild(De):/^\s*$/.test(de)&&this.doc.appendChild(De),this.locator&&Be(this.locator,De)}},skippedEntity:function(de){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(de){(this.locator=de)&&(de.lineNumber=0)},comment:function(de,We,Ae){de=ft.apply(this,arguments);var De=this.doc.createComment(de);this.locator&&Be(this.locator,De),Ye(this,De)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(de,We,Ae){var De=this.doc.implementation;if(De&&De.createDocumentType){var Te=De.createDocumentType(de,We,Ae);this.locator&&Be(this.locator,Te),Ye(this,Te),this.doc.doctype=Te}},warning:function(de){console.warn("[xmldom warning]\t"+de,it(this.locator))},error:function(de){console.error("[xmldom error]\t"+de,it(this.locator))},fatalError:function(de){throw new X(de,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(de){Z.prototype[de]=function(){return null}}),je.DOMParser=U},6853:(at,je,J)=>{var j=J(9401),p=j.find,ae=j.NAMESPACE;function W(S){return""!==S}function z(S,C){return S.hasOwnProperty(C)||(S[C]=!0),S}function ee(S){if(!S)return[];var C=function he(S){return S?S.split(/[\t\n\f\r ]+/).filter(W):[]}(S);return Object.keys(C.reduce(z,{}))}function Y(S,C){for(var N in S)Object.prototype.hasOwnProperty.call(S,N)&&(C[N]=S[N])}function U(S,C){var N=S.prototype;if(!(N instanceof C)){let pe=function(){};pe.prototype=C.prototype,pe=new pe,Y(N,pe),S.prototype=N=pe}N.constructor!=S&&("function"!=typeof S&&console.error("unknown Class:"+S),N.constructor=S)}var Me={},Z=Me.ELEMENT_NODE=1,Be=Me.ATTRIBUTE_NODE=2,it=Me.TEXT_NODE=3,ft=Me.CDATA_SECTION_NODE=4,Ye=Me.ENTITY_REFERENCE_NODE=5,de=Me.ENTITY_NODE=6,We=Me.PROCESSING_INSTRUCTION_NODE=7,Ae=Me.COMMENT_NODE=8,De=Me.DOCUMENT_NODE=9,Te=Me.DOCUMENT_TYPE_NODE=10,ue=Me.DOCUMENT_FRAGMENT_NODE=11,be=Me.NOTATION_NODE=12,Ne={},_e={},G=(Ne.INDEX_SIZE_ERR=(_e[1]="Index size error",1),Ne.DOMSTRING_SIZE_ERR=(_e[2]="DOMString size error",2),Ne.HIERARCHY_REQUEST_ERR=(_e[3]="Hierarchy request error",3)),Ke=(Ne.WRONG_DOCUMENT_ERR=(_e[4]="Wrong document",4),Ne.INVALID_CHARACTER_ERR=(_e[5]="Invalid character",5),Ne.NO_DATA_ALLOWED_ERR=(_e[6]="No data allowed",6),Ne.NO_MODIFICATION_ALLOWED_ERR=(_e[7]="No modification allowed",7),Ne.NOT_FOUND_ERR=(_e[8]="Not found",8)),ge=(Ne.NOT_SUPPORTED_ERR=(_e[9]="Not supported",9),Ne.INUSE_ATTRIBUTE_ERR=(_e[10]="Attribute in use",10));function we(S,C){if(C instanceof Error)var N=C;else N=this,Error.call(this,_e[S]),this.message=_e[S],Error.captureStackTrace&&Error.captureStackTrace(this,we);return N.code=S,C&&(this.message=this.message+": "+C),N}function et(){}function mt(S,C){this._node=S,this._refresh=C,_t(this)}function _t(S){var C=S._node._inc||S._node.ownerDocument._inc;if(S._inc!=C){var N=S._refresh(S._node);Pr(S,"length",N.length),Y(N,S),S._inc=C}}function Ct(){}function wt(S,C){for(var N=S.length;N--;)if(S[N]===C)return N}function Wt(S,C,N,K){if(K?C[wt(C,K)]=N:C[C.length++]=N,S){N.ownerElement=S;var pe=S.ownerDocument;pe&&(K&&xr(pe,S,K),function Sr(S,C,N){S&&S._inc++,N.namespaceURI===ae.XMLNS&&(C._nsMap[N.prefix?N.localName:""]=N.value)}(pe,S,N))}}function ii(S,C,N){var K=wt(C,N);if(!(K>=0))throw new we(Ke,new Error(S.tagName+"@"+N));for(var pe=C.length-1;K<pe;)C[K]=C[++K];if(C.length=pe,S){var st=S.ownerDocument;st&&(xr(st,S,N),N.ownerElement=null)}}function Pi(){}function pt(){}function Bt(S){return("<"==S?"&lt;":">"==S&&"&gt;")||"&"==S&&"&amp;"||'"'==S&&"&quot;"||"&#"+S.charCodeAt()+";"}function ci(S,C){if(C(S))return!0;if(S=S.firstChild)do{if(ci(S,C))return!0}while(S=S.nextSibling)}function Tt(){this.ownerDocument=this}function xr(S,C,N,K){S&&S._inc++,N.namespaceURI===ae.XMLNS&&delete C._nsMap[N.prefix?N.localName:""]}function Ni(S,C,N){if(S&&S._inc){S._inc++;var K=C.childNodes;if(N)K[K.length++]=N;else{for(var pe=C.firstChild,st=0;pe;)K[st++]=pe,pe=pe.nextSibling;K.length=st,delete K[K.length]}}}function nr(S,C){var N=C.previousSibling,K=C.nextSibling;return N?N.nextSibling=K:S.firstChild=K,K?K.previousSibling=N:S.lastChild=N,C.parentNode=null,C.previousSibling=null,C.nextSibling=null,Ni(S.ownerDocument,S),C}function hi(S){return S&&S.nodeType===pt.DOCUMENT_TYPE_NODE}function mi(S){return S&&S.nodeType===pt.ELEMENT_NODE}function Nr(S){return S&&S.nodeType===pt.TEXT_NODE}function rt(S,C){var N=S.childNodes||[];if(p(N,mi)||hi(C))return!1;var K=p(N,hi);return!(C&&K&&N.indexOf(K)>N.indexOf(C))}function Un(S,C){var N=S.childNodes||[];if(p(N,function K(st){return mi(st)&&st!==C}))return!1;var pe=p(N,hi);return!(C&&pe&&N.indexOf(pe)>N.indexOf(C))}function Gt(S,C,N){var K=S.childNodes||[],pe=C.childNodes||[];if(C.nodeType===pt.DOCUMENT_FRAGMENT_NODE){var st=pe.filter(mi);if(st.length>1||p(pe,Nr))throw new we(G,"More than one element or text in fragment");if(1===st.length&&!rt(S,N))throw new we(G,"Element in fragment can not be inserted before doctype")}if(mi(C)&&!rt(S,N))throw new we(G,"Only one element can be added and only after doctype");if(hi(C)){if(p(K,hi))throw new we(G,"Only one doctype is allowed");var St=p(K,mi);if(N&&K.indexOf(St)<K.indexOf(N))throw new we(G,"Doctype can only be inserted before an element");if(!N&&St)throw new we(G,"Doctype can not be appended since element is present")}}function Cr(S,C,N){var K=S.childNodes||[],pe=C.childNodes||[];if(C.nodeType===pt.DOCUMENT_FRAGMENT_NODE){var st=pe.filter(mi);if(st.length>1||p(pe,Nr))throw new we(G,"More than one element or text in fragment");if(1===st.length&&!Un(S,N))throw new we(G,"Element in fragment can not be inserted before doctype")}if(mi(C)&&!Un(S,N))throw new we(G,"Only one element can be added and only after doctype");if(hi(C)){if(p(K,function(yi){return hi(yi)&&yi!==N}))throw new we(G,"Only one doctype is allowed");var St=p(K,mi);if(N&&K.indexOf(St)<K.indexOf(N))throw new we(G,"Doctype can only be inserted before an element")}}function ar(S,C,N,K){(function ba(S,C,N){if(!function kt(S){return S&&(S.nodeType===pt.DOCUMENT_NODE||S.nodeType===pt.DOCUMENT_FRAGMENT_NODE||S.nodeType===pt.ELEMENT_NODE)}(S))throw new we(G,"Unexpected parent node type "+S.nodeType);if(N&&N.parentNode!==S)throw new we(Ke,"child not in parent");if(!function ri(S){return S&&(mi(S)||Nr(S)||hi(S)||S.nodeType===pt.DOCUMENT_FRAGMENT_NODE||S.nodeType===pt.COMMENT_NODE||S.nodeType===pt.PROCESSING_INSTRUCTION_NODE)}(C)||hi(C)&&S.nodeType!==pt.DOCUMENT_NODE)throw new we(G,"Unexpected node type "+C.nodeType+" for parent node type "+S.nodeType)})(S,C,N),S.nodeType===pt.DOCUMENT_NODE&&(K||Gt)(S,C,N);var pe=C.parentNode;if(pe&&pe.removeChild(C),C.nodeType===ue){var st=C.firstChild;if(null==st)return C;var St=C.lastChild}else st=St=C;var ni=N?N.previousSibling:S.lastChild;st.previousSibling=ni,St.nextSibling=N,ni?ni.nextSibling=st:S.firstChild=st,null==N?S.lastChild=St:N.previousSibling=St;do{st.parentNode=S}while(st!==St&&(st=st.nextSibling));return Ni(S.ownerDocument||S,S),C.nodeType==ue&&(C.firstChild=C.lastChild=null),C}function Qi(){this._nsMap={}}function sr(){}function Er(){}function ct(){}function ht(){}function Fr(){}function bt(){}function jn(){}function Vn(){}function Br(){}function Ar(){}function on(){}function Ur(){}function Yt(S,C){var N=[],K=9==this.nodeType&&this.documentElement||this,pe=K.prefix,st=K.namespaceURI;if(st&&null==pe&&null==(pe=K.lookupPrefix(st)))var St=[{namespace:st,prefix:null}];return Ii(this,N,S,C,St),N.join("")}function jr(S,C,N){var K=S.prefix||"",pe=S.namespaceURI;if(!pe||"xml"===K&&pe===ae.XML||pe===ae.XMLNS)return!1;for(var st=N.length;st--;){var St=N[st];if(St.prefix===K)return St.namespace!==pe}return!0}function Vr(S,C,N){S.push(" ",C,'="',N.replace(/[<&"]/g,Bt),'"')}function Ii(S,C,N,K,pe){if(pe||(pe=[]),K){if(!(S=K(S)))return;if("string"==typeof S)return void C.push(S)}switch(S.nodeType){case Z:var st=S.attributes,St=st.length,jt=S.firstChild,ni=S.tagName,vi=ni;if(!(N=ae.isHTML(S.namespaceURI)||N)&&!S.prefix&&S.namespaceURI){for(var yi,Li=0;Li<st.length;Li++)if("xmlns"===st.item(Li).name){yi=st.item(Li).value;break}if(!yi)for(var Fi=pe.length-1;Fi>=0;Fi--)if(""===(Bi=pe[Fi]).prefix&&Bi.namespace===S.namespaceURI){yi=Bi.namespace;break}if(yi!==S.namespaceURI)for(Fi=pe.length-1;Fi>=0;Fi--){var Bi;if((Bi=pe[Fi]).namespace===S.namespaceURI){Bi.prefix&&(vi=Bi.prefix+":"+ni);break}}}C.push("<",vi);for(var $i=0;$i<St;$i++)"xmlns"==(_i=st.item($i)).prefix?pe.push({prefix:_i.localName,namespace:_i.value}):"xmlns"==_i.nodeName&&pe.push({prefix:"",namespace:_i.value});for($i=0;$i<St;$i++){var _i,Wi,or;jr(_i=st.item($i),0,pe)&&(Vr(C,(Wi=_i.prefix||"")?"xmlns:"+Wi:"xmlns",or=_i.namespaceURI),pe.push({prefix:Wi,namespace:or})),Ii(_i,C,N,K,pe)}if(ni===vi&&jr(S,0,pe)&&(Vr(C,(Wi=S.prefix||"")?"xmlns:"+Wi:"xmlns",or=S.namespaceURI),pe.push({prefix:Wi,namespace:or})),jt||N&&!/^(?:meta|link|img|br|hr|input)$/i.test(ni)){if(C.push(">"),N&&/^script$/i.test(ni))for(;jt;)jt.data?C.push(jt.data):Ii(jt,C,N,K,pe.slice()),jt=jt.nextSibling;else for(;jt;)Ii(jt,C,N,K,pe.slice()),jt=jt.nextSibling;C.push("</",vi,">")}else C.push("/>");return;case De:case ue:for(jt=S.firstChild;jt;)Ii(jt,C,N,K,pe.slice()),jt=jt.nextSibling;return;case Be:return Vr(C,S.name,S.value);case it:return C.push(S.data.replace(/[<&]/g,Bt).replace(/]]>/g,"]]&gt;"));case ft:return C.push("<![CDATA[",S.data,"]]>");case Ae:return C.push("\x3c!--",S.data,"--\x3e");case Te:var wr=S.publicId,Ui=S.systemId;if(C.push("<!DOCTYPE ",S.name),wr)C.push(" PUBLIC ",wr),Ui&&"."!=Ui&&C.push(" ",Ui),C.push(">");else if(Ui&&"."!=Ui)C.push(" SYSTEM ",Ui,">");else{var ln=S.internalSubset;ln&&C.push(" [",ln,"]"),C.push(">")}return;case We:return C.push("<?",S.target," ",S.data,"?>");case Ye:return C.push("&",S.nodeName,";");default:C.push("??",S.nodeName)}}function Hr(S,C,N){var K;switch(C.nodeType){case Z:(K=C.cloneNode(!1)).ownerDocument=S;case ue:break;case Be:N=!0}if(K||(K=C.cloneNode(!1)),K.ownerDocument=S,K.parentNode=null,N)for(var pe=C.firstChild;pe;)K.appendChild(Hr(S,pe,N)),pe=pe.nextSibling;return K}function $r(S,C,N){var K=new C.constructor;for(var pe in C)if(Object.prototype.hasOwnProperty.call(C,pe)){var st=C[pe];"object"!=typeof st&&st!=K[pe]&&(K[pe]=st)}switch(C.childNodes&&(K.childNodes=new et),K.ownerDocument=S,K.nodeType){case Z:var St=C.attributes,ni=K.attributes=new Ct,vi=St.length;ni._ownerElement=K;for(var yi=0;yi<vi;yi++)K.setAttributeNode($r(S,St.item(yi),!0));break;case Be:N=!0}if(N)for(var Li=C.firstChild;Li;)K.appendChild($r(S,Li,N)),Li=Li.nextSibling;return K}function Pr(S,C,N){S[C]=N}Ne.INVALID_STATE_ERR=(_e[11]="Invalid state",11),Ne.SYNTAX_ERR=(_e[12]="Syntax error",12),Ne.INVALID_MODIFICATION_ERR=(_e[13]="Invalid modification",13),Ne.NAMESPACE_ERR=(_e[14]="Invalid namespace",14),Ne.INVALID_ACCESS_ERR=(_e[15]="Invalid access",15),we.prototype=Error.prototype,Y(Ne,we),et.prototype={length:0,item:function(S){return this[S]||null},toString:function(S,C){for(var N=[],K=0;K<this.length;K++)Ii(this[K],N,S,C);return N.join("")},filter:function(S){return Array.prototype.filter.call(this,S)},indexOf:function(S){return Array.prototype.indexOf.call(this,S)}},mt.prototype.item=function(S){return _t(this),this[S]},U(mt,et),Ct.prototype={length:0,item:et.prototype.item,getNamedItem:function(S){for(var C=this.length;C--;){var N=this[C];if(N.nodeName==S)return N}},setNamedItem:function(S){var C=S.ownerElement;if(C&&C!=this._ownerElement)throw new we(ge);var N=this.getNamedItem(S.nodeName);return Wt(this._ownerElement,this,S,N),N},setNamedItemNS:function(S){var N,C=S.ownerElement;if(C&&C!=this._ownerElement)throw new we(ge);return N=this.getNamedItemNS(S.namespaceURI,S.localName),Wt(this._ownerElement,this,S,N),N},removeNamedItem:function(S){var C=this.getNamedItem(S);return ii(this._ownerElement,this,C),C},removeNamedItemNS:function(S,C){var N=this.getNamedItemNS(S,C);return ii(this._ownerElement,this,N),N},getNamedItemNS:function(S,C){for(var N=this.length;N--;){var K=this[N];if(K.localName==C&&K.namespaceURI==S)return K}return null}},Pi.prototype={hasFeature:function(S,C){return!0},createDocument:function(S,C,N){var K=new Tt;if(K.implementation=this,K.childNodes=new et,K.doctype=N||null,N&&K.appendChild(N),C){var pe=K.createElementNS(S,C);K.appendChild(pe)}return K},createDocumentType:function(S,C,N){var K=new bt;return K.name=S,K.nodeName=S,K.publicId=C||"",K.systemId=N||"",K}},pt.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(S,C){return ar(this,S,C)},replaceChild:function(S,C){ar(this,S,C,Cr),C&&this.removeChild(C)},removeChild:function(S){return nr(this,S)},appendChild:function(S){return this.insertBefore(S,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(S){return $r(this.ownerDocument||this,this,S)},normalize:function(){for(var S=this.firstChild;S;){var C=S.nextSibling;C&&C.nodeType==it&&S.nodeType==it?(this.removeChild(C),S.appendData(C.data)):(S.normalize(),S=C)}},isSupported:function(S,C){return this.ownerDocument.implementation.hasFeature(S,C)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(S){for(var C=this;C;){var N=C._nsMap;if(N)for(var K in N)if(Object.prototype.hasOwnProperty.call(N,K)&&N[K]===S)return K;C=C.nodeType==Be?C.ownerDocument:C.parentNode}return null},lookupNamespaceURI:function(S){for(var C=this;C;){var N=C._nsMap;if(N&&S in N&&Object.prototype.hasOwnProperty.call(N,S))return N[S];C=C.nodeType==Be?C.ownerDocument:C.parentNode}return null},isDefaultNamespace:function(S){return null==this.lookupPrefix(S)}},Y(Me,pt),Y(Me,pt.prototype),Tt.prototype={nodeName:"#document",nodeType:De,doctype:null,documentElement:null,_inc:1,insertBefore:function(S,C){if(S.nodeType==ue){for(var N=S.firstChild;N;){var K=N.nextSibling;this.insertBefore(N,C),N=K}return S}return ar(this,S,C),S.ownerDocument=this,null===this.documentElement&&S.nodeType===Z&&(this.documentElement=S),S},removeChild:function(S){return this.documentElement==S&&(this.documentElement=null),nr(this,S)},replaceChild:function(S,C){ar(this,S,C,Cr),S.ownerDocument=this,C&&this.removeChild(C),mi(S)&&(this.documentElement=S)},importNode:function(S,C){return Hr(this,S,C)},getElementById:function(S){var C=null;return ci(this.documentElement,function(N){if(N.nodeType==Z&&N.getAttribute("id")==S)return C=N,!0}),C},getElementsByClassName:function(S){var C=ee(S);return new mt(this,function(N){var K=[];return C.length>0&&ci(N.documentElement,function(pe){if(pe!==N&&pe.nodeType===Z){var st=pe.getAttribute("class");if(st){var St=S===st;if(!St){var ni=ee(st);St=C.every(function X(S){return function(C){return S&&-1!==S.indexOf(C)}}(ni))}St&&K.push(pe)}}}),K})},createElement:function(S){var C=new Qi;return C.ownerDocument=this,C.nodeName=S,C.tagName=S,C.localName=S,C.childNodes=new et,(C.attributes=new Ct)._ownerElement=C,C},createDocumentFragment:function(){var S=new Ar;return S.ownerDocument=this,S.childNodes=new et,S},createTextNode:function(S){var C=new ct;return C.ownerDocument=this,C.appendData(S),C},createComment:function(S){var C=new ht;return C.ownerDocument=this,C.appendData(S),C},createCDATASection:function(S){var C=new Fr;return C.ownerDocument=this,C.appendData(S),C},createProcessingInstruction:function(S,C){var N=new on;return N.ownerDocument=this,N.tagName=N.target=S,N.nodeValue=N.data=C,N},createAttribute:function(S){var C=new sr;return C.ownerDocument=this,C.name=S,C.nodeName=S,C.localName=S,C.specified=!0,C},createEntityReference:function(S){var C=new Br;return C.ownerDocument=this,C.nodeName=S,C},createElementNS:function(S,C){var N=new Qi,K=C.split(":"),pe=N.attributes=new Ct;return N.childNodes=new et,N.ownerDocument=this,N.nodeName=C,N.tagName=C,N.namespaceURI=S,2==K.length?(N.prefix=K[0],N.localName=K[1]):N.localName=C,pe._ownerElement=N,N},createAttributeNS:function(S,C){var N=new sr,K=C.split(":");return N.ownerDocument=this,N.nodeName=C,N.name=C,N.namespaceURI=S,N.specified=!0,2==K.length?(N.prefix=K[0],N.localName=K[1]):N.localName=C,N}},U(Tt,pt),Tt.prototype.getElementsByTagName=(Qi.prototype={nodeType:Z,hasAttribute:function(S){return null!=this.getAttributeNode(S)},getAttribute:function(S){var C=this.getAttributeNode(S);return C&&C.value||""},getAttributeNode:function(S){return this.attributes.getNamedItem(S)},setAttribute:function(S,C){var N=this.ownerDocument.createAttribute(S);N.value=N.nodeValue=""+C,this.setAttributeNode(N)},removeAttribute:function(S){var C=this.getAttributeNode(S);C&&this.removeAttributeNode(C)},appendChild:function(S){return S.nodeType===ue?this.insertBefore(S,null):function Sa(S,C){return C.parentNode&&C.parentNode.removeChild(C),C.parentNode=S,C.previousSibling=S.lastChild,C.nextSibling=null,C.previousSibling?C.previousSibling.nextSibling=C:S.firstChild=C,S.lastChild=C,Ni(S.ownerDocument,S,C),C}(this,S)},setAttributeNode:function(S){return this.attributes.setNamedItem(S)},setAttributeNodeNS:function(S){return this.attributes.setNamedItemNS(S)},removeAttributeNode:function(S){return this.attributes.removeNamedItem(S.nodeName)},removeAttributeNS:function(S,C){var N=this.getAttributeNodeNS(S,C);N&&this.removeAttributeNode(N)},hasAttributeNS:function(S,C){return null!=this.getAttributeNodeNS(S,C)},getAttributeNS:function(S,C){var N=this.getAttributeNodeNS(S,C);return N&&N.value||""},setAttributeNS:function(S,C,N){var K=this.ownerDocument.createAttributeNS(S,C);K.value=K.nodeValue=""+N,this.setAttributeNode(K)},getAttributeNodeNS:function(S,C){return this.attributes.getNamedItemNS(S,C)},getElementsByTagName:function(S){return new mt(this,function(C){var N=[];return ci(C,function(K){K!==C&&K.nodeType==Z&&("*"===S||K.tagName==S)&&N.push(K)}),N})},getElementsByTagNameNS:function(S,C){return new mt(this,function(N){var K=[];return ci(N,function(pe){pe!==N&&pe.nodeType===Z&&("*"===S||pe.namespaceURI===S)&&("*"===C||pe.localName==C)&&K.push(pe)}),K})}}).getElementsByTagName,Tt.prototype.getElementsByTagNameNS=Qi.prototype.getElementsByTagNameNS,U(Qi,pt),sr.prototype.nodeType=Be,U(sr,pt),Er.prototype={data:"",substringData:function(S,C){return this.data.substring(S,S+C)},appendData:function(S){this.nodeValue=this.data=S=this.data+S,this.length=S.length},insertData:function(S,C){this.replaceData(S,0,C)},appendChild:function(S){throw new Error(_e[G])},deleteData:function(S,C){this.replaceData(S,C,"")},replaceData:function(S,C,N){var K=this.data.substring(0,S),pe=this.data.substring(S+C);this.nodeValue=this.data=N=K+N+pe,this.length=N.length}},U(Er,pt),ct.prototype={nodeName:"#text",nodeType:it,splitText:function(S){var C=this.data,N=C.substring(S);C=C.substring(0,S),this.data=this.nodeValue=C,this.length=C.length;var K=this.ownerDocument.createTextNode(N);return this.parentNode&&this.parentNode.insertBefore(K,this.nextSibling),K}},U(ct,Er),ht.prototype={nodeName:"#comment",nodeType:Ae},U(ht,Er),Fr.prototype={nodeName:"#cdata-section",nodeType:ft},U(Fr,Er),bt.prototype.nodeType=Te,U(bt,pt),jn.prototype.nodeType=be,U(jn,pt),Vn.prototype.nodeType=de,U(Vn,pt),Br.prototype.nodeType=Ye,U(Br,pt),Ar.prototype.nodeName="#document-fragment",Ar.prototype.nodeType=ue,U(Ar,pt),on.prototype.nodeType=We,U(on,pt),Ur.prototype.serializeToString=function(S,C,N){return Yt.call(S,C,N)},pt.prototype.toString=Yt;try{if(Object.defineProperty){let S=function(C){switch(C.nodeType){case Z:case ue:var N=[];for(C=C.firstChild;C;)7!==C.nodeType&&8!==C.nodeType&&N.push(S(C)),C=C.nextSibling;return N.join("");default:return C.nodeValue}};Object.defineProperty(mt.prototype,"length",{get:function(){return _t(this),this.$$length}}),Object.defineProperty(pt.prototype,"textContent",{get:function(){return S(this)},set:function(C){switch(this.nodeType){case Z:case ue:for(;this.firstChild;)this.removeChild(this.firstChild);(C||String(C))&&this.appendChild(this.ownerDocument.createTextNode(C));break;default:this.data=C,this.value=C,this.nodeValue=C}}}),Pr=function(C,N,K){C["$$"+N]=K}}}catch(S){}je.DocumentType=bt,je.DOMException=we,je.DOMImplementation=Pi,je.Element=Qi,je.Node=pt,je.NodeList=et,je.XMLSerializer=Ur},4436:(at,je,J)=>{var j=J(9401).freeze;je.XML_ENTITIES=j({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),je.HTML_ENTITIES=j({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"\xc0",Aacute:"\xc1",Acirc:"\xc2",Atilde:"\xc3",Auml:"\xc4",Aring:"\xc5",AElig:"\xc6",Ccedil:"\xc7",Egrave:"\xc8",Eacute:"\xc9",Ecirc:"\xca",Euml:"\xcb",Igrave:"\xcc",Iacute:"\xcd",Icirc:"\xce",Iuml:"\xcf",ETH:"\xd0",Ntilde:"\xd1",Ograve:"\xd2",Oacute:"\xd3",Ocirc:"\xd4",Otilde:"\xd5",Ouml:"\xd6",Oslash:"\xd8",Ugrave:"\xd9",Uacute:"\xda",Ucirc:"\xdb",Uuml:"\xdc",Yacute:"\xdd",THORN:"\xde",szlig:"\xdf",agrave:"\xe0",aacute:"\xe1",acirc:"\xe2",atilde:"\xe3",auml:"\xe4",aring:"\xe5",aelig:"\xe6",ccedil:"\xe7",egrave:"\xe8",eacute:"\xe9",ecirc:"\xea",euml:"\xeb",igrave:"\xec",iacute:"\xed",icirc:"\xee",iuml:"\xef",eth:"\xf0",ntilde:"\xf1",ograve:"\xf2",oacute:"\xf3",ocirc:"\xf4",otilde:"\xf5",ouml:"\xf6",oslash:"\xf8",ugrave:"\xf9",uacute:"\xfa",ucirc:"\xfb",uuml:"\xfc",yacute:"\xfd",thorn:"\xfe",yuml:"\xff",nbsp:"\xa0",iexcl:"\xa1",cent:"\xa2",pound:"\xa3",curren:"\xa4",yen:"\xa5",brvbar:"\xa6",sect:"\xa7",uml:"\xa8",copy:"\xa9",ordf:"\xaa",laquo:"\xab",not:"\xac",shy:"\xad\xad",reg:"\xae",macr:"\xaf",deg:"\xb0",plusmn:"\xb1",sup2:"\xb2",sup3:"\xb3",acute:"\xb4",micro:"\xb5",para:"\xb6",middot:"\xb7",cedil:"\xb8",sup1:"\xb9",ordm:"\xba",raquo:"\xbb",frac14:"\xbc",frac12:"\xbd",frac34:"\xbe",iquest:"\xbf",times:"\xd7",divide:"\xf7",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220b",prod:"\u220f",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221a",prop:"\u221d",infin:"\u221e",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222a",int:"\u222b",there4:"\u2234",sim:"\u223c",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22a5",sdot:"\u22c5",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039a",Lambda:"\u039b",Mu:"\u039c",Nu:"\u039d",Xi:"\u039e",Omicron:"\u039f",Pi:"\u03a0",Rho:"\u03a1",Sigma:"\u03a3",Tau:"\u03a4",Upsilon:"\u03a5",Phi:"\u03a6",Chi:"\u03a7",Psi:"\u03a8",Omega:"\u03a9",alpha:"\u03b1",beta:"\u03b2",gamma:"\u03b3",delta:"\u03b4",epsilon:"\u03b5",zeta:"\u03b6",eta:"\u03b7",theta:"\u03b8",iota:"\u03b9",kappa:"\u03ba",lambda:"\u03bb",mu:"\u03bc",nu:"\u03bd",xi:"\u03be",omicron:"\u03bf",pi:"\u03c0",rho:"\u03c1",sigmaf:"\u03c2",sigma:"\u03c3",tau:"\u03c4",upsilon:"\u03c5",phi:"\u03c6",chi:"\u03c7",psi:"\u03c8",omega:"\u03c9",thetasym:"\u03d1",upsih:"\u03d2",piv:"\u03d6",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",fnof:"\u0192",circ:"\u02c6",tilde:"\u02dc",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200c",zwj:"\u200d",lrm:"\u200e",rlm:"\u200f",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201a",ldquo:"\u201c",rdquo:"\u201d",bdquo:"\u201e",dagger:"\u2020",Dagger:"\u2021",bull:"\u2022",hellip:"\u2026",permil:"\u2030",prime:"\u2032",Prime:"\u2033",lsaquo:"\u2039",rsaquo:"\u203a",oline:"\u203e",euro:"\u20ac",trade:"\u2122",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21b5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230a",rfloor:"\u230b",loz:"\u25ca",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666"}),je.entityMap=je.HTML_ENTITIES},978:(at,je,J)=>{J(6853);je.DOMParser=J(1991).DOMParser},8702:(at,je,J)=>{var j=J(9401).NAMESPACE,p=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,ae=new RegExp("[\\-\\.0-9"+p.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),W=new RegExp("^"+p.source+ae.source+"*(?::"+p.source+ae.source+"*)?$");function Be(k,O){this.message=k,this.locator=O,Error.captureStackTrace&&Error.captureStackTrace(this,Be)}function it(){}function Ye(k,O){return O.lineNumber=k.lineNumber,O.columnNumber=k.columnNumber,O}function de(k,O,G,ye,se,Se){function xe(lt,dt,we){G.attributeNames.hasOwnProperty(lt)&&Se.fatalError("Attribute "+lt+" redefined"),G.addValue(lt,dt,we)}for(var Ke,ge=++O,fe=0;;){var Pe=k.charAt(ge);switch(Pe){case"=":if(1===fe)Ke=k.slice(O,ge),fe=3;else{if(2!==fe)throw new Error("attribute equal must after attrName");fe=3}break;case"'":case'"':if(3===fe||1===fe){if(1===fe&&(Se.warning('attribute value must after "="'),Ke=k.slice(O,ge)),!((ge=k.indexOf(Pe,O=ge+1))>0))throw new Error("attribute value no end '"+Pe+"' match");xe(Ke,Ie=k.slice(O,ge).replace(/&#?\w+;/g,se),O-1),fe=5}else{if(4!=fe)throw new Error('attribute value must after "="');xe(Ke,Ie=k.slice(O,ge).replace(/&#?\w+;/g,se),O),Se.warning('attribute "'+Ke+'" missed start quot('+Pe+")!!"),O=ge+1,fe=5}break;case"/":switch(fe){case 0:G.setTagName(k.slice(O,ge));case 5:case 6:case 7:fe=7,G.closed=!0;case 4:case 1:case 2:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return Se.error("unexpected end of input"),0==fe&&G.setTagName(k.slice(O,ge)),ge;case">":switch(fe){case 0:G.setTagName(k.slice(O,ge));case 5:case 6:case 7:break;case 4:case 1:"/"===(Ie=k.slice(O,ge)).slice(-1)&&(G.closed=!0,Ie=Ie.slice(0,-1));case 2:2===fe&&(Ie=Ke),4==fe?(Se.warning('attribute "'+Ie+'" missed quot(")!'),xe(Ke,Ie.replace(/&#?\w+;/g,se),O)):((!j.isHTML(ye[""])||!Ie.match(/^(?:disabled|checked|selected)$/i))&&Se.warning('attribute "'+Ie+'" missed value!! "'+Ie+'" instead!!'),xe(Ie,Ie,O));break;case 3:throw new Error("attribute value missed!!")}return ge;case"\x80":Pe=" ";default:if(Pe<=" ")switch(fe){case 0:G.setTagName(k.slice(O,ge)),fe=6;break;case 1:Ke=k.slice(O,ge),fe=2;break;case 4:var Ie=k.slice(O,ge).replace(/&#?\w+;/g,se);Se.warning('attribute "'+Ie+'" missed quot(")!!'),xe(Ke,Ie,O);case 5:fe=6}else switch(fe){case 2:(!j.isHTML(ye[""])||!Ke.match(/^(?:disabled|checked|selected)$/i))&&Se.warning('attribute "'+Ke+'" missed value!! "'+Ke+'" instead2!!'),xe(Ke,Ke,O),O=ge,fe=1;break;case 5:Se.warning('attribute space is required"'+Ke+'"!!');case 6:fe=1,O=ge;break;case 3:fe=4,O=ge;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}ge++}}function We(k,O,G){for(var ye=k.tagName,se=null,Pe=k.length;Pe--;){var Se=k[Pe],xe=Se.qName,Ke=Se.value;if((ze=xe.indexOf(":"))>0)var Ie=Se.prefix=xe.slice(0,ze),ge=xe.slice(ze+1),fe="xmlns"===Ie&&ge;else ge=xe,Ie=null,fe="xmlns"===xe&&"";Se.localName=ge,!1!==fe&&(null==se&&(se={},Te(G,G={})),G[fe]=se[fe]=Ke,Se.uri=j.XMLNS,O.startPrefixMapping(fe,Ke))}for(Pe=k.length;Pe--;)(Ie=(Se=k[Pe]).prefix)&&("xml"===Ie&&(Se.uri=j.XML),"xmlns"!==Ie&&(Se.uri=G[Ie||""]));var ze;(ze=ye.indexOf(":"))>0?(Ie=k.prefix=ye.slice(0,ze),ge=k.localName=ye.slice(ze+1)):(Ie=null,ge=k.localName=ye);var lt=k.uri=G[Ie||""];if(O.startElement(lt,ge,ye,k),!k.closed)return k.currentNSMap=G,k.localNSMap=se,!0;if(O.endElement(lt,ge,ye),se)for(Ie in se)Object.prototype.hasOwnProperty.call(se,Ie)&&O.endPrefixMapping(Ie)}function Ae(k,O,G,ye,se){if(/^(?:script|textarea)$/i.test(G)){var Se=k.indexOf("</"+G+">",O),xe=k.substring(O+1,Se);if(/[&<]/.test(xe))return/^script$/i.test(G)?(se.characters(xe,0,xe.length),Se):(xe=xe.replace(/&#?\w+;/g,ye),se.characters(xe,0,xe.length),Se)}return O+1}function De(k,O,G,ye){var se=ye[G];return null==se&&((se=k.lastIndexOf("</"+G+">"))<O&&(se=k.lastIndexOf("</"+G)),ye[G]=se),se<O}function Te(k,O){for(var G in k)Object.prototype.hasOwnProperty.call(k,G)&&(O[G]=k[G])}function ue(k,O,G,ye){if("-"===k.charAt(O+2))return"-"===k.charAt(O+3)?(Se=k.indexOf("--\x3e",O+4))>O?(G.comment(k,O+4,Se-O-4),Se+3):(ye.error("Unclosed comment"),-1):-1;if("CDATA["==k.substr(O+3,6)){var Se=k.indexOf("]]>",O+9);return G.startCDATA(),G.characters(k,O+9,Se-O-9),G.endCDATA(),Se+3}var xe=function _e(k,O){var G,ye=[],se=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(se.lastIndex=O,se.exec(k);G=se.exec(k);)if(ye.push(G),G[1])return ye}(k,O),Ke=xe.length;if(Ke>1&&/!doctype/i.test(xe[0][0])){var Ie=xe[1][0],ge=!1,fe=!1;Ke>3&&(/^public$/i.test(xe[2][0])?(ge=xe[3][0],fe=Ke>4&&xe[4][0]):/^system$/i.test(xe[2][0])&&(fe=xe[3][0]));var Pe=xe[Ke-1];return G.startDTD(Ie,ge,fe),G.endDTD(),Pe.index+Pe[0].length}return-1}function be(k,O,G){var ye=k.indexOf("?>",O);if(ye){var se=k.substring(O,ye).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return se?(G.processingInstruction(se[1],se[2]),ye+2):-1}return-1}function Ne(){this.attributeNames={}}(Be.prototype=new Error).name=Be.name,it.prototype={parse:function(k,O,G){var ye=this.domBuilder;ye.startDocument(),Te(O,O={}),function ft(k,O,G,ye,se){function xe(kt){var ri=kt.slice(1,-1);return ri in G?G[ri]:"#"===ri.charAt(0)?function Se(kt){return kt>65535?(kt-=65536,String.fromCharCode(55296+(kt>>10),56320+(1023&kt))):String.fromCharCode(kt)}(parseInt(ri.substr(1).replace("x","0x"))):(se.error("entity not found:"+kt),kt)}function Ke(kt){if(kt>we){var ri=k.substring(we,kt).replace(/&#?\w+;/g,xe);ze&&Ie(we),ye.characters(ri,0,kt-we),we=kt}}function Ie(kt,ri){for(;kt>=fe&&(ri=Pe.exec(k));)fe=(ge=ri.index)+ri[0].length,ze.lineNumber++;ze.columnNumber=kt-ge+1}for(var ge=0,fe=0,Pe=/.*(?:\r\n?|\n)|.*$/g,ze=ye.locator,lt=[{currentNSMap:O}],dt={},we=0;;){try{var et=k.indexOf("<",we);if(et<0){if(!k.substr(we).match(/^\s*$/)){var mt=ye.doc,_t=mt.createTextNode(k.substr(we));mt.appendChild(_t),ye.currentElement=_t}return}switch(et>we&&Ke(et),k.charAt(et+1)){case"/":var Tt=k.indexOf(">",et+3),Ct=k.substring(et+2,Tt).replace(/[ \t\n\r]+$/g,""),wt=lt.pop();Tt<0?(Ct=k.substring(et+2).replace(/[\s<].*/,""),se.error("end tag name: "+Ct+" is not complete:"+wt.tagName),Tt=et+1+Ct.length):Ct.match(/\s</)&&(Ct=Ct.replace(/[\s<].*/,""),se.error("end tag name: "+Ct+" maybe not complete"),Tt=et+1+Ct.length);var Wt=wt.localNSMap,ii=wt.tagName==Ct;if(ii||wt.tagName&&wt.tagName.toLowerCase()==Ct.toLowerCase()){if(ye.endElement(wt.uri,wt.localName,Ct),Wt)for(var pt in Wt)Object.prototype.hasOwnProperty.call(Wt,pt)&&ye.endPrefixMapping(pt);ii||se.fatalError("end tag name: "+Ct+" is not match the current start tagName:"+wt.tagName)}else lt.push(wt);Tt++;break;case"?":ze&&Ie(et),Tt=be(k,et,ye);break;case"!":ze&&Ie(et),Tt=ue(k,et,ye,se);break;default:ze&&Ie(et);var Bt=new Ne,ci=lt[lt.length-1].currentNSMap,Sr=(Tt=de(k,et,Bt,ci,xe,se),Bt.length);if(!Bt.closed&&De(k,Tt,Bt.tagName,dt)&&(Bt.closed=!0,G.nbsp||se.warning("unclosed xml attribute")),ze&&Sr){for(var xr=Ye(ze,{}),Ni=0;Ni<Sr;Ni++){var nr=Bt[Ni];Ie(nr.offset),nr.locator=Ye(ze,{})}ye.locator=xr,We(Bt,ye,ci)&&lt.push(Bt),ye.locator=ze}else We(Bt,ye,ci)&&lt.push(Bt);j.isHTML(Bt.uri)&&!Bt.closed?Tt=Ae(k,Tt,Bt.tagName,xe,ye):Tt++}}catch(kt){if(kt instanceof Be)throw kt;se.error("element parse error: "+kt),Tt=-1}Tt>we?we=Tt:Ke(Math.max(et,we)+1)}}(k,O,G,ye,this.errorHandler),ye.endDocument()}},Ne.prototype={setTagName:function(k){if(!W.test(k))throw new Error("invalid tagName:"+k);this.tagName=k},addValue:function(k,O,G){if(!W.test(k))throw new Error("invalid attribute:"+k);this.attributeNames[k]=this.length,this[this.length++]={qName:k,value:O,offset:G}},length:0,getLocalName:function(k){return this[k].localName},getLocator:function(k){return this[k].locator},getQName:function(k){return this[k].qName},getURI:function(k){return this[k].uri},getValue:function(k){return this[k].value}},je.XMLReader=it,je.ParseError=Be},1421:(at,je,J)=>{var ae,j="undefined"!=typeof global?global:"undefined"!=typeof window?window:{},p=J(5893);"undefined"!=typeof document?ae=document:(ae=j["__GLOBAL_DOCUMENT_CACHE@4"])||(ae=j["__GLOBAL_DOCUMENT_CACHE@4"]=p),at.exports=ae},9226:at=>{var je;je="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},at.exports=je},2703:at=>{at.exports=function J(j){if(!j)return!1;var p=je.call(j);return"[object Function]"===p||"function"==typeof j&&"[object RegExp]"!==p||"undefined"!=typeof window&&(j===window.setTimeout||j===window.alert||j===window.confirm||j===window.prompt)};var je=Object.prototype.toString},1234:(at,je)=>{function J(z){if(z&&"object"==typeof z){var ee=z.which||z.keyCode||z.charCode;ee&&(z=ee)}if("number"==typeof z)return W[z];var Y,X=String(z);return(Y=j[X.toLowerCase()])?Y:(Y=p[X.toLowerCase()])||(1===X.length?X.charCodeAt(0):void 0)}J.isEventKey=function(ee,X){if(ee&&"object"==typeof ee){var Y=ee.which||ee.keyCode||ee.charCode;if(null==Y)return!1;if("string"==typeof X){var U;if(U=j[X.toLowerCase()])return U===Y;if(U=p[X.toLowerCase()])return U===Y}else if("number"==typeof X)return X===Y;return!1}};var j=(je=at.exports=J).code=je.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},p=je.aliases={windows:91,"\u21e7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(ae=97;ae<123;ae++)j[String.fromCharCode(ae)]=ae-32;for(var ae=48;ae<58;ae++)j[ae-48]=ae;for(ae=1;ae<13;ae++)j["f"+ae]=ae+111;for(ae=0;ae<10;ae++)j["numpad "+ae]=ae+96;var W=je.names=je.title={};for(ae in j)W[j[ae]]=ae;for(var he in p)j[he]=p[he]},7459:(at,je,J)=>{var j=J(3357).getUint64;at.exports=function(ae){var W=new DataView(ae.buffer,ae.byteOffset,ae.byteLength),he={version:ae[0],flags:new Uint8Array(ae.subarray(1,4)),references:[],referenceId:W.getUint32(4),timescale:W.getUint32(8)},z=12;0===he.version?(he.earliestPresentationTime=W.getUint32(z),he.firstOffset=W.getUint32(z+4),z+=8):(he.earliestPresentationTime=j(ae.subarray(z)),he.firstOffset=j(ae.subarray(z+8)),z+=16);var ee=W.getUint16(z+=2);for(z+=2;ee>0;z+=12,ee--)he.references.push({referenceType:(128&ae[z])>>>7,referencedSize:2147483647&W.getUint32(z),subsegmentDuration:W.getUint32(z+4),startsWithSap:!!(128&ae[z+8]),sapType:(112&ae[z+8])>>>4,sapDeltaTime:268435455&W.getUint32(z+8)});return he}},6277:at=>{var J,j,p,ae,W,he,z;W=function(ee,X){return J(ae(ee,X))},he=function(ee,X){return j(p(ee),X)},z=function(ee,X,Y){return p(Y?ee:ee-X)},at.exports={ONE_SECOND_IN_TS:9e4,secondsToVideoTs:J=function(ee){return 9e4*ee},secondsToAudioTs:j=function(ee,X){return ee*X},videoTsToSeconds:p=function(ee){return ee/9e4},audioTsToSeconds:ae=function(ee,X){return ee/X},audioTsToVideoTs:W,videoTsToAudioTs:he,metadataTsToSeconds:z}},3357:at=>{var je=Math.pow(2,32);at.exports={getUint64:function(j){var ae,p=new DataView(j.buffer,j.byteOffset,j.byteLength);return p.getBigUint64?(ae=p.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(ae):ae:p.getUint32(0)*je+p.getUint32(4)},MAX_UINT32:je}},8099:at=>{at.exports=function je(J,j){var p,ae=null;try{p=JSON.parse(J,j)}catch(W){ae=W}return[ae,p]}},3871:function(at){var J,j,p,ae,W;J=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,j=/^(?=([^\/?#]*))\1([^]*)$/,p=/(?:\/|^)\.(?=\/)/g,ae=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,at.exports=W={buildAbsoluteURL:function(he,z,ee){if(ee=ee||{},he=he.trim(),!(z=z.trim())){if(!ee.alwaysNormalize)return he;var X=W.parseURL(he);if(!X)throw new Error("Error trying to parse base URL.");return X.path=W.normalizePath(X.path),W.buildURLFromParts(X)}var Y=W.parseURL(z);if(!Y)throw new Error("Error trying to parse relative URL.");if(Y.scheme)return ee.alwaysNormalize?(Y.path=W.normalizePath(Y.path),W.buildURLFromParts(Y)):z;var U=W.parseURL(he);if(!U)throw new Error("Error trying to parse base URL.");if(!U.netLoc&&U.path&&"/"!==U.path[0]){var Me=j.exec(U.path);U.netLoc=Me[1],U.path=Me[2]}U.netLoc&&!U.path&&(U.path="/");var Z={scheme:U.scheme,netLoc:Y.netLoc,path:null,params:Y.params,query:Y.query,fragment:Y.fragment};if(!Y.netLoc&&(Z.netLoc=U.netLoc,"/"!==Y.path[0]))if(Y.path){var Be=U.path,it=Be.substring(0,Be.lastIndexOf("/")+1)+Y.path;Z.path=W.normalizePath(it)}else Z.path=U.path,Y.params||(Z.params=U.params,Y.query||(Z.query=U.query));return null===Z.path&&(Z.path=ee.alwaysNormalize?W.normalizePath(Y.path):Y.path),W.buildURLFromParts(Z)},parseURL:function(he){var z=J.exec(he);return z?{scheme:z[1]||"",netLoc:z[2]||"",path:z[3]||"",params:z[4]||"",query:z[5]||"",fragment:z[6]||""}:null},normalizePath:function(he){for(he=he.split("").reverse().join("").replace(p,"");he.length!==(he=he.replace(ae,"")).length;);return he.split("").reverse().join("")},buildURLFromParts:function(he){return he.scheme+he.netLoc+he.path+he.params+he.query+he.fragment}}},17:(at,je,J)=>{"use strict";J.r(je),J.d(je,{default:()=>Wm});var j=J(9226),p=J.n(j),ae=J(1421),W=J.n(ae);function he(){return he=Object.assign?Object.assign.bind():function(s){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(s[r]=n[r])}return s},he.apply(this,arguments)}var z=J(1234),ee=J.n(z);function X(s){if(void 0===s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function Y(s,i){return(Y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,e){return r.__proto__=e,r})(s,i)}function U(s,i){s.prototype=Object.create(i.prototype),s.prototype.constructor=s,Y(s,i)}var Me=J(8099),Z=J.n(Me),Be=J(745),it=J.n(Be),ft=J(3629),Ye=J.n(ft);function de(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}function We(s,i,n){return(We=de()?Reflect.construct.bind():function(e,t,a){var o=[null];o.push.apply(o,t);var u=new(Function.bind.apply(e,o));return a&&Y(u,a.prototype),u}).apply(null,arguments)}var De=J(3871),Te=J.n(De),ue="http://example.com";const Ne=function(i,n){if(/^[a-z]+:/i.test(n))return n;/^data:/.test(i)&&(i=p().location&&p().location.href||"");var r="function"==typeof p().URL,e=/^\/\//.test(i),t=!p().location&&!/\/\//i.test(i);if(r?i=new(p().URL)(i,p().location||ue):/\/\//i.test(i)||(i=Te().buildAbsoluteURL(p().location&&p().location.href||"",i)),r){var a=new URL(n,i);return t?a.href.slice(ue.length):e?a.href.slice(a.protocol.length):a.href}return Te().buildAbsoluteURL(i,n)};var _e=function(){function s(){this.listeners={}}var i=s.prototype;return i.on=function(r,e){this.listeners[r]||(this.listeners[r]=[]),this.listeners[r].push(e)},i.off=function(r,e){if(!this.listeners[r])return!1;var t=this.listeners[r].indexOf(e);return this.listeners[r]=this.listeners[r].slice(0),this.listeners[r].splice(t,1),t>-1},i.trigger=function(r){var e=this.listeners[r];if(e)if(2===arguments.length)for(var t=e.length,a=0;a<t;++a)e[a].call(this,arguments[1]);else for(var o=Array.prototype.slice.call(arguments,1),l=e.length,u=0;u<l;++u)e[u].apply(this,o)},i.dispose=function(){this.listeners={}},i.pipe=function(r){this.on("data",function(e){r.push(e)})},s}();function O(s){for(var i=function(i){return p().atob?p().atob(i):Buffer.from(i,"base64").toString("binary")}(s),n=new Uint8Array(i.length),r=0;r<i.length;r++)n[r]=i.charCodeAt(r);return n}var s,Ir,G=function(s){function i(){var r;return(r=s.call(this)||this).buffer="",r}return U(i,s),i.prototype.push=function(e){var t;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},i}(_e),ye=String.fromCharCode(9),se=function(i){var n=/([0-9.]*)?@?([0-9.]*)?/.exec(i||""),r={};return n[1]&&(r.length=parseInt(n[1],10)),n[2]&&(r.offset=parseInt(n[2],10)),r},xe=function(i){for(var t,n=i.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),r={},e=n.length;e--;)""!==n[e]&&((t=/([^=]*)=(.*)/.exec(n[e]).slice(1))[0]=t[0].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^['"](.*)['"]$/g,"$1"),r[t[0]]=t[1]);return r},Ke=function(s){function i(){var r;return(r=s.call(this)||this).customParsers=[],r.tagMappers=[],r}U(i,s);var n=i.prototype;return n.push=function(e){var a,o,t=this;if(0!==(e=e.trim()).length){if("#"!==e[0])return void this.trigger("data",{type:"uri",uri:e});this.tagMappers.reduce(function(u,c){var _=c(e);return _===e?u:u.concat([_])},[e]).forEach(function(u){for(var c=0;c<t.customParsers.length;c++)if(t.customParsers[c].call(t,u))return;if(0===u.indexOf("#EXT"))if(u=u.replace("\r",""),a=/^#EXTM3U/.exec(u))t.trigger("data",{type:"tag",tagType:"m3u"});else{if(a=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(u))return o={type:"tag",tagType:"inf"},a[1]&&(o.duration=parseFloat(a[1])),a[2]&&(o.title=a[2]),void t.trigger("data",o);if(a=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(u))return o={type:"tag",tagType:"targetduration"},a[1]&&(o.duration=parseInt(a[1],10)),void t.trigger("data",o);if(a=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(u))return o={type:"tag",tagType:"version"},a[1]&&(o.version=parseInt(a[1],10)),void t.trigger("data",o);if(a=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(u))return o={type:"tag",tagType:"media-sequence"},a[1]&&(o.number=parseInt(a[1],10)),void t.trigger("data",o);if(a=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(u))return o={type:"tag",tagType:"discontinuity-sequence"},a[1]&&(o.number=parseInt(a[1],10)),void t.trigger("data",o);if(a=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(u))return o={type:"tag",tagType:"playlist-type"},a[1]&&(o.playlistType=a[1]),void t.trigger("data",o);if(a=/^#EXT-X-BYTERANGE:?(.*)?$/.exec(u))return o=he(se(a[1]),{type:"tag",tagType:"byterange"}),void t.trigger("data",o);if(a=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(u))return o={type:"tag",tagType:"allow-cache"},a[1]&&(o.allowed=!/NO/.test(a[1])),void t.trigger("data",o);if(a=/^#EXT-X-MAP:?(.*)$/.exec(u)){if(o={type:"tag",tagType:"map"},a[1]){var _=xe(a[1]);_.URI&&(o.uri=_.URI),_.BYTERANGE&&(o.byterange=se(_.BYTERANGE))}t.trigger("data",o)}else if(a=/^#EXT-X-STREAM-INF:?(.*)$/.exec(u)){if(o={type:"tag",tagType:"stream-inf"},a[1]){if(o.attributes=xe(a[1]),o.attributes.RESOLUTION){var y=o.attributes.RESOLUTION.split("x"),A={};y[0]&&(A.width=parseInt(y[0],10)),y[1]&&(A.height=parseInt(y[1],10)),o.attributes.RESOLUTION=A}o.attributes.BANDWIDTH&&(o.attributes.BANDWIDTH=parseInt(o.attributes.BANDWIDTH,10)),o.attributes["PROGRAM-ID"]&&(o.attributes["PROGRAM-ID"]=parseInt(o.attributes["PROGRAM-ID"],10))}t.trigger("data",o)}else{if(a=/^#EXT-X-MEDIA:?(.*)$/.exec(u))return o={type:"tag",tagType:"media"},a[1]&&(o.attributes=xe(a[1])),void t.trigger("data",o);if(a=/^#EXT-X-ENDLIST/.exec(u))t.trigger("data",{type:"tag",tagType:"endlist"});else{if(!(a=/^#EXT-X-DISCONTINUITY/.exec(u)))return(a=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(u))?(o={type:"tag",tagType:"program-date-time"},a[1]&&(o.dateTimeString=a[1],o.dateTimeObject=new Date(a[1])),void t.trigger("data",o)):(a=/^#EXT-X-KEY:?(.*)$/.exec(u))?(o={type:"tag",tagType:"key"},a[1]&&(o.attributes=xe(a[1]),o.attributes.IV&&("0x"===o.attributes.IV.substring(0,2).toLowerCase()&&(o.attributes.IV=o.attributes.IV.substring(2)),o.attributes.IV=o.attributes.IV.match(/.{8}/g),o.attributes.IV[0]=parseInt(o.attributes.IV[0],16),o.attributes.IV[1]=parseInt(o.attributes.IV[1],16),o.attributes.IV[2]=parseInt(o.attributes.IV[2],16),o.attributes.IV[3]=parseInt(o.attributes.IV[3],16),o.attributes.IV=new Uint32Array(o.attributes.IV))),void t.trigger("data",o)):(a=/^#EXT-X-START:?(.*)$/.exec(u))?(o={type:"tag",tagType:"start"},a[1]&&(o.attributes=xe(a[1]),o.attributes["TIME-OFFSET"]=parseFloat(o.attributes["TIME-OFFSET"]),o.attributes.PRECISE=/YES/.test(o.attributes.PRECISE)),void t.trigger("data",o)):(a=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(u))?((o={type:"tag",tagType:"cue-out-cont"}).data=a[1]?a[1]:"",void t.trigger("data",o)):(a=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(u))?((o={type:"tag",tagType:"cue-out"}).data=a[1]?a[1]:"",void t.trigger("data",o)):(a=/^#EXT-X-CUE-IN:?(.*)?$/.exec(u))?((o={type:"tag",tagType:"cue-in"}).data=a[1]?a[1]:"",void t.trigger("data",o)):(a=/^#EXT-X-SKIP:(.*)$/.exec(u))&&a[1]?((o={type:"tag",tagType:"skip"}).attributes=xe(a[1]),o.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(o.attributes["SKIPPED-SEGMENTS"]=parseInt(o.attributes["SKIPPED-SEGMENTS"],10)),o.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(o.attributes["RECENTLY-REMOVED-DATERANGES"]=o.attributes["RECENTLY-REMOVED-DATERANGES"].split(ye)),void t.trigger("data",o)):(a=/^#EXT-X-PART:(.*)$/.exec(u))&&a[1]?((o={type:"tag",tagType:"part"}).attributes=xe(a[1]),["DURATION"].forEach(function(I){o.attributes.hasOwnProperty(I)&&(o.attributes[I]=parseFloat(o.attributes[I]))}),["INDEPENDENT","GAP"].forEach(function(I){o.attributes.hasOwnProperty(I)&&(o.attributes[I]=/YES/.test(o.attributes[I]))}),o.attributes.hasOwnProperty("BYTERANGE")&&(o.attributes.byterange=se(o.attributes.BYTERANGE)),void t.trigger("data",o)):(a=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(u))&&a[1]?((o={type:"tag",tagType:"server-control"}).attributes=xe(a[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(I){o.attributes.hasOwnProperty(I)&&(o.attributes[I]=parseFloat(o.attributes[I]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(I){o.attributes.hasOwnProperty(I)&&(o.attributes[I]=/YES/.test(o.attributes[I]))}),void t.trigger("data",o)):(a=/^#EXT-X-PART-INF:(.*)$/.exec(u))&&a[1]?((o={type:"tag",tagType:"part-inf"}).attributes=xe(a[1]),["PART-TARGET"].forEach(function(I){o.attributes.hasOwnProperty(I)&&(o.attributes[I]=parseFloat(o.attributes[I]))}),void t.trigger("data",o)):(a=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(u))&&a[1]?((o={type:"tag",tagType:"preload-hint"}).attributes=xe(a[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(I){if(o.attributes.hasOwnProperty(I)){o.attributes[I]=parseInt(o.attributes[I],10);var D="BYTERANGE-LENGTH"===I?"length":"offset";o.attributes.byterange=o.attributes.byterange||{},o.attributes.byterange[D]=o.attributes[I],delete o.attributes[I]}}),void t.trigger("data",o)):(a=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(u))&&a[1]?((o={type:"tag",tagType:"rendition-report"}).attributes=xe(a[1]),["LAST-MSN","LAST-PART"].forEach(function(I){o.attributes.hasOwnProperty(I)&&(o.attributes[I]=parseInt(o.attributes[I],10))}),void t.trigger("data",o)):void t.trigger("data",{type:"tag",data:u.slice(4)});t.trigger("data",{type:"tag",tagType:"discontinuity"})}}}else t.trigger("data",{type:"comment",text:u.slice(1)})})}},n.addParser=function(e){var t=this,a=e.expression,o=e.customType,l=e.dataParser,u=e.segment;"function"!=typeof l&&(l=function(_){return _}),this.customParsers.push(function(c){if(a.exec(c))return t.trigger("data",{type:"custom",data:l(c),customType:o,segment:u}),!0})},n.addTagMapper=function(e){var t=e.expression,a=e.map;this.tagMappers.push(function(u){return t.test(u)?a(u):u})},i}(_e),ge=function(i){var n={};return Object.keys(i).forEach(function(r){n[function(i){return i.toLowerCase().replace(/-(\w)/g,function(n){return n[1].toUpperCase()})}(r)]=i[r]}),n},fe=function(i){var n=i.serverControl,r=i.targetDuration,e=i.partTargetDuration;if(n){var t="#EXT-X-SERVER-CONTROL",a="holdBack",o="partHoldBack",l=r&&3*r,u=e&&2*e;r&&!n.hasOwnProperty(a)&&(n[a]=l,this.trigger("info",{message:t+" defaulting HOLD-BACK to targetDuration * 3 ("+l+")."})),l&&n[a]<l&&(this.trigger("warn",{message:t+" clamping HOLD-BACK ("+n[a]+") to targetDuration * 3 ("+l+")"}),n[a]=l),e&&!n.hasOwnProperty(o)&&(n[o]=3*e,this.trigger("info",{message:t+" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+n[o]+")."})),e&&n[o]<u&&(this.trigger("warn",{message:t+" clamping PART-HOLD-BACK ("+n[o]+") to partTargetDuration * 2 ("+u+")."}),n[o]=u)}},Pe=function(s){function i(){var r;(r=s.call(this)||this).lineStream=new G,r.parseStream=new Ke,r.lineStream.pipe(r.parseStream);var o,l,e=X(r),t=[],a={},u=!1,c=function(){},_={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},A=0;r.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var I=0,D=0;return r.on("end",function(){a.uri||!a.parts&&!a.preloadHints||(!a.map&&o&&(a.map=o),!a.key&&l&&(a.key=l),!a.timeline&&"number"==typeof A&&(a.timeline=A),r.manifest.preloadSegment=a)}),r.parseStream.on("data",function(M){var Q,me;({tag:function(){({version:function(){M.version&&(this.manifest.version=M.version)},"allow-cache":function(){this.manifest.allowCache=M.allowed,"allowed"in M||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var re={};"length"in M&&(a.byterange=re,re.length=M.length,"offset"in M||(M.offset=I)),"offset"in M&&(a.byterange=re,re.offset=M.offset),I=re.offset+re.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),M.duration>0&&(a.duration=M.duration),0===M.duration&&(a.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=t},key:function(){if(M.attributes)if("NONE"!==M.attributes.METHOD)if(M.attributes.URI){if("com.apple.streamingkeydelivery"===M.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:M.attributes});if("com.microsoft.playready"===M.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.microsoft.playready"]={uri:M.attributes.URI});if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===M.attributes.KEYFORMAT)return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(M.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===M.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==M.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):M.attributes.KEYID&&"0x"===M.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:M.attributes.KEYFORMAT,keyId:M.attributes.KEYID.substring(2)},pssh:O(M.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}));M.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),l={method:M.attributes.METHOD||"AES-128",uri:M.attributes.URI},void 0!==M.attributes.IV&&(l.iv=M.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else l=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(M.number)?this.manifest.mediaSequence=M.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+M.number})},"discontinuity-sequence":function(){isFinite(M.number)?(this.manifest.discontinuitySequence=M.number,A=M.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+M.number})},"playlist-type":function(){/VOD|EVENT/.test(M.playlistType)?this.manifest.playlistType=M.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+M.playlist})},map:function(){o={},M.uri&&(o.uri=M.uri),M.byterange&&(o.byterange=M.byterange),l&&(o.key=l)},"stream-inf":function(){this.manifest.playlists=t,this.manifest.mediaGroups=this.manifest.mediaGroups||_,M.attributes?(a.attributes||(a.attributes={}),he(a.attributes,M.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||_,M.attributes&&M.attributes.TYPE&&M.attributes["GROUP-ID"]&&M.attributes.NAME){var re=this.manifest.mediaGroups[M.attributes.TYPE];re[M.attributes["GROUP-ID"]]=re[M.attributes["GROUP-ID"]]||{},Q=re[M.attributes["GROUP-ID"]],(me={default:/yes/i.test(M.attributes.DEFAULT)}).autoselect=!!me.default||/yes/i.test(M.attributes.AUTOSELECT),M.attributes.LANGUAGE&&(me.language=M.attributes.LANGUAGE),M.attributes.URI&&(me.uri=M.attributes.URI),M.attributes["INSTREAM-ID"]&&(me.instreamId=M.attributes["INSTREAM-ID"]),M.attributes.CHARACTERISTICS&&(me.characteristics=M.attributes.CHARACTERISTICS),M.attributes.FORCED&&(me.forced=/yes/i.test(M.attributes.FORCED)),Q[M.attributes.NAME]=me}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){A+=1,a.discontinuity=!0,this.manifest.discontinuityStarts.push(t.length)},"program-date-time":function(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=M.dateTimeString,this.manifest.dateTimeObject=M.dateTimeObject),a.dateTimeString=M.dateTimeString,a.dateTimeObject=M.dateTimeObject},targetduration:function(){!isFinite(M.duration)||M.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+M.duration}):(this.manifest.targetDuration=M.duration,fe.call(this,this.manifest))},start:function(){M.attributes&&!isNaN(M.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:M.attributes["TIME-OFFSET"],precise:M.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){a.cueOut=M.data},"cue-out-cont":function(){a.cueOutCont=M.data},"cue-in":function(){a.cueIn=M.data},skip:function(){this.manifest.skip=ge(M.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",M.attributes,["SKIPPED-SEGMENTS"])},part:function(){var re=this;u=!0;var Le=this.manifest.segments.length,le=ge(M.attributes);a.parts=a.parts||[],a.parts.push(le),le.byterange&&(le.byterange.hasOwnProperty("offset")||(le.byterange.offset=D),D=le.byterange.offset+le.byterange.length),this.warnOnMissingAttributes_("#EXT-X-PART #"+(a.parts.length-1)+" for segment #"+Le,M.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach(function(ke,ce){ke.hasOwnProperty("lastPart")||re.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #"+ce+" lacks required attribute(s): LAST-PART"})})},"server-control":function(){var re=this.manifest.serverControl=ge(M.attributes);re.hasOwnProperty("canBlockReload")||(re.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),fe.call(this,this.manifest),re.canSkipDateranges&&!re.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint":function(){var re=this.manifest.segments.length,Le=ge(M.attributes),le=Le.type&&"PART"===Le.type;a.preloadHints=a.preloadHints||[],a.preloadHints.push(Le),Le.byterange&&(Le.byterange.hasOwnProperty("offset")||(Le.byterange.offset=le?D:0,le&&(D=Le.byterange.offset+Le.byterange.length)));var oe=a.preloadHints.length-1;if(this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #"+oe+" for segment #"+re,M.attributes,["TYPE","URI"]),Le.type)for(var ke=0;ke<a.preloadHints.length-1;ke++){var ce=a.preloadHints[ke];!ce.type||ce.type===Le.type&&this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #"+oe+" for segment #"+re+" has the same TYPE "+Le.type+" as preload hint #"+ke})}},"rendition-report":function(){var re=ge(M.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(re);var Le=this.manifest.renditionReports.length-1,le=["LAST-MSN","URI"];u&&le.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+Le,M.attributes,le)},"part-inf":function(){this.manifest.partInf=ge(M.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",M.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),fe.call(this,this.manifest)}}[M.tagType]||c).call(e)},uri:function(){a.uri=M.uri,t.push(a),this.manifest.targetDuration&&!("duration"in a)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),a.duration=this.manifest.targetDuration),l&&(a.key=l),a.timeline=A,o&&(a.map=o),D=0,a={}},comment:function(){},custom:function(){M.segment?(a.custom=a.custom||{},a.custom[M.customType]=M.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[M.customType]=M.data)}})[M.type].call(e)}),r}U(i,s);var n=i.prototype;return n.warnOnMissingAttributes_=function(e,t,a){var o=[];a.forEach(function(l){t.hasOwnProperty(l)||o.push(l)}),o.length&&this.trigger("warn",{message:e+" lacks required attribute(s): "+o.join(", ")})},n.push=function(e){this.lineStream.push(e)},n.end=function(){this.lineStream.push("\n"),this.trigger("end")},n.addParser=function(e){this.parseStream.addParser(e)},n.addTagMapper=function(e){this.parseStream.addTagMapper(e)},i}(_e),ze={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},lt=["video","audio","text"],dt=["Video","Audio","Text"],we=function(i){return i&&i.replace(/avc1\.(\d+)\.(\d+)/i,function(n,r,e){return"avc1."+("00"+Number(r).toString(16)).slice(-2)+"00"+("00"+Number(e).toString(16)).slice(-2)})},_t=function(i){void 0===i&&(i="");var n=i.split(","),r=[];return n.forEach(function(e){var t;e=e.trim(),lt.forEach(function(a){var o=ze[a].exec(e.toLowerCase());if(o&&!(o.length<=1)){t=a;var l=e.substring(0,o[1].length),u=e.replace(l,"");r.push({type:l,details:u,mediaType:a})}}),t||r.push({type:e,details:"",mediaType:"unknown"})}),r},Wt=function(i){return void 0===i&&(i=""),ze.audio.test(i.trim().toLowerCase())},Pi=function(i){if(i&&"string"==typeof i){var n=i.toLowerCase().split(",").map(function(t){return we(t.trim())}),r="video";1===n.length&&Wt(n[0])?r="audio":1===n.length&&function(i){return void 0===i&&(i=""),ze.text.test(i.trim().toLowerCase())}(n[0])&&(r="application");var e="mp4";return n.every(function(t){return ze.mp4.test(t)})?e="mp4":n.every(function(t){return ze.webm.test(t)})?e="webm":n.every(function(t){return ze.ogg.test(t)})&&(e="ogg"),r+"/"+e+';codecs="'+i+'"'}},pt=function(i){return void 0===i&&(i=""),p().MediaSource&&p().MediaSource.isTypeSupported&&p().MediaSource.isTypeSupported(Pi(i))||!1},Bt=function(i){return void 0===i&&(i=""),i.toLowerCase().split(",").every(function(n){n=n.trim();for(var r=0;r<dt.length;r++)if(ze["muxer"+dt[r]].test(n))return!0;return!1})},ci="mp4a.40.2",Sr=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,xr=/^application\/dash\+xml/i,Ni=function(i){return Sr.test(i)?"hls":xr.test(i)?"dash":"application/vnd.videojs.vhs+json"===i?"vhs-json":null},mi=function(i){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(i):i&&i.buffer instanceof ArrayBuffer},rt=function(i){return i instanceof Uint8Array?i:(!Array.isArray(i)&&!function(i){return mi(i)}(i)&&!(i instanceof ArrayBuffer)&&(i="number"!=typeof i||"number"==typeof i&&i!=i?0:[i]),new Uint8Array(i&&i.buffer||i,i&&i.byteOffset||0,i&&i.byteLength||0))},Gt=p().BigInt||Number,Cr=[Gt("0x1"),Gt("0x100"),Gt("0x10000"),Gt("0x1000000"),Gt("0x100000000"),Gt("0x10000000000"),Gt("0x1000000000000"),Gt("0x100000000000000"),Gt("0x10000000000000000")],sr=(s=new Uint16Array([65484]),new Uint8Array(s.buffer,s.byteOffset,s.byteLength),function(i,n){var r=void 0===n?{}:n,e=r.signed,t=void 0!==e&&e,a=r.le,o=void 0!==a&&a;i=rt(i);var l=o?"reduce":"reduceRight",c=(i[l]?i[l]:Array.prototype[l]).call(i,function(y,A,I){var D=o?I:Math.abs(I+1-i.length);return y+Gt(A)*Cr[D]},Gt(0));if(t){var _=Cr[i.length]/Gt(2)-Gt(1);(c=Gt(c))>_&&(c-=_,c-=_,c-=Gt(2))}return Number(c)}),ht=function(i,n){if("string"!=typeof i&&i&&"function"==typeof i.toString&&(i=i.toString()),"string"!=typeof i)return new Uint8Array;n||(i=unescape(encodeURIComponent(i)));for(var r=new Uint8Array(i.length),e=0;e<i.length;e++)r[e]=i.charCodeAt(e);return r},bt=function(i,n,r){var e=void 0===r?{}:r,t=e.offset,a=void 0===t?0:t,o=e.mask,l=void 0===o?[]:o;return i=rt(i),(n=rt(n)).length&&i.length-a>=n.length&&(n.every?n.every:Array.prototype.every).call(n,function(c,_){return c===(l[_]?l[_]&i[a+_]:i[a+_])})},Ar=J(978),Ur=function(i){return!!i&&"object"==typeof i},Yt=function s(){for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return n.reduce(function(e,t){return"object"!=typeof t||Object.keys(t).forEach(function(a){e[a]=Array.isArray(e[a])&&Array.isArray(t[a])?e[a].concat(t[a]):Ur(e[a])&&Ur(t[a])?s(e[a],t[a]):t[a]}),e},{})},jr=function(i){return Object.keys(i).map(function(n){return i[n]})},Ii=function(i){return i.reduce(function(n,r){return n.concat(r)},[])},Hr=function(i){if(!i.length)return[];for(var n=[],r=0;r<i.length;r++)n.push(i[r]);return n},Pr=function(i,n){for(var r=0;r<i.length;r++)if(n(i[r]))return r;return-1},C=function(i){var n=i.baseUrl,e=i.source,t=void 0===e?"":e,a=i.range,o=void 0===a?"":a,l=i.indexRange,u=void 0===l?"":l,c={uri:t,resolvedUri:Ne((void 0===n?"":n)||"",t)};if(o||u){var D,y=(o||u).split("-"),A=p().BigInt?p().BigInt(y[0]):parseInt(y[0],10),I=p().BigInt?p().BigInt(y[1]):parseInt(y[1],10);A<Number.MAX_SAFE_INTEGER&&"bigint"==typeof A&&(A=Number(A)),I<Number.MAX_SAFE_INTEGER&&"bigint"==typeof I&&(I=Number(I)),"bigint"==typeof(D="bigint"==typeof I||"bigint"==typeof A?p().BigInt(I)-p().BigInt(A)+p().BigInt(1):I-A+1)&&D<Number.MAX_SAFE_INTEGER&&(D=Number(D)),c.byterange={length:D,offset:A}}return c},K=function(i){return i&&"number"!=typeof i&&(i=parseInt(i,10)),isNaN(i)?null:i},pe={static:function(i){var n=i.duration,r=i.timescale,e=void 0===r?1:r,t=i.sourceDuration,a=i.periodDuration,o=K(i.endNumber),l=n/e;return"number"==typeof o?{start:0,end:o}:"number"==typeof a?{start:0,end:a/l}:{start:0,end:t/l}},dynamic:function(i){var n=i.NOW,r=i.clientOffset,e=i.availabilityStartTime,t=i.timescale,a=void 0===t?1:t,o=i.duration,l=i.periodStart,u=void 0===l?0:l,c=i.minimumUpdatePeriod,_=void 0===c?0:c,y=i.timeShiftBufferDepth,A=void 0===y?1/0:y,I=K(i.endNumber),D=(n+r)/1e3,M=e+u,Fe=Math.ceil((D+_-M)*a/o),te=Math.floor((D-M-A)*a/o),re=Math.floor((D-M)*a/o);return{start:Math.max(0,te),end:"number"==typeof I?I:Math.min(Fe,re)}}},St=function(i){var n=i.type,r=i.duration,e=i.timescale,t=void 0===e?1:e,a=i.periodDuration,o=i.sourceDuration,l=pe[n](i),_=function(i,n){for(var r=[],e=i;e<n;e++)r.push(e);return r}(l.start,l.end).map(function(i){return function(n){var r=i.duration,e=i.timescale,o=i.startNumber;return{number:(void 0===o?1:o)+n,duration:r/(void 0===e?1:e),timeline:i.periodStart,time:n*r}}}(i));if("static"===n){var y=_.length-1;_[y].duration=("number"==typeof a?a:o)-r/t*y}return _},ni=function(i){var n=i.baseUrl,r=i.initialization,e=void 0===r?{}:r,t=i.sourceDuration,a=i.indexRange,o=void 0===a?"":a,l=i.periodStart,u=i.presentationTime,c=i.number,_=void 0===c?0:c,y=i.duration;if(!n)throw new Error("NO_BASE_URL");var A=C({baseUrl:n,source:e.sourceURL,range:e.range}),I=C({baseUrl:n,source:n,indexRange:o});if(I.map=A,y){var D=St(i);D.length&&(I.duration=D[0].duration,I.timeline=D[0].timeline)}else t&&(I.duration=t,I.timeline=l);return I.presentationTime=u||l,I.number=_,[I]},vi=function(i,n,r){var M,e=i.sidx.map?i.sidx.map:null,t=i.sidx.duration,a=i.timeline||0,o=i.sidx.byterange,l=o.offset+o.length,u=n.timescale,c=n.references.filter(function(ke){return 1!==ke.referenceType}),_=[],y=i.endList?"static":"dynamic",A=i.sidx.timeline,I=A,D=i.mediaSequence||0;M="bigint"==typeof n.firstOffset?p().BigInt(l)+n.firstOffset:l+n.firstOffset;for(var Q=0;Q<c.length;Q++){var re,me=n.references[Q],Fe=me.referencedSize,te=me.subsegmentDuration;re="bigint"==typeof M?M+p().BigInt(Fe)-p().BigInt(1):M+Fe-1;var oe=ni({baseUrl:r,timescale:u,timeline:a,periodStart:A,presentationTime:I,number:D,duration:te,sourceDuration:t,indexRange:M+"-"+re,type:y})[0];e&&(oe.map=e),_.push(oe),M+="bigint"==typeof M?p().BigInt(Fe):Fe,I+=te/u,D++}return i.segments=_,i},yi=["AUDIO","SUBTITLES"],Fi=function(i){return function(i,n){return jr(i.reduce(function(r,e){return e.forEach(function(t){r[function(n){return n.timeline}(t)]=t}),r},{}))}(i).sort(function(n,r){return n.timeline>r.timeline?1:-1})},$i=function(i){var n=[];return function(i,n,r){n.forEach(function(e){for(var t in i.mediaGroups[e])for(var a in i.mediaGroups[e][t])r(i.mediaGroups[e][t][a])})}(i,yi,function(r,e,t,a){n=n.concat(r.playlists||[])}),n},_i=function(i){var n=i.playlist;n.mediaSequence=i.mediaSequence,n.segments.forEach(function(e,t){e.number=n.mediaSequence+t})},jt=function(i){return i&&i.uri+"-"+function(i){var n;return n="bigint"==typeof i.offset||"bigint"==typeof i.length?p().BigInt(i.offset)+p().BigInt(i.length)-p().BigInt(1):i.offset+i.length-1,i.offset+"-"+n}(i.byterange)},wr=function(i){return jr(i.reduce(function(r,e){var a,t=e.attributes.id+(e.attributes.lang||"");r[t]?(e.segments&&(e.segments[0]&&(e.segments[0].discontinuity=!0),(a=r[t].segments).push.apply(a,e.segments)),e.attributes.contentProtection&&(r[t].attributes.contentProtection=e.attributes.contentProtection)):(r[t]=e,r[t].attributes.timelineStarts=[]);return r[t].attributes.timelineStarts.push({start:e.attributes.periodStart,timeline:e.attributes.periodStart}),r},{})).map(function(r){return r.discontinuityStarts=function(i,n){return i.reduce(function(r,e,t){return e.discontinuity&&r.push(t),r},[])}(r.segments||[]),r})},Ui=function(i,n){var r=jt(i.sidx),e=r&&n[r]&&n[r].sidx;return e&&vi(i,e,i.sidx.resolvedUri),i},ln=function(i,n){if(void 0===n&&(n={}),!Object.keys(n).length)return i;for(var r in i)i[r]=Ui(i[r],n);return i},Xl=function(i){var n,r=i.attributes,e=i.segments,t=i.sidx,a=i.discontinuityStarts,o={attributes:(n={NAME:r.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:r.width,height:r.height},CODECS:r.codecs,BANDWIDTH:r.bandwidth},n["PROGRAM-ID"]=1,n),uri:"",endList:"static"===r.type,timeline:r.periodStart,resolvedUri:"",targetDuration:r.duration,discontinuityStarts:a,timelineStarts:r.timelineStarts,segments:e};return r.contentProtection&&(o.contentProtection=r.contentProtection),t&&(o.sidx=t),o},Vs=function(i){var n=i.attributes;return"video/mp4"===n.mimeType||"video/webm"===n.mimeType||"video"===n.contentType},Hs=function(i){var n=i.attributes;return"audio/mp4"===n.mimeType||"audio/webm"===n.mimeType||"audio"===n.contentType},$s=function(i){var n=i.attributes;return"text/vtt"===n.mimeType||"text"===n.contentType},xa=function(i){return i?Object.keys(i).reduce(function(n,r){return n.concat(i[r].playlists)},[]):[]},qs=function(i){var n,r=i.dashPlaylists,e=i.locations,t=i.sidxMapping,a=void 0===t?{}:t,o=i.previousManifest;if(!r.length)return{};var l=r[0].attributes,u=l.sourceDuration,c=l.type,_=l.suggestedPresentationDelay,y=l.minimumUpdatePeriod,A=wr(r.filter(Vs)).map(Xl),I=wr(r.filter(Hs)),D=wr(r.filter($s)),M=r.map(function(le){return le.attributes.captionServices}).filter(Boolean),Q={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(n={AUDIO:{},VIDEO:{}},n["CLOSED-CAPTIONS"]={},n.SUBTITLES={},n),uri:"",duration:u,playlists:ln(A,a)};y>=0&&(Q.minimumUpdatePeriod=1e3*y),e&&(Q.locations=e),"dynamic"===c&&(Q.suggestedPresentationDelay=_);var Fe=I.length?function(i,n,r){void 0===n&&(n={}),void 0===r&&(r=!1);var e,t=i.reduce(function(o,l){var u=l.attributes.role&&l.attributes.role.value||"",c=l.attributes.lang||"",_=l.attributes.label||"main";c&&!l.attributes.label&&(_=l.attributes.lang+(u?" ("+u+")":"")),o[_]||(o[_]={language:c,autoselect:!0,default:"main"===u,playlists:[],uri:""});var A=Ui(function(i,n){var r,e=i.attributes,t=i.segments,a=i.sidx,o=i.mediaSequence,l=i.discontinuitySequence,u=i.discontinuityStarts,c={attributes:(r={NAME:e.id,BANDWIDTH:e.bandwidth,CODECS:e.codecs},r["PROGRAM-ID"]=1,r),uri:"",endList:"static"===e.type,timeline:e.periodStart,resolvedUri:"",targetDuration:e.duration,discontinuitySequence:l,discontinuityStarts:u,timelineStarts:e.timelineStarts,mediaSequence:o,segments:t};return e.contentProtection&&(c.contentProtection=e.contentProtection),a&&(c.sidx=a),n&&(c.attributes.AUDIO="audio",c.attributes.SUBTITLES="subs"),c}(l,r),n);return o[_].playlists.push(A),void 0===e&&"main"===u&&((e=l).default=!0),o},{});return e||(t[Object.keys(t)[0]].default=!0),t}(I,a,0===Q.playlists.length):null,te=D.length?function(i,n){return void 0===n&&(n={}),i.reduce(function(r,e){var t=e.attributes.lang||"text";return r[t]||(r[t]={language:t,default:!1,autoselect:!1,playlists:[],uri:""}),r[t].playlists.push(Ui(function(i){var n,r=i.attributes,e=i.segments,t=i.mediaSequence,a=i.discontinuityStarts,o=i.discontinuitySequence;void 0===e&&(e=[{uri:r.baseUrl,timeline:r.periodStart,resolvedUri:r.baseUrl||"",duration:r.sourceDuration,number:0}],r.duration=r.sourceDuration);var l=((n={NAME:r.id,BANDWIDTH:r.bandwidth})["PROGRAM-ID"]=1,n);return r.codecs&&(l.CODECS=r.codecs),{attributes:l,uri:"",endList:"static"===r.type,timeline:r.periodStart,resolvedUri:r.baseUrl||"",targetDuration:r.duration,timelineStarts:r.timelineStarts,discontinuityStarts:a,discontinuitySequence:o,mediaSequence:t,segments:e}}(e),n)),r},{})}(D,a):null,re=A.concat(xa(Fe),xa(te)),Le=re.map(function(le){return le.timelineStarts});return Q.timelineStarts=Fi(Le),function(i,n){i.forEach(function(r){r.mediaSequence=0,r.discontinuitySequence=Pr(n,function(e){return e.timeline===r.timeline}),r.segments&&r.segments.forEach(function(e,t){e.number=t})})}(re,Q.timelineStarts),Fe&&(Q.mediaGroups.AUDIO.audio=Fe),te&&(Q.mediaGroups.SUBTITLES.subs=te),M.length&&(Q.mediaGroups["CLOSED-CAPTIONS"].cc=function(i){return i.reduce(function(n,r){return r&&r.forEach(function(e){var a=e.language;n[a]={autoselect:!1,default:!1,instreamId:e.channel,language:a},e.hasOwnProperty("aspectRatio")&&(n[a].aspectRatio=e.aspectRatio),e.hasOwnProperty("easyReader")&&(n[a].easyReader=e.easyReader),e.hasOwnProperty("3D")&&(n[a]["3D"]=e["3D"])}),n},{})}(M)),o?function(i){var n=i.oldManifest,r=i.newManifest,e=n.playlists.concat($i(n)),t=r.playlists.concat($i(r));return r.timelineStarts=Fi([n.timelineStarts,r.timelineStarts]),function(i){var n=i.oldPlaylists,e=i.timelineStarts;i.newPlaylists.forEach(function(t){t.discontinuitySequence=Pr(e,function(c){return c.timeline===t.timeline});var a=function(i,n){for(var r=0;r<i.length;r++)if(i[r].attributes.NAME===n)return i[r];return null}(n,t.attributes.NAME);if(a&&!t.sidx){var o=t.segments[0],l=Pr(a.segments,function(c){return Math.abs(c.presentationTime-o.presentationTime)<.016666666666666666});if(-1===l)return _i({playlist:t,mediaSequence:a.mediaSequence+a.segments.length}),t.segments[0].discontinuity=!0,t.discontinuityStarts.unshift(0),void((!a.segments.length&&t.timeline>a.timeline||a.segments.length&&t.timeline>a.segments[a.segments.length-1].timeline)&&t.discontinuitySequence--);a.segments[l].discontinuity&&!o.discontinuity&&(o.discontinuity=!0,t.discontinuityStarts.unshift(0),t.discontinuitySequence--),_i({playlist:t,mediaSequence:a.segments[l].number})}})}({oldPlaylists:e,newPlaylists:t,timelineStarts:r.timelineStarts}),r}({oldManifest:o,newManifest:Q}):Q},zs=function(i,n,r){var o=i.timescale,u=i.periodStart,_=i.minimumUpdatePeriod;return Math.ceil((((i.NOW+i.clientOffset)/1e3+(void 0===_?0:_)-(i.availabilityStartTime+(void 0===u?0:u)))*(void 0===o?1:o)-n)/r)},Hn=function(i,n){for(var r=i.type,e=i.minimumUpdatePeriod,t=void 0===e?0:e,a=i.media,o=void 0===a?"":a,l=i.sourceDuration,u=i.timescale,c=void 0===u?1:u,_=i.startNumber,y=void 0===_?1:_,A=i.periodStart,I=[],D=-1,M=0;M<n.length;M++){var Q=n[M],me=Q.d,Fe=Q.r||0,te=Q.t||0;D<0&&(D=te),te&&te>D&&(D=te);var re=void 0;if(Fe<0){var Le=M+1;re=Le===n.length?"dynamic"===r&&t>0&&o.indexOf("$Number$")>0?zs(i,D,me):(l*c-D)/me:(n[Le].t-D)/me}else re=Fe+1;for(var le=y+I.length+re,oe=y+I.length;oe<le;)I.push({number:oe,duration:me/c,time:D,timeline:A}),D+=me,oe++}return I},Gs=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,Ca=function(i,n){return i.replace(Gs,function(i){return function(n,r,e,t){if("$$"===n)return"$";if(void 0===i[r])return n;var a=""+i[r];return"RepresentationID"===r||(t=e?parseInt(t,10):1,a.length>=t)?a:""+new Array(t-a.length+1).join("0")+a}}(n))},Qs=function(i,n){var r={RepresentationID:i.id,Bandwidth:i.bandwidth||0},e=i.initialization,t=void 0===e?{sourceURL:"",range:""}:e,a=C({baseUrl:i.baseUrl,source:Ca(t.sourceURL,r),range:t.range}),o=function(i,n){return i.duration||n?i.duration?St(i):Hn(i,n):[{number:i.startNumber||1,duration:i.sourceDuration,time:0,timeline:i.periodStart}]}(i,n);return o.map(function(l){r.Number=l.number,r.Time=l.time;var u=Ca(i.media||"",r),y=i.periodStart+(l.time-(i.presentationTimeOffset||0))/(i.timescale||1);return{uri:u,timeline:l.timeline,duration:l.duration,resolvedUri:Ne(i.baseUrl||"",u),map:a,number:l.number,presentationTime:y}})},Js=function(i,n){var r=i.duration,e=i.segmentUrls,t=void 0===e?[]:e,a=i.periodStart;if(!r&&!n||r&&n)throw new Error("SEGMENT_TIME_UNSPECIFIED");var l,o=t.map(function(c){return function(i,n){var r=i.baseUrl,e=i.initialization,t=void 0===e?{}:e,a=C({baseUrl:r,source:t.sourceURL,range:t.range}),o=C({baseUrl:r,source:n.media,range:n.mediaRange});return o.map=a,o}(i,c)});return r&&(l=St(i)),n&&(l=Hn(i,n)),l.map(function(c,_){if(o[_]){var y=o[_],A=i.timescale||1,I=i.presentationTimeOffset||0;return y.timeline=c.timeline,y.duration=c.duration,y.number=c.number,y.presentationTime=a+(c.time-I)/A,y}}).filter(function(c){return c})},Zs=function(i){var e,t,n=i.attributes,r=i.segmentInfo;r.template?(t=Qs,e=Yt(n,r.template)):r.base?(t=ni,e=Yt(n,r.base)):r.list&&(t=Js,e=Yt(n,r.list));var a={attributes:n};if(!t)return a;var o=t(e,r.segmentTimeline);if(e.duration){var c=e.timescale;e.duration=e.duration/(void 0===c?1:c)}else e.duration=o.length?o.reduce(function(y,A){return Math.max(y,Math.ceil(A.duration))},0):0;return a.attributes=e,a.segments=o,r.base&&e.indexRange&&(a.sidx=o[0],a.segments=[]),a},Vt=function(i,n){return Hr(i.childNodes).filter(function(r){return r.tagName===n})},$n=function(i){return i.textContent.trim()},kr=function(i){var l=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(i);if(!l)return 0;var u=l.slice(1),_=u[1],y=u[2],A=u[3],I=u[4],D=u[5];return 31536e3*parseFloat(u[0]||0)+2592e3*parseFloat(_||0)+86400*parseFloat(y||0)+3600*parseFloat(A||0)+60*parseFloat(I||0)+parseFloat(D||0)},Ea={mediaPresentationDuration:function(i){return kr(i)},availabilityStartTime:function(i){return function(i){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(i)&&(i+="Z"),Date.parse(i)}(i)/1e3},minimumUpdatePeriod:function(i){return kr(i)},suggestedPresentationDelay:function(i){return kr(i)},type:function(i){return i},timeShiftBufferDepth:function(i){return kr(i)},start:function(i){return kr(i)},width:function(i){return parseInt(i,10)},height:function(i){return parseInt(i,10)},bandwidth:function(i){return parseInt(i,10)},startNumber:function(i){return parseInt(i,10)},timescale:function(i){return parseInt(i,10)},presentationTimeOffset:function(i){return parseInt(i,10)},duration:function(i){var n=parseInt(i,10);return isNaN(n)?kr(i):n},d:function(i){return parseInt(i,10)},t:function(i){return parseInt(i,10)},r:function(i){return parseInt(i,10)},DEFAULT:function(i){return i}},ai=function(i){return i&&i.attributes?Hr(i.attributes).reduce(function(n,r){return n[r.name]=(Ea[r.name]||Ea.DEFAULT)(r.value),n},{}):{}},io={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},un=function(i,n){return n.length?Ii(i.map(function(r){return n.map(function(e){return Ne(r,$n(e))})})):i},Wn=function(i){var n=Vt(i,"SegmentTemplate")[0],r=Vt(i,"SegmentList")[0],e=r&&Vt(r,"SegmentURL").map(function(y){return Yt({tag:"SegmentURL"},ai(y))}),t=Vt(i,"SegmentBase")[0],a=r||n,o=a&&Vt(a,"SegmentTimeline")[0],l=r||t||n,u=l&&Vt(l,"Initialization")[0],c=n&&ai(n);c&&u?c.initialization=u&&ai(u):c&&c.initialization&&(c.initialization={sourceURL:c.initialization});var _={template:c,segmentTimeline:o&&Vt(o,"S").map(function(y){return ai(y)}),list:r&&Yt(ai(r),{segmentUrls:e,initialization:ai(u)}),base:t&&Yt(ai(t),{initialization:ai(u)})};return Object.keys(_).forEach(function(y){_[y]||delete _[y]}),_},so=function(i,n){return function(r,e){var t=un(n,Vt(r.node,"BaseURL")),a=Yt(i,{periodStart:r.attributes.start});"number"==typeof r.attributes.duration&&(a.periodDuration=r.attributes.duration);var o=Vt(r.node,"AdaptationSet"),l=Wn(r.node);return Ii(o.map(function(i,n,r){return function(e){var t=ai(e),a=un(n,Vt(e,"BaseURL")),o=Vt(e,"Role")[0],l={role:ai(o)},u=Yt(i,t,l),c=Vt(e,"Accessibility")[0],_=function(i){return"urn:scte:dash:cc:cea-608:2015"===i.schemeIdUri?("string"!=typeof i.value?[]:i.value.split(";")).map(function(e){var t,a;if(a=e,/^CC\d=/.test(e)){var o=e.split("=");t=o[0],a=o[1]}else/^CC\d$/.test(e)&&(t=e);return{channel:t,language:a}}):"urn:scte:dash:cc:cea-708:2015"===i.schemeIdUri?("string"!=typeof i.value?[]:i.value.split(";")).map(function(e){var t={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(e)){var a=e.split("="),l=a[1],u=void 0===l?"":l;t.channel=a[0],t.language=e,u.split(",").forEach(function(c){var _=c.split(":"),y=_[0],A=_[1];"lang"===y?t.language=A:"er"===y?t.easyReader=Number(A):"war"===y?t.aspectRatio=Number(A):"3D"===y&&(t["3D"]=Number(A))})}else t.language=e;return t.channel&&(t.channel="SERVICE"+t.channel),t}):void 0}(ai(c));_&&(u=Yt(u,{captionServices:_}));var y=Vt(e,"Label")[0];if(y&&y.childNodes.length){var A=y.childNodes[0].nodeValue.trim();u=Yt(u,{label:A})}var I=function(i){return i.reduce(function(n,r){var e=ai(r);e.schemeIdUri&&(e.schemeIdUri=e.schemeIdUri.toLowerCase());var t=io[e.schemeIdUri];if(t){n[t]={attributes:e};var a=Vt(r,"cenc:pssh")[0];if(a){var o=$n(a);n[t].pssh=o&&O(o)}}return n},{})}(Vt(e,"ContentProtection"));Object.keys(I).length&&(u=Yt(u,{contentProtection:I}));var D=Wn(e),M=Vt(e,"Representation"),Q=Yt(r,D);return Ii(M.map(function(i,n,r){return function(e){var t=Vt(e,"BaseURL"),a=un(n,t),o=Yt(i,ai(e)),l=Wn(e);return a.map(function(u){return{segmentInfo:Yt(r,l),attributes:Yt(o,{baseUrl:u})}})}}(u,a,Q)))}}(a,t,l)))}},m=function(i){if(""===i)throw new Error("DASH_EMPTY_MANIFEST");var r,e,n=new Ar.DOMParser;try{e=(r=n.parseFromString(i,"application/xml"))&&"MPD"===r.documentElement.tagName?r.documentElement:null}catch(t){}if(!e||e&&e.getElementsByTagName("parsererror").length>0)throw new Error("DASH_INVALID_XML");return e},V=J(7459),ie=J.n(V),Ce=rt([73,68,51]),Ve=function s(i,n){return void 0===n&&(n=0),(i=rt(i)).length-n<10||!bt(i,Ce,{offset:n})?n:(n+=function(i,n){void 0===n&&(n=0);var e=(i=rt(i))[n+6]<<21|i[n+7]<<14|i[n+8]<<7|i[n+9];return(16&i[n+5])>>4?e+20:e+10}(i,n),s(i,n))},Ge=(new Uint8Array([79,112,117,115,72,101,97,100]),function(i){return"string"==typeof i?ht(i):i}),qt=function(i){i=rt(i);for(var n=[],r=0;i.length>r;){var e=i[r],t=0,a=0,o=i[++a];for(a++;128&o;)t=(127&o)<<7,o=i[a],a++;t+=127&o;for(var l=0;l<Ir.length;l++){var u=Ir[l];if(e===u.id){n.push((0,u.parser)(i.subarray(a,a+t)));break}}r+=t+a}return n};Ir=[{id:3,parser:function(i){var n={tag:3,id:i[0]<<8|i[1],flags:i[2],size:3,dependsOnEsId:0,ocrEsId:0,descriptors:[],url:""};if(128&n.flags&&(n.dependsOnEsId=i[n.size]<<8|i[n.size+1],n.size+=2),64&n.flags){var r=i[n.size];n.url=function(i){if(!i)return"";i=Array.prototype.slice.call(i);var n=String.fromCharCode.apply(null,rt(i));try{return decodeURIComponent(escape(n))}catch(r){}return n}(i.subarray(n.size+1,n.size+1+r)),n.size+=r}return 32&n.flags&&(n.ocrEsId=i[n.size]<<8|i[n.size+1],n.size+=2),n.descriptors=qt(i.subarray(n.size))||[],n}},{id:4,parser:function(i){return{tag:4,oti:i[0],streamType:i[1],bufferSize:i[2]<<16|i[3]<<8|i[4],maxBitrate:i[5]<<24|i[6]<<16|i[7]<<8|i[8],avgBitrate:i[9]<<24|i[10]<<16|i[11]<<8|i[12],descriptors:qt(i.subarray(13))}}},{id:5,parser:function(i){return{tag:5,bytes:i}}},{id:6,parser:function(i){return{tag:6,bytes:i}}}];var vt=function s(i,n,r){void 0===r&&(r=!1),n=function(i){return Array.isArray(i)?i.map(function(n){return Ge(n)}):[Ge(i)]}(n),i=rt(i);var e=[];if(!n.length)return e;for(var t=0;t<i.length;){var a=(i[t]<<24|i[t+1]<<16|i[t+2]<<8|i[t+3])>>>0,o=i.subarray(t+4,t+8);if(0===a)break;var l=t+a;if(l>i.length){if(r)break;l=i.length}var u=i.subarray(t+8,l);bt(o,n[0])&&(1===n.length?e.push(u):e.push.apply(e,s(u,n.slice(1),r))),t=l}return e},Mt={EBML:rt([26,69,223,163]),DocType:rt([66,130]),Segment:rt([24,83,128,103]),SegmentInfo:rt([21,73,169,102]),Tracks:rt([22,84,174,107]),Track:rt([174]),TrackNumber:rt([215]),DefaultDuration:rt([35,227,131]),TrackEntry:rt([174]),TrackType:rt([131]),FlagDefault:rt([136]),CodecID:rt([134]),CodecPrivate:rt([99,162]),VideoTrack:rt([224]),AudioTrack:rt([225]),Cluster:rt([31,67,182,117]),Timestamp:rt([231]),TimestampScale:rt([42,215,177]),BlockGroup:rt([160]),BlockDuration:rt([155]),Block:rt([161]),SimpleBlock:rt([163])},lo=[128,64,32,16,8,4,2,1],Wr=function(i,n,r,e){void 0===r&&(r=!0),void 0===e&&(e=!1);var t=function(i){for(var n=1,r=0;r<lo.length&&!(i&lo[r]);r++)n++;return n}(i[n]),a=i.subarray(n,n+t);return r&&((a=Array.prototype.slice.call(i,n,n+t))[0]^=lo[t-1]),{length:t,value:sr(a,{signed:e}),bytes:a}},Ql=function s(i){return"string"==typeof i?i.match(/.{1,2}/g).map(function(n){return s(n)}):"number"==typeof i?function(i,n){var e=(void 0===n?{}:n).le,t=void 0!==e&&e;("bigint"!=typeof i&&"number"!=typeof i||"number"==typeof i&&i!=i)&&(i=0);for(var a=function(i){return Math.ceil(function(i){return i.toString(2).length}(i)/8)}(i=Gt(i)),o=new Uint8Array(new ArrayBuffer(a)),l=0;l<a;l++){var u=t?l:Math.abs(l+1-o.length);o[u]=Number(i/Cr[l]&Gt(255)),i<0&&(o[u]=Math.abs(~o[u]),o[u]-=0===l?1:2)}return o}(i):i},Lh=function s(i,n,r){if(r>=n.length)return n.length;var e=Wr(n,r,!1);if(bt(i.bytes,e.bytes))return r;var t=Wr(n,r+e.length);return s(i,n,r+t.length+t.value+e.length)},Ht=function s(i,n){n=function(i){return Array.isArray(i)?i.map(function(n){return Ql(n)}):[Ql(i)]}(n),i=rt(i);var r=[];if(!n.length)return r;for(var e=0;e<i.length;){var t=Wr(i,e,!1),a=Wr(i,e+t.length),o=e+t.length+a.length;127===a.value&&(a.value=Lh(t,i,o),a.value!==i.length&&(a.value-=o));var u=i.subarray(o,o+a.value>i.length?i.length:o+a.value);bt(n[0],t.bytes)&&(1===n.length?r.push(u):r=r.concat(s(u,n.slice(1)))),e+=t.length+a.length+u.length}return r},Rh=rt([0,0,0,1]),Nh=rt([0,0,1]),Fh=rt([0,0,3]),Bh=function(i){for(var n=[],r=1;r<i.length-2;)bt(i.subarray(r,r+3),Fh)&&(n.push(r+2),r++),r++;if(0===n.length)return i;var e=i.length-n.length,t=new Uint8Array(e),a=0;for(r=0;r<e;a++,r++)a===n[0]&&(a++,n.shift()),t[r]=i[a];return t},Yl=function(i,n,r,e){void 0===e&&(e=1/0),i=rt(i),r=[].concat(r);for(var a,t=0,o=0;t<i.length&&(o<e||a);){var l=void 0;if(bt(i.subarray(t),Rh)?l=4:bt(i.subarray(t),Nh)&&(l=3),l){if(o++,a)return Bh(i.subarray(a,t));var u=void 0;"h264"===n?u=31&i[t+l]:"h265"===n&&(u=i[t+l]>>1&63),-1!==r.indexOf(u)&&(a=t+l),t+=l+("h264"===n?1:2)}else t++}return i.subarray(0,0)},Ti={webm:rt([119,101,98,109]),matroska:rt([109,97,116,114,111,115,107,97]),flac:rt([102,76,97,67]),ogg:rt([79,103,103,83]),ac3:rt([11,119]),riff:rt([82,73,70,70]),avi:rt([65,86,73]),wav:rt([87,65,86,69]),"3gp":rt([102,116,121,112,51,103]),mp4:rt([102,116,121,112]),fmp4:rt([115,116,121,112]),mov:rt([102,116,121,112,113,116]),moov:rt([109,111,111,118]),moof:rt([109,111,111,102])},cn={aac:function(i){var n=Ve(i);return bt(i,[255,16],{offset:n,mask:[255,22]})},mp3:function(i){var n=Ve(i);return bt(i,[255,2],{offset:n,mask:[255,6]})},webm:function(i){var n=Ht(i,[Mt.EBML,Mt.DocType])[0];return bt(n,Ti.webm)},mkv:function(i){var n=Ht(i,[Mt.EBML,Mt.DocType])[0];return bt(n,Ti.matroska)},mp4:function(i){return!cn["3gp"](i)&&!cn.mov(i)&&(!!(bt(i,Ti.mp4,{offset:4})||bt(i,Ti.fmp4,{offset:4})||bt(i,Ti.moof,{offset:4})||bt(i,Ti.moov,{offset:4}))||void 0)},mov:function(i){return bt(i,Ti.mov,{offset:4})},"3gp":function(i){return bt(i,Ti["3gp"],{offset:4})},ac3:function(i){var n=Ve(i);return bt(i,Ti.ac3,{offset:n})},ts:function(i){if(i.length<189&&i.length>=1)return 71===i[0];for(var n=0;n+188<i.length&&n<188;){if(71===i[n]&&71===i[n+188])return!0;n+=1}return!1},flac:function(i){var n=Ve(i);return bt(i,Ti.flac,{offset:n})},ogg:function(i){return bt(i,Ti.ogg)},avi:function(i){return bt(i,Ti.riff)&&bt(i,Ti.avi,{offset:8})},wav:function(i){return bt(i,Ti.riff)&&bt(i,Ti.wav,{offset:8})},h264:function(i){return function(i,n,r){return Yl(i,"h264",7,3)}(i).length},h265:function(i){return function(i,n,r){return Yl(i,"h265",[32,33],3)}(i).length}},uo=Object.keys(cn).filter(function(s){return"ts"!==s&&"h264"!==s&&"h265"!==s}).concat(["ts","h264","h265"]);uo.forEach(function(s){var i=cn[s];cn[s]=function(n){return i(rt(n))}});for(var Gn,Vh=cn,co=function(i){i=rt(i);for(var n=0;n<uo.length;n++){var r=uo[n];if(Vh[r](i))return r}return""},Aa=J(6277),lr={},Lr=function(i,n){return lr[i]=lr[i]||[],n&&(lr[i]=lr[i].concat(n)),lr[i]},Zl=function(i,n){var r=Lr(i).indexOf(n);return!(r<=-1||(lr[i]=lr[i].slice(),lr[i].splice(r,1),0))},Pa={prefixed:!0},wa=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],eu=wa[0],ka=0;ka<wa.length;ka++)if(wa[ka][1]in W()){Gn=wa[ka];break}if(Gn){for(var Ia=0;Ia<Gn.length;Ia++)Pa[eu[Ia]]=Gn[Ia];Pa.prefixed=Gn[0]!==eu[0]}var wi=[],gt=function tu(s){var n,i="info",r=function(){for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];n("log",i,a)};return n=function(i,n){return function(r,e,t){var a=n.levels[e],o=new RegExp("^("+a+")$");if("log"!==r&&t.unshift(r.toUpperCase()+":"),t.unshift(i+":"),wi){wi.push([].concat(t));var l=wi.length-1e3;wi.splice(0,l>0?l:0)}if(p().console){var u=p().console[r];!u&&"debug"===r&&(u=p().console.info||p().console.log),u&&a&&o.test(r)&&u[Array.isArray(t)?"apply":"call"](p().console,t)}}}(s,r),r.createLogger=function(e){return tu(s+": "+e)},r.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:i},r.level=function(e){if("string"==typeof e){if(!r.levels.hasOwnProperty(e))throw new Error('"'+e+'" in not a valid log level');i=e}return i},(r.history=function(){return wi?[].concat(wi):[]}).filter=function(e){return(wi||[]).filter(function(t){return new RegExp(".*"+e+".*").test(t[0])})},r.history.clear=function(){wi&&(wi.length=0)},r.history.disable=function(){null!==wi&&(wi.length=0,wi=null)},r.history.enable=function(){null===wi&&(wi=[])},r.error=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return n("error",i,t)},r.warn=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return n("warn",i,t)},r.debug=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return n("debug",i,t)},r}("VIDEOJS"),iu=gt.createLogger,zh=Object.prototype.toString,ru=function(i){return ur(i)?Object.keys(i):[]};function hn(s,i){ru(s).forEach(function(n){return i(s[n],n)})}function zt(s){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return Object.assign?he.apply(void 0,[s].concat(n)):(n.forEach(function(e){!e||hn(e,function(t,a){s[a]=t})}),s)}function ur(s){return!!s&&"object"==typeof s}function Kn(s){return ur(s)&&"[object Object]"===zh.call(s)&&s.constructor===Object}function Xn(s,i){if(!s||!i)return"";if("function"==typeof p().getComputedStyle){var n;try{n=p().getComputedStyle(s)}catch(r){return""}return n?n.getPropertyValue(i)||n[i]:""}return""}var si=p().navigator&&p().navigator.userAgent||"",nu=/AppleWebKit\/([\d.]+)/i.exec(si),Kh=nu?parseFloat(nu.pop()):null,au=/iPod/i.test(si),Xh=function(){var s=si.match(/OS (\d+)_/i);return s&&s[1]?s[1]:null}(),dr=/Android/i.test(si),ho=function(){var s=si.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!s)return null;var i=s[1]&&parseFloat(s[1]),n=s[2]&&parseFloat(s[2]);return i&&n?parseFloat(s[1]+"."+s[2]):i||null}(),su=dr&&ho<5&&Kh<537,ou=/Firefox/i.test(si),Qn=/Edg/i.test(si),cr=!Qn&&(/Chrome/i.test(si)||/CriOS/i.test(si)),lu=function(){var s=si.match(/(Chrome|CriOS)\/(\d+)/);return s&&s[2]?parseFloat(s[2]):null}(),Yn=function(){var s=/MSIE\s(\d+)\.\d/.exec(si),i=s&&parseFloat(s[1]);return!i&&/Trident\/7.0/i.test(si)&&/rv:11.0/.test(si)&&(i=11),i}(),fo=/Safari/i.test(si)&&!cr&&!dr&&!Qn,uu=/Windows/i.test(si),fn=Boolean(pn()&&("ontouchstart"in p()||p().navigator.maxTouchPoints||p().DocumentTouch&&p().document instanceof p().DocumentTouch)),po=/iPad/i.test(si)||fo&&fn&&!/iPhone/i.test(si),go=/iPhone/i.test(si)&&!po,bi=go||po||au,La=(fo||bi)&&!cr,Qh=Object.freeze({__proto__:null,IS_IPOD:au,IOS_VERSION:Xh,IS_ANDROID:dr,ANDROID_VERSION:ho,IS_NATIVE_ANDROID:su,IS_FIREFOX:ou,IS_EDGE:Qn,IS_CHROME:cr,CHROME_VERSION:lu,IE_VERSION:Yn,IS_SAFARI:fo,IS_WINDOWS:uu,TOUCH_ENABLED:fn,IS_IPAD:po,IS_IPHONE:go,IS_IOS:bi,IS_ANY_SAFARI:La});function du(s){return"string"==typeof s&&Boolean(s.trim())}function cu(s){if(s.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function pn(){return W()===p().document}function gn(s){return ur(s)&&1===s.nodeType}function hu(){try{return p().parent!==p().self}catch(s){return!0}}function fu(s){return function(i,n){if(!du(i))return W()[s](null);du(n)&&(n=W().querySelector(n));var r=gn(n)?n:W();return r[s]&&r[s](i)}}function yt(s,i,n,r){void 0===s&&(s="div"),void 0===i&&(i={}),void 0===n&&(n={});var e=W().createElement(s);return Object.getOwnPropertyNames(i).forEach(function(t){var a=i[t];-1!==t.indexOf("aria-")||"role"===t||"type"===t?(gt.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\ncreateEl(type, properties, attributes). Attempting to set "+t+" to "+a+"."),e.setAttribute(t,a)):"textContent"===t?qr(e,a):(e[t]!==a||"tabIndex"===t)&&(e[t]=a)}),Object.getOwnPropertyNames(n).forEach(function(t){e.setAttribute(t,n[t])}),r&&yo(e,r),e}function qr(s,i){return void 0===s.textContent?s.innerText=i:s.textContent=i,s}function mo(s,i){i.firstChild?i.insertBefore(s,i.firstChild):i.appendChild(s)}function zr(s,i){return cu(i),s.classList?s.classList.contains(i):function Yh(s){return new RegExp("(^|\\s)"+s+"($|\\s)")}(i).test(s.className)}function hr(s,i){return s.classList?s.classList.add(i):zr(s,i)||(s.className=(s.className+" "+i).trim()),s}function Jn(s,i){return s?(s.classList?s.classList.remove(i):(cu(i),s.className=s.className.split(/\s+/).filter(function(n){return n!==i}).join(" ")),s):(gt.warn("removeClass was called with an element that doesn't exist"),null)}function pu(s,i,n){var r=zr(s,i);if("function"==typeof n&&(n=n(s,i)),"boolean"!=typeof n&&(n=!r),n!==r)return n?hr(s,i):Jn(s,i),s}function gu(s,i){Object.getOwnPropertyNames(i).forEach(function(n){var r=i[n];null==r||!1===r?s.removeAttribute(n):s.setAttribute(n,!0===r?"":r)})}function fr(s){var i={};if(s&&s.attributes&&s.attributes.length>0)for(var r=s.attributes,e=r.length-1;e>=0;e--){var t=r[e].name,a=r[e].value;("boolean"==typeof s[t]||-1!==",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+t+","))&&(a=null!==a),i[t]=a}return i}function mu(s,i){return s.getAttribute(i)}function mn(s,i,n){s.setAttribute(i,n)}function Da(s,i){s.removeAttribute(i)}function vu(){W().body.focus(),W().onselectstart=function(){return!1}}function yu(){W().onselectstart=function(){return!0}}function vn(s){if(s&&s.getBoundingClientRect&&s.parentNode){var i=s.getBoundingClientRect(),n={};return["bottom","height","left","right","top","width"].forEach(function(r){void 0!==i[r]&&(n[r]=i[r])}),n.height||(n.height=parseFloat(Xn(s,"height"))),n.width||(n.width=parseFloat(Xn(s,"width"))),n}}function Zn(s){if(!s||s&&!s.offsetParent)return{left:0,top:0,width:0,height:0};for(var i=s.offsetWidth,n=s.offsetHeight,r=0,e=0;s.offsetParent&&s!==W()[Pa.fullscreenElement];)r+=s.offsetLeft,e+=s.offsetTop,s=s.offsetParent;return{left:r,top:e,width:i,height:n}}function Ma(s,i){var n={x:0,y:0};if(bi)for(var r=s;r&&"html"!==r.nodeName.toLowerCase();){var e=Xn(r,"transform");if(/^matrix/.test(e)){var t=e.slice(7,-1).split(/,\s/).map(Number);n.x+=t[4],n.y+=t[5]}else if(/^matrix3d/.test(e)){var a=e.slice(9,-1).split(/,\s/).map(Number);n.x+=a[12],n.y+=a[13]}r=r.parentNode}var o={},l=Zn(i.target),u=Zn(s),c=u.width,y=i.offsetY-(u.top-l.top),A=i.offsetX-(u.left-l.left);return i.changedTouches&&(A=i.changedTouches[0].pageX-u.left,y=i.changedTouches[0].pageY+u.top,bi&&(A-=n.x,y-=n.y)),o.y=1-Math.max(0,Math.min(1,y/u.height)),o.x=Math.max(0,Math.min(1,A/c)),o}function _u(s){return ur(s)&&3===s.nodeType}function vo(s){for(;s.firstChild;)s.removeChild(s.firstChild);return s}function Tu(s){return"function"==typeof s&&(s=s()),(Array.isArray(s)?s:[s]).map(function(i){return"function"==typeof i&&(i=i()),gn(i)||_u(i)?i:"string"==typeof i&&/\S/.test(i)?W().createTextNode(i):void 0}).filter(function(i){return i})}function yo(s,i){return Tu(i).forEach(function(n){return s.appendChild(n)}),s}function bu(s,i){return yo(vo(s),i)}function ea(s){return void 0===s.button&&void 0===s.buttons||0===s.button&&void 0===s.buttons||"mouseup"===s.type&&0===s.button&&0===s.buttons||!(0!==s.button||1!==s.buttons)}var _o,Dr=fu("querySelector"),Su=fu("querySelectorAll"),xu=Object.freeze({__proto__:null,isReal:pn,isEl:gn,isInFrame:hu,createEl:yt,textContent:qr,prependTo:mo,hasClass:zr,addClass:hr,removeClass:Jn,toggleClass:pu,setAttributes:gu,getAttributes:fr,getAttribute:mu,setAttribute:mn,removeAttribute:Da,blockTextSelection:vu,unblockTextSelection:yu,getBoundingClientRect:vn,findPosition:Zn,getPointerPosition:Ma,isTextNode:_u,emptyEl:vo,normalizeContent:Tu,appendContent:yo,insertContent:bu,isSingleLeftClick:ea,$:Dr,$$:Su}),Cu=!1,Jh=function(){if(!1!==_o.options.autoSetup){var i=Array.prototype.slice.call(W().getElementsByTagName("video")),n=Array.prototype.slice.call(W().getElementsByTagName("audio")),r=Array.prototype.slice.call(W().getElementsByTagName("video-js")),e=i.concat(n,r);if(e&&e.length>0)for(var t=0,a=e.length;t<a;t++){var o=e[t];if(!o||!o.getAttribute){To(1);break}void 0===o.player&&null!==o.getAttribute("data-setup")&&_o(o)}else Cu||To(1)}};function To(s,i){!pn()||(i&&(_o=i),p().setTimeout(Jh,s))}function bo(){Cu=!0,p().removeEventListener("load",bo)}pn()&&("complete"===W().readyState?bo():p().addEventListener("load",bo));var Pu,Eu=function(i){var n=W().createElement("style");return n.className=i,n},Au=function(i,n){i.styleSheet?i.styleSheet.cssText=n:i.textContent=n},ef=3;function pr(){return ef++}p().WeakMap||(Pu=function(){function s(){this.vdata="vdata"+Math.floor(p().performance&&p().performance.now()||Date.now()),this.data={}}var i=s.prototype;return i.set=function(r,e){var t=r[this.vdata]||pr();return r[this.vdata]||(r[this.vdata]=t),this.data[t]=e,this},i.get=function(r){var e=r[this.vdata];if(e)return this.data[e];gt("We have no data for this element",r)},i.has=function(r){return r[this.vdata]in this.data},i.delete=function(r){var e=r[this.vdata];e&&(delete this.data[e],delete r[this.vdata])},s}());var Si=p().WeakMap?new WeakMap:new Pu;function wu(s,i){if(Si.has(s)){var n=Si.get(s);0===n.handlers[i].length&&(delete n.handlers[i],s.removeEventListener?s.removeEventListener(i,n.dispatcher,!1):s.detachEvent&&s.detachEvent("on"+i,n.dispatcher)),Object.getOwnPropertyNames(n.handlers).length<=0&&(delete n.handlers,delete n.dispatcher,delete n.disabled),0===Object.getOwnPropertyNames(n).length&&Si.delete(s)}}function So(s,i,n,r){n.forEach(function(e){s(i,e,r)})}function Oa(s){if(s.fixed_)return s;function i(){return!0}function n(){return!1}if(!s||!s.isPropagationStopped||!s.isImmediatePropagationStopped){var r=s||p().event;for(var e in s={},r)"layerX"!==e&&"layerY"!==e&&"keyLocation"!==e&&"webkitMovementX"!==e&&"webkitMovementY"!==e&&"path"!==e&&("returnValue"===e&&r.preventDefault||(s[e]=r[e]));if(s.target||(s.target=s.srcElement||W()),s.relatedTarget||(s.relatedTarget=s.fromElement===s.target?s.toElement:s.fromElement),s.preventDefault=function(){r.preventDefault&&r.preventDefault(),s.returnValue=!1,r.returnValue=!1,s.defaultPrevented=!0},s.defaultPrevented=!1,s.stopPropagation=function(){r.stopPropagation&&r.stopPropagation(),s.cancelBubble=!0,r.cancelBubble=!0,s.isPropagationStopped=i},s.isPropagationStopped=n,s.stopImmediatePropagation=function(){r.stopImmediatePropagation&&r.stopImmediatePropagation(),s.isImmediatePropagationStopped=i,s.stopPropagation()},s.isImmediatePropagationStopped=n,null!=s.clientX){var t=W().documentElement,a=W().body;s.pageX=s.clientX+(t&&t.scrollLeft||a&&a.scrollLeft||0)-(t&&t.clientLeft||a&&a.clientLeft||0),s.pageY=s.clientY+(t&&t.scrollTop||a&&a.scrollTop||0)-(t&&t.clientTop||a&&a.clientTop||0)}s.which=s.charCode||s.keyCode,null!=s.button&&(s.button=1&s.button?0:4&s.button?1:2&s.button?2:0)}return s.fixed_=!0,s}var Ra,rf=["touchstart","touchmove"];function Di(s,i,n){if(Array.isArray(i))return So(Di,s,i,n);Si.has(s)||Si.set(s,{});var r=Si.get(s);if(r.handlers||(r.handlers={}),r.handlers[i]||(r.handlers[i]=[]),n.guid||(n.guid=pr()),r.handlers[i].push(n),r.dispatcher||(r.disabled=!1,r.dispatcher=function(t,a){if(!r.disabled){t=Oa(t);var o=r.handlers[t.type];if(o)for(var l=o.slice(0),u=0,c=l.length;u<c&&!t.isImmediatePropagationStopped();u++)try{l[u].call(s,t,a)}catch(_){gt.error(_)}}}),1===r.handlers[i].length)if(s.addEventListener){var e=!1;(function(){if("boolean"!=typeof Ra){Ra=!1;try{var i=Object.defineProperty({},"passive",{get:function(){Ra=!0}});p().addEventListener("test",null,i),p().removeEventListener("test",null,i)}catch(n){}}return Ra})()&&rf.indexOf(i)>-1&&(e={passive:!0}),s.addEventListener(i,r.dispatcher,e)}else s.attachEvent&&s.attachEvent("on"+i,r.dispatcher)}function pi(s,i,n){if(Si.has(s)){var r=Si.get(s);if(r.handlers){if(Array.isArray(i))return So(pi,s,i,n);var e=function(u,c){r.handlers[c]=[],wu(u,c)};if(void 0===i){for(var t in r.handlers)Object.prototype.hasOwnProperty.call(r.handlers||{},t)&&e(s,t);return}var a=r.handlers[i];if(a){if(!n)return void e(s,i);if(n.guid)for(var o=0;o<a.length;o++)a[o].guid===n.guid&&a.splice(o--,1);wu(s,i)}}}}function yn(s,i,n){var r=Si.has(s)?Si.get(s):{},e=s.parentNode||s.ownerDocument;if("string"==typeof i?i={type:i,target:s}:i.target||(i.target=s),i=Oa(i),r.dispatcher&&r.dispatcher.call(s,i,n),e&&!i.isPropagationStopped()&&!0===i.bubbles)yn.call(null,e,i,n);else if(!e&&!i.defaultPrevented&&i.target&&i.target[i.type]){Si.has(i.target)||Si.set(i.target,{});var t=Si.get(i.target);i.target[i.type]&&(t.disabled=!0,"function"==typeof i.target[i.type]&&i.target[i.type](),t.disabled=!1)}return!i.defaultPrevented}function Na(s,i,n){if(Array.isArray(i))return So(Na,s,i,n);var r=function e(){pi(s,i,e),n.apply(this,arguments)};r.guid=n.guid=n.guid||pr(),Di(s,i,r)}function ku(s,i,n){var r=function e(){pi(s,i,e),n.apply(this,arguments)};r.guid=n.guid=n.guid||pr(),Di(s,i,r)}var ta,nf=Object.freeze({__proto__:null,fixEvent:Oa,on:Di,off:pi,trigger:yn,one:Na,any:ku}),Ot=function(i,n,r){n.guid||(n.guid=pr());var e=n.bind(i);return e.guid=r?r+"_"+n.guid:n.guid,e},gr=function(i,n){var r=p().performance.now();return function(){var a=p().performance.now();a-r>=n&&(i.apply(void 0,arguments),r=a)}},oi=function(){};oi.prototype.allowedEvents_={},oi.prototype.addEventListener=oi.prototype.on=function(s,i){var n=this.addEventListener;this.addEventListener=function(){},Di(this,s,i),this.addEventListener=n},oi.prototype.removeEventListener=oi.prototype.off=function(s,i){pi(this,s,i)},oi.prototype.one=function(s,i){var n=this.addEventListener;this.addEventListener=function(){},Na(this,s,i),this.addEventListener=n},oi.prototype.any=function(s,i){var n=this.addEventListener;this.addEventListener=function(){},ku(this,s,i),this.addEventListener=n},oi.prototype.dispatchEvent=oi.prototype.trigger=function(s){var i=s.type||s;"string"==typeof s&&(s={type:i}),s=Oa(s),this.allowedEvents_[i]&&this["on"+i]&&this["on"+i](s),yn(this,s)},oi.prototype.queueTrigger=function(s){var i=this;ta||(ta=new Map);var n=s.type||s,r=ta.get(this);r||ta.set(this,r=new Map);var e=r.get(n);r.delete(n),p().clearTimeout(e);var t=p().setTimeout(function(){0===r.size&&(r=null,ta.delete(i)),i.trigger(s)},0);r.set(n,t)};var Fa=function(i){return"function"==typeof i.name?i.name():"string"==typeof i.name?i.name:i.name_?i.name_:i.constructor&&i.constructor.name?i.constructor.name:typeof i},mr=function(i){return i instanceof oi||!!i.eventBusEl_&&["on","one","off","trigger"].every(function(n){return"function"==typeof i[n]})},xo=function(i){return"string"==typeof i&&/\S/.test(i)||Array.isArray(i)&&!!i.length},Ba=function(i,n,r){if(!i||!i.nodeName&&!mr(i))throw new Error("Invalid target for "+Fa(n)+"#"+r+"; must be a DOM node or evented object.")},Iu=function(i,n,r){if(!xo(i))throw new Error("Invalid event type for "+Fa(n)+"#"+r+"; must be a non-empty string or array.")},Lu=function(i,n,r){if("function"!=typeof i)throw new Error("Invalid listener for "+Fa(n)+"#"+r+"; must be a function.")},Co=function(i,n,r){var t,a,o,e=n.length<3||n[0]===i||n[0]===i.eventBusEl_;return e?(t=i.eventBusEl_,n.length>=3&&n.shift(),a=n[0],o=n[1]):(t=n[0],a=n[1],o=n[2]),Ba(t,i,r),Iu(a,i,r),Lu(o,i,r),{isTargetingSelf:e,target:t,type:a,listener:o=Ot(i,o)}},Gr=function(i,n,r,e){Ba(i,i,n),i.nodeName?nf[n](i,r,e):i[n](r,e)},of={on:function(){for(var i=this,n=arguments.length,r=new Array(n),e=0;e<n;e++)r[e]=arguments[e];var t=Co(this,r,"on"),a=t.isTargetingSelf,o=t.target,l=t.type,u=t.listener;if(Gr(o,"on",l,u),!a){var c=function(){return i.off(o,l,u)};c.guid=u.guid;var _=function(){return i.off("dispose",c)};_.guid=u.guid,Gr(this,"on","dispose",c),Gr(o,"on","dispose",_)}},one:function(){for(var i=this,n=arguments.length,r=new Array(n),e=0;e<n;e++)r[e]=arguments[e];var t=Co(this,r,"one"),a=t.isTargetingSelf,o=t.target,l=t.type,u=t.listener;if(a)Gr(o,"one",l,u);else{var c=function _(){i.off(o,l,_);for(var y=arguments.length,A=new Array(y),I=0;I<y;I++)A[I]=arguments[I];u.apply(null,A)};c.guid=u.guid,Gr(o,"one",l,c)}},any:function(){for(var i=this,n=arguments.length,r=new Array(n),e=0;e<n;e++)r[e]=arguments[e];var t=Co(this,r,"any"),a=t.isTargetingSelf,o=t.target,l=t.type,u=t.listener;if(a)Gr(o,"any",l,u);else{var c=function _(){i.off(o,l,_);for(var y=arguments.length,A=new Array(y),I=0;I<y;I++)A[I]=arguments[I];u.apply(null,A)};c.guid=u.guid,Gr(o,"any",l,c)}},off:function(i,n,r){if(!i||xo(i))pi(this.eventBusEl_,i,n);else{var e=i,t=n;Ba(e,this,"off"),Iu(t,this,"off"),Lu(r,this,"off"),r=Ot(this,r),this.off("dispose",r),e.nodeName?(pi(e,t,r),pi(e,"dispose",r)):mr(e)&&(e.off(t,r),e.off("dispose",r))}},trigger:function(i,n){if(Ba(this.eventBusEl_,this,"trigger"),!xo(i&&"string"!=typeof i?i.type:i)){var e="Invalid event type for "+Fa(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.";if(!i)throw new Error(e);(this.log||gt).error(e)}return yn(this.eventBusEl_,i,n)}};function Eo(s,i){void 0===i&&(i={});var r=i.eventBusKey;if(r){if(!s[r].nodeName)throw new Error('The eventBusKey "'+r+'" does not refer to an element.');s.eventBusEl_=s[r]}else s.eventBusEl_=yt("span",{className:"vjs-event-bus"});return zt(s,of),s.eventedCallbacks&&s.eventedCallbacks.forEach(function(e){e()}),s.on("dispose",function(){s.off(),[s,s.el_,s.eventBusEl_].forEach(function(e){e&&Si.has(e)&&Si.delete(e)}),p().setTimeout(function(){s.eventBusEl_=null},0)}),s}var lf={state:{},setState:function(i){var r,n=this;return"function"==typeof i&&(i=i()),hn(i,function(e,t){n.state[t]!==e&&((r=r||{})[t]={from:n.state[t],to:e}),n.state[t]=e}),r&&mr(this)&&this.trigger({changes:r,type:"statechanged"}),r}};function Du(s,i){return zt(s,lf),s.state=zt({},s.state,i),"function"==typeof s.handleStateChanged&&mr(s)&&s.on("statechanged",s.handleStateChanged),s}var Ua=function(i){return"string"!=typeof i?i:i.replace(/./,function(n){return n.toLowerCase()})},Kt=function(i){return"string"!=typeof i?i:i.replace(/./,function(n){return n.toUpperCase()})};function Rt(){for(var s={},i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return n.forEach(function(e){!e||hn(e,function(t,a){Kn(t)?(Kn(s[a])||(s[a]={}),s[a]=Rt(s[a],t)):s[a]=t})}),s}var df=function(){function s(){this.map_={}}var i=s.prototype;return i.has=function(r){return r in this.map_},i.delete=function(r){var e=this.has(r);return delete this.map_[r],e},i.set=function(r,e){return this.map_[r]=e,this},i.forEach=function(r,e){for(var t in this.map_)r.call(e,this.map_[t],t,this)},s}(),cf=p().Map?p().Map:df,hf=function(){function s(){this.set_={}}var i=s.prototype;return i.has=function(r){return r in this.set_},i.delete=function(r){var e=this.has(r);return delete this.set_[r],e},i.add=function(r){return this.set_[r]=1,this},i.forEach=function(r,e){for(var t in this.set_)r.call(e,t,t,this)},s}(),Ao=p().Set?p().Set:hf,Ee=function(){function s(n,r,e){var t=this;if(this.player_=!n&&this.play?n=this:n,this.isDisposed_=!1,this.parentComponent_=null,this.options_=Rt({},this.options_),r=this.options_=Rt(this.options_,r),this.id_=r.id||r.el&&r.el.id,!this.id_){var a=n&&n.id&&n.id()||"no_player";this.id_=a+"_component_"+pr()}this.name_=r.name||null,r.el?this.el_=r.el:!1!==r.createEl&&(this.el_=this.createEl()),r.className&&this.el_&&r.className.split(" ").forEach(function(o){return t.addClass(o)}),!1!==r.evented&&(Eo(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),Du(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Ao,this.setIntervalIds_=new Ao,this.rafIds_=new Ao,this.namedRafs_=new cf,this.clearingTimersOnDispose_=!1,!1!==r.initChildren&&this.initChildren(),this.ready(e),!1!==r.reportTouchActivity&&this.enableTouchActivity()}var i=s.prototype;return i.dispose=function(r){if(void 0===r&&(r={}),!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var e=this.children_.length-1;e>=0;e--)this.children_[e].dispose&&this.children_[e].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(r.restoreEl?this.el_.parentNode.replaceChild(r.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}},i.isDisposed=function(){return Boolean(this.isDisposed_)},i.player=function(){return this.player_},i.options=function(r){return r?(this.options_=Rt(this.options_,r),this.options_):this.options_},i.el=function(){return this.el_},i.createEl=function(r,e,t){return yt(r,e,t)},i.localize=function(r,e,t){void 0===t&&(t=r);var a=this.player_.language&&this.player_.language(),o=this.player_.languages&&this.player_.languages(),l=o&&o[a],u=a&&a.split("-")[0],c=o&&o[u],_=t;return l&&l[r]?_=l[r]:c&&c[r]&&(_=c[r]),e&&(_=_.replace(/\{(\d+)\}/g,function(y,A){var I=e[A-1],D=I;return void 0===I&&(D=y),D})),_},i.handleLanguagechange=function(){},i.contentEl=function(){return this.contentEl_||this.el_},i.id=function(){return this.id_},i.name=function(){return this.name_},i.children=function(){return this.children_},i.getChildById=function(r){return this.childIndex_[r]},i.getChild=function(r){if(r)return this.childNameIndex_[r]},i.getDescendant=function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];e=e.reduce(function(l,u){return l.concat(u)},[]);for(var a=this,o=0;o<e.length;o++)if(!(a=a.getChild(e[o]))||!a.getChild)return;return a},i.addChild=function(r,e,t){var a,o;if(void 0===e&&(e={}),void 0===t&&(t=this.children_.length),"string"==typeof r){o=Kt(r);var l=e.componentClass||o;e.name=o;var u=s.getComponent(l);if(!u)throw new Error("Component "+l+" does not exist");if("function"!=typeof u)return null;a=new u(this.player_||this,e)}else a=r;if(a.parentComponent_&&a.parentComponent_.removeChild(a),this.children_.splice(t,0,a),a.parentComponent_=this,"function"==typeof a.id&&(this.childIndex_[a.id()]=a),(o=o||a.name&&Kt(a.name()))&&(this.childNameIndex_[o]=a,this.childNameIndex_[Ua(o)]=a),"function"==typeof a.el&&a.el()){var c=null;this.children_[t+1]&&(this.children_[t+1].el_?c=this.children_[t+1].el_:gn(this.children_[t+1])&&(c=this.children_[t+1])),this.contentEl().insertBefore(a.el(),c)}return a},i.removeChild=function(r){if("string"==typeof r&&(r=this.getChild(r)),r&&this.children_){for(var e=!1,t=this.children_.length-1;t>=0;t--)if(this.children_[t]===r){e=!0,this.children_.splice(t,1);break}if(e){r.parentComponent_=null,this.childIndex_[r.id()]=null,this.childNameIndex_[Kt(r.name())]=null,this.childNameIndex_[Ua(r.name())]=null;var a=r.el();a&&a.parentNode===this.contentEl()&&this.contentEl().removeChild(r.el())}}},i.initChildren=function(){var r=this,e=this.options_.children;if(e){var o,t=this.options_,l=s.getComponent("Tech");(o=Array.isArray(e)?e:Object.keys(e)).concat(Object.keys(this.options_).filter(function(u){return!o.some(function(c){return"string"==typeof c?u===c:u===c.name})})).map(function(u){var c,_;return"string"==typeof u?_=e[c=u]||r.options_[c]||{}:(c=u.name,_=u),{name:c,opts:_}}).filter(function(u){var c=s.getComponent(u.opts.componentClass||Kt(u.name));return c&&!l.isTech(c)}).forEach(function(c){var _=c.name,y=c.opts;if(void 0!==t[_]&&(y=t[_]),!1!==y){!0===y&&(y={}),y.playerOptions=r.options_.playerOptions;var A=r.addChild(_,y);A&&(r[_]=A)}})}},i.buildCSSClass=function(){return""},i.ready=function(r,e){if(void 0===e&&(e=!1),r){if(!this.isReady_)return this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(r);e?r.call(this):this.setTimeout(r,1)}},i.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var r=this.readyQueue_;this.readyQueue_=[],r&&r.length>0&&r.forEach(function(e){e.call(this)},this),this.trigger("ready")},1)},i.$=function(r,e){return Dr(r,e||this.contentEl())},i.$$=function(r,e){return Su(r,e||this.contentEl())},i.hasClass=function(r){return zr(this.el_,r)},i.addClass=function(r){hr(this.el_,r)},i.removeClass=function(r){Jn(this.el_,r)},i.toggleClass=function(r,e){pu(this.el_,r,e)},i.show=function(){this.removeClass("vjs-hidden")},i.hide=function(){this.addClass("vjs-hidden")},i.lockShowing=function(){this.addClass("vjs-lock-showing")},i.unlockShowing=function(){this.removeClass("vjs-lock-showing")},i.getAttribute=function(r){return mu(this.el_,r)},i.setAttribute=function(r,e){mn(this.el_,r,e)},i.removeAttribute=function(r){Da(this.el_,r)},i.width=function(r,e){return this.dimension("width",r,e)},i.height=function(r,e){return this.dimension("height",r,e)},i.dimensions=function(r,e){this.width(r,!0),this.height(e)},i.dimension=function(r,e,t){if(void 0!==e)return(null===e||e!=e)&&(e=0),this.el_.style[r]=-1!==(""+e).indexOf("%")||-1!==(""+e).indexOf("px")?e:"auto"===e?"":e+"px",void(t||this.trigger("componentresize"));if(!this.el_)return 0;var a=this.el_.style[r],o=a.indexOf("px");return parseInt(-1!==o?a.slice(0,o):this.el_["offset"+Kt(r)],10)},i.currentDimension=function(r){var e=0;if("width"!==r&&"height"!==r)throw new Error("currentDimension only accepts width or height value");if(e=Xn(this.el_,r),0===(e=parseFloat(e))||isNaN(e)){var t="offset"+Kt(r);e=this.el_[t]}return e},i.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},i.currentWidth=function(){return this.currentDimension("width")},i.currentHeight=function(){return this.currentDimension("height")},i.focus=function(){this.el_.focus()},i.blur=function(){this.el_.blur()},i.handleKeyDown=function(r){this.player_&&(ee().isEventKey(r,"Tab")||r.stopPropagation(),this.player_.handleKeyDown(r))},i.handleKeyPress=function(r){this.handleKeyDown(r)},i.emitTapEvents=function(){var o,r=0,e=null;this.on("touchstart",function(u){1===u.touches.length&&(e={pageX:u.touches[0].pageX,pageY:u.touches[0].pageY},r=p().performance.now(),o=!0)}),this.on("touchmove",function(u){if(u.touches.length>1)o=!1;else if(e){var c=u.touches[0].pageX-e.pageX,_=u.touches[0].pageY-e.pageY;Math.sqrt(c*c+_*_)>10&&(o=!1)}});var l=function(){o=!1};this.on("touchleave",l),this.on("touchcancel",l),this.on("touchend",function(u){e=null,!0===o&&p().performance.now()-r<200&&(u.preventDefault(),this.trigger("tap"))})},i.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var e,r=Ot(this.player(),this.player().reportUserActivity);this.on("touchstart",function(){r(),this.clearInterval(e),e=this.setInterval(r,250)});var t=function(o){r(),this.clearInterval(e)};this.on("touchmove",r),this.on("touchend",t),this.on("touchcancel",t)}},i.setTimeout=function(r,e){var a,t=this;return r=Ot(this,r),this.clearTimersOnDispose_(),a=p().setTimeout(function(){t.setTimeoutIds_.has(a)&&t.setTimeoutIds_.delete(a),r()},e),this.setTimeoutIds_.add(a),a},i.clearTimeout=function(r){return this.setTimeoutIds_.has(r)&&(this.setTimeoutIds_.delete(r),p().clearTimeout(r)),r},i.setInterval=function(r,e){r=Ot(this,r),this.clearTimersOnDispose_();var t=p().setInterval(r,e);return this.setIntervalIds_.add(t),t},i.clearInterval=function(r){return this.setIntervalIds_.has(r)&&(this.setIntervalIds_.delete(r),p().clearInterval(r)),r},i.requestAnimationFrame=function(r){var t,e=this;return this.supportsRaf_?(this.clearTimersOnDispose_(),r=Ot(this,r),t=p().requestAnimationFrame(function(){e.rafIds_.has(t)&&e.rafIds_.delete(t),r()}),this.rafIds_.add(t),t):this.setTimeout(r,1e3/60)},i.requestNamedAnimationFrame=function(r,e){var t=this;if(!this.namedRafs_.has(r)){this.clearTimersOnDispose_(),e=Ot(this,e);var a=this.requestAnimationFrame(function(){e(),t.namedRafs_.has(r)&&t.namedRafs_.delete(r)});return this.namedRafs_.set(r,a),r}},i.cancelNamedAnimationFrame=function(r){!this.namedRafs_.has(r)||(this.cancelAnimationFrame(this.namedRafs_.get(r)),this.namedRafs_.delete(r))},i.cancelAnimationFrame=function(r){return this.supportsRaf_?(this.rafIds_.has(r)&&(this.rafIds_.delete(r),p().cancelAnimationFrame(r)),r):this.clearTimeout(r)},i.clearTimersOnDispose_=function(){var r=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(e){var a=e[1];r[e[0]].forEach(function(o,l){return r[a](l)})}),r.clearingTimersOnDispose_=!1}))},s.registerComponent=function(r,e){if("string"!=typeof r||!r)throw new Error('Illegal component name, "'+r+'"; must be a non-empty string.');var t=s.getComponent("Tech"),a=t&&t.isTech(e),o=s===e||s.prototype.isPrototypeOf(e.prototype);if(a||!o)throw new Error('Illegal component, "'+r+'"; '+(a?"techs must be registered using Tech.registerTech()":"must be a Component subclass")+".");r=Kt(r),s.components_||(s.components_={});var u=s.getComponent("Player");if("Player"===r&&u&&u.players){var c=u.players,_=Object.keys(c);if(c&&_.length>0&&_.map(function(y){return c[y]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return s.components_[r]=e,s.components_[Ua(r)]=e,e},s.getComponent=function(r){if(r&&s.components_)return s.components_[r]},s}();function Mu(s,i,n,r){return function ff(s,i,n){if("number"!=typeof i||i<0||i>n)throw new Error("Failed to execute '"+s+"' on 'TimeRanges': The index provided ("+i+") is non-numeric or out of bounds (0-"+n+").")}(s,r,n.length-1),n[r][i]}function Po(s){var i;return i=void 0===s||0===s.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:s.length,start:Mu.bind(null,"start",0,s),end:Mu.bind(null,"end",1,s)},p().Symbol&&p().Symbol.iterator&&(i[p().Symbol.iterator]=function(){return(s||[]).values()}),i}function Kr(s,i){return Array.isArray(s)?Po(s):void 0===s||void 0===i?Po():Po([[s,i]])}function Ou(s,i){var r,e,n=0;if(!i)return 0;(!s||!s.length)&&(s=Kr(0,0));for(var t=0;t<s.length;t++)r=s.start(t),(e=s.end(t))>i&&(e=i),n+=e-r;return n/i}function xi(s){if(s instanceof xi)return s;"number"==typeof s?this.code=s:"string"==typeof s?this.message=s:ur(s)&&("number"==typeof s.code&&(this.code=s.code),zt(this,s)),this.message||(this.message=xi.defaultMessages[this.code]||"")}Ee.prototype.supportsRaf_="function"==typeof p().requestAnimationFrame&&"function"==typeof p().cancelAnimationFrame,Ee.registerComponent("Component",Ee),xi.prototype.code=0,xi.prototype.message="",xi.prototype.status=null,xi.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],xi.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var _n=0;_n<xi.errorTypes.length;_n++)xi[xi.errorTypes[_n]]=_n,xi.prototype[xi.errorTypes[_n]]=_n;function ia(s){return null!=s&&"function"==typeof s.then}function Yi(s){ia(s)&&s.then(null,function(i){})}var wo=function(i){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(r,e,t){return i[e]&&(r[e]=i[e]),r},{cues:i.cues&&Array.prototype.map.call(i.cues,function(r){return{startTime:r.startTime,endTime:r.endTime,text:r.text,id:r.id}})})},ko="vjs-modal-dialog",Tn=function(s){function i(r,e){var t;return(t=s.call(this,r,e)||this).handleKeyDown_=function(a){return t.handleKeyDown(a)},t.close_=function(a){return t.close(a)},t.opened_=t.hasBeenOpened_=t.hasBeenFilled_=!1,t.closeable(!t.options_.uncloseable),t.content(t.options_.content),t.contentEl_=yt("div",{className:ko+"-content"},{role:"document"}),t.descEl_=yt("p",{className:ko+"-description vjs-control-text",id:t.el().getAttribute("aria-describedby")}),qr(t.descEl_,t.description()),t.el_.appendChild(t.descEl_),t.el_.appendChild(t.contentEl_),t}U(i,s);var n=i.prototype;return n.createEl=function(){return s.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},n.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,s.prototype.dispose.call(this)},n.buildCSSClass=function(){return ko+" vjs-hidden "+s.prototype.buildCSSClass.call(this)},n.label=function(){return this.localize(this.options_.label||"Modal Window")},n.description=function(){var e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e},n.open=function(){if(!this.opened_){var e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},n.opened=function(e){return"boolean"==typeof e&&this[e?"open":"close"](),this.opened_},n.close=function(){if(this.opened_){var e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},n.closeable=function(e){if("boolean"==typeof e){var t=this.closeable_=!!e,a=this.getChild("closeButton");if(t&&!a){var o=this.contentEl_;this.contentEl_=this.el_,a=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=o,this.on(a,"close",this.close_)}!t&&a&&(this.off(a,"close",this.close_),this.removeChild(a),a.dispose())}return this.closeable_},n.fill=function(){this.fillWith(this.content())},n.fillWith=function(e){var t=this.contentEl(),a=t.parentNode,o=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,a.removeChild(t),this.empty(),bu(t,e),this.trigger("modalfill"),o?a.insertBefore(t,o):a.appendChild(t);var l=this.getChild("closeButton");l&&a.appendChild(l.el_)},n.empty=function(){this.trigger("beforemodalempty"),vo(this.contentEl()),this.trigger("modalempty")},n.content=function(e){return void 0!==e&&(this.content_=e),this.content_},n.conditionalFocus_=function(){var e=W().activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,(t.contains(e)||t===e)&&(this.previouslyActiveEl_=e,this.focus())},n.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},n.handleKeyDown=function(e){if(e.stopPropagation(),ee().isEventKey(e,"Escape")&&this.closeable())return e.preventDefault(),void this.close();if(ee().isEventKey(e,"Tab")){for(var o,t=this.focusableEls_(),a=this.el_.querySelector(":focus"),l=0;l<t.length;l++)if(a===t[l]){o=l;break}W().activeElement===this.el_&&(o=0),e.shiftKey&&0===o?(t[t.length-1].focus(),e.preventDefault()):!e.shiftKey&&o===t.length-1&&(t[0].focus(),e.preventDefault())}},n.focusableEls_=function(){var e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,function(t){return(t instanceof p().HTMLAnchorElement||t instanceof p().HTMLAreaElement)&&t.hasAttribute("href")||(t instanceof p().HTMLInputElement||t instanceof p().HTMLSelectElement||t instanceof p().HTMLTextAreaElement||t instanceof p().HTMLButtonElement)&&!t.hasAttribute("disabled")||t instanceof p().HTMLIFrameElement||t instanceof p().HTMLObjectElement||t instanceof p().HTMLEmbedElement||t.hasAttribute("tabindex")&&-1!==t.getAttribute("tabindex")||t.hasAttribute("contenteditable")})},i}(Ee);Tn.prototype.options_={pauseOnOpen:!0,temporary:!0},Ee.registerComponent("ModalDialog",Tn);var bn=function(s){function i(r){var e;void 0===r&&(r=[]),(e=s.call(this)||this).tracks_=[],Object.defineProperty(X(e),"length",{get:function(){return this.tracks_.length}});for(var t=0;t<r.length;t++)e.addTrack(r[t]);return e}U(i,s);var n=i.prototype;return n.addTrack=function(e){var t=this,a=this.tracks_.length;""+a in this||Object.defineProperty(this,a,{get:function(){return this.tracks_[a]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=function(){t.trigger({track:e,type:"labelchange",target:t})},mr(e)&&e.addEventListener("labelchange",e.labelchange_)},n.removeTrack=function(e){for(var t,a=0,o=this.length;a<o;a++)if(this[a]===e){(t=this[a]).off&&t.off(),this.tracks_.splice(a,1);break}!t||this.trigger({track:t,type:"removetrack",target:this})},n.getTrackById=function(e){for(var t=null,a=0,o=this.length;a<o;a++){var l=this[a];if(l.id===e){t=l;break}}return t},i}(oi);for(var mf in bn.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"},bn.prototype.allowedEvents_)bn.prototype["on"+mf]=null;var Io=function(i,n){for(var r=0;r<i.length;r++)!Object.keys(i[r]).length||n.id===i[r].id||(i[r].enabled=!1)},vf=function(s){function i(r){var e;void 0===r&&(r=[]);for(var t=r.length-1;t>=0;t--)if(r[t].enabled){Io(r,r[t]);break}return(e=s.call(this,r)||this).changing_=!1,e}U(i,s);var n=i.prototype;return n.addTrack=function(e){var t=this;e.enabled&&Io(this,e),s.prototype.addTrack.call(this,e),e.addEventListener&&(e.enabledChange_=function(){t.changing_||(t.changing_=!0,Io(t,e),t.changing_=!1,t.trigger("change"))},e.addEventListener("enabledchange",e.enabledChange_))},n.removeTrack=function(e){s.prototype.removeTrack.call(this,e),e.removeEventListener&&e.enabledChange_&&(e.removeEventListener("enabledchange",e.enabledChange_),e.enabledChange_=null)},i}(bn),Lo=function(i,n){for(var r=0;r<i.length;r++)!Object.keys(i[r]).length||n.id===i[r].id||(i[r].selected=!1)},yf=function(s){function i(r){var e;void 0===r&&(r=[]);for(var t=r.length-1;t>=0;t--)if(r[t].selected){Lo(r,r[t]);break}return(e=s.call(this,r)||this).changing_=!1,Object.defineProperty(X(e),"selectedIndex",{get:function(){for(var o=0;o<this.length;o++)if(this[o].selected)return o;return-1},set:function(){}}),e}U(i,s);var n=i.prototype;return n.addTrack=function(e){var t=this;e.selected&&Lo(this,e),s.prototype.addTrack.call(this,e),e.addEventListener&&(e.selectedChange_=function(){t.changing_||(t.changing_=!0,Lo(t,e),t.changing_=!1,t.trigger("change"))},e.addEventListener("selectedchange",e.selectedChange_))},n.removeTrack=function(e){s.prototype.removeTrack.call(this,e),e.removeEventListener&&e.selectedChange_&&(e.removeEventListener("selectedchange",e.selectedChange_),e.selectedChange_=null)},i}(bn),Nu=function(s){function i(){return s.apply(this,arguments)||this}U(i,s);var n=i.prototype;return n.addTrack=function(e){var t=this;s.prototype.addTrack.call(this,e),this.queueChange_||(this.queueChange_=function(){return t.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return t.trigger("selectedlanguagechange")}),e.addEventListener("modechange",this.queueChange_),-1===["metadata","chapters"].indexOf(e.kind)&&e.addEventListener("modechange",this.triggerSelectedlanguagechange_)},n.removeTrack=function(e){s.prototype.removeTrack.call(this,e),e.removeEventListener&&(this.queueChange_&&e.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&e.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},i}(bn),_f=function(){function s(n){void 0===n&&(n=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var r=0,e=n.length;r<e;r++)this.addTrackElement_(n[r])}var i=s.prototype;return i.addTrackElement_=function(r){var e=this.trackElements_.length;""+e in this||Object.defineProperty(this,e,{get:function(){return this.trackElements_[e]}}),-1===this.trackElements_.indexOf(r)&&this.trackElements_.push(r)},i.getTrackElementByTrack_=function(r){for(var e,t=0,a=this.trackElements_.length;t<a;t++)if(r===this.trackElements_[t].track){e=this.trackElements_[t];break}return e},i.removeTrackElement_=function(r){for(var e=0,t=this.trackElements_.length;e<t;e++)if(r===this.trackElements_[e]){this.trackElements_[e].track&&"function"==typeof this.trackElements_[e].track.off&&this.trackElements_[e].track.off(),"function"==typeof this.trackElements_[e].off&&this.trackElements_[e].off(),this.trackElements_.splice(e,1);break}},s}(),Fu=function(){function s(n){s.prototype.setCues_.call(this,n),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var i=s.prototype;return i.setCues_=function(r){var e=this.length||0,t=0,a=r.length;this.cues_=r,this.length_=r.length;var o=function(u){""+u in this||Object.defineProperty(this,""+u,{get:function(){return this.cues_[u]}})};if(e<a)for(t=e;t<a;t++)o.call(this,t)},i.getCueById=function(r){for(var e=null,t=0,a=this.length;t<a;t++){var o=this[t];if(o.id===r){e=o;break}}return e},s}(),Tf={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},bf={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Sf={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},Bu={disabled:"disabled",hidden:"hidden",showing:"showing"},Do=function(s){function i(n){var r;void 0===n&&(n={}),r=s.call(this)||this;var e={id:n.id||"vjs_track_"+pr(),kind:n.kind||"",language:n.language||""},t=n.label||"",a=function(u){Object.defineProperty(X(r),u,{get:function(){return e[u]},set:function(){}})};for(var o in e)a(o);return Object.defineProperty(X(r),"label",{get:function(){return t},set:function(u){u!==t&&(t=u,this.trigger("labelchange"))}}),r}return U(i,s),i}(oi),Mo=function(i){var n=["protocol","hostname","port","pathname","search","hash","host"],r=W().createElement("a");r.href=i;for(var e={},t=0;t<n.length;t++)e[n[t]]=r[n[t]];return"http:"===e.protocol&&(e.host=e.host.replace(/:80$/,"")),"https:"===e.protocol&&(e.host=e.host.replace(/:443$/,"")),e.protocol||(e.protocol=p().location.protocol),e.host||(e.host=p().location.host),e},Uu=function(i){if(!i.match(/^https?:\/\//)){var n=W().createElement("a");n.href=i,i=n.href}return i},Oo=function(i){if("string"==typeof i){var r=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(i);if(r)return r.pop().toLowerCase()}return""},ja=function(i,n){void 0===n&&(n=p().location);var r=Mo(i);return(":"===r.protocol?n.protocol:r.protocol)+r.host!==n.protocol+n.host},xf=Object.freeze({__proto__:null,parseUrl:Mo,getAbsoluteURL:Uu,getFileExtension:Oo,isCrossOrigin:ja}),ju=function(i,n){var r=new(p().WebVTT.Parser)(p(),p().vttjs,p().WebVTT.StringDecoder()),e=[];r.oncue=function(t){n.addCue(t)},r.onparsingerror=function(t){e.push(t)},r.onflush=function(){n.trigger({type:"loadeddata",target:n})},r.parse(i),e.length>0&&(p().console&&p().console.groupCollapsed&&p().console.groupCollapsed("Text Track parsing errors for "+n.src),e.forEach(function(t){return gt.error(t)}),p().console&&p().console.groupEnd&&p().console.groupEnd()),r.flush()},Vu=function(i,n){var r={uri:i},e=ja(i);e&&(r.cors=e);var t="use-credentials"===n.tech_.crossOrigin();t&&(r.withCredentials=t),it()(r,Ot(this,function(a,o,l){if(a)return gt.error(a,o);n.loaded_=!0,"function"!=typeof p().WebVTT?n.tech_&&n.tech_.any(["vttjsloaded","vttjserror"],function(u){if("vttjserror"!==u.type)return ju(l,n);gt.error("vttjs failed to load, stopping trying to process "+n.src)}):ju(l,n)}))},ra=function(s){function i(r){var e;if(void 0===r&&(r={}),!r.tech)throw new Error("A tech was not provided.");var t=Rt(r,{kind:Sf[r.kind]||"subtitles",language:r.language||r.srclang||""}),a=Bu[t.mode]||"disabled",o=t.default;("metadata"===t.kind||"chapters"===t.kind)&&(a="hidden"),(e=s.call(this,t)||this).tech_=t.tech,e.cues_=[],e.activeCues_=[],e.preload_=!1!==e.tech_.preloadTextTracks;var l=new Fu(e.cues_),u=new Fu(e.activeCues_),c=!1;return e.timeupdateHandler=Ot(X(e),function(y){if(void 0===y&&(y={}),!this.tech_.isDisposed()){if(!this.tech_.isReady_)return void("timeupdate"!==y.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler)));this.activeCues=this.activeCues,c&&(this.trigger("cuechange"),c=!1),"timeupdate"!==y.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}}),e.tech_.one("dispose",function(){e.stopTracking()}),"disabled"!==a&&e.startTracking(),Object.defineProperties(X(e),{default:{get:function(){return o},set:function(){}},mode:{get:function(){return a},set:function(A){!Bu[A]||a!==A&&(a=A,!this.preload_&&"disabled"!==a&&0===this.cues.length&&Vu(this.src,this),this.stopTracking(),"disabled"!==a&&this.startTracking(),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?l:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return u;for(var A=this.tech_.currentTime(),I=[],D=0,M=this.cues.length;D<M;D++){var Q=this.cues[D];(Q.startTime<=A&&Q.endTime>=A||Q.startTime===Q.endTime&&Q.startTime<=A&&Q.startTime+.5>=A)&&I.push(Q)}if(c=!1,I.length!==this.activeCues_.length)c=!0;else for(var me=0;me<I.length;me++)-1===this.activeCues_.indexOf(I[me])&&(c=!0);return this.activeCues_=I,u.setCues_(this.activeCues_),u},set:function(){}}}),t.src?(e.src=t.src,e.preload_||(e.loaded_=!0),(e.preload_||"subtitles"!==t.kind&&"captions"!==t.kind)&&Vu(e.src,X(e))):e.loaded_=!0,e}U(i,s);var n=i.prototype;return n.startTracking=function(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)},n.stopTracking=function(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)},n.addCue=function(e){var t=e;if(p().vttjs&&!(e instanceof p().vttjs.VTTCue)){for(var a in t=new(p().vttjs.VTTCue)(e.startTime,e.endTime,e.text),e)a in t||(t[a]=e[a]);t.id=e.id,t.originalCue_=e}for(var o=this.tech_.textTracks(),l=0;l<o.length;l++)o[l]!==this&&o[l].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)},n.removeCue=function(e){for(var t=this.cues_.length;t--;){var a=this.cues_[t];if(a===e||a.originalCue_&&a.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}},i}(Do);ra.prototype.allowedEvents_={cuechange:"cuechange"};var Hu=function(s){function i(n){var r;void 0===n&&(n={});var e=Rt(n,{kind:bf[n.kind]||""});r=s.call(this,e)||this;var t=!1;return Object.defineProperty(X(r),"enabled",{get:function(){return t},set:function(o){"boolean"!=typeof o||o===t||(t=o,this.trigger("enabledchange"))}}),e.enabled&&(r.enabled=e.enabled),r.loaded_=!0,r}return U(i,s),i}(Do),$u=function(s){function i(n){var r;void 0===n&&(n={});var e=Rt(n,{kind:Tf[n.kind]||""});r=s.call(this,e)||this;var t=!1;return Object.defineProperty(X(r),"selected",{get:function(){return t},set:function(o){"boolean"!=typeof o||o===t||(t=o,this.trigger("selectedchange"))}}),e.selected&&(r.selected=e.selected),r}return U(i,s),i}(Do),Sn=function(s){function i(n){var r;void 0===n&&(n={}),r=s.call(this)||this;var e,t=new ra(n);return r.kind=t.kind,r.src=t.src,r.srclang=t.language,r.label=t.label,r.default=t.default,Object.defineProperties(X(r),{readyState:{get:function(){return e}},track:{get:function(){return t}}}),e=0,t.addEventListener("loadeddata",function(){e=2,r.trigger({type:"load",target:X(r)})}),r}return U(i,s),i}(oi);Sn.prototype.allowedEvents_={load:"load"},Sn.NONE=0,Sn.LOADING=1,Sn.LOADED=2,Sn.ERROR=3;var ji={audio:{ListClass:vf,TrackClass:Hu,capitalName:"Audio"},video:{ListClass:yf,TrackClass:$u,capitalName:"Video"},text:{ListClass:Nu,TrackClass:ra,capitalName:"Text"}};Object.keys(ji).forEach(function(s){ji[s].getterName=s+"Tracks",ji[s].privateName=s+"Tracks_"});var xn={remoteText:{ListClass:Nu,TrackClass:ra,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:_f,TrackClass:Sn,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Ci=he({},ji,xn);xn.names=Object.keys(xn),ji.names=Object.keys(ji),Ci.names=[].concat(xn.names).concat(ji.names);var It=function(s){function i(r,e){var t;return void 0===r&&(r={}),void 0===e&&(e=function(){}),r.reportTouchActivity=!1,(t=s.call(this,null,r,e)||this).onDurationChange_=function(a){return t.onDurationChange(a)},t.trackProgress_=function(a){return t.trackProgress(a)},t.trackCurrentTime_=function(a){return t.trackCurrentTime(a)},t.stopTrackingCurrentTime_=function(a){return t.stopTrackingCurrentTime(a)},t.disposeSourceHandler_=function(a){return t.disposeSourceHandler(a)},t.queuedHanders_=new Set,t.hasStarted_=!1,t.on("playing",function(){this.hasStarted_=!0}),t.on("loadstart",function(){this.hasStarted_=!1}),Ci.names.forEach(function(a){var o=Ci[a];r&&r[o.getterName]&&(t[o.privateName]=r[o.getterName])}),t.featuresProgressEvents||t.manualProgressOn(),t.featuresTimeupdateEvents||t.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(a){!1===r["native"+a+"Tracks"]&&(t["featuresNative"+a+"Tracks"]=!1)}),!1===r.nativeCaptions||!1===r.nativeTextTracks?t.featuresNativeTextTracks=!1:(!0===r.nativeCaptions||!0===r.nativeTextTracks)&&(t.featuresNativeTextTracks=!0),t.featuresNativeTextTracks||t.emulateTextTracks(),t.preloadTextTracks=!1!==r.preloadTextTracks,t.autoRemoteTextTracks_=new Ci.text.ListClass,t.initTrackListeners(),r.nativeControlsForTouch||t.emitTapEvents(),t.constructor&&(t.name_=t.constructor.name||"Unknown Tech"),t}U(i,s);var n=i.prototype;return n.triggerSourceset=function(e){var t=this;this.isReady_||this.one("ready",function(){return t.setTimeout(function(){return t.triggerSourceset(e)},1)}),this.trigger({src:e,type:"sourceset"})},n.manualProgressOn=function(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)},n.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)},n.trackProgress=function(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Ot(this,function(){var t=this.bufferedPercent();this.bufferedPercent_!==t&&this.trigger("progress"),this.bufferedPercent_=t,1===t&&this.stopTrackingProgress()}),500)},n.onDurationChange=function(e){this.duration_=this.duration()},n.buffered=function(){return Kr(0,0)},n.bufferedPercent=function(){return Ou(this.buffered(),this.duration_)},n.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},n.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)},n.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)},n.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},n.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},n.dispose=function(){this.clearTracks(ji.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),s.prototype.dispose.call(this)},n.clearTracks=function(e){var t=this;(e=[].concat(e)).forEach(function(a){for(var o=t[a+"Tracks"]()||[],l=o.length;l--;){var u=o[l];"text"===a&&t.removeRemoteTextTrack(u),o.removeTrack(u)}})},n.cleanupAutoTextTracks=function(){for(var e=this.autoRemoteTextTracks_||[],t=e.length;t--;)this.removeRemoteTextTrack(e[t])},n.reset=function(){},n.crossOrigin=function(){},n.setCrossOrigin=function(){},n.error=function(e){return void 0!==e&&(this.error_=new xi(e),this.trigger("error")),this.error_},n.played=function(){return this.hasStarted_?Kr(0,0):Kr()},n.play=function(){},n.setScrubbing=function(){},n.scrubbing=function(){},n.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},n.initTrackListeners=function(){var e=this;ji.names.forEach(function(t){var o=function(){e.trigger(t+"trackchange")},l=e[ji[t].getterName]();l.addEventListener("removetrack",o),l.addEventListener("addtrack",o),e.on("dispose",function(){l.removeEventListener("removetrack",o),l.removeEventListener("addtrack",o)})})},n.addWebVttScript_=function(){var e=this;if(!p().WebVTT)if(W().body.contains(this.el())){if(!this.options_["vtt.js"]&&Kn(Ye())&&Object.keys(Ye()).length>0)return void this.trigger("vttjsloaded");var t=W().createElement("script");t.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",t.onload=function(){e.trigger("vttjsloaded")},t.onerror=function(){e.trigger("vttjserror")},this.on("dispose",function(){t.onload=null,t.onerror=null}),p().WebVTT=!0,this.el().parentNode.appendChild(t)}else this.ready(this.addWebVttScript_)},n.emulateTextTracks=function(){var e=this,t=this.textTracks(),a=this.remoteTextTracks(),o=function(y){return t.addTrack(y.track)},l=function(y){return t.removeTrack(y.track)};a.on("addtrack",o),a.on("removetrack",l),this.addWebVttScript_();var u=function(){return e.trigger("texttrackchange")},c=function(){u();for(var y=0;y<t.length;y++){var A=t[y];A.removeEventListener("cuechange",u),"showing"===A.mode&&A.addEventListener("cuechange",u)}};c(),t.addEventListener("change",c),t.addEventListener("addtrack",c),t.addEventListener("removetrack",c),this.on("dispose",function(){a.off("addtrack",o),a.off("removetrack",l),t.removeEventListener("change",c),t.removeEventListener("addtrack",c),t.removeEventListener("removetrack",c);for(var _=0;_<t.length;_++)t[_].removeEventListener("cuechange",u)})},n.addTextTrack=function(e,t,a){if(!e)throw new Error("TextTrack kind is required but was not provided");return function Af(s,i,n,r,e){void 0===e&&(e={});var t=s.textTracks();e.kind=i,n&&(e.label=n),r&&(e.language=r),e.tech=s;var a=new Ci.text.TrackClass(e);return t.addTrack(a),a}(this,e,t,a)},n.createRemoteTextTrack=function(e){var t=Rt(e,{tech:this});return new xn.remoteTextEl.TrackClass(t)},n.addRemoteTextTrack=function(e,t){var a=this;void 0===e&&(e={});var o=this.createRemoteTextTrack(e);return!0!==t&&!1!==t&&(gt.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),t=!0),this.remoteTextTrackEls().addTrackElement_(o),this.remoteTextTracks().addTrack(o.track),!0!==t&&this.ready(function(){return a.autoRemoteTextTracks_.addTrack(o.track)}),o},n.removeRemoteTextTrack=function(e){var t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)},n.getVideoPlaybackQuality=function(){return{}},n.requestPictureInPicture=function(){var e=this.options_.Promise||p().Promise;if(e)return e.reject()},n.disablePictureInPicture=function(){return!0},n.setDisablePictureInPicture=function(){},n.requestVideoFrameCallback=function(e){var t=this,a=pr();return!this.isReady_||this.paused()?(this.queuedHanders_.add(a),this.one("playing",function(){t.queuedHanders_.has(a)&&(t.queuedHanders_.delete(a),e())})):this.requestNamedAnimationFrame(a,e),a},n.cancelVideoFrameCallback=function(e){this.queuedHanders_.has(e)?this.queuedHanders_.delete(e):this.cancelNamedAnimationFrame(e)},n.setPoster=function(){},n.playsinline=function(){},n.setPlaysinline=function(){},n.overrideNativeAudioTracks=function(){},n.overrideNativeVideoTracks=function(){},n.canPlayType=function(){return""},i.canPlayType=function(){return""},i.canPlaySource=function(e,t){return i.canPlayType(e.type)},i.isTech=function(e){return e.prototype instanceof i||e instanceof i||e===i},i.registerTech=function(e,t){if(i.techs_||(i.techs_={}),!i.isTech(t))throw new Error("Tech "+e+" must be a Tech");if(!i.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!i.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=Kt(e),i.techs_[e]=t,i.techs_[Ua(e)]=t,"Tech"!==e&&i.defaultTechOrder_.push(e),t},i.getTech=function(e){if(e){if(i.techs_&&i.techs_[e])return i.techs_[e];if(e=Kt(e),p()&&p().videojs&&p().videojs[e])return gt.warn("The "+e+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),p().videojs[e]}},i}(Ee);Ci.names.forEach(function(s){var i=Ci[s];It.prototype[i.getterName]=function(){return this[i.privateName]=this[i.privateName]||new i.ListClass,this[i.privateName]}}),It.prototype.featuresVolumeControl=!0,It.prototype.featuresMuteControl=!0,It.prototype.featuresFullscreenResize=!1,It.prototype.featuresPlaybackRate=!1,It.prototype.featuresProgressEvents=!1,It.prototype.featuresSourceset=!1,It.prototype.featuresTimeupdateEvents=!1,It.prototype.featuresNativeTextTracks=!1,It.prototype.featuresVideoFrameCallback=!1,It.withSourceHandlers=function(s){s.registerSourceHandler=function(n,r){var e=s.sourceHandlers;e||(e=s.sourceHandlers=[]),void 0===r&&(r=e.length),e.splice(r,0,n)},s.canPlayType=function(n){for(var e,r=s.sourceHandlers||[],t=0;t<r.length;t++)if(e=r[t].canPlayType(n))return e;return""},s.selectSourceHandler=function(n,r){for(var e=s.sourceHandlers||[],a=0;a<e.length;a++)if(e[a].canHandleSource(n,r))return e[a];return null},s.canPlaySource=function(n,r){var e=s.selectSourceHandler(n,r);return e?e.canHandleSource(n,r):""},["seekable","seeking","duration"].forEach(function(n){var r=this[n];"function"==typeof r&&(this[n]=function(){return this.sourceHandler_&&this.sourceHandler_[n]?this.sourceHandler_[n].apply(this.sourceHandler_,arguments):r.apply(this,arguments)})},s.prototype),s.prototype.setSource=function(n){var r=s.selectSourceHandler(n,this.options_);r||(s.nativeSourceHandler?r=s.nativeSourceHandler:gt.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),r!==s.nativeSourceHandler&&(this.currentSource_=n),this.sourceHandler_=r.handleSource(n,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},s.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},Ee.registerComponent("Tech",It),It.registerTech("Tech",It),It.defaultTechOrder_=[];var Xr={},Ro={},Va={};function wf(s,i,n){s.setTimeout(function(){return Qr(i,Xr[i.type],n,s)},1)}function zu(s,i,n,r){void 0===r&&(r=null);var e="call"+Kt(n),t=s.reduce(No(e),r),a=t===Va,o=a?null:i[n](t);return function Of(s,i,n,r){for(var e=s.length-1;e>=0;e--){var t=s[e];t[i]&&t[i](r,n)}}(s,n,o,a),o}var Df={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},Mf={setCurrentTime:1,setMuted:1,setVolume:1},Gu={play:1,pause:1};function No(s){return function(i,n){return i===Va?Va:n[s]?n[s](i):i}}function Qr(s,i,n,r,e,t){void 0===s&&(s={}),void 0===i&&(i=[]),void 0===e&&(e=[]),void 0===t&&(t=!1);var o=i[0],l=i.slice(1);if("string"==typeof o)Qr(s,Xr[o],n,r,e,t);else if(o){var u=function Nf(s,i){var n=Ro[s.id()],r=null;if(null==n)return r=i(s),Ro[s.id()]=[[i,r]],r;for(var e=0;e<n.length;e++){var t=n[e];t[0]===i&&(r=t[1])}return null===r&&(r=i(s),n.push([i,r])),r}(r,o);if(!u.setSource)return e.push(u),Qr(s,l,n,r,e,t);u.setSource(zt({},s),function(c,_){if(c)return Qr(s,l,n,r,e,t);e.push(u),Qr(_,s.type===_.type?l:Xr[_.type],n,r,e,t)})}else l.length?Qr(s,l,n,r,e,t):t?n(s,e):Qr(s,Xr["*"],n,r,e,!0)}var Ff={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},Ha=function(i){void 0===i&&(i="");var n=Oo(i);return Ff[n.toLowerCase()]||""},Uf=function s(i){if(Array.isArray(i)){var n=[];i.forEach(function(r){r=s(r),Array.isArray(r)?n=n.concat(r):ur(r)&&n.push(r)}),i=n}else i="string"==typeof i&&i.trim()?[Ku({src:i})]:ur(i)&&"string"==typeof i.src&&i.src&&i.src.trim()?[Ku(i)]:[];return i};function Ku(s){if(!s.type){var i=Ha(s.src);i&&(s.type=i)}return s}var jf=function(s){function i(n,r,e){var t,a=Rt({createEl:!1},r);if(t=s.call(this,n,a,e)||this,r.playerOptions.sources&&0!==r.playerOptions.sources.length)n.src(r.playerOptions.sources);else for(var o=0,l=r.playerOptions.techOrder;o<l.length;o++){var u=Kt(l[o]),c=It.getTech(u);if(u||(c=Ee.getComponent(u)),c&&c.isSupported()){n.loadTech_(u);break}}return t}return U(i,s),i}(Ee);Ee.registerComponent("MediaLoader",jf);var $a=function(s){function i(r,e){var t;return(t=s.call(this,r,e)||this).options_.controlText&&t.controlText(t.options_.controlText),t.handleMouseOver_=function(a){return t.handleMouseOver(a)},t.handleMouseOut_=function(a){return t.handleMouseOut(a)},t.handleClick_=function(a){return t.handleClick(a)},t.handleKeyDown_=function(a){return t.handleKeyDown(a)},t.emitTapEvents(),t.enable(),t}U(i,s);var n=i.prototype;return n.createEl=function(e,t,a){void 0===e&&(e="div"),void 0===t&&(t={}),void 0===a&&(a={}),t=zt({className:this.buildCSSClass(),tabIndex:0},t),"button"===e&&gt.error("Creating a ClickableComponent with an HTML element of "+e+" is not supported; use a Button instead."),a=zt({role:"button"},a),this.tabIndex_=t.tabIndex;var o=yt(e,t,a);return o.appendChild(yt("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(o),o},n.dispose=function(){this.controlTextEl_=null,s.prototype.dispose.call(this)},n.createControlTextEl=function(e){return this.controlTextEl_=yt("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_},n.controlText=function(e,t){if(void 0===t&&(t=this.el()),void 0===e)return this.controlText_||"Need Text";var a=this.localize(e);this.controlText_=e,qr(this.controlTextEl_,a),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&t.setAttribute("title",a)},n.buildCSSClass=function(){return"vjs-control vjs-button "+s.prototype.buildCSSClass.call(this)},n.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))},n.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)},n.handleLanguagechange=function(){this.controlText(this.controlText_)},n.handleClick=function(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},n.handleKeyDown=function(e){ee().isEventKey(e,"Space")||ee().isEventKey(e,"Enter")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):s.prototype.handleKeyDown.call(this,e)},i}(Ee);Ee.registerComponent("ClickableComponent",$a);var Vf=function(s){function i(r,e){var t;return(t=s.call(this,r,e)||this).update(),t.update_=function(a){return t.update(a)},r.on("posterchange",t.update_),t}U(i,s);var n=i.prototype;return n.dispose=function(){this.player().off("posterchange",this.update_),s.prototype.dispose.call(this)},n.createEl=function(){return yt("div",{className:"vjs-poster",tabIndex:-1})},n.update=function(e){var t=this.player().poster();this.setSrc(t),t?this.show():this.hide()},n.setSrc=function(e){var t="";e&&(t='url("'+e+'")'),this.el_.style.backgroundImage=t},n.handleClick=function(e){if(this.player_.controls()){var t=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;this.player_.tech(!0)&&!((Yn||Qn)&&t)&&this.player_.tech(!0).focus(),this.player_.paused()?Yi(this.player_.play()):this.player_.pause()}},i}($a);Ee.registerComponent("PosterImage",Vf);var Vi="#222",Hf={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function Fo(s,i){var n;if(4===s.length)n=s[1]+s[1]+s[2]+s[2]+s[3]+s[3];else{if(7!==s.length)throw new Error("Invalid color code provided, "+s+"; must be formatted as e.g. #f0e or #f604e2.");n=s.slice(1)}return"rgba("+parseInt(n.slice(0,2),16)+","+parseInt(n.slice(2,4),16)+","+parseInt(n.slice(4,6),16)+","+i+")"}function Bo(s,i,n){try{s.style[i]=n}catch(r){return}}var $f=function(s){function i(r,e,t){var a;a=s.call(this,r,e,t)||this;var o=function(u){return a.updateDisplay(u)};return r.on("loadstart",function(l){return a.toggleDisplay(l)}),r.on("texttrackchange",o),r.on("loadedmetadata",function(l){return a.preselectTrack(l)}),r.ready(Ot(X(a),function(){if(r.tech_&&r.tech_.featuresNativeTextTracks)this.hide();else{r.on("fullscreenchange",o),r.on("playerresize",o),p().addEventListener("orientationchange",o),r.on("dispose",function(){return p().removeEventListener("orientationchange",o)});for(var l=this.options_.playerOptions.tracks||[],u=0;u<l.length;u++)this.player_.addRemoteTextTrack(l[u],!0);this.preselectTrack()}})),a}U(i,s);var n=i.prototype;return n.preselectTrack=function(){for(var o,l,u,e={captions:1,subtitles:1},t=this.player_.textTracks(),a=this.player_.cache_.selectedLanguage,c=0;c<t.length;c++){var _=t[c];a&&a.enabled&&a.language&&a.language===_.language&&_.kind in e?_.kind===a.kind?u=_:u||(u=_):a&&!a.enabled?(u=null,o=null,l=null):_.default&&("descriptions"!==_.kind||o?_.kind in e&&!l&&(l=_):o=_)}u?u.mode="showing":l?l.mode="showing":o&&(o.mode="showing")},n.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},n.createEl=function(){return s.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})},n.clearDisplay=function(){"function"==typeof p().WebVTT&&p().WebVTT.processCues(p(),[],this.el_)},n.updateDisplay=function(){var e=this.player_.textTracks(),t=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),t){for(var a=[],o=0;o<e.length;++o){var l=e[o];"showing"===l.mode&&a.push(l)}this.updateForTrack(a)}else{for(var u=null,c=null,_=e.length;_--;){var y=e[_];"showing"===y.mode&&("descriptions"===y.kind?u=y:c=y)}c?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(c)):u&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(u))}},n.updateDisplayState=function(e){for(var t=this.player_.textTrackSettings.getValues(),a=e.activeCues,o=a.length;o--;){var l=a[o];if(l){var u=l.displayState;if(t.color&&(u.firstChild.style.color=t.color),t.textOpacity&&Bo(u.firstChild,"color",Fo(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(u.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&Bo(u.firstChild,"backgroundColor",Fo(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?Bo(u,"backgroundColor",Fo(t.windowColor,t.windowOpacity)):u.style.backgroundColor=t.windowColor),t.edgeStyle&&("dropshadow"===t.edgeStyle?u.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px "+Vi:"raised"===t.edgeStyle?u.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px "+Vi:"depressed"===t.edgeStyle?u.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px "+Vi:"uniform"===t.edgeStyle&&(u.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px "+Vi)),t.fontPercent&&1!==t.fontPercent){var c=p().parseFloat(u.style.fontSize);u.style.fontSize=c*t.fontPercent+"px",u.style.height="auto",u.style.top="auto"}t.fontFamily&&"default"!==t.fontFamily&&("small-caps"===t.fontFamily?u.firstChild.style.fontVariant="small-caps":u.firstChild.style.fontFamily=Hf[t.fontFamily])}}},n.updateForTrack=function(e){if(Array.isArray(e)||(e=[e]),"function"==typeof p().WebVTT&&!e.every(function(A){return!A.activeCues})){for(var t=[],a=0;a<e.length;++a)for(var o=e[a],l=0;l<o.activeCues.length;++l)t.push(o.activeCues[l]);p().WebVTT.processCues(p(),t,this.el_);for(var u=0;u<e.length;++u){for(var c=e[u],_=0;_<c.activeCues.length;++_){var y=c.activeCues[_].displayState;hr(y,"vjs-text-track-cue"),hr(y,"vjs-text-track-cue-"+(c.language?c.language:u)),c.language&&mn(y,"lang",c.language)}this.player_.textTrackSettings&&this.updateDisplayState(c)}}},i}(Ee);Ee.registerComponent("TextTrackDisplay",$f);var Wf=function(s){function i(){return s.apply(this,arguments)||this}return U(i,s),i.prototype.createEl=function(){var e=this.player_.isAudio(),t=this.localize(e?"Audio Player":"Video Player"),a=yt("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[t])}),o=s.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return o.appendChild(a),o},i}(Ee);Ee.registerComponent("LoadingSpinner",Wf);var zi=function(s){function i(){return s.apply(this,arguments)||this}U(i,s);var n=i.prototype;return n.createEl=function(e,t,a){void 0===t&&(t={}),void 0===a&&(a={});var o=yt("button",t=zt({className:this.buildCSSClass()},t),a=zt({type:"button"},a));return o.appendChild(yt("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(o),o},n.addChild=function(e,t){return void 0===t&&(t={}),gt.warn("Adding an actionable (user controllable) child to a Button ("+this.constructor.name+") is not supported; use a ClickableComponent instead."),Ee.prototype.addChild.call(this,e,t)},n.enable=function(){s.prototype.enable.call(this),this.el_.removeAttribute("disabled")},n.disable=function(){s.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},n.handleKeyDown=function(e){ee().isEventKey(e,"Space")||ee().isEventKey(e,"Enter")?e.stopPropagation():s.prototype.handleKeyDown.call(this,e)},i}($a);Ee.registerComponent("Button",zi);var Qu=function(s){function i(r,e){var t;return(t=s.call(this,r,e)||this).mouseused_=!1,t.on("mousedown",function(a){return t.handleMouseDown(a)}),t}U(i,s);var n=i.prototype;return n.buildCSSClass=function(){return"vjs-big-play-button"},n.handleClick=function(e){var t=this.player_.play();if(this.mouseused_&&e.clientX&&e.clientY){var a=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;return Yi(t),void(this.player_.tech(!0)&&(!Yn&&!Qn||!a)&&this.player_.tech(!0).focus())}var o=this.player_.getChild("controlBar"),l=o&&o.getChild("playToggle");if(l){var u=function(){return l.focus()};ia(t)?t.then(u,function(){}):this.setTimeout(u,1)}else this.player_.tech(!0).focus()},n.handleKeyDown=function(e){this.mouseused_=!1,s.prototype.handleKeyDown.call(this,e)},n.handleMouseDown=function(e){this.mouseused_=!0},i}(zi);Qu.prototype.controlText_="Play Video",Ee.registerComponent("BigPlayButton",Qu);var qf=function(s){function i(r,e){var t;return(t=s.call(this,r,e)||this).controlText(e&&e.controlText||t.localize("Close")),t}U(i,s);var n=i.prototype;return n.buildCSSClass=function(){return"vjs-close-button "+s.prototype.buildCSSClass.call(this)},n.handleClick=function(e){this.trigger({type:"close",bubbles:!1})},n.handleKeyDown=function(e){ee().isEventKey(e,"Esc")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):s.prototype.handleKeyDown.call(this,e)},i}(zi);Ee.registerComponent("CloseButton",qf);var Yu=function(s){function i(r,e){var t;return void 0===e&&(e={}),t=s.call(this,r,e)||this,e.replay=void 0===e.replay||e.replay,t.on(r,"play",function(a){return t.handlePlay(a)}),t.on(r,"pause",function(a){return t.handlePause(a)}),e.replay&&t.on(r,"ended",function(a){return t.handleEnded(a)}),t}U(i,s);var n=i.prototype;return n.buildCSSClass=function(){return"vjs-play-control "+s.prototype.buildCSSClass.call(this)},n.handleClick=function(e){this.player_.paused()?Yi(this.player_.play()):this.player_.pause()},n.handleSeeked=function(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)},n.handlePlay=function(e){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},n.handlePause=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},n.handleEnded=function(e){var t=this;this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",function(a){return t.handleSeeked(a)})},i}(zi);Yu.prototype.controlText_="Play",Ee.registerComponent("PlayToggle",Yu);var Ju=function(i,n){i=i<0?0:i;var r=Math.floor(i%60),e=Math.floor(i/60%60),t=Math.floor(i/3600),a=Math.floor(n/60%60),o=Math.floor(n/3600);return(isNaN(i)||i===1/0)&&(t=e=r="-"),(t=t>0||o>0?t+":":"")+(e=((t||a>=10)&&e<10?"0"+e:e)+":")+(r<10?"0"+r:r)},Uo=Ju;function Cn(s,i){return void 0===i&&(i=s),Uo(s,i)}var En=function(s){function i(r,e){var t;return(t=s.call(this,r,e)||this).on(r,["timeupdate","ended"],function(a){return t.updateContent(a)}),t.updateTextNode_(),t}U(i,s);var n=i.prototype;return n.createEl=function(){var e=this.buildCSSClass(),t=s.prototype.createEl.call(this,"div",{className:e+" vjs-time-control vjs-control"}),a=yt("span",{className:"vjs-control-text",textContent:this.localize(this.labelText_)+"\xa0"},{role:"presentation"});return t.appendChild(a),this.contentEl_=yt("span",{className:e+"-display"},{"aria-live":"off",role:"presentation"}),t.appendChild(this.contentEl_),t},n.dispose=function(){this.contentEl_=null,this.textNode_=null,s.prototype.dispose.call(this)},n.updateTextNode_=function(e){var t=this;void 0===e&&(e=0),e=Cn(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",function(){if(t.contentEl_){var a=t.textNode_;a&&t.contentEl_.firstChild!==a&&(a=null,gt.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),t.textNode_=W().createTextNode(t.formattedTime_),t.textNode_&&(a?t.contentEl_.replaceChild(t.textNode_,a):t.contentEl_.appendChild(t.textNode_))}}))},n.updateContent=function(e){},i}(Ee);En.prototype.labelText_="Time",En.prototype.controlText_="Time",Ee.registerComponent("TimeDisplay",En);var jo=function(s){function i(){return s.apply(this,arguments)||this}U(i,s);var n=i.prototype;return n.buildCSSClass=function(){return"vjs-current-time"},n.updateContent=function(e){var t;t=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(t)},i}(En);jo.prototype.labelText_="Current Time",jo.prototype.controlText_="Current Time",Ee.registerComponent("CurrentTimeDisplay",jo);var Vo=function(s){function i(r,e){var t,a=function(l){return t.updateContent(l)};return(t=s.call(this,r,e)||this).on(r,"durationchange",a),t.on(r,"loadstart",a),t.on(r,"loadedmetadata",a),t}U(i,s);var n=i.prototype;return n.buildCSSClass=function(){return"vjs-duration"},n.updateContent=function(e){var t=this.player_.duration();this.updateTextNode_(t)},i}(En);Vo.prototype.labelText_="Duration",Vo.prototype.controlText_="Duration",Ee.registerComponent("DurationDisplay",Vo);var Kf=function(s){function i(){return s.apply(this,arguments)||this}return U(i,s),i.prototype.createEl=function(){var e=s.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),t=s.prototype.createEl.call(this,"div"),a=s.prototype.createEl.call(this,"span",{textContent:"/"});return t.appendChild(a),e.appendChild(t),e},i}(Ee);Ee.registerComponent("TimeDivider",Kf);var Ho=function(s){function i(r,e){var t;return(t=s.call(this,r,e)||this).on(r,"durationchange",function(a){return t.updateContent(a)}),t}U(i,s);var n=i.prototype;return n.buildCSSClass=function(){return"vjs-remaining-time"},n.createEl=function(){var e=s.prototype.createEl.call(this);return!1!==this.options_.displayNegative&&e.insertBefore(yt("span",{},{"aria-hidden":!0},"-"),this.contentEl_),e},n.updateContent=function(e){var t;"number"==typeof this.player_.duration()&&(t=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(t))},i}(En);Ho.prototype.labelText_="Remaining Time",Ho.prototype.controlText_="Remaining Time",Ee.registerComponent("RemainingTimeDisplay",Ho);var Xf=function(s){function i(r,e){var t;return(t=s.call(this,r,e)||this).updateShowing(),t.on(t.player(),"durationchange",function(a){return t.updateShowing(a)}),t}U(i,s);var n=i.prototype;return n.createEl=function(){var e=s.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=yt("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(yt("span",{className:"vjs-control-text",textContent:this.localize("Stream Type")+"\xa0"})),this.contentEl_.appendChild(W().createTextNode(this.localize("LIVE"))),e.appendChild(this.contentEl_),e},n.dispose=function(){this.contentEl_=null,s.prototype.dispose.call(this)},n.updateShowing=function(e){this.player().duration()===1/0?this.show():this.hide()},i}(Ee);Ee.registerComponent("LiveDisplay",Xf);var Zu=function(s){function i(r,e){var t;return(t=s.call(this,r,e)||this).updateLiveEdgeStatus(),t.player_.liveTracker&&(t.updateLiveEdgeStatusHandler_=function(a){return t.updateLiveEdgeStatus(a)},t.on(t.player_.liveTracker,"liveedgechange",t.updateLiveEdgeStatusHandler_)),t}U(i,s);var n=i.prototype;return n.createEl=function(){var e=s.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=yt("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),e.appendChild(this.textEl_),e},n.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},n.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},n.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,s.prototype.dispose.call(this)},i}(zi);Zu.prototype.controlText_="Seek to live, currently playing live",Ee.registerComponent("SeekToLive",Zu);var Wa=function(i,n,r){return i=Number(i),Math.min(r,Math.max(n,isNaN(i)?n:i))},$o=function(s){function i(r,e){var t;return(t=s.call(this,r,e)||this).handleMouseDown_=function(a){return t.handleMouseDown(a)},t.handleMouseUp_=function(a){return t.handleMouseUp(a)},t.handleKeyDown_=function(a){return t.handleKeyDown(a)},t.handleClick_=function(a){return t.handleClick(a)},t.handleMouseMove_=function(a){return t.handleMouseMove(a)},t.update_=function(a){return t.update(a)},t.bar=t.getChild(t.options_.barName),t.vertical(!!t.options_.vertical),t.enable(),t}U(i,s);var n=i.prototype;return n.enabled=function(){return this.enabled_},n.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},n.disable=function(){if(this.enabled()){var e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},n.createEl=function(e,t,a){return void 0===t&&(t={}),void 0===a&&(a={}),t.className=t.className+" vjs-slider",t=zt({tabIndex:0},t),a=zt({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},a),s.prototype.createEl.call(this,e,t,a)},n.handleMouseDown=function(e){var t=this.bar.el_.ownerDocument;"mousedown"===e.type&&e.preventDefault(),"touchstart"===e.type&&!cr&&e.preventDefault(),vu(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove_),this.on(t,"mouseup",this.handleMouseUp_),this.on(t,"touchmove",this.handleMouseMove_),this.on(t,"touchend",this.handleMouseUp_),this.handleMouseMove(e,!0)},n.handleMouseMove=function(e){},n.handleMouseUp=function(){var e=this.bar.el_.ownerDocument;yu(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.update()},n.update=function(){var e=this;if(this.el_&&this.bar){var t=this.getProgress();return t===this.progress_||(this.progress_=t,this.requestNamedAnimationFrame("Slider#update",function(){var a=e.vertical()?"height":"width";e.bar.el().style[a]=(100*t).toFixed(2)+"%"})),t}},n.getProgress=function(){return Number(Wa(this.getPercent(),0,1).toFixed(4))},n.calculateDistance=function(e){var t=Ma(this.el_,e);return this.vertical()?t.y:t.x},n.handleKeyDown=function(e){ee().isEventKey(e,"Left")||ee().isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepBack()):ee().isEventKey(e,"Right")||ee().isEventKey(e,"Up")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):s.prototype.handleKeyDown.call(this,e)},n.handleClick=function(e){e.stopPropagation(),e.preventDefault()},n.vertical=function(e){if(void 0===e)return this.vertical_||!1;this.vertical_=!!e,this.addClass(this.vertical_?"vjs-slider-vertical":"vjs-slider-horizontal")},i}(Ee);Ee.registerComponent("Slider",$o);var Wo=function(i,n){return Wa(i/n*100,0,100).toFixed(2)+"%"},Qf=function(s){function i(r,e){var t;return(t=s.call(this,r,e)||this).partEls_=[],t.on(r,"progress",function(a){return t.update(a)}),t}U(i,s);var n=i.prototype;return n.createEl=function(){var e=s.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),t=yt("span",{className:"vjs-control-text"}),a=yt("span",{textContent:this.localize("Loaded")}),o=W().createTextNode(": ");return this.percentageEl_=yt("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),e.appendChild(t),t.appendChild(a),t.appendChild(o),t.appendChild(this.percentageEl_),e},n.dispose=function(){this.partEls_=null,this.percentageEl_=null,s.prototype.dispose.call(this)},n.update=function(e){var t=this;this.requestNamedAnimationFrame("LoadProgressBar#update",function(){var a=t.player_.liveTracker,o=t.player_.buffered(),l=a&&a.isLive()?a.seekableEnd():t.player_.duration(),u=t.player_.bufferedEnd(),c=t.partEls_,_=Wo(u,l);t.percent_!==_&&(t.el_.style.width=_,qr(t.percentageEl_,_),t.percent_=_);for(var y=0;y<o.length;y++){var A=o.start(y),I=o.end(y),D=c[y];D||(D=t.el_.appendChild(yt()),c[y]=D),(D.dataset.start!==A||D.dataset.end!==I)&&(D.dataset.start=A,D.dataset.end=I,D.style.left=Wo(A,u),D.style.width=Wo(I-A,u))}for(var M=c.length;M>o.length;M--)t.el_.removeChild(c[M-1]);c.length=o.length})},i}(Ee);Ee.registerComponent("LoadProgressBar",Qf);var Yf=function(s){function i(r,e){var t;return(t=s.call(this,r,e)||this).update=gr(Ot(X(t),t.update),30),t}U(i,s);var n=i.prototype;return n.createEl=function(){return s.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},n.update=function(e,t,a){var o=Zn(this.el_),l=vn(this.player_.el()),u=e.width*t;if(l&&o){var c=e.left-l.left+u,_=e.width-u+(l.right-e.right),y=o.width/2;c<y?y+=y-c:_<y&&(y=_),y<0?y=0:y>o.width&&(y=o.width),y=Math.round(y),this.el_.style.right="-"+y+"px",this.write(a)}},n.write=function(e){qr(this.el_,e)},n.updateTime=function(e,t,a,o){var l=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",function(){var u,c=l.player_.duration();if(l.player_.liveTracker&&l.player_.liveTracker.isLive()){var _=l.player_.liveTracker.liveWindow(),y=_-t*_;u=(y<1?"":"-")+Cn(y,_)}else u=Cn(a,c);l.update(e,t,u),o&&o()})},i}(Ee);Ee.registerComponent("TimeTooltip",Yf);var qo=function(s){function i(r,e){var t;return(t=s.call(this,r,e)||this).update=gr(Ot(X(t),t.update),30),t}U(i,s);var n=i.prototype;return n.createEl=function(){return s.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},n.update=function(e,t){var a=this.getChild("timeTooltip");if(a){var o=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();a.updateTime(e,t,o)}},i}(Ee);qo.prototype.options_={children:[]},!bi&&!dr&&qo.prototype.options_.children.push("timeTooltip"),Ee.registerComponent("PlayProgressBar",qo);var ed=function(s){function i(r,e){var t;return(t=s.call(this,r,e)||this).update=gr(Ot(X(t),t.update),30),t}U(i,s);var n=i.prototype;return n.createEl=function(){return s.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},n.update=function(e,t){var a=this,o=t*this.player_.duration();this.getChild("timeTooltip").updateTime(e,t,o,function(){a.el_.style.left=e.width*t+"px"})},i}(Ee);ed.prototype.options_={children:["timeTooltip"]},Ee.registerComponent("MouseTimeDisplay",ed);var zo=function(s){function i(r,e){var t;return(t=s.call(this,r,e)||this).setEventHandlers_(),t}U(i,s);var n=i.prototype;return n.setEventHandlers_=function(){var e=this;this.update_=Ot(this,this.update),this.update=gr(this.update_,30),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=function(t){return e.enableInterval_(t)},this.disableIntervalHandler_=function(t){return e.disableInterval_(t)},this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in W()&&"visibilityState"in W()&&this.on(W(),"visibilitychange",this.toggleVisibility_)},n.toggleVisibility_=function(e){"hidden"===W().visibilityState?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())},n.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,30))},n.disableInterval_=function(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&"ended"!==e.type||!this.updateInterval||(this.clearInterval(this.updateInterval),this.updateInterval=null)},n.createEl=function(){return s.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},n.update=function(e){var t=this;if("hidden"!==W().visibilityState){var a=s.prototype.update.call(this);return this.requestNamedAnimationFrame("SeekBar#update",function(){var o=t.player_.ended()?t.player_.duration():t.getCurrentTime_(),l=t.player_.liveTracker,u=t.player_.duration();l&&l.isLive()&&(u=t.player_.liveTracker.liveCurrentTime()),t.percent_!==a&&(t.el_.setAttribute("aria-valuenow",(100*a).toFixed(2)),t.percent_=a),(t.currentTime_!==o||t.duration_!==u)&&(t.el_.setAttribute("aria-valuetext",t.localize("progress bar timing: currentTime={1} duration={2}",[Cn(o,u),Cn(u,u)],"{1} of {2}")),t.currentTime_=o,t.duration_=u),t.bar&&t.bar.update(vn(t.el()),t.getProgress())}),a}},n.userSeek_=function(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)},n.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},n.getPercent=function(){var t,e=this.getCurrentTime_(),a=this.player_.liveTracker;return a&&a.isLive()?(t=(e-a.seekableStart())/a.liveWindow(),a.atLiveEdge()&&(t=1)):t=e/this.player_.duration(),t},n.handleMouseDown=function(e){!ea(e)||(e.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),s.prototype.handleMouseDown.call(this,e))},n.handleMouseMove=function(e,t){if(void 0===t&&(t=!1),ea(e)){!t&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);var a,o=this.calculateDistance(e),l=this.player_.liveTracker;if(l&&l.isLive()){if(o>=.99)return void l.seekToLiveEdge();var u=l.seekableStart(),c=l.liveCurrentTime();if((a=u+o*l.liveWindow())>=c&&(a=c),a<=u&&(a=u+.1),a===1/0)return}else(a=o*this.player_.duration())===this.player_.duration()&&(a-=.1);this.userSeek_(a)}},n.enable=function(){s.prototype.enable.call(this);var e=this.getChild("mouseTimeDisplay");!e||e.show()},n.disable=function(){s.prototype.disable.call(this);var e=this.getChild("mouseTimeDisplay");!e||e.hide()},n.handleMouseUp=function(e){s.prototype.handleMouseUp.call(this,e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?Yi(this.player_.play()):this.update_()},n.stepForward=function(){this.userSeek_(this.player_.currentTime()+5)},n.stepBack=function(){this.userSeek_(this.player_.currentTime()-5)},n.handleAction=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},n.handleKeyDown=function(e){var t=this.player_.liveTracker;if(ee().isEventKey(e,"Space")||ee().isEventKey(e,"Enter"))e.preventDefault(),e.stopPropagation(),this.handleAction(e);else if(ee().isEventKey(e,"Home"))e.preventDefault(),e.stopPropagation(),this.userSeek_(0);else if(ee().isEventKey(e,"End"))e.preventDefault(),e.stopPropagation(),t&&t.isLive()?this.userSeek_(t.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(ee()(e))){e.preventDefault(),e.stopPropagation();var a=10*(ee().codes[ee()(e)]-ee().codes[0])/100;t&&t.isLive()?this.userSeek_(t.seekableStart()+t.liveWindow()*a):this.userSeek_(this.player_.duration()*a)}else ee().isEventKey(e,"PgDn")?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()-60)):ee().isEventKey(e,"PgUp")?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()+60)):s.prototype.handleKeyDown.call(this,e)},n.dispose=function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in W()&&"visibilityState"in W()&&this.off(W(),"visibilitychange",this.toggleVisibility_),s.prototype.dispose.call(this)},i}($o);zo.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},!bi&&!dr&&zo.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),Ee.registerComponent("SeekBar",zo);var id=function(s){function i(r,e){var t;return(t=s.call(this,r,e)||this).handleMouseMove=gr(Ot(X(t),t.handleMouseMove),30),t.throttledHandleMouseSeek=gr(Ot(X(t),t.handleMouseSeek),30),t.handleMouseUpHandler_=function(a){return t.handleMouseUp(a)},t.handleMouseDownHandler_=function(a){return t.handleMouseDown(a)},t.enable(),t}U(i,s);var n=i.prototype;return n.createEl=function(){return s.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},n.handleMouseMove=function(e){var t=this.getChild("seekBar");if(t){var a=t.getChild("playProgressBar"),o=t.getChild("mouseTimeDisplay");if(a||o){var l=t.el(),u=Zn(l),c=Ma(l,e).x;c=Wa(c,0,1),o&&o.update(u,c),a&&a.update(u,t.getProgress())}}},n.handleMouseSeek=function(e){var t=this.getChild("seekBar");t&&t.handleMouseMove(e)},n.enabled=function(){return this.enabled_},n.disable=function(){if(this.children().forEach(function(t){return t.disable&&t.disable()}),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){var e=this.getChild("seekBar");this.player_.scrubbing(!1),e.videoWasPlaying&&Yi(this.player_.play())}},n.enable=function(){this.children().forEach(function(e){return e.enable&&e.enable()}),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},n.removeListenersAddedOnMousedownAndTouchstart=function(){var e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)},n.handleMouseDown=function(e){var t=this.el_.ownerDocument,a=this.getChild("seekBar");a&&a.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)},n.handleMouseUp=function(e){var t=this.getChild("seekBar");t&&t.handleMouseUp(e),this.removeListenersAddedOnMousedownAndTouchstart()},i}(Ee);id.prototype.options_={children:["seekBar"]},Ee.registerComponent("ProgressControl",id);var rd=function(s){function i(r,e){var t;return(t=s.call(this,r,e)||this).on(r,["enterpictureinpicture","leavepictureinpicture"],function(a){return t.handlePictureInPictureChange(a)}),t.on(r,["disablepictureinpicturechanged","loadedmetadata"],function(a){return t.handlePictureInPictureEnabledChange(a)}),t.on(r,["loadedmetadata","audioonlymodechange","audiopostermodechange"],function(){"audio"===r.currentType().substring(0,5)||r.audioPosterMode()||r.audioOnlyMode()?(r.isInPictureInPicture()&&r.exitPictureInPicture(),t.hide()):t.show()}),t.disable(),t}U(i,s);var n=i.prototype;return n.buildCSSClass=function(){return"vjs-picture-in-picture-control "+s.prototype.buildCSSClass.call(this)},n.handlePictureInPictureEnabledChange=function(){W().pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()?this.enable():this.disable()},n.handlePictureInPictureChange=function(e){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()},n.handleClick=function(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},i}(zi);rd.prototype.controlText_="Picture-in-Picture",Ee.registerComponent("PictureInPictureToggle",rd);var nd=function(s){function i(r,e){var t;return(t=s.call(this,r,e)||this).on(r,"fullscreenchange",function(a){return t.handleFullscreenChange(a)}),!1===W()[r.fsApi_.fullscreenEnabled]&&t.disable(),t}U(i,s);var n=i.prototype;return n.buildCSSClass=function(){return"vjs-fullscreen-control "+s.prototype.buildCSSClass.call(this)},n.handleFullscreenChange=function(e){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},n.handleClick=function(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},i}(zi);nd.prototype.controlText_="Fullscreen",Ee.registerComponent("FullscreenToggle",nd);var Zf=function(s){function i(){return s.apply(this,arguments)||this}return U(i,s),i.prototype.createEl=function(){var e=s.prototype.createEl.call(this,"div",{className:"vjs-volume-level"});return e.appendChild(s.prototype.createEl.call(this,"span",{className:"vjs-control-text"})),e},i}(Ee);Ee.registerComponent("VolumeLevel",Zf);var ep=function(s){function i(r,e){var t;return(t=s.call(this,r,e)||this).update=gr(Ot(X(t),t.update),30),t}U(i,s);var n=i.prototype;return n.createEl=function(){return s.prototype.createEl.call(this,"div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})},n.update=function(e,t,a,o){if(!a){var l=vn(this.el_),u=vn(this.player_.el()),c=e.width*t;if(!u||!l)return;var _=e.left-u.left+c,y=e.width-c+(u.right-e.right),A=l.width/2;_<A?A+=A-_:y<A&&(A=y),A<0?A=0:A>l.width&&(A=l.width),this.el_.style.right="-"+A+"px"}this.write(o+"%")},n.write=function(e){qr(this.el_,e)},n.updateVolume=function(e,t,a,o,l){var u=this;this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",function(){u.update(e,t,a,o.toFixed(0)),l&&l()})},i}(Ee);Ee.registerComponent("VolumeLevelTooltip",ep);var ad=function(s){function i(r,e){var t;return(t=s.call(this,r,e)||this).update=gr(Ot(X(t),t.update),30),t}U(i,s);var n=i.prototype;return n.createEl=function(){return s.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},n.update=function(e,t,a){var o=this,l=100*t;this.getChild("volumeLevelTooltip").updateVolume(e,t,a,l,function(){a?o.el_.style.bottom=e.height*t+"px":o.el_.style.left=e.width*t+"px"})},i}(Ee);ad.prototype.options_={children:["volumeLevelTooltip"]},Ee.registerComponent("MouseVolumeLevelDisplay",ad);var za=function(s){function i(r,e){var t;return(t=s.call(this,r,e)||this).on("slideractive",function(a){return t.updateLastVolume_(a)}),t.on(r,"volumechange",function(a){return t.updateARIAAttributes(a)}),r.ready(function(){return t.updateARIAAttributes()}),t}U(i,s);var n=i.prototype;return n.createEl=function(){return s.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},n.handleMouseDown=function(e){!ea(e)||s.prototype.handleMouseDown.call(this,e)},n.handleMouseMove=function(e){var t=this.getChild("mouseVolumeLevelDisplay");if(t){var a=this.el(),o=vn(a),l=this.vertical(),u=Ma(a,e);u=Wa(u=l?u.y:u.x,0,1),t.update(o,u,l)}!ea(e)||(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))},n.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},n.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},n.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},n.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},n.updateARIAAttributes=function(e){var t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")},n.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},n.updateLastVolume_=function(){var e=this,t=this.player_.volume();this.one("sliderinactive",function(){0===e.player_.volume()&&e.player_.lastVolume_(t)})},i}($o);za.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},!bi&&!dr&&za.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),za.prototype.playerEvent="volumechange",Ee.registerComponent("VolumeBar",za);var sd=function(s){function i(r,e){var t;return void 0===e&&(e={}),e.vertical=e.vertical||!1,(void 0===e.volumeBar||Kn(e.volumeBar))&&(e.volumeBar=e.volumeBar||{},e.volumeBar.vertical=e.vertical),function(i,n){n.tech_&&!n.tech_.featuresVolumeControl&&i.addClass("vjs-hidden"),i.on(n,"loadstart",function(){n.tech_.featuresVolumeControl?i.removeClass("vjs-hidden"):i.addClass("vjs-hidden")})}(X(t=s.call(this,r,e)||this),r),t.throttledHandleMouseMove=gr(Ot(X(t),t.handleMouseMove),30),t.handleMouseUpHandler_=function(a){return t.handleMouseUp(a)},t.on("mousedown",function(a){return t.handleMouseDown(a)}),t.on("touchstart",function(a){return t.handleMouseDown(a)}),t.on("mousemove",function(a){return t.handleMouseMove(a)}),t.on(t.volumeBar,["focus","slideractive"],function(){t.volumeBar.addClass("vjs-slider-active"),t.addClass("vjs-slider-active"),t.trigger("slideractive")}),t.on(t.volumeBar,["blur","sliderinactive"],function(){t.volumeBar.removeClass("vjs-slider-active"),t.removeClass("vjs-slider-active"),t.trigger("sliderinactive")}),t}U(i,s);var n=i.prototype;return n.createEl=function(){var e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),s.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+e})},n.handleMouseDown=function(e){var t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)},n.handleMouseUp=function(e){var t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)},n.handleMouseMove=function(e){this.volumeBar.handleMouseMove(e)},i}(Ee);sd.prototype.options_={children:["volumeBar"]},Ee.registerComponent("VolumeControl",sd);var od=function(s){function i(r,e){var t;return function(i,n){n.tech_&&!n.tech_.featuresMuteControl&&i.addClass("vjs-hidden"),i.on(n,"loadstart",function(){n.tech_.featuresMuteControl?i.removeClass("vjs-hidden"):i.addClass("vjs-hidden")})}(X(t=s.call(this,r,e)||this),r),t.on(r,["loadstart","volumechange"],function(a){return t.update(a)}),t}U(i,s);var n=i.prototype;return n.buildCSSClass=function(){return"vjs-mute-control "+s.prototype.buildCSSClass.call(this)},n.handleClick=function(e){var t=this.player_.volume(),a=this.player_.lastVolume_();0===t?(this.player_.volume(a<.1?.1:a),this.player_.muted(!1)):this.player_.muted(!this.player_.muted())},n.update=function(e){this.updateIcon_(),this.updateControlText_()},n.updateIcon_=function(){var e=this.player_.volume(),t=3;bi&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===e||this.player_.muted()?t=0:e<.33?t=1:e<.67&&(t=2);for(var a=0;a<4;a++)Jn(this.el_,"vjs-vol-"+a);hr(this.el_,"vjs-vol-"+t)},n.updateControlText_=function(){var t=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==t&&this.controlText(t)},i}(zi);od.prototype.controlText_="Mute",Ee.registerComponent("MuteToggle",od);var ld=function(s){function i(r,e){var t;return void 0===e&&(e={}),e.inline=void 0===e.inline||e.inline,(void 0===e.volumeControl||Kn(e.volumeControl))&&(e.volumeControl=e.volumeControl||{},e.volumeControl.vertical=!e.inline),(t=s.call(this,r,e)||this).handleKeyPressHandler_=function(a){return t.handleKeyPress(a)},t.on(r,["loadstart"],function(a){return t.volumePanelState_(a)}),t.on(t.muteToggle,"keyup",function(a){return t.handleKeyPress(a)}),t.on(t.volumeControl,"keyup",function(a){return t.handleVolumeControlKeyUp(a)}),t.on("keydown",function(a){return t.handleKeyPress(a)}),t.on("mouseover",function(a){return t.handleMouseOver(a)}),t.on("mouseout",function(a){return t.handleMouseOut(a)}),t.on(t.volumeControl,["slideractive"],t.sliderActive_),t.on(t.volumeControl,["sliderinactive"],t.sliderInactive_),t}U(i,s);var n=i.prototype;return n.sliderActive_=function(){this.addClass("vjs-slider-active")},n.sliderInactive_=function(){this.removeClass("vjs-slider-active")},n.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},n.createEl=function(){var e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),s.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+e})},n.dispose=function(){this.handleMouseOut(),s.prototype.dispose.call(this)},n.handleVolumeControlKeyUp=function(e){ee().isEventKey(e,"Esc")&&this.muteToggle.focus()},n.handleMouseOver=function(e){this.addClass("vjs-hover"),Di(W(),"keyup",this.handleKeyPressHandler_)},n.handleMouseOut=function(e){this.removeClass("vjs-hover"),pi(W(),"keyup",this.handleKeyPressHandler_)},n.handleKeyPress=function(e){ee().isEventKey(e,"Esc")&&this.handleMouseOut()},i}(Ee);ld.prototype.options_={children:["muteToggle","volumeControl"]},Ee.registerComponent("VolumePanel",ld);var ud=function(s){function i(r,e){var t;return t=s.call(this,r,e)||this,e&&(t.menuButton_=e.menuButton),t.focusedChild_=-1,t.on("keydown",function(a){return t.handleKeyDown(a)}),t.boundHandleBlur_=function(a){return t.handleBlur(a)},t.boundHandleTapClick_=function(a){return t.handleTapClick(a)},t}U(i,s);var n=i.prototype;return n.addEventListenerForItem=function(e){e instanceof Ee&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))},n.removeEventListenerForItem=function(e){e instanceof Ee&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))},n.removeChild=function(e){"string"==typeof e&&(e=this.getChild(e)),this.removeEventListenerForItem(e),s.prototype.removeChild.call(this,e)},n.addItem=function(e){var t=this.addChild(e);t&&this.addEventListenerForItem(t)},n.createEl=function(){this.contentEl_=yt(this.options_.contentElType||"ul",{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var t=s.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return t.appendChild(this.contentEl_),Di(t,"click",function(a){a.preventDefault(),a.stopImmediatePropagation()}),t},n.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,s.prototype.dispose.call(this)},n.handleBlur=function(e){var t=e.relatedTarget||W().activeElement;if(!this.children().some(function(o){return o.el()===t})){var a=this.menuButton_;a&&a.buttonPressed_&&t!==a.el().firstChild&&a.unpressButton()}},n.handleTapClick=function(e){if(this.menuButton_){this.menuButton_.unpressButton();var t=this.children();if(!Array.isArray(t))return;var a=t.filter(function(o){return o.el()===e.target})[0];if(!a)return;"CaptionSettingsMenuItem"!==a.name()&&this.menuButton_.focus()}},n.handleKeyDown=function(e){ee().isEventKey(e,"Left")||ee().isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(ee().isEventKey(e,"Right")||ee().isEventKey(e,"Up"))&&(e.preventDefault(),e.stopPropagation(),this.stepBack())},n.stepForward=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)},n.stepBack=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)},n.focus=function(e){void 0===e&&(e=0);var t=this.children().slice();t.length&&t[0].hasClass("vjs-menu-title")&&t.shift(),t.length>0&&(e<0?e=0:e>=t.length&&(e=t.length-1),this.focusedChild_=e,t[e].el_.focus())},i}(Ee);Ee.registerComponent("Menu",ud);var Go=function(s){function i(r,e){var t;void 0===e&&(e={}),(t=s.call(this,r,e)||this).menuButton_=new zi(r,e),t.menuButton_.controlText(t.controlText_),t.menuButton_.el_.setAttribute("aria-haspopup","true");var a=zi.prototype.buildCSSClass();t.menuButton_.el_.className=t.buildCSSClass()+" "+a,t.menuButton_.removeClass("vjs-control"),t.addChild(t.menuButton_),t.update(),t.enabled_=!0;var o=function(u){return t.handleClick(u)};return t.handleMenuKeyUp_=function(l){return t.handleMenuKeyUp(l)},t.on(t.menuButton_,"tap",o),t.on(t.menuButton_,"click",o),t.on(t.menuButton_,"keydown",function(l){return t.handleKeyDown(l)}),t.on(t.menuButton_,"mouseenter",function(){t.addClass("vjs-hover"),t.menu.show(),Di(W(),"keyup",t.handleMenuKeyUp_)}),t.on("mouseleave",function(l){return t.handleMouseLeave(l)}),t.on("keydown",function(l){return t.handleSubmenuKeyDown(l)}),t}U(i,s);var n=i.prototype;return n.update=function(){var e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))},n.createMenu=function(){var e=new ud(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var t=yt("li",{className:"vjs-menu-title",textContent:Kt(this.options_.title),tabIndex:-1}),a=new Ee(this.player_,{el:t});e.addItem(a)}if(this.items=this.createItems(),this.items)for(var o=0;o<this.items.length;o++)e.addItem(this.items[o]);return e},n.createItems=function(){},n.createEl=function(){return s.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},n.buildWrapperCSSClass=function(){var e="vjs-menu-button";return"vjs-menu-button "+(e+=!0===this.options_.inline?"-inline":"-popup")+" "+zi.prototype.buildCSSClass()+" "+s.prototype.buildCSSClass.call(this)},n.buildCSSClass=function(){var e="vjs-menu-button";return"vjs-menu-button "+(e+=!0===this.options_.inline?"-inline":"-popup")+" "+s.prototype.buildCSSClass.call(this)},n.controlText=function(e,t){return void 0===t&&(t=this.menuButton_.el()),this.menuButton_.controlText(e,t)},n.dispose=function(){this.handleMouseLeave(),s.prototype.dispose.call(this)},n.handleClick=function(e){this.buttonPressed_?this.unpressButton():this.pressButton()},n.handleMouseLeave=function(e){this.removeClass("vjs-hover"),pi(W(),"keyup",this.handleMenuKeyUp_)},n.focus=function(){this.menuButton_.focus()},n.blur=function(){this.menuButton_.blur()},n.handleKeyDown=function(e){ee().isEventKey(e,"Esc")||ee().isEventKey(e,"Tab")?(this.buttonPressed_&&this.unpressButton(),ee().isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus())):(ee().isEventKey(e,"Up")||ee().isEventKey(e,"Down"))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))},n.handleMenuKeyUp=function(e){(ee().isEventKey(e,"Esc")||ee().isEventKey(e,"Tab"))&&this.removeClass("vjs-hover")},n.handleSubmenuKeyPress=function(e){this.handleSubmenuKeyDown(e)},n.handleSubmenuKeyDown=function(e){(ee().isEventKey(e,"Esc")||ee().isEventKey(e,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),ee().isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus()))},n.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),bi&&hu())return;this.menu.focus()}},n.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},n.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},n.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},i}(Ee);Ee.registerComponent("MenuButton",Go);var Ko=function(s){function i(n,r){var e,t=r.tracks;if((e=s.call(this,n,r)||this).items.length<=1&&e.hide(),!t)return X(e);var a=Ot(X(e),e.update);return t.addEventListener("removetrack",a),t.addEventListener("addtrack",a),t.addEventListener("labelchange",a),e.player_.on("ready",a),e.player_.on("dispose",function(){t.removeEventListener("removetrack",a),t.removeEventListener("addtrack",a),t.removeEventListener("labelchange",a)}),e}return U(i,s),i}(Go);Ee.registerComponent("TrackButton",Ko);var ip=["Tab","Esc","Up","Down","Right","Left"],na=function(s){function i(r,e){var t;return(t=s.call(this,r,e)||this).selectable=e.selectable,t.isSelected_=e.selected||!1,t.multiSelectable=e.multiSelectable,t.selected(t.isSelected_),t.el_.setAttribute("role",t.selectable?t.multiSelectable?"menuitemcheckbox":"menuitemradio":"menuitem"),t}U(i,s);var n=i.prototype;return n.createEl=function(e,t,a){this.nonIconControl=!0;var o=s.prototype.createEl.call(this,"li",zt({className:"vjs-menu-item",tabIndex:-1},t),a);return o.replaceChild(yt("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),o.querySelector(".vjs-icon-placeholder")),o},n.handleKeyDown=function(e){ip.some(function(t){return ee().isEventKey(e,t)})||s.prototype.handleKeyDown.call(this,e)},n.handleClick=function(e){this.selected(!0)},n.selected=function(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},i}($a);Ee.registerComponent("MenuItem",na);var aa=function(s){function i(r,e){var t,a=e.track,o=r.textTracks();e.label=a.label||a.language||"Unknown",e.selected="showing"===a.mode,(t=s.call(this,r,e)||this).track=a,t.kinds=(e.kinds||[e.kind||t.track.kind]).filter(Boolean);var c,l=function(){for(var y=arguments.length,A=new Array(y),I=0;I<y;I++)A[I]=arguments[I];t.handleTracksChange.apply(X(t),A)},u=function(){for(var y=arguments.length,A=new Array(y),I=0;I<y;I++)A[I]=arguments[I];t.handleSelectedLanguageChange.apply(X(t),A)};return r.on(["loadstart","texttrackchange"],l),o.addEventListener("change",l),o.addEventListener("selectedlanguagechange",u),t.on("dispose",function(){r.off(["loadstart","texttrackchange"],l),o.removeEventListener("change",l),o.removeEventListener("selectedlanguagechange",u)}),void 0===o.onchange&&t.on(["tap","click"],function(){if("object"!=typeof p().Event)try{c=new(p().Event)("change")}catch(_){}c||(c=W().createEvent("Event")).initEvent("change",!0,!0),o.dispatchEvent(c)}),t.handleTracksChange(),t}U(i,s);var n=i.prototype;return n.handleClick=function(e){var t=this.track,a=this.player_.textTracks();if(s.prototype.handleClick.call(this,e),a)for(var o=0;o<a.length;o++){var l=a[o];-1!==this.kinds.indexOf(l.kind)&&(l===t?"showing"!==l.mode&&(l.mode="showing"):"disabled"!==l.mode&&(l.mode="disabled"))}},n.handleTracksChange=function(e){var t="showing"===this.track.mode;t!==this.isSelected_&&this.selected(t)},n.handleSelectedLanguageChange=function(e){if("showing"===this.track.mode){var t=this.player_.cache_.selectedLanguage;if(t&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},n.dispose=function(){this.track=null,s.prototype.dispose.call(this)},i}(na);Ee.registerComponent("TextTrackMenuItem",aa);var dd=function(s){function i(r,e){return e.track={player:r,kind:e.kind,kinds:e.kinds,default:!1,mode:"disabled"},e.kinds||(e.kinds=[e.kind]),e.track.label=e.label?e.label:e.kinds.join(" and ")+" off",e.selectable=!0,e.multiSelectable=!1,s.call(this,r,e)||this}U(i,s);var n=i.prototype;return n.handleTracksChange=function(e){for(var t=this.player().textTracks(),a=!0,o=0,l=t.length;o<l;o++){var u=t[o];if(this.options_.kinds.indexOf(u.kind)>-1&&"showing"===u.mode){a=!1;break}}a!==this.isSelected_&&this.selected(a)},n.handleSelectedLanguageChange=function(e){for(var t=this.player().textTracks(),a=!0,o=0,l=t.length;o<l;o++){var u=t[o];if(["captions","descriptions","subtitles"].indexOf(u.kind)>-1&&"showing"===u.mode){a=!1;break}}a&&(this.player_.cache_.selectedLanguage={enabled:!1})},i}(aa);Ee.registerComponent("OffTextTrackMenuItem",dd);var An=function(s){function i(r,e){return void 0===e&&(e={}),e.tracks=r.textTracks(),s.call(this,r,e)||this}return U(i,s),i.prototype.createItems=function(e,t){var a;void 0===e&&(e=[]),void 0===t&&(t=aa),this.label_&&(a=this.label_+" off"),e.push(new dd(this.player_,{kinds:this.kinds_,kind:this.kind_,label:a})),this.hideThreshold_+=1;var o=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var l=0;l<o.length;l++){var u=o[l];if(this.kinds_.indexOf(u.kind)>-1){var c=new t(this.player_,{track:u,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});c.addClass("vjs-"+u.kind+"-menu-item"),e.push(c)}}return e},i}(Ko);Ee.registerComponent("TextTrackButton",An);var cd=function(s){function i(r,e){var t,a=e.track,o=e.cue,l=r.currentTime();return e.selectable=!0,e.multiSelectable=!1,e.label=o.text,e.selected=o.startTime<=l&&l<o.endTime,(t=s.call(this,r,e)||this).track=a,t.cue=o,t}return U(i,s),i.prototype.handleClick=function(e){s.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime)},i}(na);Ee.registerComponent("ChaptersTrackMenuItem",cd);var Xo=function(s){function i(r,e,t){var a;return(a=s.call(this,r,e,t)||this).selectCurrentItem_=function(){a.items.forEach(function(o){o.selected(a.track_.activeCues[0]===o.cue)})},a}U(i,s);var n=i.prototype;return n.buildCSSClass=function(){return"vjs-chapters-button "+s.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-chapters-button "+s.prototype.buildWrapperCSSClass.call(this)},n.update=function(e){if(!e||!e.track||"chapters"===e.track.kind){var t=this.findChaptersTrack();t!==this.track_?(this.setTrack(t),s.prototype.update.call(this)):(!this.items||t&&t.cues&&t.cues.length!==this.items.length)&&s.prototype.update.call(this)}},n.setTrack=function(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";var a=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);a&&a.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}},n.findChaptersTrack=function(){for(var e=this.player_.textTracks()||[],t=e.length-1;t>=0;t--){var a=e[t];if(a.kind===this.kind_)return a}},n.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(Kt(this.kind_))},n.createMenu=function(){return this.options_.title=this.getMenuCaption(),s.prototype.createMenu.call(this)},n.createItems=function(){var e=[];if(!this.track_)return e;var t=this.track_.cues;if(!t)return e;for(var a=0,o=t.length;a<o;a++){var u=new cd(this.player_,{track:this.track_,cue:t[a]});e.push(u)}return e},i}(An);Xo.prototype.kind_="chapters",Xo.prototype.controlText_="Chapters",Ee.registerComponent("ChaptersButton",Xo);var Qo=function(s){function i(r,e,t){var a;a=s.call(this,r,e,t)||this;var o=r.textTracks(),l=Ot(X(a),a.handleTracksChange);return o.addEventListener("change",l),a.on("dispose",function(){o.removeEventListener("change",l)}),a}U(i,s);var n=i.prototype;return n.handleTracksChange=function(e){for(var t=this.player().textTracks(),a=!1,o=0,l=t.length;o<l;o++){var u=t[o];if(u.kind!==this.kind_&&"showing"===u.mode){a=!0;break}}a?this.disable():this.enable()},n.buildCSSClass=function(){return"vjs-descriptions-button "+s.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+s.prototype.buildWrapperCSSClass.call(this)},i}(An);Qo.prototype.kind_="descriptions",Qo.prototype.controlText_="Descriptions",Ee.registerComponent("DescriptionsButton",Qo);var Yo=function(s){function i(r,e,t){return s.call(this,r,e,t)||this}U(i,s);var n=i.prototype;return n.buildCSSClass=function(){return"vjs-subtitles-button "+s.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+s.prototype.buildWrapperCSSClass.call(this)},i}(An);Yo.prototype.kind_="subtitles",Yo.prototype.controlText_="Subtitles",Ee.registerComponent("SubtitlesButton",Yo);var Jo=function(s){function i(r,e){var t;return e.track={player:r,kind:e.kind,label:e.kind+" settings",selectable:!1,default:!1,mode:"disabled"},e.selectable=!1,e.name="CaptionSettingsMenuItem",(t=s.call(this,r,e)||this).addClass("vjs-texttrack-settings"),t.controlText(", opens "+e.kind+" settings dialog"),t}return U(i,s),i.prototype.handleClick=function(e){this.player().getChild("textTrackSettings").open()},i}(aa);Ee.registerComponent("CaptionSettingsMenuItem",Jo);var Zo=function(s){function i(r,e,t){return s.call(this,r,e,t)||this}U(i,s);var n=i.prototype;return n.buildCSSClass=function(){return"vjs-captions-button "+s.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-captions-button "+s.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(){var e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new Jo(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),s.prototype.createItems.call(this,e)},i}(An);Zo.prototype.kind_="captions",Zo.prototype.controlText_="Captions",Ee.registerComponent("CaptionsButton",Zo);var hd=function(s){function i(){return s.apply(this,arguments)||this}return U(i,s),i.prototype.createEl=function(e,t,a){var o=s.prototype.createEl.call(this,e,t,a),l=o.querySelector(".vjs-menu-item-text");return"captions"===this.options_.track.kind&&(l.appendChild(yt("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),l.appendChild(yt("span",{className:"vjs-control-text",textContent:" "+this.localize("Captions")}))),o},i}(aa);Ee.registerComponent("SubsCapsMenuItem",hd);var el=function(s){function i(r,e){var t;return void 0===e&&(e={}),(t=s.call(this,r,e)||this).label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(t.player_.language_)>-1&&(t.label_="captions"),t.menuButton_.controlText(Kt(t.label_)),t}U(i,s);var n=i.prototype;return n.buildCSSClass=function(){return"vjs-subs-caps-button "+s.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+s.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(){var e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new Jo(this.player_,{kind:this.label_})),this.hideThreshold_+=1),s.prototype.createItems.call(this,e,hd)},i}(An);el.prototype.kinds_=["captions","subtitles"],el.prototype.controlText_="Subtitles",Ee.registerComponent("SubsCapsButton",el);var fd=function(s){function i(r,e){var t,a=e.track,o=r.audioTracks();e.label=a.label||a.language||"Unknown",e.selected=a.enabled,(t=s.call(this,r,e)||this).track=a,t.addClass("vjs-"+a.kind+"-menu-item");var l=function(){for(var c=arguments.length,_=new Array(c),y=0;y<c;y++)_[y]=arguments[y];t.handleTracksChange.apply(X(t),_)};return o.addEventListener("change",l),t.on("dispose",function(){o.removeEventListener("change",l)}),t}U(i,s);var n=i.prototype;return n.createEl=function(e,t,a){var o=s.prototype.createEl.call(this,e,t,a),l=o.querySelector(".vjs-menu-item-text");return"main-desc"===this.options_.track.kind&&(l.appendChild(yt("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),l.appendChild(yt("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),o},n.handleClick=function(e){if(s.prototype.handleClick.call(this,e),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks)for(var t=this.player_.audioTracks(),a=0;a<t.length;a++){var o=t[a];o!==this.track&&(o.enabled=o===this.track)}},n.handleTracksChange=function(e){this.selected(this.track.enabled)},i}(na);Ee.registerComponent("AudioTrackMenuItem",fd);var pd=function(s){function i(r,e){return void 0===e&&(e={}),e.tracks=r.audioTracks(),s.call(this,r,e)||this}U(i,s);var n=i.prototype;return n.buildCSSClass=function(){return"vjs-audio-button "+s.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-audio-button "+s.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(e){void 0===e&&(e=[]),this.hideThreshold_=1;for(var t=this.player_.audioTracks(),a=0;a<t.length;a++)e.push(new fd(this.player_,{track:t[a],selectable:!0,multiSelectable:!1}));return e},i}(Ko);pd.prototype.controlText_="Audio Track",Ee.registerComponent("AudioTrackButton",pd);var tl=function(s){function i(r,e){var t,a=e.rate,o=parseFloat(a,10);return e.label=a,e.selected=o===r.playbackRate(),e.selectable=!0,e.multiSelectable=!1,(t=s.call(this,r,e)||this).label=a,t.rate=o,t.on(r,"ratechange",function(l){return t.update(l)}),t}U(i,s);var n=i.prototype;return n.handleClick=function(e){s.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},n.update=function(e){this.selected(this.player().playbackRate()===this.rate)},i}(na);tl.prototype.contentElType="button",Ee.registerComponent("PlaybackRateMenuItem",tl);var gd=function(s){function i(r,e){var t;return(t=s.call(this,r,e)||this).menuButton_.el_.setAttribute("aria-describedby",t.labelElId_),t.updateVisibility(),t.updateLabel(),t.on(r,"loadstart",function(a){return t.updateVisibility(a)}),t.on(r,"ratechange",function(a){return t.updateLabel(a)}),t.on(r,"playbackrateschange",function(a){return t.handlePlaybackRateschange(a)}),t}U(i,s);var n=i.prototype;return n.createEl=function(){var e=s.prototype.createEl.call(this);return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=yt("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),e.appendChild(this.labelEl_),e},n.dispose=function(){this.labelEl_=null,s.prototype.dispose.call(this)},n.buildCSSClass=function(){return"vjs-playback-rate "+s.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-playback-rate "+s.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(){for(var e=this.playbackRates(),t=[],a=e.length-1;a>=0;a--)t.push(new tl(this.player(),{rate:e[a]+"x"}));return t},n.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},n.handleClick=function(e){var t=this.player().playbackRate(),a=this.playbackRates(),l=(a.indexOf(t)+1)%a.length;this.player().playbackRate(a[l])},n.handlePlaybackRateschange=function(e){this.update()},n.playbackRates=function(){var e=this.player();return e.playbackRates&&e.playbackRates()||[]},n.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},n.updateVisibility=function(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},n.updateLabel=function(e){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")},i}(Go);gd.prototype.controlText_="Playback Rate",Ee.registerComponent("PlaybackRateMenuButton",gd);var md=function(s){function i(){return s.apply(this,arguments)||this}U(i,s);var n=i.prototype;return n.buildCSSClass=function(){return"vjs-spacer "+s.prototype.buildCSSClass.call(this)},n.createEl=function(e,t,a){return void 0===e&&(e="div"),void 0===t&&(t={}),void 0===a&&(a={}),t.className||(t.className=this.buildCSSClass()),s.prototype.createEl.call(this,e,t,a)},i}(Ee);Ee.registerComponent("Spacer",md);var rp=function(s){function i(){return s.apply(this,arguments)||this}U(i,s);var n=i.prototype;return n.buildCSSClass=function(){return"vjs-custom-control-spacer "+s.prototype.buildCSSClass.call(this)},n.createEl=function(){return s.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),textContent:"\xa0"})},i}(md);Ee.registerComponent("CustomControlSpacer",rp);var Ga=function(s){function i(){return s.apply(this,arguments)||this}return U(i,s),i.prototype.createEl=function(){return s.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},i}(Ee);Ga.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in W()&&Ga.prototype.options_.children.splice(Ga.prototype.options_.children.length-1,0,"pictureInPictureToggle"),Ee.registerComponent("ControlBar",Ga);var vd=function(s){function i(r,e){var t;return(t=s.call(this,r,e)||this).on(r,"error",function(a){return t.open(a)}),t}U(i,s);var n=i.prototype;return n.buildCSSClass=function(){return"vjs-error-display "+s.prototype.buildCSSClass.call(this)},n.content=function(){var e=this.player().error();return e?this.localize(e.message):""},i}(Tn);vd.prototype.options_=he({},Tn.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),Ee.registerComponent("ErrorDisplay",vd);var il="vjs-text-track-settings",yd=["#000","Black"],_d=["#00F","Blue"],Td=["#0FF","Cyan"],bd=["#0F0","Green"],Sd=["#F0F","Magenta"],xd=["#F00","Red"],Cd=["#FFF","White"],Ed=["#FF0","Yellow"],rl=["1","Opaque"],nl=["0.5","Semi-Transparent"],Ad=["0","Transparent"],Yr={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[yd,Cd,xd,bd,_d,Ed,Sd,Td]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[rl,nl,Ad]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[Cd,yd,xd,bd,_d,Ed,Sd,Td]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(i){return"1.00"===i?null:Number(i)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[rl,nl]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[Ad,nl,rl]}};function Pd(s,i){if(i&&(s=i(s)),s&&"none"!==s)return s}Yr.windowColor.options=Yr.backgroundColor.options;var sp=function(s){function i(r,e){var t;return e.temporary=!1,(t=s.call(this,r,e)||this).updateDisplay=t.updateDisplay.bind(X(t)),t.fill(),t.hasBeenOpened_=t.hasBeenFilled_=!0,t.endDialog=yt("p",{className:"vjs-control-text",textContent:t.localize("End of dialog window.")}),t.el().appendChild(t.endDialog),t.setDefaults(),void 0===e.persistTextTrackSettings&&(t.options_.persistTextTrackSettings=t.options_.playerOptions.persistTextTrackSettings),t.on(t.$(".vjs-done-button"),"click",function(){t.saveSettings(),t.close()}),t.on(t.$(".vjs-default-button"),"click",function(){t.setDefaults(),t.updateDisplay()}),hn(Yr,function(a){t.on(t.$(a.selector),"change",t.updateDisplay)}),t.options_.persistTextTrackSettings&&t.restoreSettings(),t}U(i,s);var n=i.prototype;return n.dispose=function(){this.endDialog=null,s.prototype.dispose.call(this)},n.createElSelect_=function(e,t,a){var o=this;void 0===t&&(t=""),void 0===a&&(a="label");var l=Yr[e],u=l.id.replace("%s",this.id_),c=[t,u].join(" ").trim();return["<"+a+' id="'+u+'" class="'+("label"===a?"vjs-label":"")+'">',this.localize(l.label),"</"+a+">",'<select aria-labelledby="'+c+'">'].concat(l.options.map(function(_){var y=u+"-"+_[1].replace(/\W+/g,"");return['<option id="'+y+'" value="'+_[0]+'" ','aria-labelledby="'+c+" "+y+'">',o.localize(_[1]),"</option>"].join("")})).concat("</select>").join("")},n.createElFgColor_=function(){var e="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",e),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")},n.createElBgColor_=function(){var e="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",e),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")},n.createElWinColor_=function(){var e="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",e),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")},n.createElColors_=function(){return yt("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},n.createElFont_=function(){return yt("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},n.createElControls_=function(){var e=this.localize("restore all settings to the default values");return yt("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+e+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+e+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},n.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},n.label=function(){return this.localize("Caption Settings Dialog")},n.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},n.buildCSSClass=function(){return s.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},n.getValues=function(){var e=this;return function Gh(s,i,n){return void 0===n&&(n=0),ru(s).reduce(function(r,e){return i(r,s[e],e)},n)}(Yr,function(t,a,o){var l=function np(s,i){return Pd(s.options[s.options.selectedIndex].value,i)}(e.$(a.selector),a.parser);return void 0!==l&&(t[o]=l),t},{})},n.setValues=function(e){var t=this;hn(Yr,function(a,o){!function ap(s,i,n){if(i)for(var r=0;r<s.options.length;r++)if(Pd(s.options[r].value,n)===i){s.selectedIndex=r;break}}(t.$(a.selector),e[o],a.parser)})},n.setDefaults=function(){var e=this;hn(Yr,function(t){var a=t.hasOwnProperty("default")?t.default:0;e.$(t.selector).selectedIndex=a})},n.restoreSettings=function(){var e;try{e=JSON.parse(p().localStorage.getItem(il))}catch(t){gt.warn(t)}e&&this.setValues(e)},n.saveSettings=function(){if(this.options_.persistTextTrackSettings){var e=this.getValues();try{Object.keys(e).length?p().localStorage.setItem(il,JSON.stringify(e)):p().localStorage.removeItem(il)}catch(t){gt.warn(t)}}},n.updateDisplay=function(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()},n.conditionalBlur_=function(){this.previouslyActiveEl_=null;var e=this.player_.controlBar,t=e&&e.subsCapsButton,a=e&&e.captionsButton;t?t.focus():a&&a.focus()},i}(Tn);Ee.registerComponent("TextTrackSettings",sp);var op=function(s){function i(r,e){var t,a=e.ResizeObserver||p().ResizeObserver;null===e.ResizeObserver&&(a=!1);var o=Rt({createEl:!a,reportTouchActivity:!1},e);return(t=s.call(this,r,o)||this).ResizeObserver=e.ResizeObserver||p().ResizeObserver,t.loadListener_=null,t.resizeObserver_=null,t.debouncedHandler_=function(i,n,r,e){void 0===e&&(e=p());var t,o=function(){var u=this,c=arguments,_=function(){t=null,_=null,i.apply(u,c)};e.clearTimeout(t),t=e.setTimeout(_,100)};return o.cancel=function(){e.clearTimeout(t),t=null},o}(function(){t.resizeHandler()},0,0,X(t)),a?(t.resizeObserver_=new t.ResizeObserver(t.debouncedHandler_),t.resizeObserver_.observe(r.el())):(t.loadListener_=function(){if(t.el_&&t.el_.contentWindow){var l=t.debouncedHandler_,u=t.unloadListener_=function(){pi(this,"resize",l),pi(this,"unload",u),u=null};Di(t.el_.contentWindow,"unload",u),Di(t.el_.contentWindow,"resize",l)}},t.one("load",t.loadListener_)),t}U(i,s);var n=i.prototype;return n.createEl=function(){return s.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})},n.resizeHandler=function(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")},n.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,s.prototype.dispose.call(this)},i}(Ee);Ee.registerComponent("ResizeManager",op);var lp={trackingThreshold:20,liveTolerance:15},up=function(s){function i(r,e){var t,a=Rt(lp,e,{createEl:!1});return(t=s.call(this,r,a)||this).handleVisibilityChange_=function(o){return t.handleVisibilityChange(o)},t.trackLiveHandler_=function(){return t.trackLive_()},t.handlePlay_=function(o){return t.handlePlay(o)},t.handleFirstTimeupdate_=function(o){return t.handleFirstTimeupdate(o)},t.handleSeeked_=function(o){return t.handleSeeked(o)},t.seekToLiveEdge_=function(o){return t.seekToLiveEdge(o)},t.reset_(),t.on(t.player_,"durationchange",function(o){return t.handleDurationchange(o)}),t.on(t.player_,"canplay",function(){return t.toggleTracking()}),Yn&&"hidden"in W()&&"visibilityState"in W()&&t.on(W(),"visibilitychange",t.handleVisibilityChange_),t}U(i,s);var n=i.prototype;return n.handleVisibilityChange=function(){this.player_.duration()===1/0&&(W().hidden?this.stopTracking():this.startTracking())},n.trackLive_=function(){var e=this.player_.seekable();if(e&&e.length){var t=Number(p().performance.now().toFixed(4)),a=-1===this.lastTime_?0:(t-this.lastTime_)/1e3;this.lastTime_=t,this.pastSeekEnd_=this.pastSeekEnd()+a;var o=this.liveCurrentTime(),l=this.player_.currentTime(),u=this.player_.paused()||this.seekedBehindLive_||Math.abs(o-l)>this.options_.liveTolerance;(!this.timeupdateSeen_||o===1/0)&&(u=!1),u!==this.behindLiveEdge_&&(this.behindLiveEdge_=u,this.trigger("liveedgechange"))}},n.handleDurationchange=function(){this.toggleTracking()},n.toggleTracking=function(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},n.startTracking=function(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,30),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))},n.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)},n.handleSeeked=function(){var e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&e>2,this.nextSeekedFromUser_=!1,this.trackLive_()},n.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)},n.reset_=function(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)},n.nextSeekedFromUser=function(){this.nextSeekedFromUser_=!0},n.stopTracking=function(){!this.isTracking()||(this.reset_(),this.trigger("liveedgechange"))},n.seekableEnd=function(){for(var e=this.player_.seekable(),t=[],a=e?e.length:0;a--;)t.push(e.end(a));return t.length?t.sort()[t.length-1]:1/0},n.seekableStart=function(){for(var e=this.player_.seekable(),t=[],a=e?e.length:0;a--;)t.push(e.start(a));return t.length?t.sort()[0]:0},n.liveWindow=function(){var e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()},n.isLive=function(){return this.isTracking()},n.atLiveEdge=function(){return!this.behindLiveEdge()},n.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},n.pastSeekEnd=function(){var e=this.seekableEnd();return-1!==this.lastSeekEnd_&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_},n.behindLiveEdge=function(){return this.behindLiveEdge_},n.isTracking=function(){return"number"==typeof this.trackingInterval_},n.seekToLiveEdge=function(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))},n.dispose=function(){this.off(W(),"visibilitychange",this.handleVisibilityChange_),this.stopTracking(),s.prototype.dispose.call(this)},i}(Ee);Ee.registerComponent("LiveTracker",up);var Ka,al=function(i){var n=i.el();if(n.hasAttribute("src"))return i.triggerSourceset(n.src),!0;var r=i.$$("source"),e=[],t="";if(!r.length)return!1;for(var a=0;a<r.length;a++){var o=r[a].src;o&&-1===e.indexOf(o)&&e.push(o)}return!!e.length&&(1===e.length&&(t=e[0]),i.triggerSourceset(t),!0)},dp=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(i){var n=W().createElement(this.nodeName.toLowerCase());n.innerHTML=i;for(var r=W().createDocumentFragment();n.childNodes.length;)r.appendChild(n.childNodes[0]);return this.innerText="",p().Element.prototype.appendChild.call(this,r),this.innerHTML}}),wd=function(i,n){for(var r={},e=0;e<i.length&&!((r=Object.getOwnPropertyDescriptor(i[e],n))&&r.set&&r.get);e++);return r.enumerable=!0,r.configurable=!0,r},kd=function(i){var n=i.el();if(!n.resetSourceWatch_){var r={},e=function(i){return wd([i.el(),p().HTMLMediaElement.prototype,p().Element.prototype,dp],"innerHTML")}(i),t=function(o){return function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];var _=o.apply(n,u);return al(i),_}};["append","appendChild","insertAdjacentHTML"].forEach(function(a){!n[a]||(r[a]=n[a],n[a]=t(r[a]))}),Object.defineProperty(n,"innerHTML",Rt(e,{set:t(e.set)})),n.resetSourceWatch_=function(){n.resetSourceWatch_=null,Object.keys(r).forEach(function(a){n[a]=r[a]}),Object.defineProperty(n,"innerHTML",e)},i.one("sourceset",n.resetSourceWatch_)}},hp=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?Uu(p().Element.prototype.getAttribute.call(this,"src")):""},set:function(i){return p().Element.prototype.setAttribute.call(this,"src",i),i}}),sl=function(i,n,r,e){void 0===e&&(e=!0);var t=function(l){return Object.defineProperty(i,n,{value:l,enumerable:!0,writable:!0})},a={configurable:!0,enumerable:!0,get:function(){var l=r();return t(l),l}};return e&&(a.set=t),Object.defineProperty(i,n,a)},Qe=function(s){function i(r,e){var t;t=s.call(this,r,e)||this;var a=r.source,o=!1;if(t.featuresVideoFrameCallback=t.featuresVideoFrameCallback&&"VIDEO"===t.el_.tagName,a&&(t.el_.currentSrc!==a.src||r.tag&&3===r.tag.initNetworkState_)?t.setSource(a):t.handleLateInit_(t.el_),r.enableSourceset&&t.setupSourcesetHandling_(),t.isScrubbing_=!1,t.el_.hasChildNodes()){for(var l=t.el_.childNodes,u=l.length,c=[];u--;){var _=l[u];"track"===_.nodeName.toLowerCase()&&(t.featuresNativeTextTracks?(t.remoteTextTrackEls().addTrackElement_(_),t.remoteTextTracks().addTrack(_.track),t.textTracks().addTrack(_.track),!o&&!t.el_.hasAttribute("crossorigin")&&ja(_.src)&&(o=!0)):c.push(_))}for(var A=0;A<c.length;A++)t.el_.removeChild(c[A])}return t.proxyNativeTracks_(),t.featuresNativeTextTracks&&o&&gt.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),t.restoreMetadataTracksInIOSNativePlayer_(),(fn||go||su)&&!0===r.nativeControlsForTouch&&t.setControls(!0),t.proxyWebkitFullscreen_(),t.triggerReady(),t}U(i,s);var n=i.prototype;return n.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),i.disposeMediaElement(this.el_),this.options_=null,s.prototype.dispose.call(this)},n.setupSourcesetHandling_=function(){!function(i){if(i.featuresSourceset){var n=i.el();if(!n.resetSourceset_){var r=function(i){return wd([i.el(),p().HTMLMediaElement.prototype,hp],"src")}(i),e=n.setAttribute,t=n.load;Object.defineProperty(n,"src",Rt(r,{set:function(o){var l=r.set.call(n,o);return i.triggerSourceset(n.src),l}})),n.setAttribute=function(a,o){var l=e.call(n,a,o);return/src/i.test(a)&&i.triggerSourceset(n.src),l},n.load=function(){var a=t.call(n);return al(i)||(i.triggerSourceset(""),kd(i)),a},n.currentSrc?i.triggerSourceset(n.currentSrc):al(i)||kd(i),n.resetSourceset_=function(){n.resetSourceset_=null,n.load=t,n.setAttribute=e,Object.defineProperty(n,"src",r),n.resetSourceWatch_&&n.resetSourceWatch_()}}}}(this)},n.restoreMetadataTracksInIOSNativePlayer_=function(){var t,e=this.textTracks(),a=function(){t=[];for(var u=0;u<e.length;u++){var c=e[u];"metadata"===c.kind&&t.push({track:c,storedMode:c.mode})}};a(),e.addEventListener("change",a),this.on("dispose",function(){return e.removeEventListener("change",a)});var o=function l(){for(var u=0;u<t.length;u++){var c=t[u];"disabled"===c.track.mode&&c.track.mode!==c.storedMode&&(c.track.mode=c.storedMode)}e.removeEventListener("change",l)};this.on("webkitbeginfullscreen",function(){e.removeEventListener("change",a),e.removeEventListener("change",o),e.addEventListener("change",o)}),this.on("webkitendfullscreen",function(){e.removeEventListener("change",a),e.addEventListener("change",a),e.removeEventListener("change",o)})},n.overrideNative_=function(e,t){var a=this;if(t===this["featuresNative"+e+"Tracks"]){var o=e.toLowerCase();this[o+"TracksListeners_"]&&Object.keys(this[o+"TracksListeners_"]).forEach(function(l){a.el()[o+"Tracks"].removeEventListener(l,a[o+"TracksListeners_"][l])}),this["featuresNative"+e+"Tracks"]=!t,this[o+"TracksListeners_"]=null,this.proxyNativeTracksForType_(o)}},n.overrideNativeAudioTracks=function(e){this.overrideNative_("Audio",e)},n.overrideNativeVideoTracks=function(e){this.overrideNative_("Video",e)},n.proxyNativeTracksForType_=function(e){var t=this,a=ji[e],o=this.el()[a.getterName],l=this[a.getterName]();if(this["featuresNative"+a.capitalName+"Tracks"]&&o&&o.addEventListener){var u={change:function(y){var A={type:"change",target:l,currentTarget:l,srcElement:l};l.trigger(A),"text"===e&&t[xn.remoteText.getterName]().trigger(A)},addtrack:function(y){l.addTrack(y.track)},removetrack:function(y){l.removeTrack(y.track)}},c=function(){for(var y=[],A=0;A<l.length;A++){for(var I=!1,D=0;D<o.length;D++)if(o[D]===l[A]){I=!0;break}I||y.push(l[A])}for(;y.length;)l.removeTrack(y.shift())};this[a.getterName+"Listeners_"]=u,Object.keys(u).forEach(function(_){var y=u[_];o.addEventListener(_,y),t.on("dispose",function(A){return o.removeEventListener(_,y)})}),this.on("loadstart",c),this.on("dispose",function(_){return t.off("loadstart",c)})}},n.proxyNativeTracks_=function(){var e=this;ji.names.forEach(function(t){e.proxyNativeTracksForType_(t)})},n.createEl=function(){var e=this.options_.tag;if(!e||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(e){var t=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(t,e),i.disposeMediaElement(e),e=t}else{e=W().createElement("video");var o=Rt({},this.options_.tag&&fr(this.options_.tag));(!fn||!0!==this.options_.nativeControlsForTouch)&&delete o.controls,gu(e,zt(o,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}void 0!==this.options_.preload&&mn(e,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);for(var l=["loop","muted","playsinline","autoplay"],u=0;u<l.length;u++){var c=l[u],_=this.options_[c];void 0!==_&&(_?mn(e,c,c):Da(e,c),e[c]=_)}return e},n.handleLateInit_=function(e){if(0!==e.networkState&&3!==e.networkState){if(0===e.readyState){var t=!1,a=function(){t=!0};this.on("loadstart",a);var o=function(){t||this.trigger("loadstart")};return this.on("loadedmetadata",o),void this.ready(function(){this.off("loadstart",a),this.off("loadedmetadata",o),t||this.trigger("loadstart")})}var l=["loadstart"];l.push("loadedmetadata"),e.readyState>=2&&l.push("loadeddata"),e.readyState>=3&&l.push("canplay"),e.readyState>=4&&l.push("canplaythrough"),this.ready(function(){l.forEach(function(u){this.trigger(u)},this)})}},n.setScrubbing=function(e){this.isScrubbing_=e},n.scrubbing=function(){return this.isScrubbing_},n.setCurrentTime=function(e){try{this.isScrubbing_&&this.el_.fastSeek&&La?this.el_.fastSeek(e):this.el_.currentTime=e}catch(t){gt(t,"Video is not ready. (Video.js)")}},n.duration=function(){var e=this;return this.el_.duration===1/0&&dr&&cr&&0===this.el_.currentTime?(this.on("timeupdate",function a(){e.el_.currentTime>0&&(e.el_.duration===1/0&&e.trigger("durationchange"),e.off("timeupdate",a))}),NaN):this.el_.duration||NaN},n.width=function(){return this.el_.offsetWidth},n.height=function(){return this.el_.offsetHeight},n.proxyWebkitFullscreen_=function(){var e=this;if("webkitDisplayingFullscreen"in this.el_){var t=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},a=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",t),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",a),this.on("dispose",function(){e.off("webkitbeginfullscreen",a),e.off("webkitendfullscreen",t)})}},n.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var e=p().navigator&&p().navigator.userAgent||"";if(/Android/.test(e)||!/Chrome|Mac OS X 10.5/.test(e))return!0}return!1},n.enterFullScreen=function(){var e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)Yi(this.el_.play()),this.setTimeout(function(){e.pause();try{e.webkitEnterFullScreen()}catch(t){this.trigger("fullscreenerror",t)}},0);else try{e.webkitEnterFullScreen()}catch(t){this.trigger("fullscreenerror",t)}},n.exitFullScreen=function(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))},n.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},n.requestVideoFrameCallback=function(e){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(e):s.prototype.requestVideoFrameCallback.call(this,e)},n.cancelVideoFrameCallback=function(e){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(e):s.prototype.cancelVideoFrameCallback.call(this,e)},n.src=function(e){if(void 0===e)return this.el_.src;this.setSrc(e)},n.reset=function(){i.resetMediaElement(this.el_)},n.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},n.setControls=function(e){this.el_.controls=!!e},n.addTextTrack=function(e,t,a){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,t,a):s.prototype.addTextTrack.call(this,e,t,a)},n.createRemoteTextTrack=function(e){if(!this.featuresNativeTextTracks)return s.prototype.createRemoteTextTrack.call(this,e);var t=W().createElement("track");return e.kind&&(t.kind=e.kind),e.label&&(t.label=e.label),(e.language||e.srclang)&&(t.srclang=e.language||e.srclang),e.default&&(t.default=e.default),e.id&&(t.id=e.id),e.src&&(t.src=e.src),t},n.addRemoteTextTrack=function(e,t){var a=s.prototype.addRemoteTextTrack.call(this,e,t);return this.featuresNativeTextTracks&&this.el().appendChild(a),a},n.removeRemoteTextTrack=function(e){if(s.prototype.removeRemoteTextTrack.call(this,e),this.featuresNativeTextTracks)for(var t=this.$$("track"),a=t.length;a--;)(e===t[a]||e===t[a].track)&&this.el().removeChild(t[a])},n.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var e={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),p().performance&&"function"==typeof p().performance.now?e.creationTime=p().performance.now():p().performance&&p().performance.timing&&"number"==typeof p().performance.timing.navigationStart&&(e.creationTime=p().Date.now()-p().performance.timing.navigationStart),e},i}(It);sl(Qe,"TEST_VID",function(){if(pn()){var s=W().createElement("video"),i=W().createElement("track");return i.kind="captions",i.srclang="en",i.label="English",s.appendChild(i),s}}),Qe.isSupported=function(){try{Qe.TEST_VID.volume=.5}catch(s){return!1}return!(!Qe.TEST_VID||!Qe.TEST_VID.canPlayType)},Qe.canPlayType=function(s){return Qe.TEST_VID.canPlayType(s)},Qe.canPlaySource=function(s,i){return Qe.canPlayType(s.type)},Qe.canControlVolume=function(){try{var s=Qe.TEST_VID.volume;Qe.TEST_VID.volume=s/2+.1;var i=s!==Qe.TEST_VID.volume;return i&&bi?(p().setTimeout(function(){Qe&&Qe.prototype&&(Qe.prototype.featuresVolumeControl=s!==Qe.TEST_VID.volume)}),!1):i}catch(n){return!1}},Qe.canMuteVolume=function(){try{var s=Qe.TEST_VID.muted;return Qe.TEST_VID.muted=!s,Qe.TEST_VID.muted?mn(Qe.TEST_VID,"muted","muted"):Da(Qe.TEST_VID,"muted"),s!==Qe.TEST_VID.muted}catch(i){return!1}},Qe.canControlPlaybackRate=function(){if(dr&&cr&&lu<58)return!1;try{var s=Qe.TEST_VID.playbackRate;return Qe.TEST_VID.playbackRate=s/2+.1,s!==Qe.TEST_VID.playbackRate}catch(i){return!1}},Qe.canOverrideAttributes=function(){try{var s=function(){};Object.defineProperty(W().createElement("video"),"src",{get:s,set:s}),Object.defineProperty(W().createElement("audio"),"src",{get:s,set:s}),Object.defineProperty(W().createElement("video"),"innerHTML",{get:s,set:s}),Object.defineProperty(W().createElement("audio"),"innerHTML",{get:s,set:s})}catch(i){return!1}return!0},Qe.supportsNativeTextTracks=function(){return La||bi&&cr},Qe.supportsNativeVideoTracks=function(){return!(!Qe.TEST_VID||!Qe.TEST_VID.videoTracks)},Qe.supportsNativeAudioTracks=function(){return!(!Qe.TEST_VID||!Qe.TEST_VID.audioTracks)},Qe.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(s){var n=s[1];sl(Qe.prototype,s[0],function(){return Qe[n]()},!0)}),Qe.prototype.featuresVolumeControl=Qe.canControlVolume(),Qe.prototype.movingMediaElementInDOM=!bi,Qe.prototype.featuresFullscreenResize=!0,Qe.prototype.featuresProgressEvents=!0,Qe.prototype.featuresTimeupdateEvents=!0,Qe.prototype.featuresVideoFrameCallback=!(!Qe.TEST_VID||!Qe.TEST_VID.requestVideoFrameCallback),Qe.patchCanPlayType=function(){ho>=4&&!ou&&!cr&&(Ka=Qe.TEST_VID&&Qe.TEST_VID.constructor.prototype.canPlayType,Qe.TEST_VID.constructor.prototype.canPlayType=function(s){return s&&/^application\/(?:x-|vnd\.apple\.)mpegurl/i.test(s)?"maybe":Ka.call(this,s)})},Qe.unpatchCanPlayType=function(){var s=Qe.TEST_VID.constructor.prototype.canPlayType;return Ka&&(Qe.TEST_VID.constructor.prototype.canPlayType=Ka),s},Qe.patchCanPlayType(),Qe.disposeMediaElement=function(s){if(s){for(s.parentNode&&s.parentNode.removeChild(s);s.hasChildNodes();)s.removeChild(s.firstChild);s.removeAttribute("src"),"function"==typeof s.load&&function(){try{s.load()}catch(i){}}()}},Qe.resetMediaElement=function(s){if(s){for(var i=s.querySelectorAll("source"),n=i.length;n--;)s.removeChild(i[n]);s.removeAttribute("src"),"function"==typeof s.load&&function(){try{s.load()}catch(r){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(s){Qe.prototype[s]=function(){return this.el_[s]||this.el_.hasAttribute(s)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(s){Qe.prototype["set"+Kt(s)]=function(i){this.el_[s]=i,i?this.el_.setAttribute(s,s):this.el_.removeAttribute(s)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(s){Qe.prototype[s]=function(){return this.el_[s]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(s){Qe.prototype["set"+Kt(s)]=function(i){this.el_[s]=i}}),["pause","load","play"].forEach(function(s){Qe.prototype[s]=function(){return this.el_[s]()}}),It.withSourceHandlers(Qe),Qe.nativeSourceHandler={},Qe.nativeSourceHandler.canPlayType=function(s){try{return Qe.TEST_VID.canPlayType(s)}catch(i){return""}},Qe.nativeSourceHandler.canHandleSource=function(s,i){if(s.type)return Qe.nativeSourceHandler.canPlayType(s.type);if(s.src){var n=Oo(s.src);return Qe.nativeSourceHandler.canPlayType("video/"+n)}return""},Qe.nativeSourceHandler.handleSource=function(s,i,n){i.setSrc(s.src)},Qe.nativeSourceHandler.dispose=function(){},Qe.registerSourceHandler(Qe.nativeSourceHandler),It.registerTech("Html5",Qe);var Id=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],ol={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},ll=["tiny","xsmall","small","medium","large","xlarge","huge"],Xa={};ll.forEach(function(s){var i="x"===s.charAt(0)?"x-"+s.substring(1):s;Xa[s]="vjs-layout-"+i});var gp={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},Jt=function(s){function i(r,e,t){var a;if(r.id=r.id||e.id||"vjs_video_"+pr(),(e=zt(i.getTagSettings(r),e)).initChildren=!1,e.createEl=!1,e.evented=!1,e.reportTouchActivity=!1,!e.language)if("function"==typeof r.closest){var o=r.closest("[lang]");o&&o.getAttribute&&(e.language=o.getAttribute("lang"))}else for(var l=r;l&&1===l.nodeType;){if(fr(l).hasOwnProperty("lang")){e.language=l.getAttribute("lang");break}l=l.parentNode}if((a=s.call(this,null,e,t)||this).boundDocumentFullscreenChange_=function(y){return a.documentFullscreenChange_(y)},a.boundFullWindowOnEscKey_=function(y){return a.fullWindowOnEscKey(y)},a.boundUpdateStyleEl_=function(y){return a.updateStyleEl_(y)},a.boundApplyInitTime_=function(y){return a.applyInitTime_(y)},a.boundUpdateCurrentBreakpoint_=function(y){return a.updateCurrentBreakpoint_(y)},a.boundHandleTechClick_=function(y){return a.handleTechClick_(y)},a.boundHandleTechDoubleClick_=function(y){return a.handleTechDoubleClick_(y)},a.boundHandleTechTouchStart_=function(y){return a.handleTechTouchStart_(y)},a.boundHandleTechTouchMove_=function(y){return a.handleTechTouchMove_(y)},a.boundHandleTechTouchEnd_=function(y){return a.handleTechTouchEnd_(y)},a.boundHandleTechTap_=function(y){return a.handleTechTap_(y)},a.isFullscreen_=!1,a.log=iu(a.id_),a.fsApi_=Pa,a.isPosterFromTech_=!1,a.queuedCallbacks_=[],a.isReady_=!1,a.hasStarted_=!1,a.userActive_=!1,a.debugEnabled_=!1,a.audioOnlyMode_=!1,a.audioPosterMode_=!1,a.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!a.options_||!a.options_.techOrder||!a.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(a.tag=r,a.tagAttributes=r&&fr(r),a.language(a.options_.language),e.languages){var u={};Object.getOwnPropertyNames(e.languages).forEach(function(y){u[y.toLowerCase()]=e.languages[y]}),a.languages_=u}else a.languages_=i.prototype.options_.languages;a.resetCache_(),a.poster_=e.poster||"",a.controls_=!!e.controls,r.controls=!1,r.removeAttribute("controls"),a.changingSrc_=!1,a.playCallbacks_=[],a.playTerminatedQueue_=[],r.hasAttribute("autoplay")?a.autoplay(!0):a.autoplay(a.options_.autoplay),e.plugins&&Object.keys(e.plugins).forEach(function(y){if("function"!=typeof a[y])throw new Error('plugin "'+y+'" does not exist')}),a.scrubbing_=!1,a.el_=a.createEl(),Eo(X(a),{eventBusKey:"el_"}),a.fsApi_.requestFullscreen&&(Di(W(),a.fsApi_.fullscreenchange,a.boundDocumentFullscreenChange_),a.on(a.fsApi_.fullscreenchange,a.boundDocumentFullscreenChange_)),a.fluid_&&a.on(["playerreset","resize"],a.boundUpdateStyleEl_);var c=Rt(a.options_);e.plugins&&Object.keys(e.plugins).forEach(function(y){a[y](e.plugins[y])}),e.debug&&a.debug(!0),a.options_.playerOptions=c,a.middleware_=[],a.playbackRates(e.playbackRates),a.initChildren(),a.isAudio("audio"===r.nodeName.toLowerCase()),a.controls()?a.addClass("vjs-controls-enabled"):a.addClass("vjs-controls-disabled"),a.el_.setAttribute("role","region"),a.isAudio()?a.el_.setAttribute("aria-label",a.localize("Audio Player")):a.el_.setAttribute("aria-label",a.localize("Video Player")),a.isAudio()&&a.addClass("vjs-audio"),a.flexNotSupported_()&&a.addClass("vjs-no-flex"),fn&&a.addClass("vjs-touch-enabled"),bi||a.addClass("vjs-workinghover"),i.players[a.id_]=X(a);var _="7.20.3".split(".")[0];return a.addClass("vjs-v"+_),a.userActive(!0),a.reportUserActivity(),a.one("play",function(y){return a.listenForUserActivity_(y)}),a.on("stageclick",function(y){return a.handleStageClick_(y)}),a.on("keydown",function(y){return a.handleKeyDown(y)}),a.on("languagechange",function(y){return a.handleLanguagechange(y)}),a.breakpoints(a.options_.breakpoints),a.responsive(a.options_.responsive),a.on("ready",function(){a.audioPosterMode(a.options_.audioPosterMode),a.audioOnlyMode(a.options_.audioOnlyMode)}),a}U(i,s);var n=i.prototype;return n.dispose=function(){var e=this;this.trigger("dispose"),this.off("dispose"),pi(W(),this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),pi(W(),"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),i.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),function Rf(s){Ro[s.id()]=null}(this),Ci.names.forEach(function(t){var o=e[Ci[t].getterName]();o&&o.off&&o.off()}),s.prototype.dispose.call(this,{restoreEl:this.options_.restoreEl})},n.createEl=function(){var t,e=this.tag,a=this.playerElIngest_=e.parentNode&&e.parentNode.hasAttribute&&e.parentNode.hasAttribute("data-vjs-player"),o="video-js"===this.tag.tagName.toLowerCase();a?t=this.el_=e.parentNode:o||(t=this.el_=s.prototype.createEl.call(this,"div"));var l=fr(e);if(o){for(t=this.el_=e,e=this.tag=W().createElement("video");t.children.length;)e.appendChild(t.firstChild);zr(t,"video-js")||hr(t,"video-js"),t.appendChild(e),a=this.playerElIngest_=t,Object.keys(t).forEach(function(I){try{e[I]=t[I]}catch(D){}})}if(e.setAttribute("tabindex","-1"),l.tabindex="-1",(Yn||cr&&uu)&&(e.setAttribute("role","application"),l.role="application"),e.removeAttribute("width"),e.removeAttribute("height"),"width"in l&&delete l.width,"height"in l&&delete l.height,Object.getOwnPropertyNames(l).forEach(function(I){o&&"class"===I||t.setAttribute(I,l[I]),o&&e.setAttribute(I,l[I])}),e.playerId=e.id,e.id+="_html5_api",e.className="vjs-tech",e.player=t.player=this,this.addClass("vjs-paused"),!0!==p().VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=Eu("vjs-styles-dimensions");var u=Dr(".vjs-styles-defaults"),c=Dr("head");c.insertBefore(this.styleEl_,u?u.nextSibling:c.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var _=e.getElementsByTagName("a"),y=0;y<_.length;y++){var A=_.item(y);hr(A,"vjs-hidden"),A.setAttribute("hidden","hidden")}return e.initNetworkState_=e.networkState,e.parentNode&&!a&&e.parentNode.insertBefore(t,e),mo(e,t),this.children_.unshift(e),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=t,t},n.crossOrigin=function(e){if(!e)return this.techGet_("crossOrigin");"anonymous"===e||"use-credentials"===e?this.techCall_("setCrossOrigin",e):gt.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+e+'"')},n.width=function(e){return this.dimension("width",e)},n.height=function(e){return this.dimension("height",e)},n.dimension=function(e,t){var a=e+"_";if(void 0===t)return this[a]||0;if(""===t||"auto"===t)return this[a]=void 0,void this.updateStyleEl_();var o=parseFloat(t);isNaN(o)?gt.error('Improper value "'+t+'" supplied for for '+e):(this[a]=o,this.updateStyleEl_())},n.fluid=function(e){var t=this;if(void 0===e)return!!this.fluid_;this.fluid_=!!e,mr(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),function(i,n){mr(i)?n():(i.eventedCallbacks||(i.eventedCallbacks=[]),i.eventedCallbacks.push(n))}(this,function(){t.on(["playerreset","resize"],t.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()},n.fill=function(e){if(void 0===e)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},n.aspectRatio=function(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()},n.updateStyleEl_=function(){if(!0!==p().VIDEOJS_NO_DYNAMIC_STYLE){var o,l,c,_=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),y=_[1]/_[0];o=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/y:this.videoWidth()||300,l=void 0!==this.height_?this.height_:o*y,c=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(c),Au(this.styleEl_,"\n      ."+c+" {\n        width: "+o+"px;\n        height: "+l+"px;\n      }\n\n      ."+c+".vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: "+100*y+"%;\n      }\n    ")}else{var e="number"==typeof this.width_?this.width_:this.options_.width,t="number"==typeof this.height_?this.height_:this.options_.height,a=this.tech_&&this.tech_.el();a&&(e>=0&&(a.width=e),t>=0&&(a.height=t))}},n.loadTech_=function(e,t){var a=this;this.tech_&&this.unloadTech_();var o=Kt(e),l=e.charAt(0).toLowerCase()+e.slice(1);"Html5"!==o&&this.tag&&(It.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=o,this.isReady_=!1;var u=this.autoplay();("string"==typeof this.autoplay()||!0===this.autoplay()&&this.options_.normalizeAutoplay)&&(u=!1);var c={source:t,autoplay:u,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+l+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};Ci.names.forEach(function(y){var A=Ci[y];c[A.getterName]=a[A.privateName]}),zt(c,this.options_[o]),zt(c,this.options_[l]),zt(c,this.options_[e.toLowerCase()]),this.tag&&(c.tag=this.tag),t&&t.src===this.cache_.src&&this.cache_.currentTime>0&&(c.startTime=this.cache_.currentTime);var _=It.getTech(e);if(!_)throw new Error("No Tech named '"+o+"' exists! '"+o+"' should be registered using videojs.registerTech()'");this.tech_=new _(c),this.tech_.ready(Ot(this,this.handleTechReady_),!0),function(i,n){i.forEach(function(r){var e=n.addRemoteTextTrack(r).track;!r.src&&r.cues&&r.cues.forEach(function(t){return e.addCue(t)})}),n.textTracks()}(this.textTracksJson_||[],this.tech_),Id.forEach(function(y){a.on(a.tech_,y,function(A){return a["handleTech"+Kt(y)+"_"](A)})}),Object.keys(ol).forEach(function(y){a.on(a.tech_,y,function(A){0===a.tech_.playbackRate()&&a.tech_.seeking()?a.queuedCallbacks_.push({callback:a["handleTech"+ol[y]+"_"].bind(a),event:A}):a["handleTech"+ol[y]+"_"](A)})}),this.on(this.tech_,"loadstart",function(y){return a.handleTechLoadStart_(y)}),this.on(this.tech_,"sourceset",function(y){return a.handleTechSourceset_(y)}),this.on(this.tech_,"waiting",function(y){return a.handleTechWaiting_(y)}),this.on(this.tech_,"ended",function(y){return a.handleTechEnded_(y)}),this.on(this.tech_,"seeking",function(y){return a.handleTechSeeking_(y)}),this.on(this.tech_,"play",function(y){return a.handleTechPlay_(y)}),this.on(this.tech_,"firstplay",function(y){return a.handleTechFirstPlay_(y)}),this.on(this.tech_,"pause",function(y){return a.handleTechPause_(y)}),this.on(this.tech_,"durationchange",function(y){return a.handleTechDurationChange_(y)}),this.on(this.tech_,"fullscreenchange",function(y,A){return a.handleTechFullscreenChange_(y,A)}),this.on(this.tech_,"fullscreenerror",function(y,A){return a.handleTechFullscreenError_(y,A)}),this.on(this.tech_,"enterpictureinpicture",function(y){return a.handleTechEnterPictureInPicture_(y)}),this.on(this.tech_,"leavepictureinpicture",function(y){return a.handleTechLeavePictureInPicture_(y)}),this.on(this.tech_,"error",function(y){return a.handleTechError_(y)}),this.on(this.tech_,"posterchange",function(y){return a.handleTechPosterChange_(y)}),this.on(this.tech_,"textdata",function(y){return a.handleTechTextData_(y)}),this.on(this.tech_,"ratechange",function(y){return a.handleTechRateChange_(y)}),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&("Html5"!==o||!this.tag)&&mo(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},n.unloadTech_=function(){var e=this;Ci.names.forEach(function(t){var a=Ci[t];e[a.privateName]=e[a.getterName]()}),this.textTracksJson_=function(i){var n=i.$$("track"),r=Array.prototype.map.call(n,function(t){return t.track});return Array.prototype.map.call(n,function(t){var a=wo(t.track);return t.src&&(a.src=t.src),a}).concat(Array.prototype.filter.call(i.textTracks(),function(t){return-1===r.indexOf(t)}).map(wo))}(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},n.tech=function(e){return void 0===e&&gt.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_},n.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)},n.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)},n.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},n.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(!0===this.autoplay()&&this.options_.normalizeAutoplay?"play":this.autoplay())},n.manualAutoplay_=function(e){var t=this;if(this.tech_&&"string"==typeof e){var o,a=function(){var u=t.muted();t.muted(!0);var c=function(){t.muted(u)};t.playTerminatedQueue_.push(c);var _=t.play();if(ia(_))return _.catch(function(y){throw c(),new Error("Rejection at manualAutoplay. Restoring muted value. "+(y||""))})};if("any"!==e||this.muted()?o="muted"!==e||this.muted()?this.play():a():ia(o=this.play())&&(o=o.catch(a)),ia(o))return o.then(function(){t.trigger({type:"autoplay-success",autoplay:e})}).catch(function(){t.trigger({type:"autoplay-failure",autoplay:e})})}},n.updateSourceCaches_=function(e){void 0===e&&(e="");var t=e,a="";"string"!=typeof t&&(t=e.src,a=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!a&&(a=function(i,n){if(!n)return"";if(i.cache_.source.src===n&&i.cache_.source.type)return i.cache_.source.type;var r=i.cache_.sources.filter(function(o){return o.src===n});if(r.length)return r[0].type;for(var e=i.$$("source"),t=0;t<e.length;t++){var a=e[t];if(a.type&&a.src&&a.src===n)return a.type}return Ha(n)}(this,t)),this.cache_.source=Rt({},e,{src:t,type:a});for(var o=this.cache_.sources.filter(function(A){return A.src&&A.src===t}),l=[],u=this.$$("source"),c=[],_=0;_<u.length;_++){var y=fr(u[_]);l.push(y),y.src&&y.src===t&&c.push(y.src)}c.length&&!o.length?this.cache_.sources=l:o.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t},n.handleTechSourceset_=function(e){var t=this;if(!this.changingSrc_){var a=function(c){return t.updateSourceCaches_(c)},o=this.currentSource().src,l=e.src;o&&!/^blob:/.test(o)&&/^blob:/.test(l)&&(!this.lastSource_||this.lastSource_.tech!==l&&this.lastSource_.player!==o)&&(a=function(){}),a(l),e.src||this.tech_.any(["sourceset","loadstart"],function(u){if("sourceset"!==u.type){var c=t.techGet("currentSrc");t.lastSource_.tech=c,t.updateSourceCaches_(c)}})}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})},n.hasStarted=function(e){if(void 0===e)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},n.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},n.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(e){return e.callback(e.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},n.handleTechWaiting_=function(){var e=this;this.addClass("vjs-waiting"),this.trigger("waiting");var t=this.currentTime();this.on("timeupdate",function o(){t!==e.currentTime()&&(e.removeClass("vjs-waiting"),e.off("timeupdate",o))})},n.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},n.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},n.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},n.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},n.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},n.handleTechFirstPlay_=function(){this.options_.starttime&&(gt.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},n.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},n.handleTechEnded_=function(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},n.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},n.handleTechClick_=function(e){!this.controls_||(void 0===this.options_||void 0===this.options_.userActions||void 0===this.options_.userActions.click||!1!==this.options_.userActions.click)&&(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.click?this.options_.userActions.click.call(this,e):this.paused()?Yi(this.play()):this.pause())},n.handleTechDoubleClick_=function(e){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(a){return a.contains(e.target)})||(void 0===this.options_||void 0===this.options_.userActions||void 0===this.options_.userActions.doubleClick||!1!==this.options_.userActions.doubleClick)&&(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,e):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},n.handleTechTap_=function(){this.userActive(!this.userActive())},n.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},n.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},n.handleTechTouchEnd_=function(e){e.cancelable&&e.preventDefault()},n.handleStageClick_=function(){this.reportUserActivity()},n.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},n.documentFullscreenChange_=function(e){var t=e.target.player;if(!t||t===this){var a=this.el(),o=W()[this.fsApi_.fullscreenElement]===a;!o&&a.matches?o=a.matches(":"+this.fsApi_.fullscreen):!o&&a.msMatchesSelector&&(o=a.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(o)}},n.handleTechFullscreenChange_=function(e,t){var a=this;t&&(t.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",function(){a.removeClass("vjs-ios-native-fs")})),this.isFullscreen(t.isFullscreen))},n.handleTechFullscreenError_=function(e,t){this.trigger("fullscreenerror",t)},n.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},n.handleTechEnterPictureInPicture_=function(e){this.isInPictureInPicture(!0)},n.handleTechLeavePictureInPicture_=function(e){this.isInPictureInPicture(!1)},n.handleTechError_=function(){var e=this.tech_.error();this.error(e)},n.handleTechTextData_=function(){var e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)},n.getCache=function(){return this.cache_},n.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}},n.techCall_=function(e,t){this.ready(function(){if(e in Mf)return function Lf(s,i,n,r){return i[n](s.reduce(No(n),r))}(this.middleware_,this.tech_,e,t);if(e in Gu)return zu(this.middleware_,this.tech_,e,t);try{this.tech_&&this.tech_[e](t)}catch(a){throw gt(a),a}},!0)},n.techGet_=function(e){if(this.tech_&&this.tech_.isReady_){if(e in Df)return function If(s,i,n){return s.reduceRight(No(n),i[n]())}(this.middleware_,this.tech_,e);if(e in Gu)return zu(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(t){throw void 0===this.tech_[e]?(gt("Video.js: "+e+" method not defined for "+this.techName_+" playback technology.",t),t):"TypeError"===t.name?(gt("Video.js: "+e+" unavailable on "+this.techName_+" playback technology element.",t),this.tech_.isReady_=!1,t):(gt(t),t)}}},n.play=function(){var e=this,t=this.options_.Promise||p().Promise;return t?new t(function(a){e.play_(a)}):this.play_()},n.play_=function(e){var t=this;void 0===e&&(e=Yi),this.playCallbacks_.push(e);var a=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!a)return this.waitToPlay_=function(l){t.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(!a&&(La||bi)&&this.load());var o=this.techGet_("play");null===o?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(o)},n.runPlayTerminatedQueue_=function(){var e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach(function(t){t()})},n.runPlayCallbacks_=function(e){var t=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],t.forEach(function(a){a(e)})},n.pause=function(){this.techCall_("pause")},n.paused=function(){return!1!==this.techGet_("paused")},n.played=function(){return this.techGet_("played")||Kr(0,0)},n.scrubbing=function(e){if(void 0===e)return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},n.currentTime=function(e){return void 0!==e?(e<0&&(e=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",e),void(this.cache_.initTime=0)):(this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),void this.one("canplay",this.boundApplyInitTime_))):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},n.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},n.duration=function(e){if(void 0===e)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(e=parseFloat(e))<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))},n.remainingTime=function(){return this.duration()-this.currentTime()},n.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},n.buffered=function(){var e=this.techGet_("buffered");return(!e||!e.length)&&(e=Kr(0,0)),e},n.bufferedPercent=function(){return Ou(this.buffered(),this.duration())},n.bufferedEnd=function(){var e=this.buffered(),t=this.duration(),a=e.end(e.length-1);return a>t&&(a=t),a},n.volume=function(e){var t;return void 0!==e?(t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall_("setVolume",t),void(t>0&&this.lastVolume_(t))):(t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t)},n.muted=function(e){if(void 0===e)return this.techGet_("muted")||!1;this.techCall_("setMuted",e)},n.defaultMuted=function(e){return void 0!==e?this.techCall_("setDefaultMuted",e):this.techGet_("defaultMuted")||!1},n.lastVolume_=function(e){if(void 0===e||0===e)return this.cache_.lastVolume;this.cache_.lastVolume=e},n.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},n.isFullscreen=function(e){if(void 0!==e){var t=this.isFullscreen_;return this.isFullscreen_=Boolean(e),this.isFullscreen_!==t&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()}return this.isFullscreen_},n.requestFullscreen=function(e){var t=this.options_.Promise||p().Promise;if(t){var a=this;return new t(function(o,l){function u(){a.off("fullscreenerror",_),a.off("fullscreenchange",c)}function c(){u(),o()}function _(A,I){u(),l(I)}a.one("fullscreenchange",c),a.one("fullscreenerror",_);var y=a.requestFullscreenHelper_(e);y&&(y.then(u,u),y.then(o,l))})}return this.requestFullscreenHelper_()},n.requestFullscreenHelper_=function(e){var a,t=this;if(this.fsApi_.prefixed||(a=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==e&&(a=e)),this.fsApi_.requestFullscreen){var o=this.el_[this.fsApi_.requestFullscreen](a);return o&&o.then(function(){return t.isFullscreen(!0)},function(){return t.isFullscreen(!1)}),o}this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()},n.exitFullscreen=function(){var e=this.options_.Promise||p().Promise;if(e){var t=this;return new e(function(a,o){function l(){t.off("fullscreenerror",c),t.off("fullscreenchange",u)}function u(){l(),a()}function c(y,A){l(),o(A)}t.one("fullscreenchange",u),t.one("fullscreenerror",c);var _=t.exitFullscreenHelper_();_&&(_.then(l,l),_.then(a,o))})}return this.exitFullscreenHelper_()},n.exitFullscreenHelper_=function(){var e=this;if(this.fsApi_.requestFullscreen){var t=W()[this.fsApi_.exitFullscreen]();return t&&Yi(t.then(function(){return e.isFullscreen(!1)})),t}this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()},n.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=W().documentElement.style.overflow,Di(W(),"keydown",this.boundFullWindowOnEscKey_),W().documentElement.style.overflow="hidden",hr(W().body,"vjs-full-window"),this.trigger("enterFullWindow")},n.fullWindowOnEscKey=function(e){ee().isEventKey(e,"Esc")&&!0===this.isFullscreen()&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())},n.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,pi(W(),"keydown",this.boundFullWindowOnEscKey_),W().documentElement.style.overflow=this.docOrigOverflow,Jn(W().body,"vjs-full-window"),this.trigger("exitFullWindow")},n.disablePictureInPicture=function(e){if(void 0===e)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")},n.isInPictureInPicture=function(e){return void 0!==e?(this.isInPictureInPicture_=!!e,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_},n.requestPictureInPicture=function(){if("pictureInPictureEnabled"in W()&&!1===this.disablePictureInPicture())return this.techGet_("requestPictureInPicture")},n.exitPictureInPicture=function(){if("pictureInPictureEnabled"in W())return W().exitPictureInPicture()},n.handleKeyDown=function(e){var l,u,t=this.options_.userActions;t&&t.hotkeys&&(u=(l=this.el_.ownerDocument.activeElement).tagName.toLowerCase(),l.isContentEditable||("input"===u?-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(l.type):-1!==["textarea"].indexOf(u))||("function"==typeof t.hotkeys?t.hotkeys.call(this,e):this.handleHotkeys(e)))},n.handleHotkeys=function(e){var t=this.options_.userActions?this.options_.userActions.hotkeys:{},a=t.fullscreenKey,l=t.muteKey,u=void 0===l?function(D){return ee().isEventKey(D,"m")}:l,c=t.playPauseKey,_=void 0===c?function(D){return ee().isEventKey(D,"k")||ee().isEventKey(D,"Space")}:c;if((void 0===a?function(D){return ee().isEventKey(D,"f")}:a).call(this,e)){e.preventDefault(),e.stopPropagation();var y=Ee.getComponent("FullscreenToggle");!1!==W()[this.fsApi_.fullscreenEnabled]&&y.prototype.handleClick.call(this,e)}else u.call(this,e)?(e.preventDefault(),e.stopPropagation(),Ee.getComponent("MuteToggle").prototype.handleClick.call(this,e)):_.call(this,e)&&(e.preventDefault(),e.stopPropagation(),Ee.getComponent("PlayToggle").prototype.handleClick.call(this,e))},n.canPlayType=function(e){for(var t,a=0,o=this.options_.techOrder;a<o.length;a++){var l=o[a],u=It.getTech(l);if(u||(u=Ee.getComponent(l)),u){if(u.isSupported()&&(t=u.canPlayType(e)))return t}else gt.error('The "'+l+'" tech is undefined. Skipped browser support check for that tech.')}return""},n.selectSource=function(e){var y,t=this,a=this.options_.techOrder.map(function(_){return[_,It.getTech(_)]}).filter(function(_){var y=_[0],A=_[1];return A?A.isSupported():(gt.error('The "'+y+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),o=function(y,A,I){var D;return y.some(function(M){return A.some(function(Q){if(D=I(M,Q))return!0})}),D},c=function(y,A){var I=y[0];if(y[1].canPlaySource(A,t.options_[I.toLowerCase()]))return{source:A,tech:I}};return(this.options_.sourceOrder?o(e,a,(y=c,function(A,I){return y(I,A)})):o(a,e,c))||!1},n.handleSrc_=function(e,t){var a=this;if(void 0===e)return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();var o=Uf(e);if(o.length){if(this.changingSrc_=!0,t||(this.cache_.sources=o),this.updateSourceCaches_(o[0]),wf(this,o[0],function(c,_){if(a.middleware_=_,t||(a.cache_.sources=o),a.updateSourceCaches_(c),a.src_(c))return o.length>1?a.handleSrc_(o.slice(1)):(a.changingSrc_=!1,a.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),void a.triggerReady());!function kf(s,i){s.forEach(function(n){return n.setTech&&n.setTech(i)})}(_,a.tech_)}),this.options_.retryOnError&&o.length>1){var l=function(){a.error(null),a.handleSrc_(o.slice(1),!0)},u=function(){a.off("error",l)};this.one("error",l),this.one("playing",u),this.resetRetryOnError_=function(){a.off("error",l),a.off("playing",u)}}}else this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0)},n.src=function(e){return this.handleSrc_(e,!1)},n.src_=function(e){var t=this,a=this.selectSource([e]);return!a||(function(i,n){return Kt(i)===Kt(n)}(a.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(a.tech,a.source),this.tech_.ready(function(){t.changingSrc_=!1}),!1))},n.load=function(){this.techCall_("load")},n.reset=function(){var e=this,t=this.options_.Promise||p().Promise;this.paused()||!t?this.doReset_():Yi(this.play().then(function(){return e.doReset_()}))},n.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),mr(this)&&this.trigger("playerreset")},n.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},n.resetProgressBar_=function(){this.currentTime(0);var e=this.controlBar||{},t=e.durationDisplay,a=e.remainingTimeDisplay;t&&t.updateContent(),a&&a.updateContent()},n.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},n.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},n.currentSources=function(){var e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t},n.currentSource=function(){return this.cache_.source||{}},n.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},n.currentType=function(){return this.currentSource()&&this.currentSource().type||""},n.preload=function(e){return void 0!==e?(this.techCall_("setPreload",e),void(this.options_.preload=e)):this.techGet_("preload")},n.autoplay=function(e){if(void 0===e)return this.options_.autoplay||!1;var t;"string"==typeof e&&/(any|play|muted)/.test(e)||!0===e&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_("string"==typeof e?e:"play"),t=!1):this.options_.autoplay=!!e,t=void 0===t?this.options_.autoplay:t,this.tech_&&this.techCall_("setAutoplay",t)},n.playsinline=function(e){return void 0!==e?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")},n.loop=function(e){return void 0!==e?(this.techCall_("setLoop",e),void(this.options_.loop=e)):this.techGet_("loop")},n.poster=function(e){if(void 0===e)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))},n.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},n.controls=function(e){if(void 0===e)return!!this.controls_;this.controls_!==(e=!!e)&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},n.usingNativeControls=function(e){if(void 0===e)return!!this.usingNativeControls_;this.usingNativeControls_!==(e=!!e)&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},n.error=function(e){var t=this;if(void 0===e)return this.error_||null;if(Lr("beforeerror").forEach(function(o){var l=o(t,e);ur(l)&&!Array.isArray(l)||"string"==typeof l||"number"==typeof l||null===l?e=l:t.log.error("please return a value that MediaError expects in beforeerror hooks")}),this.options_.suppressNotSupportedError&&e&&4===e.code){var a=function(){this.error(e)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],a),void this.one("loadstart",function(){this.off(["click","touchstart"],a)})}if(null===e)return this.error_=e,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new xi(e),this.addClass("vjs-error"),gt.error("(CODE:"+this.error_.code+" "+xi.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),Lr("error").forEach(function(o){return o(t,t.error_)})},n.reportUserActivity=function(e){this.userActivity_=!0},n.userActive=function(e){if(void 0===e)return this.userActive_;if((e=!!e)!==this.userActive_){if(this.userActive_=e,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(t){t.stopPropagation(),t.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},n.listenForUserActivity_=function(){var e,t,a,o=Ot(this,this.reportUserActivity),c=function(I){o(),this.clearInterval(e)};this.on("mousedown",function(){o(),this.clearInterval(e),e=this.setInterval(o,250)}),this.on("mousemove",function(I){(I.screenX!==t||I.screenY!==a)&&(t=I.screenX,a=I.screenY,o())}),this.on("mouseup",c),this.on("mouseleave",c);var y,_=this.getChild("controlBar");_&&!bi&&!dr&&(_.on("mouseenter",function(A){0!==this.player().options_.inactivityTimeout&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),_.on("mouseleave",function(A){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",o),this.on("keyup",o),this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(y);var A=this.options_.inactivityTimeout;A<=0||(y=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},A))}},250)},n.playbackRate=function(e){if(void 0===e)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",e)},n.defaultPlaybackRate=function(e){return void 0!==e?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},n.isAudio=function(e){if(void 0===e)return!!this.isAudio_;this.isAudio_=!!e},n.enableAudioOnlyUI_=function(){var e=this;this.addClass("vjs-audio-only-mode");var t=this.children(),a=this.getChild("ControlBar"),o=a&&a.currentHeight();t.forEach(function(l){l!==a&&l.el_&&!l.hasClass("vjs-hidden")&&(l.hide(),e.audioOnlyCache_.hiddenChildren.push(l))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(o),this.trigger("audioonlymodechange")},n.disableAudioOnlyUI_=function(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach(function(e){return e.show()}),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")},n.audioOnlyMode=function(e){var t=this;if("boolean"!=typeof e||e===this.audioOnlyMode_)return this.audioOnlyMode_;this.audioOnlyMode_=e;var a=this.options_.Promise||p().Promise;if(a){if(e){var o=[];return this.isInPictureInPicture()&&o.push(this.exitPictureInPicture()),this.isFullscreen()&&o.push(this.exitFullscreen()),this.audioPosterMode()&&o.push(this.audioPosterMode(!1)),a.all(o).then(function(){return t.enableAudioOnlyUI_()})}return a.resolve().then(function(){return t.disableAudioOnlyUI_()})}e?(this.isInPictureInPicture()&&this.exitPictureInPicture(),this.isFullscreen()&&this.exitFullscreen(),this.enableAudioOnlyUI_()):this.disableAudioOnlyUI_()},n.enablePosterModeUI_=function(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},n.disablePosterModeUI_=function(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},n.audioPosterMode=function(e){var t=this;if("boolean"!=typeof e||e===this.audioPosterMode_)return this.audioPosterMode_;this.audioPosterMode_=e;var a=this.options_.Promise||p().Promise;return a?e?this.audioOnlyMode()?this.audioOnlyMode(!1).then(function(){t.enablePosterModeUI_()}):a.resolve().then(function(){t.enablePosterModeUI_()}):a.resolve().then(function(){t.disablePosterModeUI_()}):e?(this.audioOnlyMode()&&this.audioOnlyMode(!1),void this.enablePosterModeUI_()):void this.disablePosterModeUI_()},n.addTextTrack=function(e,t,a){if(this.tech_)return this.tech_.addTextTrack(e,t,a)},n.addRemoteTextTrack=function(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)},n.removeRemoteTextTrack=function(e){void 0===e&&(e={});var a=e.track;if(a||(a=e),this.tech_)return this.tech_.removeRemoteTextTrack(a)},n.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},n.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},n.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},n.language=function(e){if(void 0===e)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),mr(this)&&this.trigger("languagechange"))},n.languages=function(){return Rt(i.prototype.options_.languages,this.languages_)},n.toJSON=function(){var e=Rt(this.options_),t=e.tracks;e.tracks=[];for(var a=0;a<t.length;a++){var o=t[a];(o=Rt(o)).player=void 0,e.tracks[a]=o}return e},n.createModal=function(e,t){var a=this;(t=t||{}).content=e||"";var o=new Tn(this,t);return this.addChild(o),o.on("dispose",function(){a.removeChild(o)}),o.open(),o},n.updateCurrentBreakpoint_=function(){if(this.responsive())for(var e=this.currentBreakpoint(),t=this.currentWidth(),a=0;a<ll.length;a++){var o=ll[a];if(t<=this.breakpoints_[o]){if(e===o)return;e&&this.removeClass(Xa[e]),this.addClass(Xa[o]),this.breakpoint_=o;break}}},n.removeCurrentBreakpoint_=function(){var e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)},n.breakpoints=function(e){return void 0===e||(this.breakpoint_="",this.breakpoints_=zt({},gp,e),this.updateCurrentBreakpoint_()),zt(this.breakpoints_)},n.responsive=function(e){return void 0===e?this.responsive_:(e=Boolean(e))!==this.responsive_?(this.responsive_=e,e?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e):void 0},n.currentBreakpoint=function(){return this.breakpoint_},n.currentBreakpointClass=function(){return Xa[this.breakpoint_]||""},n.loadMedia=function(e,t){var a=this;if(e&&"object"==typeof e){this.reset(),this.cache_.media=Rt(e);var o=this.cache_.media,u=o.poster,c=o.src,_=o.textTracks;!o.artwork&&u&&(this.cache_.media.artwork=[{src:u,type:Ha(u)}]),c&&this.src(c),u&&this.poster(u),Array.isArray(_)&&_.forEach(function(y){return a.addRemoteTextTrack(y,!1)}),this.ready(t)}},n.getMedia=function(){if(!this.cache_.media){var e=this.poster(),o={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),function(l){return{kind:l.kind,label:l.label,language:l.language,src:l.src}})};return e&&(o.poster=e,o.artwork=[{src:o.poster,type:Ha(o.poster)}]),o}return Rt(this.cache_.media)},i.getTagSettings=function(e){var t={sources:[],tracks:[]},a=fr(e),o=a["data-setup"];if(zr(e,"vjs-fill")&&(a.fill=!0),zr(e,"vjs-fluid")&&(a.fluid=!0),null!==o){var l=Z()(o||"{}"),u=l[0],c=l[1];u&&gt.error(u),zt(a,c)}if(zt(t,a),e.hasChildNodes())for(var _=e.childNodes,y=0,A=_.length;y<A;y++){var I=_[y],D=I.nodeName.toLowerCase();"source"===D?t.sources.push(fr(I)):"track"===D&&t.tracks.push(fr(I))}return t},n.flexNotSupported_=function(){var e=W().createElement("i");return!("flexBasis"in e.style||"webkitFlexBasis"in e.style||"mozFlexBasis"in e.style||"msFlexBasis"in e.style||"msFlexOrder"in e.style)},n.debug=function(e){if(void 0===e)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)},n.playbackRates=function(e){if(void 0===e)return this.cache_.playbackRates;!Array.isArray(e)||!e.every(function(t){return"number"==typeof t})||(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))},i}(Ee);Ci.names.forEach(function(s){var i=Ci[s];Jt.prototype[i.getterName]=function(){return this.tech_?this.tech_[i.getterName]():(this[i.privateName]=this[i.privateName]||new i.ListClass,this[i.privateName])}}),Jt.prototype.crossorigin=Jt.prototype.crossOrigin,Jt.players={};var sa=p().navigator;Jt.prototype.options_={techOrder:It.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:sa&&(sa.languages&&sa.languages[0]||sa.userLanguage||sa.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1},["ended","seeking","seekable","networkState","readyState"].forEach(function(s){Jt.prototype[s]=function(){return this.techGet_(s)}}),Id.forEach(function(s){Jt.prototype["handleTech"+Kt(s)+"_"]=function(){return this.trigger(s)}}),Ee.registerComponent("Player",Jt);var Qa="plugin",Pn="activePlugins_",wn={},Ya=function(i){return wn.hasOwnProperty(i)},Ja=function(i){return Ya(i)?wn[i]:void 0},Ld=function(i,n){i[Pn]=i[Pn]||{},i[Pn][n]=!0},Za=function(i,n,r){var e=(r?"before":"")+"pluginsetup";i.trigger(e,n),i.trigger(e+":"+n.name,n)},Dd=function(i,n){return n.prototype.name=i,function(){Za(this,{name:i,plugin:n,instance:null},!0);for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];var a=We(n,[this].concat(e));return this[i]=function(){return a},Za(this,a.getEventHash()),a}},Ji=function(){function s(n){if(this.constructor===s)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=n,this.log||(this.log=this.player.log.createLogger(this.name)),Eo(this),delete this.trigger,Du(this,this.constructor.defaultState),Ld(n,this.name),this.dispose=this.dispose.bind(this),n.on("dispose",this.dispose)}var i=s.prototype;return i.version=function(){return this.constructor.VERSION},i.getEventHash=function(r){return void 0===r&&(r={}),r.name=this.name,r.plugin=this.constructor,r.instance=this,r},i.trigger=function(r,e){return void 0===e&&(e={}),yn(this.eventBusEl_,r,this.getEventHash(e))},i.handleStateChanged=function(r){},i.dispose=function(){var r=this.name,e=this.player;this.trigger("dispose"),this.off(),e.off("dispose",this.dispose),e[Pn][r]=!1,this.player=this.state=null,e[r]=Dd(r,wn[r])},s.isBasic=function(r){var e="string"==typeof r?Ja(r):r;return"function"==typeof e&&!s.prototype.isPrototypeOf(e.prototype)},s.registerPlugin=function(r,e){if("string"!=typeof r)throw new Error('Illegal plugin name, "'+r+'", must be a string, was '+typeof r+".");if(Ya(r))gt.warn('A plugin named "'+r+'" already exists. You may want to avoid re-registering plugins!');else if(Jt.prototype.hasOwnProperty(r))throw new Error('Illegal plugin name, "'+r+'", cannot share a name with an existing player method!');if("function"!=typeof e)throw new Error('Illegal plugin for "'+r+'", must be a function, was '+typeof e+".");return wn[r]=e,r!==Qa&&(Jt.prototype[r]=s.isBasic(e)?function(i,n){var r=function(){Za(this,{name:i,plugin:n,instance:null},!0);var t=n.apply(this,arguments);return Ld(this,i),Za(this,{name:i,plugin:n,instance:t}),t};return Object.keys(n).forEach(function(e){r[e]=n[e]}),r}(r,e):Dd(r,e)),e},s.deregisterPlugin=function(r){if(r===Qa)throw new Error("Cannot de-register base plugin.");Ya(r)&&(delete wn[r],delete Jt.prototype[r])},s.getPlugins=function(r){var e;return void 0===r&&(r=Object.keys(wn)),r.forEach(function(t){var a=Ja(t);a&&((e=e||{})[t]=a)}),e},s.getPluginVersion=function(r){var e=Ja(r);return e&&e.VERSION||""},s}();Ji.getPlugin=Ja,Ji.BASE_PLUGIN_NAME=Qa,Ji.registerPlugin(Qa,Ji),Jt.prototype.usingPlugin=function(s){return!!this[Pn]&&!0===this[Pn][s]},Jt.prototype.hasPlugin=function(s){return!!Ya(s)};var Md=function(i){return 0===i.indexOf("#")?i.slice(1):i};function q(s,i,n){var r=q.getPlayer(s);if(r)return i&&gt.warn('Player "'+s+'" is already initialised. Options will not be applied.'),n&&r.ready(n),r;var e="string"==typeof s?Dr("#"+Md(s)):s;if(!gn(e))throw new TypeError("The element or ID supplied is not valid. (videojs)");(!e.ownerDocument.defaultView||!e.ownerDocument.body.contains(e))&&gt.warn("The element supplied is not included in the DOM"),!0===(i=i||{}).restoreEl&&(i.restoreEl=(e.parentNode&&e.parentNode.hasAttribute("data-vjs-player")?e.parentNode:e).cloneNode(!0)),Lr("beforesetup").forEach(function(a){var o=a(e,Rt(i));ur(o)&&!Array.isArray(o)?i=Rt(i,o):gt.error("please return an object in beforesetup hooks")});var t=Ee.getComponent("Player");return r=new t(e,i,n),Lr("setup").forEach(function(a){return a(r)}),r}if(q.hooks_=lr,q.hooks=Lr,q.hook=function(i,n){Lr(i,n)},q.hookOnce=function(i,n){Lr(i,[].concat(n).map(function(r){return function t(){return Zl(i,t),r.apply(void 0,arguments)}}))},q.removeHook=Zl,!0!==p().VIDEOJS_NO_DYNAMIC_STYLE&&pn()){var es=Dr(".vjs-styles-defaults");if(!es){es=Eu("vjs-styles-defaults");var ul=Dr("head");ul&&ul.insertBefore(es,ul.firstChild),Au(es,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: 56.25%\n      }\n    ")}}To(1,q),q.VERSION="7.20.3",q.options=Jt.prototype.options_,q.getPlayers=function(){return Jt.players},q.getPlayer=function(s){var n,i=Jt.players;if("string"==typeof s){var r=Md(s),e=i[r];if(e)return e;n=Dr("#"+r)}else n=s;if(gn(n)){var a=n.player,o=n.playerId;if(a||i[o])return a||i[o]}},q.getAllPlayers=function(){return Object.keys(Jt.players).map(function(s){return Jt.players[s]}).filter(Boolean)},q.players=Jt.players,q.getComponent=Ee.getComponent,q.registerComponent=function(s,i){It.isTech(i)&&gt.warn("The "+s+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),Ee.registerComponent.call(Ee,s,i)},q.getTech=It.getTech,q.registerTech=It.registerTech,q.use=function Pf(s,i){Xr[s]=Xr[s]||[],Xr[s].push(i)},Object.defineProperty(q,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(q.middleware,"TERMINATOR",{value:Va,writeable:!1,enumerable:!0}),q.browser=Qh,q.TOUCH_ENABLED=fn,q.extend=function(i,n){void 0===n&&(n={});var r=function(){i.apply(this,arguments)},e={};for(var t in"object"==typeof n?(n.constructor!==Object.prototype.constructor&&(r=n.constructor),e=n):"function"==typeof n&&(r=n),function Ae(s,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(i&&i.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),i&&Y(s,i)}(r,i),i&&(r.super_=i),e)e.hasOwnProperty(t)&&(r.prototype[t]=e[t]);return r},q.mergeOptions=Rt,q.bind=Ot,q.registerPlugin=Ji.registerPlugin,q.deregisterPlugin=Ji.deregisterPlugin,q.plugin=function(s,i){return gt.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Ji.registerPlugin(s,i)},q.getPlugins=Ji.getPlugins,q.getPlugin=Ji.getPlugin,q.getPluginVersion=Ji.getPluginVersion,q.addLanguage=function(s,i){var n;return s=(""+s).toLowerCase(),(q.options.languages=Rt(q.options.languages,((n={})[s]=i,n)))[s]},q.log=gt,q.createLogger=iu,q.createTimeRange=q.createTimeRanges=Kr,q.formatTime=Cn,q.setFormatTime=function zf(s){Uo=s},q.resetFormatTime=function Gf(){Uo=Ju},q.parseUrl=Mo,q.isCrossOrigin=ja,q.EventTarget=oi,q.on=Di,q.one=Na,q.off=pi,q.trigger=yn,q.xhr=it(),q.TextTrack=ra,q.AudioTrack=Hu,q.VideoTrack=$u,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(s){q[s]=function(){return gt.warn("videojs."+s+"() is deprecated; use videojs.dom."+s+"() instead"),xu[s].apply(null,arguments)}}),q.computedStyle=Xn,q.dom=xu,q.url=xf,q.defineLazyProperty=sl,q.addLanguage("en",{"Non-Fullscreen":"Exit Fullscreen"});var Gi=Ne,ts=function(i,n,r){return i&&r&&r.responseURL&&n!==r.responseURL?r.responseURL:n},Ki=function(i){return q.log.debug?q.log.debug.bind(q,"VHS:",i+" >"):function(){}},Mr=1/30,Zi=.1,Od=function(i,n){var e,r=[];if(i&&i.length)for(e=0;e<i.length;e++)n(i.start(e),i.end(e))&&r.push([i.start(e),i.end(e)]);return q.createTimeRanges(r)},kn=function(i,n){return Od(i,function(r,e){return r-Zi<=n&&e+Zi>=n})},is=function(i,n){return Od(i,function(r){return r-Mr>=n})},Rd=function(i){var n=[];if(!i||!i.length)return"";for(var r=0;r<i.length;r++)n.push(i.start(r)+" => "+i.end(r));return n.join(", ")},Jr=function(i){for(var n=[],r=0;r<i.length;r++)n.push({start:i.start(r),end:i.end(r)});return n},Nd=function(i){if(i&&i.length&&i.end)return i.end(i.length-1)},dl=function(i,n){var r=0;if(!i||!i.length)return r;for(var e=0;e<i.length;e++){var t=i.start(e),a=i.end(e);if(!(n>a)){if(n>t&&n<=a){r+=a-n;continue}r+=a-t}}return r},Fd=q.createTimeRange,cl=function(i,n){if(!n.preload)return n.duration;var r=0;return(n.parts||[]).forEach(function(e){r+=e.duration}),(n.preloadHints||[]).forEach(function(e){"PART"===e.type&&(r+=i.partTargetDuration)}),r},hl=function(i){return(i.segments||[]).reduce(function(n,r,e){return r.parts?r.parts.forEach(function(t,a){n.push({duration:t.duration,segmentIndex:e,partIndex:a,part:t,segment:r})}):n.push({duration:r.duration,segmentIndex:e,partIndex:null,segment:r,part:null}),n},[])},Bd=function(i){var n=i.segments&&i.segments.length&&i.segments[i.segments.length-1];return n&&n.parts||[]},Ud=function(i){var n=i.preloadSegment;if(n){var r=n.parts;return(n.preloadHints||[]).reduce(function(a,o){return a+("PART"===o.type?1:0)},0)+(r&&r.length?r.length:0)}},jd=function(i,n){if(n.endList)return 0;if(i&&i.suggestedPresentationDelay)return i.suggestedPresentationDelay;var r=Bd(n).length>0;return r&&n.serverControl&&n.serverControl.partHoldBack?n.serverControl.partHoldBack:r&&n.partTargetDuration?3*n.partTargetDuration:n.serverControl&&n.serverControl.holdBack?n.serverControl.holdBack:n.targetDuration?3*n.targetDuration:0},Vd=function(i,n,r){if(void 0===n&&(n=i.mediaSequence+i.segments.length),n<i.mediaSequence)return 0;var e=function(i,n){var r=0,e=n-i.mediaSequence,t=i.segments[e];if(t){if(void 0!==t.start)return{result:t.start,precise:!0};if(void 0!==t.end)return{result:t.end-t.duration,precise:!0}}for(;e--;){if(void 0!==(t=i.segments[e]).end)return{result:r+t.end,precise:!0};if(r+=cl(i,t),void 0!==t.start)return{result:r+t.start,precise:!0}}return{result:r,precise:!1}}(i,n);if(e.precise)return e.result;var t=function(i,n){for(var e,r=0,t=n-i.mediaSequence;t<i.segments.length;t++){if(void 0!==(e=i.segments[t]).start)return{result:e.start-r,precise:!0};if(r+=cl(i,e),void 0!==e.end)return{result:e.end-r,precise:!0}}return{result:-1,precise:!1}}(i,n);return t.precise?t.result:e.result+r},Hd=function(i,n,r){if(!i)return 0;if("number"!=typeof r&&(r=0),void 0===n){if(i.totalDuration)return i.totalDuration;if(!i.endList)return p()[1/0]}return Vd(i,n,r)},oa=function(i){var n=i.defaultDuration,r=i.durationList,e=i.startIndex,t=i.endIndex,a=0;if(e>t){var o=[t,e];e=o[0],t=o[1]}if(e<0){for(var l=e;l<Math.min(0,t);l++)a+=n;e=0}for(var u=e;u<t;u++)a+=r[u].duration;return a},$d=function(i,n,r,e){if(!i||!i.segments)return null;if(i.endList)return Hd(i);if(null===n)return null;var t=Vd(i,i.mediaSequence+i.segments.length,n=n||0);return r&&(t-=e="number"==typeof e?e:jd(null,i)),Math.max(0,t)},Wd=function(i){return i.excludeUntil&&i.excludeUntil>Date.now()},fl=function(i){return i.excludeUntil&&i.excludeUntil===1/0},rs=function(i){var n=Wd(i);return!i.disabled&&!n},qd=function(i,n){return n.attributes&&n.attributes[i]},pl=function(i,n){if(1===i.playlists.length)return!0;var r=n.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===i.playlists.filter(function(e){return!!rs(e)&&(e.attributes.BANDWIDTH||0)<r}).length},gl=function(i,n){return!(!i&&!n||!i&&n||i&&!n||!(i===n||i.id&&n.id&&i.id===n.id||i.resolvedUri&&n.resolvedUri&&i.resolvedUri===n.resolvedUri||i.uri&&n.uri&&i.uri===n.uri))},zd=function(i,n){var r=i&&i.mediaGroups&&i.mediaGroups.AUDIO||{},e=!1;for(var t in r){for(var a in r[t])if(e=n(r[t][a]))break;if(e)break}return!!e},la=function(i){if(!i||!i.playlists||!i.playlists.length)return zd(i,function(a){return a.playlists&&a.playlists.length||a.uri});for(var r=function(o){var l=i.playlists[o],u=l.attributes&&l.attributes.CODECS;return u&&u.split(",").every(function(_){return Wt(_)})||zd(i,function(_){return gl(l,_)})?"continue":{v:!1}},e=0;e<i.playlists.length;e++){var t=r(e);if("continue"!==t&&"object"==typeof t)return t.v}return!0},ki={liveEdgeDelay:jd,duration:Hd,seekable:function(i,n,r){var t=n||0,a=$d(i,n,!0,r);return null===a?Fd():Fd(t,a)},getMediaInfoForTime:function(i){for(var n=i.playlist,r=i.currentTime,e=i.startingSegmentIndex,t=i.startingPartIndex,a=i.startTime,o=i.experimentalExactManifestTimings,l=r-a,u=hl(n),c=0,_=0;_<u.length;_++){var y=u[_];if(e===y.segmentIndex&&("number"!=typeof t||"number"!=typeof y.partIndex||t===y.partIndex)){c=_;break}}if(l<0){if(c>0)for(var A=c-1;A>=0;A--){var I=u[A];if(l+=I.duration,o){if(l<0)continue}else if(l+Mr<=0)continue;return{partIndex:I.partIndex,segmentIndex:I.segmentIndex,startTime:a-oa({defaultDuration:n.targetDuration,durationList:u,startIndex:c,endIndex:A})}}return{partIndex:u[0]&&u[0].partIndex||null,segmentIndex:u[0]&&u[0].segmentIndex||0,startTime:r}}if(c<0){for(var D=c;D<0;D++)if((l-=n.targetDuration)<0)return{partIndex:u[0]&&u[0].partIndex||null,segmentIndex:u[0]&&u[0].segmentIndex||0,startTime:r};c=0}for(var M=c;M<u.length;M++){var Q=u[M];if(l-=Q.duration,o){if(l>0)continue}else if(l-Mr>=0)continue;return{partIndex:Q.partIndex,segmentIndex:Q.segmentIndex,startTime:a+oa({defaultDuration:n.targetDuration,durationList:u,startIndex:c,endIndex:M})}}return{segmentIndex:u[u.length-1].segmentIndex,partIndex:u[u.length-1].partIndex,startTime:r}},isEnabled:rs,isDisabled:function(i){return i.disabled},isBlacklisted:Wd,isIncompatible:fl,playlistEnd:$d,isAes:function(i){for(var n=0;n<i.segments.length;n++)if(i.segments[n].key)return!0;return!1},hasAttribute:qd,estimateSegmentRequestTime:function(i,n,r,e){return void 0===e&&(e=0),qd("BANDWIDTH",r)?(i*r.attributes.BANDWIDTH-8*e)/n:NaN},isLowestEnabledRendition:pl,isAudioOnly:la,playlistMatch:gl,segmentDurationWithParts:cl},Gd=q.log,ml=function(i,n){return i+"-"+n},ua=function(i,n){!i.mediaGroups||["AUDIO","SUBTITLES"].forEach(function(r){if(i.mediaGroups[r])for(var e in i.mediaGroups[r])for(var t in i.mediaGroups[r][e])n(i.mediaGroups[r][e][t],r,e,t)})},Kd=function(i){var n=i.playlist,r=i.uri;n.id=i.id,n.playlistErrors_=0,r&&(n.uri=r),n.attributes=n.attributes||{}},Xd=function(i,n){i.uri=n;for(var r=0;r<i.playlists.length;r++)i.playlists[r].uri||(i.playlists[r].uri="placeholder-uri-"+r);var t=la(i);ua(i,function(a,o,l,u){var c="placeholder-uri-"+o+"-"+l+"-"+u;if(!a.playlists||!a.playlists.length){if(t&&"AUDIO"===o&&!a.uri)for(var _=0;_<i.playlists.length;_++){var y=i.playlists[_];if(y.attributes&&y.attributes.AUDIO&&y.attributes.AUDIO===l)return}a.playlists=[he({},a)]}a.playlists.forEach(function(A,I){var D=ml(I,c);A.uri?A.resolvedUri=A.resolvedUri||Gi(i.uri,A.uri):(A.uri=0===I?c:D,A.resolvedUri=A.uri),A.id=A.id||D,A.attributes=A.attributes||{},i.playlists[A.id]=A,i.playlists[A.uri]=A})}),function(i){for(var n=i.playlists.length;n--;){var r=i.playlists[n];Kd({playlist:r,id:ml(n,r.uri)}),r.resolvedUri=Gi(i.uri,r.uri),i.playlists[r.id]=r,i.playlists[r.uri]=r,r.attributes.BANDWIDTH||Gd.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}}(i),function(i){ua(i,function(n){n.uri&&(n.resolvedUri=Gi(i.uri,n.uri))})}(i)},ns=q.mergeOptions,Rp=function(i,n){if(!i)return n;var r=ns(i,n);if(i.preloadHints&&!n.preloadHints&&delete r.preloadHints,i.parts&&!n.parts)delete r.parts;else if(i.parts&&n.parts)for(var e=0;e<n.parts.length;e++)i.parts&&i.parts[e]&&(r.parts[e]=ns(i.parts[e],n.parts[e]));return!i.skipped&&n.skipped&&(r.skipped=!1),i.preload&&!n.preload&&(r.preload=!1),r},Qd=function(i,n){!i.resolvedUri&&i.uri&&(i.resolvedUri=Gi(n,i.uri)),i.key&&!i.key.resolvedUri&&(i.key.resolvedUri=Gi(n,i.key.uri)),i.map&&!i.map.resolvedUri&&(i.map.resolvedUri=Gi(n,i.map.uri)),i.map&&i.map.key&&!i.map.key.resolvedUri&&(i.map.key.resolvedUri=Gi(n,i.map.key.uri)),i.parts&&i.parts.length&&i.parts.forEach(function(r){r.resolvedUri||(r.resolvedUri=Gi(n,r.uri))}),i.preloadHints&&i.preloadHints.length&&i.preloadHints.forEach(function(r){r.resolvedUri||(r.resolvedUri=Gi(n,r.uri))})},Yd=function(i){var n=i.segments||[],r=i.preloadSegment;if(r&&r.parts&&r.parts.length){if(r.preloadHints)for(var e=0;e<r.preloadHints.length;e++)if("MAP"===r.preloadHints[e].type)return n;r.duration=i.targetDuration,r.preload=!0,n.push(r)}return n},Jd=function(i,n){return i===n||i.segments&&n.segments&&i.segments.length===n.segments.length&&i.endList===n.endList&&i.mediaSequence===n.mediaSequence&&i.preloadSegment===n.preloadSegment},vl=function(i,n,r){void 0===r&&(r=Jd);var e=ns(i,{}),t=e.playlists[n.id];if(!t||r(t,n))return null;n.segments=Yd(n);var a=ns(t,n);if(a.preloadSegment&&!n.preloadSegment&&delete a.preloadSegment,t.segments){if(n.skip){n.segments=n.segments||[];for(var o=0;o<n.skip.skippedSegments;o++)n.segments.unshift({skipped:!0})}a.segments=function(i,n,r){var e=i.slice(),t=n.slice();r=r||0;for(var o,a=[],l=0;l<t.length;l++){var u=e[l+r],c=t[l];u?(o=u.map||o,a.push(Rp(u,c))):(o&&!c.map&&(c.map=o),a.push(c))}return a}(t.segments,n.segments,n.mediaSequence-t.mediaSequence)}a.segments.forEach(function(u){Qd(u,a.resolvedUri)});for(var l=0;l<e.playlists.length;l++)e.playlists[l].id===n.id&&(e.playlists[l]=a);return e.playlists[n.id]=a,e.playlists[n.uri]=a,ua(i,function(u,c,_,y){if(u.playlists)for(var A=0;A<u.playlists.length;A++)n.id===u.playlists[A].id&&(u.playlists[A]=a)}),e},yl=function(i,n){var r=i.segments||[],e=r[r.length-1],t=e&&e.parts&&e.parts[e.parts.length-1],a=t&&t.duration||e&&e.duration;return n&&a?1e3*a:500*(i.partTargetDuration||i.targetDuration||10)},In=function(s){function i(r,e,t){var a;if(void 0===t&&(t={}),a=s.call(this)||this,!r)throw new Error("A non-empty playlist URL or object is required");a.logger_=Ki("PlaylistLoader");var l=t.withCredentials,u=void 0!==l&&l,c=t.handleManifestRedirects,_=void 0!==c&&c;a.src=r,a.vhs_=e,a.withCredentials=u,a.handleManifestRedirects=_;var y=e.options_;return a.customTagParsers=y&&y.customTagParsers||[],a.customTagMappers=y&&y.customTagMappers||[],a.experimentalLLHLS=y&&y.experimentalLLHLS||!1,q.browser.IE_VERSION&&(a.experimentalLLHLS=!1),a.state="HAVE_NOTHING",a.handleMediaupdatetimeout_=a.handleMediaupdatetimeout_.bind(X(a)),a.on("mediaupdatetimeout",a.handleMediaupdatetimeout_),a}U(i,s);var n=i.prototype;return n.handleMediaupdatetimeout_=function(){var e=this;if("HAVE_METADATA"===this.state){var t=this.media(),a=Gi(this.master.uri,t.uri);this.experimentalLLHLS&&(a=function(i,n){if(n.endList||!n.serverControl)return i;var r={};if(n.serverControl.canBlockReload){var e=n.preloadSegment,t=n.mediaSequence+n.segments.length;if(e){var a=e.parts||[],o=Ud(n)-1;o>-1&&o!==a.length-1&&(r._HLS_part=o),(o>-1||a.length)&&t--}r._HLS_msn=t}if(n.serverControl&&n.serverControl.canSkipUntil&&(r._HLS_skip=n.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(r).length){var l=new(p().URL)(i);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(u){!r.hasOwnProperty(u)||l.searchParams.set(u,r[u])}),i=l.toString()}return i}(a,t)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:a,withCredentials:this.withCredentials},function(o,l){if(e.request){if(o)return e.playlistRequestError(e.request,e.media(),"HAVE_METADATA");e.haveMetadata({playlistString:e.request.responseText,url:e.media().uri,id:e.media().id})}})}},n.playlistRequestError=function(e,t,a){var o=t.uri,l=t.id;this.request=null,a&&(this.state=a),this.error={playlist:this.master.playlists[l],status:e.status,message:"HLS playlist request error at URL: "+o+".",responseText:e.responseText,code:e.status>=500?4:2},this.trigger("error")},n.parseManifest_=function(e){var t=this,a=e.url;return function(i){var n=i.onwarn,r=i.oninfo,e=i.manifestString,t=i.customTagParsers,a=void 0===t?[]:t,o=i.customTagMappers,l=void 0===o?[]:o,u=i.experimentalLLHLS,c=new Pe;n&&c.on("warn",n),r&&c.on("info",r),a.forEach(function(D){return c.addParser(D)}),l.forEach(function(D){return c.addTagMapper(D)}),c.push(e),c.end();var _=c.manifest;if(u||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(D){_.hasOwnProperty(D)&&delete _[D]}),_.segments&&_.segments.forEach(function(D){["parts","preloadHints"].forEach(function(M){D.hasOwnProperty(M)&&delete D[M]})})),!_.targetDuration){var y=10;_.segments&&_.segments.length&&(y=_.segments.reduce(function(D,M){return Math.max(D,M.duration)},0)),n&&n("manifest has no targetDuration defaulting to "+y),_.targetDuration=y}var A=Bd(_);if(A.length&&!_.partTargetDuration){var I=A.reduce(function(D,M){return Math.max(D,M.duration)},0);n&&(n("manifest has no partTargetDuration defaulting to "+I),Gd.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),_.partTargetDuration=I}return _}({onwarn:function(u){return t.logger_("m3u8-parser warn for "+a+": "+u.message)},oninfo:function(u){return t.logger_("m3u8-parser info for "+a+": "+u.message)},manifestString:e.manifestString,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,experimentalLLHLS:this.experimentalLLHLS})},n.haveMetadata=function(e){var t=e.playlistString,a=e.playlistObject,o=e.url,l=e.id;this.request=null,this.state="HAVE_METADATA";var u=a||this.parseManifest_({url:o,manifestString:t});u.lastRequest=Date.now(),Kd({playlist:u,uri:o,id:l});var c=vl(this.master,u);this.targetDuration=u.partTargetDuration||u.targetDuration,this.pendingMedia_=null,c?(this.master=c,this.media_=this.master.playlists[l]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(yl(this.media(),!!c)),this.trigger("loadedplaylist")},n.dispose=function(){this.trigger("dispose"),this.stopRequest(),p().clearTimeout(this.mediaUpdateTimeout),p().clearTimeout(this.finalRenditionTimeout),this.off()},n.stopRequest=function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}},n.media=function(e,t){var a=this;if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof e){if(!this.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.master.playlists[e]}if(p().clearTimeout(this.finalRenditionTimeout),t){var o=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=p().setTimeout(this.media.bind(this,e,!1),o)}else{var l=this.state,u=!this.media_||e.id!==this.media_.id,c=this.master.playlists[e.id];if(c&&c.endList||e.endList&&e.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,void(u&&(this.trigger("mediachanging"),this.trigger("HAVE_MASTER"===l?"loadedmetadata":"mediachange")));if(this.updateMediaUpdateTimeout_(yl(e,!0)),u){if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e,this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials},function(_,y){if(a.request){if(e.lastRequest=Date.now(),e.resolvedUri=ts(a.handleManifestRedirects,e.resolvedUri,y),_)return a.playlistRequestError(a.request,e,l);a.haveMetadata({playlistString:y.responseText,url:e.uri,id:e.id}),a.trigger("HAVE_MASTER"===l?"loadedmetadata":"mediachange")}})}}},n.pause=function(){this.mediaUpdateTimeout&&(p().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.state=this.media_?"HAVE_METADATA":"HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")},n.load=function(e){var t=this;this.mediaUpdateTimeout&&(p().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);var a=this.media();if(e){var o=a?(a.partTargetDuration||a.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=p().setTimeout(function(){t.mediaUpdateTimeout=null,t.load()},o)}else this.started?this.trigger(a&&!a.endList?"mediaupdatetimeout":"loadedplaylist"):this.start()},n.updateMediaUpdateTimeout_=function(e){var t=this;this.mediaUpdateTimeout&&(p().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=p().setTimeout(function(){t.mediaUpdateTimeout=null,t.trigger("mediaupdatetimeout"),t.updateMediaUpdateTimeout_(e)},e))},n.start=function(){var e=this;if(this.started=!0,"object"==typeof this.src)return this.src.uri||(this.src.uri=p().location.href),this.src.resolvedUri=this.src.uri,void setTimeout(function(){e.setupInitialPlaylist(e.src)},0);this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},function(t,a){if(e.request){if(e.request=null,t)return e.error={status:a.status,message:"HLS playlist request error at URL: "+e.src+".",responseText:a.responseText,code:2},"HAVE_NOTHING"===e.state&&(e.started=!1),e.trigger("error");e.src=ts(e.handleManifestRedirects,e.src,a);var o=e.parseManifest_({manifestString:a.responseText,url:e.src});e.setupInitialPlaylist(o)}})},n.srcUri=function(){return"string"==typeof this.src?this.src:this.src.uri},n.setupInitialPlaylist=function(e){if(this.state="HAVE_MASTER",e.playlists)return this.master=e,Xd(this.master,this.srcUri()),e.playlists.forEach(function(a){a.segments=Yd(a),a.segments.forEach(function(o){Qd(o,a.resolvedUri)})}),this.trigger("loadedplaylist"),void(this.request||this.media(this.master.playlists[0]));var t=this.srcUri()||p().location.href;this.master=function(i,n){var r=ml(0,n),e={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:p().location.href,resolvedUri:p().location.href,playlists:[{uri:n,id:r,resolvedUri:n,attributes:{}}]};return e.playlists[r]=e.playlists[0],e.playlists[n]=e.playlists[0],e}(0,t),this.haveMetadata({playlistObject:e,url:t,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},i}(q.EventTarget),Fp=q.xhr,Bp=q.mergeOptions,_l=function(i,n,r,e){var t="arraybuffer"===i.responseType?i.response:i.responseText;!n&&t&&(i.responseTime=Date.now(),i.roundTripTime=i.responseTime-i.requestTime,i.bytesReceived=t.byteLength||t.length,i.bandwidth||(i.bandwidth=Math.floor(i.bytesReceived/i.roundTripTime*8*1e3))),r.headers&&(i.responseHeaders=r.headers),n&&"ETIMEDOUT"===n.code&&(i.timedout=!0),!n&&!i.aborted&&200!==r.statusCode&&206!==r.statusCode&&0!==r.statusCode&&(n=new Error("XHR Failed with a response of: "+(i&&(t||i.responseText)))),e(n,i)},Zd=function(){var i=function n(r,e){r=Bp({timeout:45e3},r);var t=n.beforeRequest||q.Vhs.xhr.beforeRequest;if(t&&"function"==typeof t){var a=t(r);a&&(r=a)}var l=(!0===q.Vhs.xhr.original?Fp:q.Vhs.xhr)(r,function(c,_){return _l(l,c,_,e)}),u=l.abort;return l.abort=function(){return l.aborted=!0,u.apply(l,arguments)},l.uri=r.uri,l.requestTime=Date.now(),l};return i.original=!0,i},Tl=function(i){var n={};return i.byterange&&(n.Range=function(i){return"bytes="+i.offset+"-"+("bigint"==typeof i.offset||"bigint"==typeof i.length?p().BigInt(i.offset)+p().BigInt(i.length)-p().BigInt(1):i.offset+i.length-1)}(i.byterange)),n},jp=function(i,n){return i.start(n)+"-"+i.end(n)},Vp=function(i,n){var r=i.toString(16);return"00".substring(0,2-r.length)+r+(n%2?" ":"")},Hp=function(i){return i>=32&&i<126?String.fromCharCode(i):"."},ec=function(i){var n={};return Object.keys(i).forEach(function(r){var e=i[r];n[r]=mi(e)?{bytes:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength}:e}),n},as=function(i){var n=i.byterange||{length:1/0,offset:0};return[n.length,n.offset,i.resolvedUri].join(",")},tc=function(i){return i.resolvedUri},ic=function(i){for(var n=Array.prototype.slice.call(i),r=16,e="",o=0;o<n.length/r;o++)e+=n.slice(o*r,o*r+r).map(Vp).join("")+" "+n.slice(o*r,o*r+r).map(Hp).join("")+"\n";return e},qp=Object.freeze({__proto__:null,createTransferableMessage:ec,initSegmentId:as,segmentKeyId:tc,hexDump:ic,tagDump:function(i){return ic(i.bytes)},textRanges:function(i){var r,n="";for(r=0;r<i.length;r++)n+=jp(i,r)+" ";return n}}),Zp=function s(i){var n=i.programTime,r=i.playlist,e=i.retryCount,t=void 0===e?2:e,a=i.seekTo,o=i.pauseAfterSeek,l=void 0===o||o,u=i.tech,c=i.callback;if(!c)throw new Error("seekToProgramTime: callback must be provided");if(void 0===n||!r||!a)return c({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!r.endList&&!u.hasStarted_)return c({message:"player must be playing a live stream to start buffering"});if(!function(i){if(!i.segments||0===i.segments.length)return!1;for(var n=0;n<i.segments.length;n++)if(!i.segments[n].dateTimeObject)return!1;return!0}(r))return c({message:"programDateTime tags must be provided in the manifest "+r.resolvedUri});var _=function(i,n){var r;try{r=new Date(i)}catch(_){return null}if(!n||!n.segments||0===n.segments.length)return null;var e=n.segments[0];if(r<e.dateTimeObject)return null;for(var t=0;t<n.segments.length-1&&(e=n.segments[t],!(r<n.segments[t+1].dateTimeObject));t++);var o=n.segments[n.segments.length-1],l=o.dateTimeObject,u=o.videoTimingInfo?function(i){return i.transmuxedPresentationEnd-i.transmuxedPresentationStart-i.transmuxerPrependedSeconds}(o.videoTimingInfo):o.duration+.25*o.duration;return r>new Date(l.getTime()+1e3*u)?null:(r>l&&(e=o),{segment:e,estimatedStart:e.videoTimingInfo?e.videoTimingInfo.transmuxedPresentationStart:ki.duration(n,n.mediaSequence+n.segments.indexOf(e)),type:e.videoTimingInfo?"accurate":"estimate"})}(n,r);if(!_)return c({message:n+" was not found in the stream"});var y=_.segment,A=function(i,n){var r,e;try{r=new Date(i),e=new Date(n)}catch(o){}var t=r.getTime();return(e.getTime()-t)/1e3}(y.dateTimeObject,n);if("estimate"===_.type)return 0===t?c({message:n+" is not buffered yet. Try again"}):(a(_.estimatedStart+A),void u.one("seeked",function(){s({programTime:n,playlist:r,retryCount:t-1,seekTo:a,pauseAfterSeek:l,tech:u,callback:c})}));var I=y.start+A;u.one("seeked",function(){return c(null,u.currentTime())}),l&&u.pause(),a(I)},bl=function(i,n){if(4===i.readyState)return n()},nc=q.mergeOptions,ac=function(i,n){if(!Jd(i,n)||i.sidx&&n.sidx&&(i.sidx.offset!==n.sidx.offset||i.sidx.length!==n.sidx.length))return!1;if(!i.sidx&&n.sidx||i.sidx&&!n.sidx||i.segments&&!n.segments||!i.segments&&n.segments)return!1;if(!i.segments&&!n.segments)return!0;for(var r=0;r<i.segments.length;r++){var e=i.segments[r],t=n.segments[r];if(e.uri!==t.uri)return!1;if(e.byterange||t.byterange){var a=e.byterange,o=t.byterange;if(a&&!o||!a&&o||a.offset!==o.offset||a.length!==o.length)return!1}}return!0},ng=function(i,n){return(Boolean(!i.map&&!n.map)||Boolean(i.map&&n.map&&i.map.byterange.offset===n.map.byterange.offset&&i.map.byterange.length===n.map.byterange.length))&&i.uri===n.uri&&i.byterange.offset===n.byterange.offset&&i.byterange.length===n.byterange.length},sc=function(i,n){var r={};for(var e in i){var a=i[e].sidx;if(a){var o=jt(a);if(!n[o])break;ng(n[o].sidxInfo,a)&&(r[o]=n[o])}}return r},Sl=function(s){function i(r,e,t,a){var o;void 0===t&&(t={}),(o=s.call(this)||this).masterPlaylistLoader_=a||X(o),a||(o.isMaster_=!0);var u=t.withCredentials,c=void 0!==u&&u,_=t.handleManifestRedirects,y=void 0!==_&&_;if(o.vhs_=e,o.withCredentials=c,o.handleManifestRedirects=y,!r)throw new Error("A non-empty playlist URL or object is required");return o.on("minimumUpdatePeriod",function(){o.refreshXml_()}),o.on("mediaupdatetimeout",function(){o.refreshMedia_(o.media().id)}),o.state="HAVE_NOTHING",o.loadedPlaylists_={},o.logger_=Ki("DashPlaylistLoader"),o.isMaster_?(o.masterPlaylistLoader_.srcUrl=r,o.masterPlaylistLoader_.sidxMapping_={}):o.childPlaylist_=r,o}U(i,s);var n=i.prototype;return n.requestErrored_=function(e,t,a){return!this.request||(this.request=null,e?(this.error="object"!=typeof e||e instanceof Error?{status:t.status,message:"DASH request error at URL: "+t.uri,response:t.response,code:2}:e,a&&(this.state=a),this.trigger("error"),!0):void 0)},n.addSidxSegments_=function(e,t,a){var o=this,l=e.sidx&&jt(e.sidx);if(e.sidx&&l&&!this.masterPlaylistLoader_.sidxMapping_[l]){var u=ts(this.handleManifestRedirects,e.sidx.resolvedUri),c=function(y,A){if(!o.requestErrored_(y,A,t)){var D,I=o.masterPlaylistLoader_.sidxMapping_;try{D=ie()(rt(A.response).subarray(8))}catch(M){return void o.requestErrored_(M,A,t)}return I[l]={sidxInfo:e.sidx,sidx:D},vi(e,D,e.sidx.resolvedUri),a(!0)}};this.request=function(i,n,r){var t,e=[],a=!1,o=function(y,A,I,D){return A.abort(),a=!0,r(y,A,I,D)},l=function(y,A){if(!a){if(y)return o(y,A,"",e);var I=A.responseText.substring(e&&e.byteLength||0,A.responseText.length);if(e=function(){for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];if((n=n.filter(function(o){return o&&(o.byteLength||o.length)&&"string"!=typeof o})).length<=1)return rt(n[0]);var e=n.reduce(function(o,l,u){return o+(l.byteLength||l.length)},0),t=new Uint8Array(e),a=0;return n.forEach(function(o){o=rt(o),t.set(o,a),a+=o.byteLength}),t}(e,ht(I,!0)),t=t||Ve(e),e.length<10||t&&e.length<t+2)return bl(A,function(){return o(y,A,"",e)});var D=co(e);return"ts"===D&&e.length<188||!D&&e.length<376?bl(A,function(){return o(y,A,"",e)}):o(null,A,D,e)}},c=n({uri:i,beforeSend:function(y){y.overrideMimeType("text/plain; charset=x-user-defined"),y.addEventListener("progress",function(A){return _l(y,null,{statusCode:y.status},l)})}},function(_,y){return _l(c,_,y,l)});return c}(u,this.vhs_.xhr,function(_,y,A,I){if(_)return c(_,y);if(!A||"mp4"!==A)return c({status:y.status,message:"Unsupported "+(A||"unknown")+" container type for sidx segment at URL: "+u,response:"",playlist:e,internal:!0,blacklistDuration:1/0,code:2},y);var D=e.sidx.byterange,M=D.offset,Q=D.length;if(I.length>=Q+M)return c(_,{response:I.subarray(M,M+Q),status:y.status,uri:y.uri});o.request=o.vhs_.xhr({uri:u,responseType:"arraybuffer",headers:Tl({byterange:e.sidx.byterange})},c)})}else this.mediaRequest_=p().setTimeout(function(){return a(!1)},0)},n.dispose=function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},p().clearTimeout(this.minimumUpdatePeriodTimeout_),p().clearTimeout(this.mediaRequest_),p().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.off()},n.hasPendingRequest=function(){return this.request||this.mediaRequest_},n.stopRequest=function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}},n.media=function(e){var t=this;if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var a=this.state;if("string"==typeof e){if(!this.masterPlaylistLoader_.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.masterPlaylistLoader_.master.playlists[e]}var o=!this.media_||e.id!==this.media_.id;if(o&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList)return this.state="HAVE_METADATA",this.media_=e,void(o&&(this.trigger("mediachanging"),this.trigger("mediachange")));!o||(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,a,function(l){t.haveMetadata({startingState:a,playlist:e})}))},n.haveMetadata=function(e){var t=e.startingState,a=e.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[a.id]=a,this.mediaRequest_=null,this.refreshMedia_(a.id),this.trigger("HAVE_MASTER"===t?"loadedmetadata":"mediachange")},n.pause=function(){this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),p().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMaster_&&(p().clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_),this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=null),"HAVE_NOTHING"===this.state&&(this.started=!1)},n.load=function(e){var t=this;p().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;var a=this.media();if(e){var o=a?a.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=p().setTimeout(function(){return t.load()},o)}else this.started?a&&!a.endList?(this.isMaster_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist"):this.start()},n.start=function(){var e=this;this.started=!0,this.isMaster_?this.requestMaster_(function(t,a){e.haveMaster_(),!e.hasPendingRequest()&&!e.media_&&e.media(e.masterPlaylistLoader_.master.playlists[0])}):this.mediaRequest_=p().setTimeout(function(){return e.haveMaster_()},0)},n.requestMaster_=function(e){var t=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},function(a,o){if(!t.requestErrored_(a,o)){var l=o.responseText!==t.masterPlaylistLoader_.masterXml_;return t.masterPlaylistLoader_.masterXml_=o.responseText,t.masterLoaded_=o.responseHeaders&&o.responseHeaders.date?Date.parse(o.responseHeaders.date):Date.now(),t.masterPlaylistLoader_.srcUrl=ts(t.handleManifestRedirects,t.masterPlaylistLoader_.srcUrl,o),l?(t.handleMaster_(),void t.syncClientServerClock_(function(){return e(o,l)})):e(o,l)}"HAVE_NOTHING"===t.state&&(t.started=!1)})},n.syncClientServerClock_=function(e){var t=this,a=function(i){return function(i){var n=Vt(i,"UTCTiming")[0];if(!n)return null;var r=ai(n);switch(r.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":r.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":r.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":r.method="DIRECT",r.value=Date.parse(r.value);break;default:throw new Error("UNSUPPORTED_UTC_TIMING_SCHEME")}return r}(m(i))}(this.masterPlaylistLoader_.masterXml_);return null===a?(this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),e()):"DIRECT"===a.method?(this.masterPlaylistLoader_.clientOffset_=a.value-Date.now(),e()):void(this.request=this.vhs_.xhr({uri:Gi(this.masterPlaylistLoader_.srcUrl,a.value),method:a.method,withCredentials:this.withCredentials},function(o,l){if(t.request){if(o)return t.masterPlaylistLoader_.clientOffset_=t.masterLoaded_-Date.now(),e();var u;u="HEAD"===a.method?l.responseHeaders&&l.responseHeaders.date?Date.parse(l.responseHeaders.date):t.masterLoaded_:Date.parse(l.responseText),t.masterPlaylistLoader_.clientOffset_=u-Date.now(),e()}}))},n.haveMaster_=function(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},n.handleMaster_=function(){this.mediaRequest_=null;var e=this.masterPlaylistLoader_.master,t=function(i){var r=i.srcUrl,o=function(i,n){void 0===n&&(n={});var r=function(i,n){void 0===n&&(n={});var r=n,e=r.manifestUri,t=void 0===e?"":e,a=r.NOW,o=void 0===a?Date.now():a,l=r.clientOffset,u=void 0===l?0:l,c=Vt(i,"Period");if(!c.length)throw new Error("INVALID_NUMBER_OF_PERIOD");var _=Vt(i,"Location"),y=ai(i),A=un([t],Vt(i,"BaseURL"));y.type=y.type||"static",y.sourceDuration=y.mediaPresentationDuration||0,y.NOW=o,y.clientOffset=u,_.length&&(y.locations=_.map($n));var I=[];return c.forEach(function(D,M){var Q=ai(D),me=I[M-1];Q.start=function(i){var n=i.attributes,r=i.priorPeriodAttributes;return"number"==typeof n.start?n.start:r&&"number"==typeof r.start&&"number"==typeof r.duration?r.start+r.duration:r||"static"!==i.mpdType?null:0}({attributes:Q,priorPeriodAttributes:me?me.attributes:null,mpdType:y.type}),I.push({node:D,attributes:Q})}),{locations:y.locations,representationInfo:Ii(I.map(so(y,A)))}}(m(i),n),e=function(i){return i.map(Zs)}(r.representationInfo);return qs({dashPlaylists:e,locations:r.locations,sidxMapping:n.sidxMapping,previousManifest:n.previousManifest})}(i.masterXml,{manifestUri:r,clientOffset:i.clientOffset,sidxMapping:i.sidxMapping,previousManifest:i.previousManifest});return Xd(o,r),o}({masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_,previousManifest:e});e&&(t=function(i,n,r){for(var e=!0,t=nc(i,{duration:n.duration,minimumUpdatePeriod:n.minimumUpdatePeriod,timelineStarts:n.timelineStarts}),a=0;a<n.playlists.length;a++){var o=n.playlists[a];if(o.sidx){var l=jt(o.sidx);r&&r[l]&&r[l].sidx&&vi(o,r[l].sidx,o.sidx.resolvedUri)}var u=vl(t,o,ac);u&&(t=u,e=!1)}return ua(n,function(c,_,y,A){if(c.playlists&&c.playlists.length){var I=c.playlists[0].id,D=vl(t,c.playlists[0],ac);D&&((t=D).mediaGroups[_][y][A].playlists[0]=t.playlists[I],e=!1)}}),n.minimumUpdatePeriod!==i.minimumUpdatePeriod&&(e=!1),e?null:t}(e,t,this.masterPlaylistLoader_.sidxMapping_)),this.masterPlaylistLoader_.master=t||e;var a=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];return a&&a!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=a),(!e||t&&t.minimumUpdatePeriod!==e.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),Boolean(t)},n.updateMinimumUpdatePeriodTimeout_=function(){var e=this.masterPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(p().clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);var t=e.master&&e.master.minimumUpdatePeriod;0===t&&(e.media()?t=1e3*e.media().targetDuration:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),"number"!=typeof t||t<=0?t<0&&this.logger_("found invalid minimumUpdatePeriod of "+t+", not setting a timeout"):this.createMUPTimeout_(t)},n.createMUPTimeout_=function(e){var t=this.masterPlaylistLoader_;t.minimumUpdatePeriodTimeout_=p().setTimeout(function(){t.minimumUpdatePeriodTimeout_=null,t.trigger("minimumUpdatePeriod"),t.createMUPTimeout_(e)},e)},n.refreshXml_=function(){var e=this;this.requestMaster_(function(t,a){!a||(e.media_&&(e.media_=e.masterPlaylistLoader_.master.playlists[e.media_.id]),e.masterPlaylistLoader_.sidxMapping_=function(i,n){var e=sc(i.playlists,n);return ua(i,function(t,a,o,l){t.playlists&&t.playlists.length&&(e=nc(e,sc(t.playlists,n)))}),e}(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.sidxMapping_),e.addSidxSegments_(e.media(),e.state,function(o){e.refreshMedia_(e.media().id)}))})},n.refreshMedia_=function(e){var t=this;if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var a=this.masterPlaylistLoader_.master.playlists,o=!this.media_||this.media_!==a[e];o?this.media_=a[e]:this.trigger("playlistunchanged"),this.mediaUpdateTimeout||function u(){t.media().endList||(t.mediaUpdateTimeout=p().setTimeout(function(){t.trigger("mediaupdatetimeout"),u()},yl(t.media(),Boolean(o))))}(),this.trigger("loadedplaylist")},i}(q.EventTarget),li={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},oc=function(i){return i.on=i.addEventListener,i.off=i.removeEventListener,i},lc=function(i){return function(){var n=function(i){try{return URL.createObjectURL(new Blob([i],{type:"application/javascript"}))}catch(r){var n=new BlobBuilder;return n.append(i),URL.createObjectURL(n.getBlob())}}(i),r=oc(new Worker(n));r.objURL=n;var e=r.terminate;return r.on=r.addEventListener,r.off=r.removeEventListener,r.terminate=function(){return URL.revokeObjectURL(n),e.call(this)},r}},uc=function(i){return"var browserWorkerPolyFill = "+oc.toString()+";\nbrowserWorkerPolyFill(self);\n"+i},dc=function(i){return i.toString().replace(/^function.+?{/,"").slice(0,-1)},lg=uc(dc(function(){var s=function(){this.init=function(){var d={};this.on=function(f,h){d[f]||(d[f]=[]),d[f]=d[f].concat(h)},this.off=function(f,h){var g;return!!d[f]&&(g=d[f].indexOf(h),d[f]=d[f].slice(),d[f].splice(g,1),g>-1)},this.trigger=function(f){var h,g,T,b;if(h=d[f])if(2===arguments.length)for(T=h.length,g=0;g<T;++g)h[g].call(this,arguments[1]);else{for(b=[],g=arguments.length,g=1;g<arguments.length;++g)b.push(arguments[g]);for(T=h.length,g=0;g<T;++g)h[g].apply(this,b)}},this.dispose=function(){d={}}}};s.prototype.pipe=function(E){return this.on("data",function(d){E.push(d)}),this.on("done",function(d){E.flush(d)}),this.on("partialdone",function(d){E.partialFlush(d)}),this.on("endedtimeline",function(d){E.endTimeline(d)}),this.on("reset",function(d){E.reset(d)}),E},s.prototype.push=function(E){this.trigger("data",E)},s.prototype.flush=function(E){this.trigger("done",E)},s.prototype.partialFlush=function(E){this.trigger("partialdone",E)},s.prototype.endTimeline=function(E){this.trigger("endedtimeline",E)},s.prototype.reset=function(E){this.trigger("reset",E)};var a,o,l,u,c,_,y,A,I,D,M,Q,me,Fe,te,re,Le,le,oe,ke,ce,nt,Xe,ut,Lt,Nt,Xt,Zt,Ut,gi,Et,ps,Hi,_r,Or,Zr,E,d,i=s,n=Math.pow(2,32),e={getUint64:function(d){var h,f=new DataView(d.buffer,d.byteOffset,d.byteLength);return f.getBigUint64?(h=f.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(h):h:f.getUint32(0)*n+f.getUint32(4)},MAX_UINT32:n},t=e.MAX_UINT32;(function(){var E;if(Xe={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(E in Xe)Xe.hasOwnProperty(E)&&(Xe[E]=[E.charCodeAt(0),E.charCodeAt(1),E.charCodeAt(2),E.charCodeAt(3)]);ut=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),Nt=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),Lt=new Uint8Array([0,0,0,1]),Xt=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),Zt=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),Ut={video:Xt,audio:Zt},ps=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),Et=new Uint8Array([0,0,0,0,0,0,0,0]),Hi=new Uint8Array([0,0,0,0,0,0,0,0]),_r=Hi,Or=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Zr=Hi,gi=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),a=function(d){var g,T,f=[],h=0;for(g=1;g<arguments.length;g++)f.push(arguments[g]);for(g=f.length;g--;)h+=f[g].byteLength;for(T=new Uint8Array(h+8),new DataView(T.buffer,T.byteOffset,T.byteLength).setUint32(0,T.byteLength),T.set(d,4),g=0,h=8;g<f.length;g++)T.set(f[g],h),h+=f[g].byteLength;return T},o=function(){return a(Xe.dinf,a(Xe.dref,ps))},l=function(d){return a(Xe.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,d.audioobjecttype<<3|d.samplingfrequencyindex>>>1,d.samplingfrequencyindex<<7|d.channelcount<<3,6,1,2]))},u=function(){return a(Xe.ftyp,ut,Lt,ut,Nt)},re=function(d){return a(Xe.hdlr,Ut[d])},c=function(d){return a(Xe.mdat,d)},te=function(d){var f=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,d.duration>>>24&255,d.duration>>>16&255,d.duration>>>8&255,255&d.duration,85,196,0,0]);return d.samplerate&&(f[12]=d.samplerate>>>24&255,f[13]=d.samplerate>>>16&255,f[14]=d.samplerate>>>8&255,f[15]=255&d.samplerate),a(Xe.mdhd,f)},Fe=function(d){return a(Xe.mdia,te(d),re(d.type),y(d))},_=function(d){return a(Xe.mfhd,new Uint8Array([0,0,0,0,(4278190080&d)>>24,(16711680&d)>>16,(65280&d)>>8,255&d]))},y=function(d){return a(Xe.minf,"video"===d.type?a(Xe.vmhd,gi):a(Xe.smhd,Et),o(),le(d))},A=function(d,f){for(var h=[],g=f.length;g--;)h[g]=ke(f[g]);return a.apply(null,[Xe.moof,_(d)].concat(h))},I=function(d){for(var f=d.length,h=[];f--;)h[f]=Q(d[f]);return a.apply(null,[Xe.moov,M(4294967295)].concat(h).concat(D(d)))},D=function(d){for(var f=d.length,h=[];f--;)h[f]=ce(d[f]);return a.apply(null,[Xe.mvex].concat(h))},M=function(d){var f=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&d)>>24,(16711680&d)>>16,(65280&d)>>8,255&d,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return a(Xe.mvhd,f)},Le=function(d){var g,T,f=d.samples||[],h=new Uint8Array(4+f.length);for(T=0;T<f.length;T++)h[T+4]=(g=f[T].flags).dependsOn<<4|g.isDependedOn<<2|g.hasRedundancy;return a(Xe.sdtp,h)},le=function(d){return a(Xe.stbl,oe(d),a(Xe.stts,Zr),a(Xe.stsc,_r),a(Xe.stsz,Or),a(Xe.stco,Hi))},oe=function(h){return a(Xe.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===h.type?E(h):d(h))},E=function(h){var R,B,g=h.sps||[],T=h.pps||[],b=[],L=[];for(R=0;R<g.length;R++)b.push((65280&g[R].byteLength)>>>8),b.push(255&g[R].byteLength),b=b.concat(Array.prototype.slice.call(g[R]));for(R=0;R<T.length;R++)L.push((65280&T[R].byteLength)>>>8),L.push(255&T[R].byteLength),L=L.concat(Array.prototype.slice.call(T[R]));if(B=[Xe.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&h.width)>>8,255&h.width,(65280&h.height)>>8,255&h.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),a(Xe.avcC,new Uint8Array([1,h.profileIdc,h.profileCompatibility,h.levelIdc,255].concat([g.length],b,[T.length],L))),a(Xe.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],h.sarRatio){var F=h.sarRatio[0],H=h.sarRatio[1];B.push(a(Xe.pasp,new Uint8Array([(4278190080&F)>>24,(16711680&F)>>16,(65280&F)>>8,255&F,(4278190080&H)>>24,(16711680&H)>>16,(65280&H)>>8,255&H])))}return a.apply(null,B)},d=function(h){return a(Xe.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&h.channelcount)>>8,255&h.channelcount,(65280&h.samplesize)>>8,255&h.samplesize,0,0,0,0,(65280&h.samplerate)>>8,255&h.samplerate,0,0]),l(h))},me=function(d){var f=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&d.id)>>24,(16711680&d.id)>>16,(65280&d.id)>>8,255&d.id,0,0,0,0,(4278190080&d.duration)>>24,(16711680&d.duration)>>16,(65280&d.duration)>>8,255&d.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&d.width)>>8,255&d.width,0,0,(65280&d.height)>>8,255&d.height,0,0]);return a(Xe.tkhd,f)},ke=function(d){var f,h,g,T,L,R;return f=a(Xe.tfhd,new Uint8Array([0,0,0,58,(4278190080&d.id)>>24,(16711680&d.id)>>16,(65280&d.id)>>8,255&d.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),L=Math.floor(d.baseMediaDecodeTime/t),R=Math.floor(d.baseMediaDecodeTime%t),h=a(Xe.tfdt,new Uint8Array([1,0,0,0,L>>>24&255,L>>>16&255,L>>>8&255,255&L,R>>>24&255,R>>>16&255,R>>>8&255,255&R])),"audio"===d.type?(g=nt(d,92),a(Xe.traf,f,h,g)):(T=Le(d),g=nt(d,T.length+92),a(Xe.traf,f,h,g,T))},Q=function(d){return d.duration=d.duration||4294967295,a(Xe.trak,me(d),Fe(d))},ce=function(d){var f=new Uint8Array([0,0,0,0,(4278190080&d.id)>>24,(16711680&d.id)>>16,(65280&d.id)>>8,255&d.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==d.type&&(f[f.length-1]=0),a(Xe.trex,f)},function(){var E,d,f;f=function(g,T){var b=0,L=0,R=0,B=0;return g.length&&(void 0!==g[0].duration&&(b=1),void 0!==g[0].size&&(L=2),void 0!==g[0].flags&&(R=4),void 0!==g[0].compositionTimeOffset&&(B=8)),[0,0,b|L|R|B,1,(4278190080&g.length)>>>24,(16711680&g.length)>>>16,(65280&g.length)>>>8,255&g.length,(4278190080&T)>>>24,(16711680&T)>>>16,(65280&T)>>>8,255&T]},d=function(g,T){var b,L,R,B,F,H;for(R=f(B=g.samples||[],T+=20+16*B.length),(L=new Uint8Array(R.length+16*B.length)).set(R),b=R.length,H=0;H<B.length;H++)L[b++]=(4278190080&(F=B[H]).duration)>>>24,L[b++]=(16711680&F.duration)>>>16,L[b++]=(65280&F.duration)>>>8,L[b++]=255&F.duration,L[b++]=(4278190080&F.size)>>>24,L[b++]=(16711680&F.size)>>>16,L[b++]=(65280&F.size)>>>8,L[b++]=255&F.size,L[b++]=F.flags.isLeading<<2|F.flags.dependsOn,L[b++]=F.flags.isDependedOn<<6|F.flags.hasRedundancy<<4|F.flags.paddingValue<<1|F.flags.isNonSyncSample,L[b++]=61440&F.flags.degradationPriority,L[b++]=15&F.flags.degradationPriority,L[b++]=(4278190080&F.compositionTimeOffset)>>>24,L[b++]=(16711680&F.compositionTimeOffset)>>>16,L[b++]=(65280&F.compositionTimeOffset)>>>8,L[b++]=255&F.compositionTimeOffset;return a(Xe.trun,L)},E=function(g,T){var b,L,R,B,F,H;for(R=f(B=g.samples||[],T+=20+8*B.length),(b=new Uint8Array(R.length+8*B.length)).set(R),L=R.length,H=0;H<B.length;H++)b[L++]=(4278190080&(F=B[H]).duration)>>>24,b[L++]=(16711680&F.duration)>>>16,b[L++]=(65280&F.duration)>>>8,b[L++]=255&F.duration,b[L++]=(4278190080&F.size)>>>24,b[L++]=(16711680&F.size)>>>16,b[L++]=(65280&F.size)>>>8,b[L++]=255&F.size;return a(Xe.trun,b)},nt=function(g,T){return"audio"===g.type?E(g,T):d(g,T)}}();var Ml,Rl,Nl,gs,Fl,Wc,qc,zc,ir_mdat=c,ir_moof=A,$c=function(d,f){var h={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return h.dataOffset=f,h.compositionTimeOffset=d.pts-d.dts,h.duration=d.duration,h.size=4*d.length,h.size+=d.byteLength,d.keyFrame&&(h.flags.dependsOn=2,h.flags.isNonSyncSample=0),h},Rr=[33,16,5,32,164,27],Dl=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],At=function(d){for(var f=[];d--;)f.push(0);return f};Rl=function(d){return 9e4*d},Nl=function(d,f){return d*f},gs=function(d){return d/9e4},Fl=function(d,f){return d/f},Wc=function(d,f){return Rl(Fl(d,f))},qc=function(d,f){return Nl(gs(d),f)},zc=function(d,f,h){return gs(h?d:d-f)};var xt_secondsToVideoTs=Rl,xt_videoTsToSeconds=gs,xt_audioTsToVideoTs=Wc,xt_videoTsToAudioTs=qc,xt_metadataTsToSeconds=zc,ms_prefixWithSilence=function(d,f,h,g){var T,F,H,ne,b=0,L=0,R=0,B=0;if(f.length&&(T=xt_audioTsToVideoTs(d.baseMediaDecodeTime,d.samplerate),b=Math.ceil(9e4/(d.samplerate/1024)),h&&g&&(L=T-Math.max(h,g),B=(R=Math.floor(L/b))*b),!(R<1||B>45e3))){for((F=function(){if(!Ml){var d={96e3:[Rr,[227,64],At(154),[56]],88200:[Rr,[231],At(170),[56]],64e3:[Rr,[248,192],At(240),[56]],48e3:[Rr,[255,192],At(268),[55,148,128],At(54),[112]],44100:[Rr,[255,192],At(268),[55,163,128],At(84),[112]],32e3:[Rr,[255,192],At(268),[55,234],At(226),[112]],24e3:[Rr,[255,192],At(268),[55,255,128],At(268),[111,112],At(126),[224]],16e3:[Rr,[255,192],At(268),[55,255,128],At(268),[111,255],At(269),[223,108],At(195),[1,192]],12e3:[Dl,At(268),[3,127,248],At(268),[6,255,240],At(268),[13,255,224],At(268),[27,253,128],At(259),[56]],11025:[Dl,At(268),[3,127,248],At(268),[6,255,240],At(268),[13,255,224],At(268),[27,255,192],At(268),[55,175,128],At(108),[112]],8e3:[Dl,At(268),[3,121,16],At(47),[7]]};Ml=function(d){return Object.keys(d).reduce(function(f,h){return f[h]=new Uint8Array(d[h].reduce(function(g,T){return g.concat(T)},[])),f},{})}(d)}return Ml}()[d.samplerate])||(F=f[0].data),H=0;H<R;H++)f.splice(0,0,{data:F,dts:(ne=f[0]).dts-b,pts:ne.pts-b});return d.baseMediaDecodeTime-=Math.floor(xt_videoTsToAudioTs(B,d.samplerate)),B}},Xi_clearDtsInfo=function(d){delete d.minSegmentDts,delete d.maxSegmentDts,delete d.minSegmentPts,delete d.maxSegmentPts},Xi_calculateTrackBaseMediaDecodeTime=function(d,f){var h,T=d.minSegmentDts;return f||(T-=d.timelineStartInfo.dts),h=d.timelineStartInfo.baseMediaDecodeTime,h+=T,h=Math.max(0,h),"audio"===d.type&&(h*=d.samplerate/9e4,h=Math.floor(h)),h},Xi_collectDtsInfo=function(d,f){"number"==typeof f.pts&&(void 0===d.timelineStartInfo.pts&&(d.timelineStartInfo.pts=f.pts),d.minSegmentPts=void 0===d.minSegmentPts?f.pts:Math.min(d.minSegmentPts,f.pts),d.maxSegmentPts=void 0===d.maxSegmentPts?f.pts:Math.max(d.maxSegmentPts,f.pts)),"number"==typeof f.dts&&(void 0===d.timelineStartInfo.dts&&(d.timelineStartInfo.dts=f.dts),d.minSegmentDts=void 0===d.minSegmentDts?f.dts:Math.min(d.minSegmentDts,f.dts),d.maxSegmentDts=void 0===d.maxSegmentDts?f.dts:Math.max(d.maxSegmentDts,f.dts))},Ri=function E(d){d=d||{},E.prototype.init.call(this),this.parse708captions_="boolean"!=typeof d.parse708captions||d.parse708captions,this.captionPackets_=[],this.ccStreams_=[new $t(0,0),new $t(0,1),new $t(1,0),new $t(1,1)],this.parse708captions_&&(this.cc708Stream_=new Dt({captionServices:d.captionServices})),this.reset(),this.ccStreams_.forEach(function(f){f.on("data",this.trigger.bind(this,"data")),f.on("partialdone",this.trigger.bind(this,"partialdone")),f.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};(Ri.prototype=new i).push=function(E){var d,f,h;if("sei_rbsp"===E.nalUnitType&&(d=function(d){for(var f=0,h={payloadType:-1,payloadSize:0},g=0,T=0;f<d.byteLength&&128!==d[f];){for(;255===d[f];)g+=255,f++;for(g+=d[f++];255===d[f];)T+=255,f++;if(T+=d[f++],!h.payload&&4===g){if("GA94"===String.fromCharCode(d[f+3],d[f+4],d[f+5],d[f+6])){h.payloadType=g,h.payloadSize=T,h.payload=d.subarray(f,f+T);break}h.payload=void 0}f+=T,g=0,T=0}return h}(E.escapedRBSP)).payload&&4===d.payloadType&&(f=function(d){return 181!==d.payload[0]||49!=(d.payload[1]<<8|d.payload[2])||"GA94"!==String.fromCharCode(d.payload[3],d.payload[4],d.payload[5],d.payload[6])||3!==d.payload[7]?null:d.payload.subarray(8,d.payload.length-1)}(d))){if(E.dts<this.latestDts_)return void(this.ignoreNextEqualDts_=!0);if(E.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));h=function(d,f){var g,T,b,L,h=[];if(!(64&f[0]))return h;for(T=31&f[0],g=0;g<T;g++)L={type:3&f[2+(b=3*g)],pts:d},4&f[b+2]&&(L.ccData=f[b+3]<<8|f[b+4],h.push(L));return h}(E.pts,f),this.captionPackets_=this.captionPackets_.concat(h),this.latestDts_!==E.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=E.dts}},Ri.prototype.flushCCStreams=function(E){this.ccStreams_.forEach(function(d){return"flush"===E?d.flush():d.partialFlush()},this)},Ri.prototype.flushStream=function(E){this.captionPackets_.length?(this.captionPackets_.forEach(function(d,f){d.presortIndex=f}),this.captionPackets_.sort(function(d,f){return d.pts===f.pts?d.presortIndex-f.presortIndex:d.pts-f.pts}),this.captionPackets_.forEach(function(d){d.type<2?this.dispatchCea608Packet(d):this.dispatchCea708Packet(d)},this),this.captionPackets_.length=0,this.flushCCStreams(E)):this.flushCCStreams(E)},Ri.prototype.flush=function(){return this.flushStream("flush")},Ri.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Ri.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(E){E.reset()})},Ri.prototype.dispatchCea608Packet=function(E){this.setsTextOrXDSActive(E)?this.activeCea608Channel_[E.type]=null:this.setsChannel1Active(E)?this.activeCea608Channel_[E.type]=0:this.setsChannel2Active(E)&&(this.activeCea608Channel_[E.type]=1),null!==this.activeCea608Channel_[E.type]&&this.ccStreams_[(E.type<<1)+this.activeCea608Channel_[E.type]].push(E)},Ri.prototype.setsChannel1Active=function(E){return 4096==(30720&E.ccData)},Ri.prototype.setsChannel2Active=function(E){return 6144==(30720&E.ccData)},Ri.prototype.setsTextOrXDSActive=function(E){return 256==(28928&E.ccData)||4138==(30974&E.ccData)||6186==(30974&E.ccData)},Ri.prototype.dispatchCea708Packet=function(E){this.parse708captions_&&this.cc708Stream_.push(E)};var hv={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},vs=function(d){return 32<=d&&d<=127||160<=d&&d<=255},Tr=function(d){this.windowNum=d,this.reset()};Tr.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},Tr.prototype.getText=function(){return this.rows.join("\n")},Tr.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},Tr.prototype.newLine=function(E){for(this.rows.length>=this.virtualRowCount&&"function"==typeof this.beforeRowOverflow&&this.beforeRowOverflow(E),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},Tr.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},Tr.prototype.addText=function(E){this.rows[this.rowIdx]+=E},Tr.prototype.backspace=function(){if(!this.isEmpty()){var E=this.rows[this.rowIdx];this.rows[this.rowIdx]=E.substr(0,E.length-1)}};var ys=function(d,f,h){this.serviceNum=d,this.text="",this.currentWindow=new Tr(-1),this.windows=[],this.stream=h,"string"==typeof f&&this.createTextDecoder(f)};ys.prototype.init=function(E,d){this.startPts=E;for(var f=0;f<8;f++)this.windows[f]=new Tr(f),"function"==typeof d&&(this.windows[f].beforeRowOverflow=d)},ys.prototype.setCurrentWindow=function(E){this.currentWindow=this.windows[E]},ys.prototype.createTextDecoder=function(E){if("undefined"==typeof TextDecoder)this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(E)}catch(d){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+E+" encoding. "+d})}};var Dt=function E(d){d=d||{},E.prototype.init.call(this);var T,f=this,h=d.captionServices||{},g={};Object.keys(h).forEach(function(b){T=h[b],/^SERVICE/.test(b)&&(g[b]=T.encoding)}),this.serviceEncodings=g,this.current708Packet=null,this.services={},this.push=function(b){3===b.type?(f.new708Packet(),f.add708Bytes(b)):(null===f.current708Packet&&f.new708Packet(),f.add708Bytes(b))}};Dt.prototype=new i,Dt.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},Dt.prototype.add708Bytes=function(E){var d=E.ccData,f=d>>>8,h=255&d;this.current708Packet.ptsVals.push(E.pts),this.current708Packet.data.push(f),this.current708Packet.data.push(h)},Dt.prototype.push708Packet=function(){var E=this.current708Packet,d=E.data,f=null,h=null,g=0,T=d[g++];for(E.seq=T>>6,E.sizeCode=63&T;g<d.length;g++)h=31&(T=d[g++]),7==(f=T>>5)&&h>0&&(f=T=d[g++]),this.pushServiceBlock(f,g,h),h>0&&(g+=h-1)},Dt.prototype.pushServiceBlock=function(E,d,f){var h,g=d,T=this.current708Packet.data,b=this.services[E];for(b||(b=this.initService(E,g));g<d+f&&g<T.length;g++)vs(h=T[g])?g=this.handleText(g,b):24===h?g=this.multiByteCharacter(g,b):16===h?g=this.extendedCommands(g,b):128<=h&&h<=135?g=this.setCurrentWindow(g,b):152<=h&&h<=159?g=this.defineWindow(g,b):136===h?g=this.clearWindows(g,b):140===h?g=this.deleteWindows(g,b):137===h?g=this.displayWindows(g,b):138===h?g=this.hideWindows(g,b):139===h?g=this.toggleWindows(g,b):151===h?g=this.setWindowAttributes(g,b):144===h?g=this.setPenAttributes(g,b):145===h?g=this.setPenColor(g,b):146===h?g=this.setPenLocation(g,b):143===h?b=this.reset(g,b):8===h?b.currentWindow.backspace():12===h?b.currentWindow.clearText():13===h?b.currentWindow.pendingNewLine=!0:14===h?b.currentWindow.clearText():141===h&&g++},Dt.prototype.extendedCommands=function(E,d){var h=this.current708Packet.data[++E];return vs(h)&&(E=this.handleText(E,d,{isExtended:!0})),E},Dt.prototype.getPts=function(E){return this.current708Packet.ptsVals[Math.floor(E/2)]},Dt.prototype.initService=function(E,d){var h,g,f=this;return(h="SERVICE"+E)in this.serviceEncodings&&(g=this.serviceEncodings[h]),this.services[E]=new ys(E,g,f),this.services[E].init(this.getPts(d),function(T){f.flushDisplayed(T,f.services[E])}),this.services[E]},Dt.prototype.handleText=function(E,d,f){var F,H,h=f&&f.isExtended,T=this.current708Packet.data,b=h?4096:0,L=T[E],B=d.currentWindow;return d.textDecoder_&&!h?(f&&f.isMultiByte?(H=[L,T[E+1]],E++):H=[L],F=d.textDecoder_.decode(new Uint8Array(H))):F=function(d){var f=hv[d]||d;return 4096&d&&d===f?"":String.fromCharCode(f)}(b|L),B.pendingNewLine&&!B.isEmpty()&&B.newLine(this.getPts(E)),B.pendingNewLine=!1,B.addText(F),E},Dt.prototype.multiByteCharacter=function(E,d){var f=this.current708Packet.data,g=f[E+2];return vs(f[E+1])&&vs(g)&&(E=this.handleText(++E,d,{isMultiByte:!0})),E},Dt.prototype.setCurrentWindow=function(E,d){return d.setCurrentWindow(7&this.current708Packet.data[E]),E},Dt.prototype.defineWindow=function(E,d){var f=this.current708Packet.data,h=f[E];d.setCurrentWindow(7&h);var T=d.currentWindow;return h=f[++E],T.visible=(32&h)>>5,T.rowLock=(16&h)>>4,T.columnLock=(8&h)>>3,T.priority=7&h,h=f[++E],T.relativePositioning=(128&h)>>7,T.anchorVertical=127&h,h=f[++E],T.anchorHorizontal=h,h=f[++E],T.anchorPoint=(240&h)>>4,T.rowCount=15&h,h=f[++E],T.columnCount=63&h,h=f[++E],T.windowStyle=(56&h)>>3,T.penStyle=7&h,T.virtualRowCount=T.rowCount+1,E},Dt.prototype.setWindowAttributes=function(E,d){var f=this.current708Packet.data,h=f[E],g=d.currentWindow.winAttr;return h=f[++E],g.fillOpacity=(192&h)>>6,g.fillRed=(48&h)>>4,g.fillGreen=(12&h)>>2,g.fillBlue=3&h,h=f[++E],g.borderType=(192&h)>>6,g.borderRed=(48&h)>>4,g.borderGreen=(12&h)>>2,g.borderBlue=3&h,h=f[++E],g.borderType+=(128&h)>>5,g.wordWrap=(64&h)>>6,g.printDirection=(48&h)>>4,g.scrollDirection=(12&h)>>2,g.justify=3&h,h=f[++E],g.effectSpeed=(240&h)>>4,g.effectDirection=(12&h)>>2,g.displayEffect=3&h,E},Dt.prototype.flushDisplayed=function(E,d){for(var f=[],h=0;h<8;h++)d.windows[h].visible&&!d.windows[h].isEmpty()&&f.push(d.windows[h].getText());d.endPts=E,d.text=f.join("\n\n"),this.pushCaption(d),d.startPts=E},Dt.prototype.pushCaption=function(E){""!==E.text&&(this.trigger("data",{startPts:E.startPts,endPts:E.endPts,text:E.text,stream:"cc708_"+E.serviceNum}),E.text="",E.startPts=E.endPts)},Dt.prototype.displayWindows=function(E,d){var h=this.current708Packet.data[++E],g=this.getPts(E);this.flushDisplayed(g,d);for(var T=0;T<8;T++)h&1<<T&&(d.windows[T].visible=1);return E},Dt.prototype.hideWindows=function(E,d){var h=this.current708Packet.data[++E],g=this.getPts(E);this.flushDisplayed(g,d);for(var T=0;T<8;T++)h&1<<T&&(d.windows[T].visible=0);return E},Dt.prototype.toggleWindows=function(E,d){var h=this.current708Packet.data[++E],g=this.getPts(E);this.flushDisplayed(g,d);for(var T=0;T<8;T++)h&1<<T&&(d.windows[T].visible^=1);return E},Dt.prototype.clearWindows=function(E,d){var h=this.current708Packet.data[++E],g=this.getPts(E);this.flushDisplayed(g,d);for(var T=0;T<8;T++)h&1<<T&&d.windows[T].clearText();return E},Dt.prototype.deleteWindows=function(E,d){var h=this.current708Packet.data[++E],g=this.getPts(E);this.flushDisplayed(g,d);for(var T=0;T<8;T++)h&1<<T&&d.windows[T].reset();return E},Dt.prototype.setPenAttributes=function(E,d){var f=this.current708Packet.data,h=f[E],g=d.currentWindow.penAttr;return h=f[++E],g.textTag=(240&h)>>4,g.offset=(12&h)>>2,g.penSize=3&h,h=f[++E],g.italics=(128&h)>>7,g.underline=(64&h)>>6,g.edgeType=(56&h)>>3,g.fontStyle=7&h,E},Dt.prototype.setPenColor=function(E,d){var f=this.current708Packet.data,h=f[E],g=d.currentWindow.penColor;return h=f[++E],g.fgOpacity=(192&h)>>6,g.fgRed=(48&h)>>4,g.fgGreen=(12&h)>>2,g.fgBlue=3&h,h=f[++E],g.bgOpacity=(192&h)>>6,g.bgRed=(48&h)>>4,g.bgGreen=(12&h)>>2,g.bgBlue=3&h,h=f[++E],g.edgeRed=(48&h)>>4,g.edgeGreen=(12&h)>>2,g.edgeBlue=3&h,E},Dt.prototype.setPenLocation=function(E,d){var f=this.current708Packet.data,h=f[E],g=d.currentWindow.penLoc;return d.currentWindow.pendingNewLine=!0,h=f[++E],g.row=15&h,h=f[++E],g.column=63&h,E},Dt.prototype.reset=function(E,d){var f=this.getPts(E);return this.flushDisplayed(f,d),this.initService(d.serviceNum,E)};var pv={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},_s=function(d){return null===d?"":(d=pv[d]||d,String.fromCharCode(d))},gv=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],en=function(){for(var d=[],f=15;f--;)d.push("");return d},$t=function E(d,f){E.prototype.init.call(this),this.field_=d||0,this.dataChannel_=f||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(h){var g,T,b,L,R;if((g=32639&h.ccData)!==this.lastControlCode_){if(4096==(61440&g)?this.lastControlCode_=g:g!==this.PADDING_&&(this.lastControlCode_=null),b=g>>>8,L=255&g,g!==this.PADDING_)if(g===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(g===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(h.pts),this.flushDisplayed(h.pts),T=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=T,this.startPts_=h.pts;else if(g===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(h.pts);else if(g===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(h.pts);else if(g===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(h.pts);else if(g===this.CARRIAGE_RETURN_)this.clearFormatting(h.pts),this.flushDisplayed(h.pts),this.shiftRowsUp_(),this.startPts_=h.pts;else if(g===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(g===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(h.pts),this.displayed_=en();else if(g===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=en();else if(g===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(h.pts),this.displayed_=en()),this.mode_="paintOn",this.startPts_=h.pts;else if(this.isSpecialCharacter(b,L))R=_s((b=(3&b)<<8)|L),this[this.mode_](h.pts,R),this.column_++;else if(this.isExtCharacter(b,L))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),R=_s((b=(3&b)<<8)|L),this[this.mode_](h.pts,R),this.column_++;else if(this.isMidRowCode(b,L))this.clearFormatting(h.pts),this[this.mode_](h.pts," "),this.column_++,14==(14&L)&&this.addFormatting(h.pts,["i"]),1==(1&L)&&this.addFormatting(h.pts,["u"]);else if(this.isOffsetControlCode(b,L))this.column_+=3&L;else if(this.isPAC(b,L)){var B=gv.indexOf(7968&g);"rollUp"===this.mode_&&(B-this.rollUpRows_+1<0&&(B=this.rollUpRows_-1),this.setRollUp(h.pts,B)),B!==this.row_&&(this.clearFormatting(h.pts),this.row_=B),1&L&&-1===this.formatting_.indexOf("u")&&this.addFormatting(h.pts,["u"]),16==(16&g)&&(this.column_=4*((14&g)>>1)),this.isColorPAC(L)&&14==(14&L)&&this.addFormatting(h.pts,["i"])}else this.isNormalChar(b)&&(0===L&&(L=null),R=_s(b),R+=_s(L),this[this.mode_](h.pts,R),this.column_+=R.length)}else this.lastControlCode_=null}};$t.prototype=new i,$t.prototype.flushDisplayed=function(E){var d=this.displayed_.map(function(f,h){try{return f.trim()}catch(g){return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+h+"."}),""}},this).join("\n").replace(/^\n+|\n+$/g,"");d.length&&this.trigger("data",{startPts:this.startPts_,endPts:E,text:d,stream:this.name_})},$t.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=en(),this.nonDisplayed_=en(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},$t.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},$t.prototype.isSpecialCharacter=function(E,d){return E===this.EXT_&&d>=48&&d<=63},$t.prototype.isExtCharacter=function(E,d){return(E===this.EXT_+1||E===this.EXT_+2)&&d>=32&&d<=63},$t.prototype.isMidRowCode=function(E,d){return E===this.EXT_&&d>=32&&d<=47},$t.prototype.isOffsetControlCode=function(E,d){return E===this.OFFSET_&&d>=33&&d<=35},$t.prototype.isPAC=function(E,d){return E>=this.BASE_&&E<this.BASE_+8&&d>=64&&d<=127},$t.prototype.isColorPAC=function(E){return E>=64&&E<=79||E>=96&&E<=127},$t.prototype.isNormalChar=function(E){return E>=32&&E<=127},$t.prototype.setRollUp=function(E,d){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(E),this.nonDisplayed_=en(),this.displayed_=en()),void 0!==d&&d!==this.row_)for(var f=0;f<this.rollUpRows_;f++)this.displayed_[d-f]=this.displayed_[this.row_-f],this.displayed_[this.row_-f]="";void 0===d&&(d=this.row_),this.topRow_=d-this.rollUpRows_+1},$t.prototype.addFormatting=function(E,d){this.formatting_=this.formatting_.concat(d);var f=d.reduce(function(h,g){return h+"<"+g+">"},"");this[this.mode_](E,f)},$t.prototype.clearFormatting=function(E){if(this.formatting_.length){var d=this.formatting_.reverse().reduce(function(f,h){return f+"</"+h+">"},"");this.formatting_=[],this[this.mode_](E,d)}},$t.prototype.popOn=function(E,d){var f=this.nonDisplayed_[this.row_];this.nonDisplayed_[this.row_]=f+=d},$t.prototype.rollUp=function(E,d){var f=this.displayed_[this.row_];this.displayed_[this.row_]=f+=d},$t.prototype.shiftRowsUp_=function(){var E;for(E=0;E<this.topRow_;E++)this.displayed_[E]="";for(E=this.row_+1;E<15;E++)this.displayed_[E]="";for(E=this.topRow_;E<this.row_;E++)this.displayed_[E]=this.displayed_[E+1];this.displayed_[this.row_]=""},$t.prototype.paintOn=function(E,d){var f=this.displayed_[this.row_];this.displayed_[this.row_]=f+=d};var bs={CaptionStream:Ri,Cea608Stream:$t,Cea708Stream:Dt},di={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Bl=function(d,f){var h=1;for(d>f&&(h=-1);Math.abs(f-d)>4294967296;)d+=8589934592*h;return d},Xc=function E(d){var f,h;E.prototype.init.call(this),this.type_=d||"shared",this.push=function(g){"shared"!==this.type_&&g.type!==this.type_||(void 0===h&&(h=g.dts),g.dts=Bl(g.dts,h),g.pts=Bl(g.pts,h),f=g.dts,this.trigger("data",g))},this.flush=function(){h=f,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){h=void 0,f=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Xc.prototype=new i;var Cs,Qc_TimestampRolloverStream=Xc,Qc_handleRollover=Bl,Yc=function(d,f,h){var g,T="";for(g=f;g<h;g++)T+="%"+("00"+d[g].toString(16)).slice(-2);return T},Ss=function(d,f,h){return decodeURIComponent(Yc(d,f,h))},yv=function(d,f,h){return unescape(Yc(d,f,h))},xs=function(d){return d[0]<<21|d[1]<<14|d[2]<<7|d[3]},Jc={TXXX:function(d){var f;if(3===d.data[0]){for(f=1;f<d.data.length;f++)if(0===d.data[f]){d.description=Ss(d.data,1,f),d.value=Ss(d.data,f+1,d.data.length).replace(/\0*$/,"");break}d.data=d.value}},WXXX:function(d){var f;if(3===d.data[0])for(f=1;f<d.data.length;f++)if(0===d.data[f]){d.description=Ss(d.data,1,f),d.url=Ss(d.data,f+1,d.data.length);break}},PRIV:function(d){var f;for(f=0;f<d.data.length;f++)if(0===d.data[f]){d.owner=yv(d.data,0,f);break}d.privateData=d.data.subarray(f+1),d.data=d.privateData}};Cs=function(d){var b,f={descriptor:d&&d.descriptor},h=0,g=[],T=0;if(Cs.prototype.init.call(this),this.dispatchType=di.METADATA_STREAM_TYPE.toString(16),f.descriptor)for(b=0;b<f.descriptor.length;b++)this.dispatchType+=("00"+f.descriptor[b].toString(16)).slice(-2);this.push=function(L){var R,B,F,H,ne;if("timed-metadata"===L.type){if(L.dataAlignmentIndicator&&(T=0,g.length=0),0===g.length&&(L.data.length<10||L.data[0]!=="I".charCodeAt(0)||L.data[1]!=="D".charCodeAt(0)||L.data[2]!=="3".charCodeAt(0)))return void this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});if(g.push(L),T+=L.data.byteLength,1===g.length&&(h=xs(L.data.subarray(6,10)),h+=10),!(T<h)){for(R={data:new Uint8Array(h),frames:[],pts:g[0].pts,dts:g[0].dts},ne=0;ne<h;)R.data.set(g[0].data.subarray(0,h-ne),ne),ne+=g[0].data.byteLength,T-=g[0].data.byteLength,g.shift();B=10,64&R.data[5]&&(B+=4,B+=xs(R.data.subarray(10,14)),h-=xs(R.data.subarray(16,20)));do{if((F=xs(R.data.subarray(B+4,B+8)))<1)return void this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping metadata parsing."});if((H={id:String.fromCharCode(R.data[B],R.data[B+1],R.data[B+2],R.data[B+3]),data:R.data.subarray(B+10,B+F+10)}).key=H.id,Jc[H.id]&&(Jc[H.id](H),"com.apple.streaming.transportStreamTimestamp"===H.owner)){var Ze=H.data,Re=(1&Ze[3])<<30|Ze[4]<<22|Ze[5]<<14|Ze[6]<<6|Ze[7]>>>2;Re*=4,H.timeStamp=Re+=3&Ze[7],void 0===R.pts&&void 0===R.dts&&(R.pts=H.timeStamp,R.dts=H.timeStamp),this.trigger("timestamp",H)}R.frames.push(H),B+=10,B+=F}while(B<h);this.trigger("data",R)}}}},Cs.prototype=new i;var Es,ga,As,_v=Cs,Tv=Qc_TimestampRolloverStream;Es=function(){var d=new Uint8Array(188),f=0;Es.prototype.init.call(this),this.push=function(h){var b,g=0,T=188;for(f?((b=new Uint8Array(h.byteLength+f)).set(d.subarray(0,f)),b.set(h,f),f=0):b=h;T<b.byteLength;)71!==b[g]||71!==b[T]?(g++,T++):(this.trigger("data",b.subarray(g,T)),g+=188,T+=188);g<b.byteLength&&(d.set(b.subarray(g),0),f=b.byteLength-g)},this.flush=function(){188===f&&71===d[0]&&(this.trigger("data",d),f=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){f=0,this.trigger("reset")}},Es.prototype=new i,ga=function(){var d,f,h,g;ga.prototype.init.call(this),g=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,d=function(b,L){var R=0;L.payloadUnitStartIndicator&&(R+=b[R]+1),"pat"===L.type?f(b.subarray(R),L):h(b.subarray(R),L)},f=function(b,L){L.section_number=b[7],L.last_section_number=b[8],g.pmtPid=(31&b[10])<<8|b[11],L.pmtPid=g.pmtPid},h=function(b,L){var B,H;if(1&b[5]){for(g.programMapTable={video:null,audio:null,"timed-metadata":{}},B=3+((15&b[1])<<8|b[2])-4,H=12+((15&b[10])<<8|b[11]);H<B;){var ne=b[H],$e=(31&b[H+1])<<8|b[H+2];ne===di.H264_STREAM_TYPE&&null===g.programMapTable.video?g.programMapTable.video=$e:ne===di.ADTS_STREAM_TYPE&&null===g.programMapTable.audio?g.programMapTable.audio=$e:ne===di.METADATA_STREAM_TYPE&&(g.programMapTable["timed-metadata"][$e]=ne),H+=5+((15&b[H+3])<<8|b[H+4])}L.programMapTable=g.programMapTable}},this.push=function(T){var b={},L=4;if(b.payloadUnitStartIndicator=!!(64&T[1]),b.pid=31&T[1],b.pid<<=8,b.pid|=T[2],(48&T[3])>>>4>1&&(L+=T[L]+1),0===b.pid)b.type="pat",d(T.subarray(L),b),this.trigger("data",b);else if(b.pid===this.pmtPid)for(b.type="pmt",d(T.subarray(L),b),this.trigger("data",b);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([T,L,b]):this.processPes_(T,L,b)},this.processPes_=function(T,b,L){L.streamType=L.pid===this.programMapTable.video?di.H264_STREAM_TYPE:L.pid===this.programMapTable.audio?di.ADTS_STREAM_TYPE:this.programMapTable["timed-metadata"][L.pid],L.type="pes",L.data=T.subarray(b),this.trigger("data",L)}},ga.prototype=new i,ga.STREAM_TYPES={h264:27,adts:15},As=function(){var b,d=this,f=!1,h={data:[],size:0},g={data:[],size:0},T={data:[],size:0},R=function(F,H,ne){var Ai,$e=new Uint8Array(F.size),Ze={type:H},Re=0,ot=0,ti=!1;if(F.data.length&&!(F.size<9)){for(Ze.trackId=F.data[0].pid,Re=0;Re<F.data.length;Re++)$e.set((Ai=F.data[Re]).data,ot),ot+=Ai.data.byteLength;(function(F,H){var ne,$e=F[0]<<16|F[1]<<8|F[2];H.data=new Uint8Array,1===$e&&(H.packetLength=6+(F[4]<<8|F[5]),H.dataAlignmentIndicator=0!=(4&F[6]),192&(ne=F[7])&&(H.pts=(14&F[9])<<27|(255&F[10])<<20|(254&F[11])<<12|(255&F[12])<<5|(254&F[13])>>>3,H.pts*=4,H.pts+=(6&F[13])>>>1,H.dts=H.pts,64&ne&&(H.dts=(14&F[14])<<27|(255&F[15])<<20|(254&F[16])<<12|(255&F[17])<<5|(254&F[18])>>>3,H.dts*=4,H.dts+=(6&F[18])>>>1)),H.data=F.subarray(9+F[8]))})($e,Ze),ti="video"===H||Ze.packetLength<=F.size,(ne||ti)&&(F.size=0,F.data.length=0),ti&&d.trigger("data",Ze)}};As.prototype.init.call(this),this.push=function(B){({pat:function(){},pes:function(){var H,ne;switch(B.streamType){case di.H264_STREAM_TYPE:H=h,ne="video";break;case di.ADTS_STREAM_TYPE:H=g,ne="audio";break;case di.METADATA_STREAM_TYPE:H=T,ne="timed-metadata";break;default:return}B.payloadUnitStartIndicator&&R(H,ne,!0),H.data.push(B),H.size+=B.data.byteLength},pmt:function(){var H={type:"metadata",tracks:[]};null!==(b=B.programMapTable).video&&H.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+b.video,codec:"avc",type:"video"}),null!==b.audio&&H.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+b.audio,codec:"adts",type:"audio"}),f=!0,d.trigger("data",H)}})[B.type]()},this.reset=function(){h.size=0,h.data.length=0,g.size=0,g.data.length=0,this.trigger("reset")},this.flushStreams_=function(){R(h,"video"),R(g,"audio"),R(T,"timed-metadata")},this.flush=function(){if(!f&&b){var B={type:"metadata",tracks:[]};null!==b.video&&B.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+b.video,codec:"avc",type:"video"}),null!==b.audio&&B.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+b.audio,codec:"adts",type:"audio"}),d.trigger("data",B)}f=!1,this.flushStreams_(),this.trigger("done")}},As.prototype=new i;var Zc={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:Es,TransportParseStream:ga,ElementaryStream:As,TimestampRolloverStream:Tv,CaptionStream:bs.CaptionStream,Cea608Stream:bs.Cea608Stream,Cea708Stream:bs.Cea708Stream,MetadataStream:_v};for(var jl in di)di.hasOwnProperty(jl)&&(Zc[jl]=di[jl]);var Ps,br=Zc,eh=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];Ps=function(d){var f,h=0;Ps.prototype.init.call(this),this.skipWarn_=function(g,T){this.trigger("log",{level:"warn",message:"adts skiping bytes "+g+" to "+T+" in frame "+h+" outside syncword"})},this.push=function(g){var b,L,R,B,F,T=0;if(d||(h=0),"audio"===g.type){f&&f.length?(R=f,(f=new Uint8Array(R.byteLength+g.data.byteLength)).set(R),f.set(g.data,R.byteLength)):f=g.data;for(var H;T+7<f.length;)if(255===f[T]&&240==(246&f[T+1])){if("number"==typeof H&&(this.skipWarn_(H,T),H=null),L=2*(1&~f[T+1]),F=9e4*(B=1024*(1+(3&f[T+6])))/eh[(60&f[T+2])>>>2],f.byteLength-T<(b=(3&f[T+3])<<11|f[T+4]<<3|(224&f[T+5])>>5))break;this.trigger("data",{pts:g.pts+h*F,dts:g.dts+h*F,sampleCount:B,audioobjecttype:1+(f[T+2]>>>6&3),channelcount:(1&f[T+2])<<2|(192&f[T+3])>>>6,samplerate:eh[(60&f[T+2])>>>2],samplingfrequencyindex:(60&f[T+2])>>>2,samplesize:16,data:f.subarray(T+7+L,T+b)}),h++,T+=b}else"number"!=typeof H&&(H=T),T++;"number"==typeof H&&(this.skipWarn_(H,T),H=null),f=f.subarray(T)}},this.flush=function(){h=0,this.trigger("done")},this.reset=function(){f=void 0,this.trigger("reset")},this.endTimeline=function(){f=void 0,this.trigger("endedtimeline")}},Ps.prototype=new i;var ih,th=Ps;ih=function(d){var f=d.byteLength,h=0,g=0;this.length=function(){return 8*f},this.bitsAvailable=function(){return 8*f+g},this.loadWord=function(){var T=d.byteLength-f,b=new Uint8Array(4),L=Math.min(4,f);if(0===L)throw new Error("no bytes available");b.set(d.subarray(T,T+L)),h=new DataView(b.buffer).getUint32(0),g=8*L,f-=L},this.skipBits=function(T){var b;g>T?(h<<=T,g-=T):(T-=g,T-=8*(b=Math.floor(T/8)),f-=b,this.loadWord(),h<<=T,g-=T)},this.readBits=function(T){var b=Math.min(g,T),L=h>>>32-b;return(g-=b)>0?h<<=b:f>0&&this.loadWord(),(b=T-b)>0?L<<b|this.readBits(b):L},this.skipLeadingZeros=function(){var T;for(T=0;T<g;++T)if(0!=(h&2147483648>>>T))return h<<=T,g-=T,T;return this.loadWord(),T+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var T=this.skipLeadingZeros();return this.readBits(T+1)-1},this.readExpGolomb=function(){var T=this.readUnsignedExpGolomb();return 1&T?1+T>>>1:-1*(T>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var ws,ma,rh,Sv=ih;ma=function(){var f,h,d=0;ma.prototype.init.call(this),this.push=function(g){var T;h?((T=new Uint8Array(h.byteLength+g.data.byteLength)).set(h),T.set(g.data,h.byteLength),h=T):h=g.data;for(var b=h.byteLength;d<b-3;d++)if(1===h[d+2]){f=d+5;break}for(;f<b;)switch(h[f]){case 0:if(0!==h[f-1]){f+=2;break}if(0!==h[f-2]){f++;break}d+3!==f-2&&this.trigger("data",h.subarray(d+3,f-2));do{f++}while(1!==h[f]&&f<b);d=f-2,f+=3;break;case 1:if(0!==h[f-1]||0!==h[f-2]){f+=3;break}this.trigger("data",h.subarray(d+3,f-2)),d=f-2,f+=3;break;default:f+=3}h=h.subarray(d),f-=d,d=0},this.reset=function(){h=null,d=0,this.trigger("reset")},this.flush=function(){h&&h.byteLength>3&&this.trigger("data",h.subarray(d+3)),h=null,d=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},ma.prototype=new i,rh={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},ws=function(){var f,h,g,T,b,L,R,d=new ma;ws.prototype.init.call(this),f=this,this.push=function(B){"video"===B.type&&(h=B.trackId,g=B.pts,T=B.dts,d.push(B))},d.on("data",function(B){var F={trackId:h,pts:g,dts:T,data:B,nalUnitTypeCode:31&B[0]};switch(F.nalUnitTypeCode){case 5:F.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:F.nalUnitType="sei_rbsp",F.escapedRBSP=b(B.subarray(1));break;case 7:F.nalUnitType="seq_parameter_set_rbsp",F.escapedRBSP=b(B.subarray(1)),F.config=L(F.escapedRBSP);break;case 8:F.nalUnitType="pic_parameter_set_rbsp";break;case 9:F.nalUnitType="access_unit_delimiter_rbsp"}f.trigger("data",F)}),d.on("done",function(){f.trigger("done")}),d.on("partialdone",function(){f.trigger("partialdone")}),d.on("reset",function(){f.trigger("reset")}),d.on("endedtimeline",function(){f.trigger("endedtimeline")}),this.flush=function(){d.flush()},this.partialFlush=function(){d.partialFlush()},this.reset=function(){d.reset()},this.endTimeline=function(){d.endTimeline()},R=function(F,H){var Ze,ne=8,$e=8;for(Ze=0;Ze<F;Ze++)0!==$e&&($e=(ne+H.readExpGolomb()+256)%256),ne=0===$e?ne:$e},b=function(F){for(var Ze,Re,H=F.byteLength,ne=[],$e=1;$e<H-2;)0===F[$e]&&0===F[$e+1]&&3===F[$e+2]?(ne.push($e+2),$e+=2):$e++;if(0===ne.length)return F;Ze=H-ne.length,Re=new Uint8Array(Ze);var ot=0;for($e=0;$e<Ze;ot++,$e++)ot===ne[0]&&(ot++,ne.shift()),Re[$e]=F[ot];return Re},L=function(F){var Re,ot,ti,Ai,an,zl,Sh,xh,Ch,Gl,Eh,sn,H=0,ne=0,$e=0,Ze=0,Qt=[1,1];if(ot=(Re=new Sv(F)).readUnsignedByte(),Ai=Re.readUnsignedByte(),ti=Re.readUnsignedByte(),Re.skipUnsignedExpGolomb(),rh[ot]&&(3===(an=Re.readUnsignedExpGolomb())&&Re.skipBits(1),Re.skipUnsignedExpGolomb(),Re.skipUnsignedExpGolomb(),Re.skipBits(1),Re.readBoolean()))for(Eh=3!==an?8:12,sn=0;sn<Eh;sn++)Re.readBoolean()&&R(sn<6?16:64,Re);if(Re.skipUnsignedExpGolomb(),0===(zl=Re.readUnsignedExpGolomb()))Re.readUnsignedExpGolomb();else if(1===zl)for(Re.skipBits(1),Re.skipExpGolomb(),Re.skipExpGolomb(),Sh=Re.readUnsignedExpGolomb(),sn=0;sn<Sh;sn++)Re.skipExpGolomb();if(Re.skipUnsignedExpGolomb(),Re.skipBits(1),xh=Re.readUnsignedExpGolomb(),Ch=Re.readUnsignedExpGolomb(),0===(Gl=Re.readBits(1))&&Re.skipBits(1),Re.skipBits(1),Re.readBoolean()&&(H=Re.readUnsignedExpGolomb(),ne=Re.readUnsignedExpGolomb(),$e=Re.readUnsignedExpGolomb(),Ze=Re.readUnsignedExpGolomb()),Re.readBoolean()&&Re.readBoolean())switch(Re.readUnsignedByte()){case 1:Qt=[1,1];break;case 2:Qt=[12,11];break;case 3:Qt=[10,11];break;case 4:Qt=[16,11];break;case 5:Qt=[40,33];break;case 6:Qt=[24,11];break;case 7:Qt=[20,11];break;case 8:Qt=[32,11];break;case 9:Qt=[80,33];break;case 10:Qt=[18,11];break;case 11:Qt=[15,11];break;case 12:Qt=[64,33];break;case 13:Qt=[160,99];break;case 14:Qt=[4,3];break;case 15:Qt=[3,2];break;case 16:Qt=[2,1];break;case 255:Qt=[Re.readUnsignedByte()<<8|Re.readUnsignedByte(),Re.readUnsignedByte()<<8|Re.readUnsignedByte()]}return{profileIdc:ot,levelIdc:ti,profileCompatibility:Ai,width:16*(xh+1)-2*H-2*ne,height:(2-Gl)*(Ch+1)*16-2*$e-2*Ze,sarRatio:Qt}}},ws.prototype=new i;var Is,xv={H264Stream:ws,NalByteStream:ma},Cv=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],nh=function(d,f){var h=d[f+6]<<21|d[f+7]<<14|d[f+8]<<7|d[f+9];return h=h>=0?h:0,(16&d[f+5])>>4?h+20:h+10},Ev=function E(d,f){return d.length-f<10||d[f]!=="I".charCodeAt(0)||d[f+1]!=="D".charCodeAt(0)||d[f+2]!=="3".charCodeAt(0)?f:E(d,f+=nh(d,f))},ah=function(d){return d[0]<<21|d[1]<<14|d[2]<<7|d[3]},wv=function(d,f,h){return unescape(function(d,f,h){var g,T="";for(g=f;g<h;g++)T+="%"+("00"+d[g].toString(16)).slice(-2);return T}(d,f,h))},ks={isLikelyAacData:function(d){var f=Ev(d,0);return d.length>=f+2&&255==(255&d[f])&&240==(240&d[f+1])&&16==(22&d[f+1])},parseId3TagSize:nh,parseAdtsSize:function(d,f){return 6144&d[f+3]|d[f+4]<<3|(224&d[f+5])>>5},parseType:function(d,f){return d[f]==="I".charCodeAt(0)&&d[f+1]==="D".charCodeAt(0)&&d[f+2]==="3".charCodeAt(0)?"timed-metadata":!0&d[f]&&240==(240&d[f+1])?"audio":null},parseSampleRate:function(d){for(var f=0;f+5<d.length;){if(255===d[f]&&240==(246&d[f+1]))return Cv[(60&d[f+2])>>>2];f++}return null},parseAacTimestamp:function(d){var f,h,g;f=10,64&d[5]&&(f+=4,f+=ah(d.subarray(10,14)));do{if((h=ah(d.subarray(f+4,f+8)))<1)return null;if("PRIV"===String.fromCharCode(d[f],d[f+1],d[f+2],d[f+3])){g=d.subarray(f+10,f+h+10);for(var b=0;b<g.byteLength;b++)if(0===g[b]){if("com.apple.streaming.transportStreamTimestamp"===wv(g,0,b)){var R=g.subarray(b+1),B=(1&R[3])<<30|R[4]<<22|R[5]<<14|R[6]<<6|R[7]>>>2;return(B*=4)+(3&R[7])}break}}f+=10,f+=h}while(f<d.byteLength);return null}};Is=function(){var d=new Uint8Array,f=0;Is.prototype.init.call(this),this.setTimestamp=function(h){f=h},this.push=function(h){var L,R,B,g=0,T=0;for(d.length?(B=d.length,(d=new Uint8Array(h.byteLength+B)).set(d.subarray(0,B)),d.set(h,B)):d=h;d.length-T>=3;)if(d[T]!=="I".charCodeAt(0)||d[T+1]!=="D".charCodeAt(0)||d[T+2]!=="3".charCodeAt(0))if(255!=(255&d[T])||240!=(240&d[T+1]))T++;else{if(d.length-T<7||T+(g=ks.parseAdtsSize(d,T))>d.length)break;R={type:"audio",data:d.subarray(T,T+g),pts:f,dts:f},this.trigger("data",R),T+=g}else{if(d.length-T<10||T+(g=ks.parseId3TagSize(d,T))>d.length)break;L={type:"timed-metadata",data:d.subarray(T,T+g)},this.trigger("data",L),T+=g}d=d.length-T>0?d.subarray(T):new Uint8Array},this.reset=function(){d=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){d=new Uint8Array,this.trigger("endedtimeline")}},Is.prototype=new i;var va,Fn,Ls,tn,Mv=Is,Vl=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Hl=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],Nv=xv.H264Stream,Fv=ks.isLikelyAacData,Uv=function(d,f){f.stream=d,this.trigger("log",f)},sh=function(d,f){for(var h=Object.keys(f),g=0;g<h.length;g++){var T=h[g];"headOfPipeline"===T||!f[T].on||f[T].on("log",Uv.bind(d,T))}},oh=function(d,f){var h;if(d.length!==f.length)return!1;for(h=0;h<d.length;h++)if(d[h]!==f[h])return!1;return!0},$l=function(d,f,h,g,T,b){return{start:{dts:d,pts:d+(h-f)},end:{dts:d+(g-f),pts:d+(T-h)},prependedContentDuration:b,baseMediaDecodeTime:d}};Fn=function(d,f){var g,h=[],T=0,b=0,L=1/0;g=(f=f||{}).firstSequenceNumber||0,Fn.prototype.init.call(this),this.push=function(R){Xi_collectDtsInfo(d,R),d&&Vl.forEach(function(B){d[B]=R[B]}),h.push(R)},this.setEarliestDts=function(R){T=R},this.setVideoBaseMediaDecodeTime=function(R){L=R},this.setAudioAppendStart=function(R){b=R},this.flush=function(){var R,B,F,H,ne,$e,Ze;0!==h.length?(R=function(d,f,h){return f.minSegmentDts>=h?d:(f.minSegmentDts=1/0,d.filter(function(g){return g.dts>=h&&(f.minSegmentDts=Math.min(f.minSegmentDts,g.dts),f.minSegmentPts=f.minSegmentDts,!0)}))}(h,d,T),d.baseMediaDecodeTime=Xi_calculateTrackBaseMediaDecodeTime(d,f.keepOriginalTimestamps),Ze=ms_prefixWithSilence(d,R,b,L),d.samples=function(d){var f,g=[];for(f=0;f<d.length;f++)g.push({size:d[f].data.byteLength,duration:1024});return g}(R),F=ir_mdat(function(d){var f,h,g=0,T=new Uint8Array(function(d){var f,g=0;for(f=0;f<d.length;f++)g+=d[f].data.byteLength;return g}(d));for(f=0;f<d.length;f++)T.set((h=d[f]).data,g),g+=h.data.byteLength;return T}(R)),h=[],B=ir_moof(g,[d]),H=new Uint8Array(B.byteLength+F.byteLength),g++,H.set(B),H.set(F,B.byteLength),Xi_clearDtsInfo(d),ne=Math.ceil(9216e4/d.samplerate),R.length&&($e=R.length*ne,this.trigger("segmentTimingInfo",$l(xt_audioTsToVideoTs(d.baseMediaDecodeTime,d.samplerate),R[0].dts,R[0].pts,R[0].dts+$e,R[0].pts+$e,Ze||0)),this.trigger("timingInfo",{start:R[0].pts,end:R[0].pts+$e})),this.trigger("data",{track:d,boxes:H}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){Xi_clearDtsInfo(d),h=[],this.trigger("reset")}},Fn.prototype=new i,va=function(d,f){var h,b,L,g=[],T=[];h=(f=f||{}).firstSequenceNumber||0,va.prototype.init.call(this),delete d.minPTS,this.gopCache_=[],this.push=function(R){Xi_collectDtsInfo(d,R),"seq_parameter_set_rbsp"===R.nalUnitType&&!b&&(b=R.config,d.sps=[R.data],Hl.forEach(function(B){d[B]=b[B]},this)),"pic_parameter_set_rbsp"===R.nalUnitType&&!L&&(L=R.data,d.pps=[R.data]),g.push(R)},this.flush=function(){for(var R,B,F,H,ne,$e,Re,ot,Ze=0;g.length&&"access_unit_delimiter_rbsp"!==g[0].nalUnitType;)g.shift();if(0===g.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(R=function(d){var f,h,g=[],T=[];for(T.byteLength=0,T.nalCount=0,T.duration=0,g.byteLength=0,f=0;f<d.length;f++)"access_unit_delimiter_rbsp"===(h=d[f]).nalUnitType?(g.length&&(g.duration=h.dts-g.dts,T.byteLength+=g.byteLength,T.nalCount+=g.length,T.duration+=g.duration,T.push(g)),(g=[h]).byteLength=h.data.byteLength,g.pts=h.pts,g.dts=h.dts):("slice_layer_without_partitioning_rbsp_idr"===h.nalUnitType&&(g.keyFrame=!0),g.duration=h.dts-g.dts,g.byteLength+=h.data.byteLength,g.push(h));return T.length&&(!g.duration||g.duration<=0)&&(g.duration=T[T.length-1].duration),T.byteLength+=g.byteLength,T.nalCount+=g.length,T.duration+=g.duration,T.push(g),T}(g),(F=function(d){var f,h,g=[],T=[];for(g.byteLength=0,g.nalCount=0,g.duration=0,g.pts=d[0].pts,g.dts=d[0].dts,T.byteLength=0,T.nalCount=0,T.duration=0,T.pts=d[0].pts,T.dts=d[0].dts,f=0;f<d.length;f++)(h=d[f]).keyFrame?(g.length&&(T.push(g),T.byteLength+=g.byteLength,T.nalCount+=g.nalCount,T.duration+=g.duration),(g=[h]).nalCount=h.length,g.byteLength=h.byteLength,g.pts=h.pts,g.dts=h.dts,g.duration=h.duration):(g.duration+=h.duration,g.nalCount+=h.length,g.byteLength+=h.byteLength,g.push(h));return T.length&&g.duration<=0&&(g.duration=T[T.length-1].duration),T.byteLength+=g.byteLength,T.nalCount+=g.nalCount,T.duration+=g.duration,T.push(g),T}(R))[0][0].keyFrame||((B=this.getGopForFusion_(g[0],d))?(Ze=B.duration,F.unshift(B),F.byteLength+=B.byteLength,F.nalCount+=B.nalCount,F.pts=B.pts,F.dts=B.dts,F.duration+=B.duration):F=function(d){var f;return!d[0][0].keyFrame&&d.length>1&&(f=d.shift(),d.byteLength-=f.byteLength,d.nalCount-=f.nalCount,d[0][0].dts=f.dts,d[0][0].pts=f.pts,d[0][0].duration+=f.duration),d}(F)),T.length){var ti;if(!(ti=f.alignGopsAtEnd?this.alignGopsAtEnd_(F):this.alignGopsAtStart_(F)))return this.gopCache_.unshift({gop:F.pop(),pps:d.pps,sps:d.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),g=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");Xi_clearDtsInfo(d),F=ti}Xi_collectDtsInfo(d,F),d.samples=function(d,f){var h,g,T,b,R=f||0,B=[];for(h=0;h<d.length;h++)for(b=d[h],g=0;g<b.length;g++)R+=(T=$c(b[g],R)).size,B.push(T);return B}(F),ne=ir_mdat(function(d){var f,h,g,T,b,L,R=0,ne=new Uint8Array(d.byteLength+4*d.nalCount),$e=new DataView(ne.buffer);for(f=0;f<d.length;f++)for(T=d[f],h=0;h<T.length;h++)for(b=T[h],g=0;g<b.length;g++)$e.setUint32(R,(L=b[g]).data.byteLength),ne.set(L.data,R+=4),R+=L.data.byteLength;return ne}(F)),d.baseMediaDecodeTime=Xi_calculateTrackBaseMediaDecodeTime(d,f.keepOriginalTimestamps),this.trigger("processedGopsInfo",F.map(function(Ai){return{pts:Ai.pts,dts:Ai.dts,byteLength:Ai.byteLength}})),this.trigger("segmentTimingInfo",$l(d.baseMediaDecodeTime,(Re=F[0]).dts,Re.pts,(ot=F[F.length-1]).dts+ot.duration,ot.pts+ot.duration,Ze)),this.trigger("timingInfo",{start:F[0].pts,end:F[F.length-1].pts+F[F.length-1].duration}),this.gopCache_.unshift({gop:F.pop(),pps:d.pps,sps:d.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),g=[],this.trigger("baseMediaDecodeTime",d.baseMediaDecodeTime),this.trigger("timelineStartInfo",d.timelineStartInfo),H=ir_moof(h,[d]),$e=new Uint8Array(H.byteLength+ne.byteLength),h++,$e.set(H),$e.set(ne,H.byteLength),this.trigger("data",{track:d,boxes:$e}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),g=[],this.gopCache_.length=0,T.length=0,this.trigger("reset")},this.resetStream_=function(){Xi_clearDtsInfo(d),b=void 0,L=void 0},this.getGopForFusion_=function(R){var ne,$e,Ze,Re,ot,H=1/0;for(ot=0;ot<this.gopCache_.length;ot++)Ze=(Re=this.gopCache_[ot]).gop,d.pps&&oh(d.pps[0],Re.pps[0])&&d.sps&&oh(d.sps[0],Re.sps[0])&&(Ze.dts<d.timelineStartInfo.dts||(ne=R.dts-Ze.dts-Ze.duration)>=-1e4&&ne<=45e3&&(!$e||H>ne)&&($e=Re,H=ne));return $e?$e.gop:null},this.alignGopsAtStart_=function(R){var B,F,H,ne,$e,Ze,Re,ot;for($e=R.byteLength,Ze=R.nalCount,Re=R.duration,B=F=0;B<T.length&&F<R.length&&(H=T[B]).pts!==(ne=R[F]).pts;)ne.pts>H.pts?B++:(F++,$e-=ne.byteLength,Ze-=ne.nalCount,Re-=ne.duration);return 0===F?R:F===R.length?null:((ot=R.slice(F)).byteLength=$e,ot.duration=Re,ot.nalCount=Ze,ot.pts=ot[0].pts,ot.dts=ot[0].dts,ot)},this.alignGopsAtEnd_=function(R){var B,F,H,ne,$e,Ze,Re;for(B=T.length-1,F=R.length-1,$e=null,Ze=!1;B>=0&&F>=0;){if((H=T[B]).pts===(ne=R[F]).pts){Ze=!0;break}H.pts>ne.pts?B--:(B===T.length-1&&($e=F),F--)}if(!Ze&&null===$e)return null;if(0===(Re=Ze?F:$e))return R;var ot=R.slice(Re),ti=ot.reduce(function(Ai,an){return Ai.byteLength+=an.byteLength,Ai.duration+=an.duration,Ai.nalCount+=an.nalCount,Ai},{byteLength:0,duration:0,nalCount:0});return ot.byteLength=ti.byteLength,ot.duration=ti.duration,ot.nalCount=ti.nalCount,ot.pts=ot[0].pts,ot.dts=ot[0].dts,ot},this.alignGopsWith=function(R){T=R}},va.prototype=new i,tn=function(d,f){this.numberOfTracks=0,this.metadataStream=f,this.remuxTracks=void 0===(d=d||{}).remux||!!d.remux,this.keepOriginalTimestamps="boolean"==typeof d.keepOriginalTimestamps&&d.keepOriginalTimestamps,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,tn.prototype.init.call(this),this.push=function(h){return h.text?this.pendingCaptions.push(h):h.frames?this.pendingMetadata.push(h):(this.pendingTracks.push(h.track),this.pendingBytes+=h.boxes.byteLength,"video"===h.track.type&&(this.videoTrack=h.track,this.pendingBoxes.push(h.boxes)),void("audio"===h.track.type&&(this.audioTrack=h.track,this.pendingBoxes.unshift(h.boxes))))}},tn.prototype=new i,tn.prototype.flush=function(E){var h,g,T,L,d=0,f={captions:[],captionStreams:{},metadata:[],info:{}},b=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==E&&"AudioSegmentStream"!==E)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(b=this.videoTrack.timelineStartInfo.pts,Hl.forEach(function(R){f.info[R]=this.videoTrack[R]},this)):this.audioTrack&&(b=this.audioTrack.timelineStartInfo.pts,Vl.forEach(function(R){f.info[R]=this.audioTrack[R]},this)),this.videoTrack||this.audioTrack){for(f.type=1===this.pendingTracks.length?this.pendingTracks[0].type:"combined",this.emittedTracks+=this.pendingTracks.length,T=function(d){var g,f=u(),h=I(d);return(g=new Uint8Array(f.byteLength+h.byteLength)).set(f),g.set(h,f.byteLength),g}(this.pendingTracks),f.initSegment=new Uint8Array(T.byteLength),f.initSegment.set(T),f.data=new Uint8Array(this.pendingBytes),L=0;L<this.pendingBoxes.length;L++)f.data.set(this.pendingBoxes[L],d),d+=this.pendingBoxes[L].byteLength;for(L=0;L<this.pendingCaptions.length;L++)(h=this.pendingCaptions[L]).startTime=xt_metadataTsToSeconds(h.startPts,b,this.keepOriginalTimestamps),h.endTime=xt_metadataTsToSeconds(h.endPts,b,this.keepOriginalTimestamps),f.captionStreams[h.stream]=!0,f.captions.push(h);for(L=0;L<this.pendingMetadata.length;L++)(g=this.pendingMetadata[L]).cueTime=xt_metadataTsToSeconds(g.pts,b,this.keepOriginalTimestamps),f.metadata.push(g);for(f.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",f),L=0;L<f.captions.length;L++)this.trigger("caption",h=f.captions[L]);for(L=0;L<f.metadata.length;L++)this.trigger("id3Frame",g=f.metadata[L])}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},tn.prototype.setRemux=function(E){this.remuxTracks=E},Ls=function(d){var g,T,f=this,h=!0;Ls.prototype.init.call(this),this.baseMediaDecodeTime=(d=d||{}).baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var b={};this.transmuxPipeline_=b,b.type="aac",b.metadataStream=new br.MetadataStream,b.aacStream=new Mv,b.audioTimestampRolloverStream=new br.TimestampRolloverStream("audio"),b.timedMetadataTimestampRolloverStream=new br.TimestampRolloverStream("timed-metadata"),b.adtsStream=new th,b.coalesceStream=new tn(d,b.metadataStream),b.headOfPipeline=b.aacStream,b.aacStream.pipe(b.audioTimestampRolloverStream).pipe(b.adtsStream),b.aacStream.pipe(b.timedMetadataTimestampRolloverStream).pipe(b.metadataStream).pipe(b.coalesceStream),b.metadataStream.on("timestamp",function(L){b.aacStream.setTimestamp(L.timeStamp)}),b.aacStream.on("data",function(L){"timed-metadata"!==L.type&&"audio"!==L.type||b.audioSegmentStream||(T=T||{timelineStartInfo:{baseMediaDecodeTime:f.baseMediaDecodeTime},codec:"adts",type:"audio"},b.coalesceStream.numberOfTracks++,b.audioSegmentStream=new Fn(T,d),b.audioSegmentStream.on("log",f.getLogTrigger_("audioSegmentStream")),b.audioSegmentStream.on("timingInfo",f.trigger.bind(f,"audioTimingInfo")),b.adtsStream.pipe(b.audioSegmentStream).pipe(b.coalesceStream),f.trigger("trackinfo",{hasAudio:!!T,hasVideo:!!g}))}),b.coalesceStream.on("data",this.trigger.bind(this,"data")),b.coalesceStream.on("done",this.trigger.bind(this,"done")),sh(this,b)},this.setupTsPipeline=function(){var b={};this.transmuxPipeline_=b,b.type="ts",b.metadataStream=new br.MetadataStream,b.packetStream=new br.TransportPacketStream,b.parseStream=new br.TransportParseStream,b.elementaryStream=new br.ElementaryStream,b.timestampRolloverStream=new br.TimestampRolloverStream,b.adtsStream=new th,b.h264Stream=new Nv,b.captionStream=new br.CaptionStream(d),b.coalesceStream=new tn(d,b.metadataStream),b.headOfPipeline=b.packetStream,b.packetStream.pipe(b.parseStream).pipe(b.elementaryStream).pipe(b.timestampRolloverStream),b.timestampRolloverStream.pipe(b.h264Stream),b.timestampRolloverStream.pipe(b.adtsStream),b.timestampRolloverStream.pipe(b.metadataStream).pipe(b.coalesceStream),b.h264Stream.pipe(b.captionStream).pipe(b.coalesceStream),b.elementaryStream.on("data",function(L){var R;if("metadata"===L.type){for(R=L.tracks.length;R--;)g||"video"!==L.tracks[R].type?!T&&"audio"===L.tracks[R].type&&((T=L.tracks[R]).timelineStartInfo.baseMediaDecodeTime=f.baseMediaDecodeTime):(g=L.tracks[R]).timelineStartInfo.baseMediaDecodeTime=f.baseMediaDecodeTime;g&&!b.videoSegmentStream&&(b.coalesceStream.numberOfTracks++,b.videoSegmentStream=new va(g,d),b.videoSegmentStream.on("log",f.getLogTrigger_("videoSegmentStream")),b.videoSegmentStream.on("timelineStartInfo",function(B){T&&!d.keepOriginalTimestamps&&(T.timelineStartInfo=B,b.audioSegmentStream.setEarliestDts(B.dts-f.baseMediaDecodeTime))}),b.videoSegmentStream.on("processedGopsInfo",f.trigger.bind(f,"gopInfo")),b.videoSegmentStream.on("segmentTimingInfo",f.trigger.bind(f,"videoSegmentTimingInfo")),b.videoSegmentStream.on("baseMediaDecodeTime",function(B){T&&b.audioSegmentStream.setVideoBaseMediaDecodeTime(B)}),b.videoSegmentStream.on("timingInfo",f.trigger.bind(f,"videoTimingInfo")),b.h264Stream.pipe(b.videoSegmentStream).pipe(b.coalesceStream)),T&&!b.audioSegmentStream&&(b.coalesceStream.numberOfTracks++,b.audioSegmentStream=new Fn(T,d),b.audioSegmentStream.on("log",f.getLogTrigger_("audioSegmentStream")),b.audioSegmentStream.on("timingInfo",f.trigger.bind(f,"audioTimingInfo")),b.audioSegmentStream.on("segmentTimingInfo",f.trigger.bind(f,"audioSegmentTimingInfo")),b.adtsStream.pipe(b.audioSegmentStream).pipe(b.coalesceStream)),f.trigger("trackinfo",{hasAudio:!!T,hasVideo:!!g})}}),b.coalesceStream.on("data",this.trigger.bind(this,"data")),b.coalesceStream.on("id3Frame",function(L){L.dispatchType=b.metadataStream.dispatchType,f.trigger("id3Frame",L)}),b.coalesceStream.on("caption",this.trigger.bind(this,"caption")),b.coalesceStream.on("done",this.trigger.bind(this,"done")),sh(this,b)},this.setBaseMediaDecodeTime=function(b){var L=this.transmuxPipeline_;d.keepOriginalTimestamps||(this.baseMediaDecodeTime=b),T&&(T.timelineStartInfo.dts=void 0,T.timelineStartInfo.pts=void 0,Xi_clearDtsInfo(T),L.audioTimestampRolloverStream&&L.audioTimestampRolloverStream.discontinuity()),g&&(L.videoSegmentStream&&(L.videoSegmentStream.gopCache_=[]),g.timelineStartInfo.dts=void 0,g.timelineStartInfo.pts=void 0,Xi_clearDtsInfo(g),L.captionStream.reset()),L.timestampRolloverStream&&L.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(b){T&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(b)},this.setRemux=function(b){var L=this.transmuxPipeline_;d.remux=b,L&&L.coalesceStream&&L.coalesceStream.setRemux(b)},this.alignGopsWith=function(b){g&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(b)},this.getLogTrigger_=function(b){var L=this;return function(R){R.stream=b,L.trigger("log",R)}},this.push=function(b){if(h){var L=Fv(b);L&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():!L&&"ts"!==this.transmuxPipeline_.type&&this.setupTsPipeline(),h=!1}this.transmuxPipeline_.headOfPipeline.push(b)},this.flush=function(){h=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},Ls.prototype=new i;var ph,vh,Wl,jv={Transmuxer:Ls,VideoSegmentStream:va,AudioSegmentStream:Fn,AUDIO_PROPERTIES:Vl,VIDEO_PROPERTIES:Hl,generateSegmentTimingInfo:$l},Ds_toUnsigned=function(d){return d>>>0},rn=function(d){var f="";return f+=String.fromCharCode(d[0]),f+=String.fromCharCode(d[1]),(f+=String.fromCharCode(d[2]))+String.fromCharCode(d[3])},Wv=Ds_toUnsigned,Ft=function E(d,f){var g,T,b,L,R,h=[];if(!f.length)return null;for(g=0;g<d.byteLength;)T=Wv(d[g]<<24|d[g+1]<<16|d[g+2]<<8|d[g+3]),b=rn(d.subarray(g+4,g+8)),L=T>1?g+T:d.byteLength,b===f[0]&&(1===f.length?h.push(d.subarray(g+8,L)):(R=E(d.subarray(g+8,L),f.slice(1))).length&&(h=h.concat(R))),g=L;return h},zv=Ds_toUnsigned,Gv=e.getUint64,uh=function(d){return{isLeading:(12&d[0])>>>2,dependsOn:3&d[0],isDependedOn:(192&d[1])>>>6,hasRedundancy:(48&d[1])>>>4,paddingValue:(14&d[1])>>>1,isNonSyncSample:1&d[1],degradationPriority:d[2]<<8|d[3]}},hh="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},_a="undefined"!=typeof window?window:void 0!==hh?hh:"undefined"!=typeof self?self:{},Jv=function(d){for(var T,b,f=d.byteLength,h=[],g=1;g<f-2;)0===d[g]&&0===d[g+1]&&3===d[g+2]?(h.push(g+2),g+=2):g++;if(0===h.length)return d;T=f-h.length,b=new Uint8Array(T);var L=0;for(g=0;g<T;L++,g++)L===h[0]&&(L++,h.shift()),b[g]=d[L];return b},Zv=bs.CaptionStream,ey=function(d,f){for(var h=d,g=0;g<f.length;g++){var T=f[g];if(h<T.size)return T;h-=T.size}return null},ry=function(d,f){var h=Ft(d,["moof","traf"]),g=Ft(d,["mdat"]),T={},b=[];return g.forEach(function(L,R){b.push({mdat:L,traf:h[R]})}),b.forEach(function(L){var ot,ti,R=L.mdat,B=L.traf,H=function(d){var H,f=new DataView(d.buffer,d.byteOffset,d.byteLength),h={version:d[0],flags:new Uint8Array(d.subarray(1,4)),trackId:f.getUint32(4)},g=1&h.flags[2],T=2&h.flags[2],b=8&h.flags[2],L=16&h.flags[2],R=32&h.flags[2],B=65536&h.flags[0],F=131072&h.flags[0];return H=8,g&&(H+=4,h.baseDataOffset=f.getUint32(12),H+=4),T&&(h.sampleDescriptionIndex=f.getUint32(H),H+=4),b&&(h.defaultSampleDuration=f.getUint32(H),H+=4),L&&(h.defaultSampleSize=f.getUint32(H),H+=4),R&&(h.defaultSampleFlags=f.getUint32(H)),B&&(h.durationIsEmpty=!0),!g&&F&&(h.baseDataOffsetIsMoof=!0),h}(Ft(B,["tfhd"])[0]),ne=H.trackId,$e=Ft(B,["tfdt"]),Ze=$e.length>0?function(d){var f={version:d[0],flags:new Uint8Array(d.subarray(1,4))};return f.baseMediaDecodeTime=1===f.version?Gv(d.subarray(4)):zv(d[4]<<24|d[5]<<16|d[6]<<8|d[7]),f}($e[0]).baseMediaDecodeTime:0,Re=Ft(B,["trun"]);f===ne&&Re.length>0&&(ot=function(d,f,h){var g=f,T=h.defaultSampleDuration||0,b=h.defaultSampleSize||0,L=h.trackId,R=[];return d.forEach(function(B){var H=function(d){var ne,f={version:d[0],flags:new Uint8Array(d.subarray(1,4)),samples:[]},h=new DataView(d.buffer,d.byteOffset,d.byteLength),g=1&f.flags[2],T=4&f.flags[2],b=1&f.flags[1],L=2&f.flags[1],R=4&f.flags[1],B=8&f.flags[1],F=h.getUint32(4),H=8;for(g&&(f.dataOffset=h.getInt32(H),H+=4),T&&F&&(ne={flags:uh(d.subarray(H,H+4))},H+=4,b&&(ne.duration=h.getUint32(H),H+=4),L&&(ne.size=h.getUint32(H),H+=4),B&&(ne.compositionTimeOffset=1===f.version?h.getInt32(H):h.getUint32(H),H+=4),f.samples.push(ne),F--);F--;)ne={},b&&(ne.duration=h.getUint32(H),H+=4),L&&(ne.size=h.getUint32(H),H+=4),R&&(ne.flags=uh(d.subarray(H,H+4)),H+=4),B&&(ne.compositionTimeOffset=1===f.version?h.getInt32(H):h.getUint32(H),H+=4),f.samples.push(ne);return f}(B).samples;H.forEach(function(ne){void 0===ne.duration&&(ne.duration=T),void 0===ne.size&&(ne.size=b),ne.trackId=L,ne.dts=g,void 0===ne.compositionTimeOffset&&(ne.compositionTimeOffset=0),"bigint"==typeof g?(ne.pts=g+_a.BigInt(ne.compositionTimeOffset),g+=_a.BigInt(ne.duration)):(ne.pts=g+ne.compositionTimeOffset,g+=ne.duration)}),R=R.concat(H)}),R}(Re,Ze,H),ti=function(d,f,h){var b,L,R,B,g=new DataView(d.buffer,d.byteOffset,d.byteLength),T={logs:[],seiNals:[]};for(L=0;L+4<d.length;L+=R)if(R=g.getUint32(L),L+=4,!(R<=0))switch(31&d[L]){case 6:var F=d.subarray(L+1,L+1+R),H=ey(L,f);if(b={nalUnitType:"sei_rbsp",size:R,data:F,escapedRBSP:Jv(F),trackId:h},H)b.pts=H.pts,b.dts=H.dts,B=H;else{if(!B){T.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+L+" for trackId "+h+". See mux.js#223."});break}b.pts=B.pts,b.dts=B.dts}T.seiNals.push(b)}return T}(R,ot,ne),T[ne]||(T[ne]={seiNals:[],logs:[]}),T[ne].seiNals=T[ne].seiNals.concat(ti.seiNals),T[ne].logs=T[ne].logs.concat(ti.logs))}),T},sy=function(){var f,h,g,T,b,L,d=!1;this.isInitialized=function(){return d},this.init=function(R){f=new Zv,d=!0,L=!!R&&R.isPartial,f.on("data",function(B){B.startTime=B.startPts/T,B.endTime=B.endPts/T,b.captions.push(B),b.captionStreams[B.stream]=!0}),f.on("log",function(B){b.logs.push(B)})},this.isNewInit=function(R,B){return!(R&&0===R.length||B&&"object"==typeof B&&0===Object.keys(B).length||g===R[0]&&T===B[g])},this.parse=function(R,B,F){var H;if(!this.isInitialized())return null;if(!B||!F)return null;if(this.isNewInit(B,F))T=F[g=B[0]];else if(null===g||!T)return h.push(R),null;for(;h.length>0;){var ne=h.shift();this.parse(ne,B,F)}return H=function(d,f,h){if(null===f)return null;var T=ry(d,f)[f]||{};return{seiNals:T.seiNals,logs:T.logs,timescale:h}}(R,g,T),H&&H.logs&&(b.logs=b.logs.concat(H.logs)),null!==H&&H.seiNals?(this.pushNals(H.seiNals),this.flushStream(),b):b.logs.length?{logs:b.logs,captions:[],captionStreams:[]}:null},this.pushNals=function(R){if(!this.isInitialized()||!R||0===R.length)return null;R.forEach(function(B){f.push(B)})},this.flushStream=function(){if(!this.isInitialized())return null;L?f.partialFlush():f.flush()},this.clearParsedCaptions=function(){b.captions=[],b.captionStreams={},b.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;f.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){h=[],g=null,T=null,b?this.clearParsedCaptions():b={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},Ms=Ds_toUnsigned,Ta=function(d){return("00"+d.toString(16)).slice(-2)},oy=e.getUint64;ph=function(d,f){var g=Ft(f,["moof","traf"]).reduce(function(T,b){var ne,$e,L=Ft(b,["tfhd"])[0],R=Ms(L[4]<<24|L[5]<<16|L[6]<<8|L[7]),B=d[R]||9e4,F=Ft(b,["tfdt"])[0],H=new DataView(F.buffer,F.byteOffset,F.byteLength);return"bigint"==typeof(ne=1===F[0]?oy(F.subarray(4,12)):H.getUint32(4))?$e=ne/_a.BigInt(B):"number"==typeof ne&&!isNaN(ne)&&($e=ne/B),$e<Number.MAX_SAFE_INTEGER&&($e=Number($e)),$e<T&&(T=$e),T},1/0);return"bigint"==typeof g||isFinite(g)?g:0},Wl=function(d){var h=0===d[0]?12:20;return Ms(d[h]<<24|d[h+1]<<16|d[h+2]<<8|d[h+3])},vh=function(d){var f=Ft(d,["moov","trak"]),h=[];return f.forEach(function(g){var L,R,T={},b=Ft(g,["tkhd"])[0];b&&(R=(L=new DataView(b.buffer,b.byteOffset,b.byteLength)).getUint8(0),T.id=L.getUint32(0===R?12:20));var B=Ft(g,["mdia","hdlr"])[0];if(B){var F=rn(B.subarray(8,12));T.type="vide"===F?"video":"soun"===F?"audio":F}var H=Ft(g,["mdia","minf","stbl","stsd"])[0];if(H){var ne=H.subarray(8);T.codec=rn(ne.subarray(4,8));var Ze,$e=Ft(ne,[T.codec])[0];$e&&(/^[asm]vc[1-9]$/i.test(T.codec)?(Ze=$e.subarray(78),"avcC"===rn(Ze.subarray(4,8))&&Ze.length>11?(T.codec+=".",T.codec+=Ta(Ze[9]),T.codec+=Ta(Ze[10]),T.codec+=Ta(Ze[11])):T.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(T.codec)?(Ze=$e.subarray(28),"esds"===rn(Ze.subarray(4,8))&&Ze.length>20&&0!==Ze[19]?(T.codec+="."+Ta(Ze[19]),T.codec+="."+Ta(Ze[20]>>>2&63).replace(/^0/,"")):T.codec="mp4a.40.2"):T.codec=T.codec.toLowerCase())}var ot=Ft(g,["mdia","mdhd"])[0];ot&&(T.timescale=Wl(ot)),h.push(T)}),h};var yh_startTime=ph,yh_tracks=vh,_h=function(d){var f=31&d[1];return(f<<=8)|d[2]},Os=function(d){return!!(64&d[1])},Rs=function(d){var f=0;return(48&d[3])>>>4>1&&(f+=d[4]+1),f},ql=function(d){switch(d){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},py={parseType:function(d,f){var h=_h(d);return 0===h?"pat":h===f?"pmt":f?"pes":null},parsePat:function(d){var f=Os(d),h=4+Rs(d);return f&&(h+=d[h]+1),(31&d[h+10])<<8|d[h+11]},parsePmt:function(d){var f={},h=Os(d),g=4+Rs(d);if(h&&(g+=d[g]+1),1&d[g+5]){var b;b=3+((15&d[g+1])<<8|d[g+2])-4;for(var R=12+((15&d[g+10])<<8|d[g+11]);R<b;){var B=g+R;f[(31&d[B+1])<<8|d[B+2]]=d[B],R+=5+((15&d[B+3])<<8|d[B+4])}return f}},parsePayloadUnitStartIndicator:Os,parsePesType:function(d,f){switch(f[_h(d)]){case di.H264_STREAM_TYPE:return"video";case di.ADTS_STREAM_TYPE:return"audio";case di.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(d){if(!Os(d))return null;var h=4+Rs(d);if(h>=d.byteLength)return null;var T,g=null;return 192&(T=d[h+7])&&((g={}).pts=(14&d[h+9])<<27|(255&d[h+10])<<20|(254&d[h+11])<<12|(255&d[h+12])<<5|(254&d[h+13])>>>3,g.pts*=4,g.pts+=(6&d[h+13])>>>1,g.dts=g.pts,64&T&&(g.dts=(14&d[h+14])<<27|(255&d[h+15])<<20|(254&d[h+16])<<12|(255&d[h+17])<<5|(254&d[h+18])>>>3,g.dts*=4,g.dts+=(6&d[h+18])>>>1)),g},videoPacketContainsKeyFrame:function(d){for(var f=4+Rs(d),h=d.subarray(f),g=0,T=0,b=!1;T<h.byteLength-3;T++)if(1===h[T+2]){g=T+5;break}for(;g<h.byteLength;)switch(h[g]){case 0:if(0!==h[g-1]){g+=2;break}if(0!==h[g-2]){g++;break}T+3!==g-2&&"slice_layer_without_partitioning_rbsp_idr"===ql(31&h[T+3])&&(b=!0);do{g++}while(1!==h[g]&&g<h.length);T=g-2,g+=3;break;case 1:if(0!==h[g-1]||0!==h[g-2]){g+=3;break}"slice_layer_without_partitioning_rbsp_idr"===ql(31&h[T+3])&&(b=!0),T=g-2,g+=3;break;default:g+=3}return h=h.subarray(T),g-=T,T=0,h&&h.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===ql(31&h[T+3])&&(b=!0),b}},Bn=Qc_handleRollover,Pt={};Pt.ts=py,Pt.aac=ks;var nn=9e4,Ei=188,Th=function(d,f,h){for(var b,R,B,F,g=0,T=Ei,H=!1;T<=d.byteLength;)if(71!==d[g]||71!==d[T]&&T!==d.byteLength)g++,T++;else{if("pes"===(b=d.subarray(g,T),Pt.ts.parseType(b,f.pid))&&(R=Pt.ts.parsePesType(b,f.table),B=Pt.ts.parsePayloadUnitStartIndicator(b),"audio"===R&&B&&(F=Pt.ts.parsePesTime(b))&&(F.type="audio",h.audio.push(F),H=!0)),H)break;g+=Ei,T+=Ei}for(g=(T=d.byteLength)-Ei,H=!1;g>=0;)if(71!==d[g]||71!==d[T]&&T!==d.byteLength)g--,T--;else{if("pes"===(b=d.subarray(g,T),Pt.ts.parseType(b,f.pid))&&(R=Pt.ts.parsePesType(b,f.table),B=Pt.ts.parsePayloadUnitStartIndicator(b),"audio"===R&&B&&(F=Pt.ts.parsePesTime(b))&&(F.type="audio",h.audio.push(F),H=!0)),H)break;g-=Ei,T-=Ei}},my=function(d,f,h){for(var b,R,B,F,H,ne,$e,g=0,T=Ei,Ze=!1,Re={data:[],size:0};T<d.byteLength;)if(71!==d[g]||71!==d[T])g++,T++;else{if("pes"===(b=d.subarray(g,T),Pt.ts.parseType(b,f.pid))&&(R=Pt.ts.parsePesType(b,f.table),B=Pt.ts.parsePayloadUnitStartIndicator(b),"video"===R&&(B&&!Ze&&(F=Pt.ts.parsePesTime(b))&&(F.type="video",h.video.push(F),Ze=!0),!h.firstKeyFrame))){if(B&&0!==Re.size){for(H=new Uint8Array(Re.size),ne=0;Re.data.length;)$e=Re.data.shift(),H.set($e,ne),ne+=$e.byteLength;if(Pt.ts.videoPacketContainsKeyFrame(H)){var ot=Pt.ts.parsePesTime(H);ot?(h.firstKeyFrame=ot,h.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}Re.size=0}Re.data.push(b),Re.size+=b.byteLength}if(Ze&&h.firstKeyFrame)break;g+=Ei,T+=Ei}for(g=(T=d.byteLength)-Ei,Ze=!1;g>=0;)if(71!==d[g]||71!==d[T])g--,T--;else{if("pes"===(b=d.subarray(g,T),Pt.ts.parseType(b,f.pid))&&(R=Pt.ts.parsePesType(b,f.table),B=Pt.ts.parsePayloadUnitStartIndicator(b),"video"===R&&B&&(F=Pt.ts.parsePesTime(b))&&(F.type="video",h.video.push(F),Ze=!0)),Ze)break;g-=Ei,T-=Ei}},by_inspect=function(d,f){var g;return g=Pt.aac.isLikelyAacData(d)?function(d){for(var R,f=!1,h=0,g=null,T=null,b=0,L=0;d.length-L>=3;){switch(Pt.aac.parseType(d,L)){case"timed-metadata":if(d.length-L<10){f=!0;break}if((b=Pt.aac.parseId3TagSize(d,L))>d.length){f=!0;break}null===T&&(R=d.subarray(L,L+b),T=Pt.aac.parseAacTimestamp(R)),L+=b;break;case"audio":if(d.length-L<7){f=!0;break}if((b=Pt.aac.parseAdtsSize(d,L))>d.length){f=!0;break}null===g&&(R=d.subarray(L,L+b),g=Pt.aac.parseSampleRate(R)),h++,L+=b;break;default:L++}if(f)return null}if(null===g||null===T)return null;var F=nn/g;return{audio:[{type:"audio",dts:T,pts:T},{type:"audio",dts:T+1024*h*F,pts:T+1024*h*F}]}}(d):function(d){var f={pid:null,table:null},h={};for(var g in function(d,f){for(var T,h=0,g=Ei;g<d.byteLength;)if(71!==d[h]||71!==d[g])h++,g++;else{switch(T=d.subarray(h,g),Pt.ts.parseType(T,f.pid)){case"pat":f.pid=Pt.ts.parsePat(T);break;case"pmt":var L=Pt.ts.parsePmt(T);f.table=f.table||{},Object.keys(L).forEach(function(R){f.table[R]=L[R]})}h+=Ei,g+=Ei}}(d,f),f.table)if(f.table.hasOwnProperty(g))switch(f.table[g]){case di.H264_STREAM_TYPE:h.video=[],my(d,f,h),0===h.video.length&&delete h.video;break;case di.ADTS_STREAM_TYPE:h.audio=[],Th(d,f,h),0===h.audio.length&&delete h.audio}return h}(d),g&&(g.audio||g.video)?(function(d,f){if(d.audio&&d.audio.length){var h=f;(void 0===h||isNaN(h))&&(h=d.audio[0].dts),d.audio.forEach(function(b){b.dts=Bn(b.dts,h),b.pts=Bn(b.pts,h),b.dtsTime=b.dts/nn,b.ptsTime=b.pts/nn})}if(d.video&&d.video.length){var g=f;if((void 0===g||isNaN(g))&&(g=d.video[0].dts),d.video.forEach(function(b){b.dts=Bn(b.dts,g),b.pts=Bn(b.pts,g),b.dtsTime=b.dts/nn,b.ptsTime=b.pts/nn}),d.firstKeyFrame){var T=d.firstKeyFrame;T.dts=Bn(T.dts,g),T.pts=Bn(T.pts,g),T.dtsTime=T.dts/nn,T.ptsTime=T.pts/nn}}}(g,f),g):null},bh=function(){function E(f,h){this.options=h||{},this.self=f,this.init()}var d=E.prototype;return d.init=function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new jv.Transmuxer(this.options),function(d,f){f.on("data",function(h){var g=h.initSegment;h.initSegment={data:g.buffer,byteOffset:g.byteOffset,byteLength:g.byteLength};var T=h.data;h.data=T.buffer,d.postMessage({action:"data",segment:h,byteOffset:T.byteOffset,byteLength:T.byteLength},[h.data])}),f.on("done",function(h){d.postMessage({action:"done"})}),f.on("gopInfo",function(h){d.postMessage({action:"gopInfo",gopInfo:h})}),f.on("videoSegmentTimingInfo",function(h){var g={start:{decode:xt_videoTsToSeconds(h.start.dts),presentation:xt_videoTsToSeconds(h.start.pts)},end:{decode:xt_videoTsToSeconds(h.end.dts),presentation:xt_videoTsToSeconds(h.end.pts)},baseMediaDecodeTime:xt_videoTsToSeconds(h.baseMediaDecodeTime)};h.prependedContentDuration&&(g.prependedContentDuration=xt_videoTsToSeconds(h.prependedContentDuration)),d.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:g})}),f.on("audioSegmentTimingInfo",function(h){var g={start:{decode:xt_videoTsToSeconds(h.start.dts),presentation:xt_videoTsToSeconds(h.start.pts)},end:{decode:xt_videoTsToSeconds(h.end.dts),presentation:xt_videoTsToSeconds(h.end.pts)},baseMediaDecodeTime:xt_videoTsToSeconds(h.baseMediaDecodeTime)};h.prependedContentDuration&&(g.prependedContentDuration=xt_videoTsToSeconds(h.prependedContentDuration)),d.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:g})}),f.on("id3Frame",function(h){d.postMessage({action:"id3Frame",id3Frame:h})}),f.on("caption",function(h){d.postMessage({action:"caption",caption:h})}),f.on("trackinfo",function(h){d.postMessage({action:"trackinfo",trackInfo:h})}),f.on("audioTimingInfo",function(h){d.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:xt_videoTsToSeconds(h.start),end:xt_videoTsToSeconds(h.end)}})}),f.on("videoTimingInfo",function(h){d.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:xt_videoTsToSeconds(h.start),end:xt_videoTsToSeconds(h.end)}})}),f.on("log",function(h){d.postMessage({action:"log",log:h})})}(this.self,this.transmuxer)},d.pushMp4Captions=function(h){this.captionParser||(this.captionParser=new sy,this.captionParser.init());var g=new Uint8Array(h.data,h.byteOffset,h.byteLength),T=this.captionParser.parse(g,h.trackIds,h.timescales);this.self.postMessage({action:"mp4Captions",captions:T&&T.captions||[],logs:T&&T.logs||[],data:g.buffer},[g.buffer])},d.probeMp4StartTime=function(h){var T=h.data,b=yh_startTime(h.timescales,T);this.self.postMessage({action:"probeMp4StartTime",startTime:b,data:T},[T.buffer])},d.probeMp4Tracks=function(h){var g=h.data,T=yh_tracks(g);this.self.postMessage({action:"probeMp4Tracks",tracks:T,data:g},[g.buffer])},d.probeTs=function(h){var g=h.data,T=h.baseStartTime,b="number"!=typeof T||isNaN(T)?void 0:9e4*T,L=by_inspect(g,b),R=null;L&&((R={hasVideo:L.video&&2===L.video.length||!1,hasAudio:L.audio&&2===L.audio.length||!1}).hasVideo&&(R.videoStart=L.video[0].ptsTime),R.hasAudio&&(R.audioStart=L.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:R,data:g},[g.buffer])},d.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()},d.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()},d.push=function(h){var g=new Uint8Array(h.data,h.byteOffset,h.byteLength);this.transmuxer.push(g)},d.reset=function(){this.transmuxer.reset()},d.setTimestampOffset=function(h){this.transmuxer.setBaseMediaDecodeTime(Math.round(xt_secondsToVideoTs(h.timestampOffset||0)))},d.setAudioAppendStart=function(h){this.transmuxer.setAudioAppendStart(Math.ceil(xt_secondsToVideoTs(h.appendStart)))},d.setRemux=function(h){this.transmuxer.setRemux(h.remux)},d.flush=function(h){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})},d.endTimeline=function(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})},d.alignGopsWith=function(h){this.transmuxer.alignGopsWith(h.gopsToAlignWith.slice())},E}();self.onmessage=function(E){"init"===E.data.action&&E.data.options?this.messageHandlers=new bh(self,E.data.options):(this.messageHandlers||(this.messageHandlers=new bh(self)),E.data&&E.data.action&&"init"!==E.data.action&&this.messageHandlers[E.data.action]&&this.messageHandlers[E.data.action](E.data))}})),ug=lc(lg),cc=function(i){var n=i.transmuxer,r=i.bytes,e=i.audioAppendStart,t=i.gopsToAlignWith,a=i.remux,o=i.onData,l=i.onTrackInfo,u=i.onAudioTimingInfo,c=i.onVideoTimingInfo,_=i.onVideoSegmentTimingInfo,y=i.onAudioSegmentTimingInfo,A=i.onId3,I=i.onCaptions,D=i.onDone,M=i.onEndedTimeline,Q=i.onTransmuxerLog,me=i.isEndOfTimeline,Fe={buffer:[]},te=me;if(n.onmessage=function(ke){n.currentTransmux===i&&("data"===ke.data.action&&function(i,n,r){var e=i.data.segment,t=e.type,a=e.initSegment,c=e.videoFrameDtsTime,_=e.videoFramePtsTime;n.buffer.push({captions:e.captions,captionStreams:e.captionStreams,metadata:e.metadata});var y=i.data.segment.boxes||{data:i.data.segment.data},A={type:t,data:new Uint8Array(y.data,y.data.byteOffset,y.data.byteLength),initSegment:new Uint8Array(a.data,a.byteOffset,a.byteLength)};void 0!==c&&(A.videoFrameDtsTime=c),void 0!==_&&(A.videoFramePtsTime=_),r(A)}(ke,Fe,o),"trackinfo"===ke.data.action&&l(ke.data.trackInfo),"gopInfo"===ke.data.action&&function(i,n){n.gopInfo=i.data.gopInfo}(ke,Fe),"audioTimingInfo"===ke.data.action&&u(ke.data.audioTimingInfo),"videoTimingInfo"===ke.data.action&&c(ke.data.videoTimingInfo),"videoSegmentTimingInfo"===ke.data.action&&_(ke.data.videoSegmentTimingInfo),"audioSegmentTimingInfo"===ke.data.action&&y(ke.data.audioSegmentTimingInfo),"id3Frame"===ke.data.action&&A([ke.data.id3Frame],ke.data.id3Frame.dispatchType),"caption"===ke.data.action&&I(ke.data.caption),"endedtimeline"===ke.data.action&&(te=!1,M()),"log"===ke.data.action&&Q(ke.data.log),"transmuxed"===ke.data.type&&(te||(n.onmessage=null,function(i){var n=i.transmuxedData,r=i.callback;n.buffer=[],r(n)}({transmuxedData:Fe,callback:D}),hc(n))))},e&&n.postMessage({action:"setAudioAppendStart",appendStart:e}),Array.isArray(t)&&n.postMessage({action:"alignGopsWith",gopsToAlignWith:t}),void 0!==a&&n.postMessage({action:"setRemux",remux:a}),r.byteLength){var Le=r instanceof ArrayBuffer?r:r.buffer,le=r instanceof ArrayBuffer?0:r.byteOffset;n.postMessage({action:"push",data:Le,byteOffset:le,byteLength:r.byteLength},[Le])}me&&n.postMessage({action:"endTimeline"}),n.postMessage({action:"flush"})},hc=function(i){i.currentTransmux=null,i.transmuxQueue.length&&(i.currentTransmux=i.transmuxQueue.shift(),"function"==typeof i.currentTransmux?i.currentTransmux():cc(i.currentTransmux))},fc=function(i,n){i.postMessage({action:n}),hc(i)},xl_reset=function(i){!function(i,n){if(!n.currentTransmux)return n.currentTransmux=i,void fc(n,i);n.transmuxQueue.push(fc.bind(null,n,i))}("reset",i)},ss=function(i){var n=i.transmuxer,r=i.endAction||i.action,e=i.callback,t=he({},i,{endAction:null,transmuxer:null,callback:null});if(n.addEventListener("message",function u(c){c.data.action===r&&(n.removeEventListener("message",u),c.data.data&&(c.data.data=new Uint8Array(c.data.data,i.byteOffset||0,i.byteLength||c.data.data.byteLength),i.data&&(i.data=c.data.data)),e(c.data))}),i.data){var o=i.data instanceof ArrayBuffer;t.byteOffset=o?0:i.data.byteOffset,t.byteLength=i.data.byteLength,n.postMessage(t,[o?i.data:i.data.buffer])}else n.postMessage(t)},Cl=function(i){i.forEach(function(n){n.abort()})},El=function(i,n){return n.timedout?{status:n.status,message:"HLS request timed-out at URL: "+n.uri,code:-101,xhr:n}:n.aborted?{status:n.status,message:"HLS request aborted at URL: "+n.uri,code:-102,xhr:n}:i?{status:n.status,message:"HLS request errored at URL: "+n.uri,code:2,xhr:n}:"arraybuffer"===n.responseType&&0===n.response.byteLength?{status:n.status,message:"Empty HLS response at URL: "+n.uri,code:2,xhr:n}:null},mc=function(i,n,r){return function(e,t){var a=t.response,o=El(e,t);if(o)return r(o,i);if(16!==a.byteLength)return r({status:t.status,message:"Invalid HLS key at URL: "+t.uri,code:2,xhr:t},i);for(var l=new DataView(a),u=new Uint32Array([l.getUint32(0),l.getUint32(4),l.getUint32(8),l.getUint32(12)]),c=0;c<n.length;c++)n[c].bytes=u;return r(null,i)}},vc=function(i,n){var r=co(i.map.bytes);if("mp4"!==r)return n({internal:!0,message:"Found unsupported "+(r||"unknown")+" container for initialization segment at URL: "+(i.map.resolvedUri||i.map.uri),code:2});ss({action:"probeMp4Tracks",data:i.map.bytes,transmuxer:i.transmuxer,callback:function(a){var o=a.tracks;return i.map.bytes=a.data,o.forEach(function(u){i.map.tracks=i.map.tracks||{},!i.map.tracks[u.type]&&(i.map.tracks[u.type]=u,"number"==typeof u.id&&u.timescale&&(i.map.timescales=i.map.timescales||{},i.map.timescales[u.id]=u.timescale))}),n(null)}})},Tg=function(i){var n=i.segment,r=i.bytes,e=i.trackInfoFn,t=i.timingInfoFn,a=i.videoSegmentTimingInfoFn,o=i.audioSegmentTimingInfoFn,l=i.id3Fn,u=i.captionsFn,c=i.isEndOfTimeline,_=i.endedTimelineFn,y=i.dataFn,A=i.doneFn,I=i.onTransmuxerLog,D=n.map&&n.map.tracks||{},M=Boolean(D.audio&&D.video),Q=t.bind(null,n,"audio","start"),me=t.bind(null,n,"audio","end"),Fe=t.bind(null,n,"video","start"),te=t.bind(null,n,"video","end");ss({action:"probeTs",transmuxer:n.transmuxer,data:r,baseStartTime:n.baseStartTime,callback:function(le){n.bytes=r=le.data;var oe=le.result;oe&&(e(n,{hasAudio:oe.hasAudio,hasVideo:oe.hasVideo,isMuxed:M}),e=null,oe.hasAudio&&!M&&Q(oe.audioStart),oe.hasVideo&&Fe(oe.videoStart),Q=null,Fe=null),function(i){if(!i.transmuxer.currentTransmux)return i.transmuxer.currentTransmux=i,void cc(i);i.transmuxer.transmuxQueue.push(i)}({bytes:r,transmuxer:n.transmuxer,audioAppendStart:n.audioAppendStart,gopsToAlignWith:n.gopsToAlignWith,remux:M,onData:function(oe){oe.type="combined"===oe.type?"video":oe.type,y(n,oe)},onTrackInfo:function(oe){e&&(M&&(oe.isMuxed=!0),e(n,oe))},onAudioTimingInfo:function(oe){Q&&void 0!==oe.start&&(Q(oe.start),Q=null),me&&void 0!==oe.end&&me(oe.end)},onVideoTimingInfo:function(oe){Fe&&void 0!==oe.start&&(Fe(oe.start),Fe=null),te&&void 0!==oe.end&&te(oe.end)},onVideoSegmentTimingInfo:function(oe){a(oe)},onAudioSegmentTimingInfo:function(oe){o(oe)},onId3:function(oe,ke){l(n,oe,ke)},onCaptions:function(oe){u(n,[oe])},isEndOfTimeline:c,onEndedTimeline:function(){_()},onTransmuxerLog:I,onDone:function(oe){!A||(oe.type="combined"===oe.type?"video":oe.type,A(null,n,oe))}})}})},yc=function(i){var n=i.segment,r=i.bytes,e=i.trackInfoFn,t=i.timingInfoFn,a=i.videoSegmentTimingInfoFn,o=i.audioSegmentTimingInfoFn,l=i.id3Fn,u=i.captionsFn,c=i.isEndOfTimeline,_=i.endedTimelineFn,y=i.dataFn,A=i.doneFn,I=i.onTransmuxerLog,D=new Uint8Array(r);if(function(i){return vt(i,["moof"]).length>0}(D)){n.isFmp4=!0;var M=n.map.tracks,Q={isFmp4:!0,hasVideo:!!M.video,hasAudio:!!M.audio};M.audio&&M.audio.codec&&"enca"!==M.audio.codec&&(Q.audioCodec=M.audio.codec),M.video&&M.video.codec&&"encv"!==M.video.codec&&(Q.videoCodec=M.video.codec),M.video&&M.audio&&(Q.isMuxed=!0),e(n,Q);var me=function(te){y(n,{data:D,type:Q.hasAudio&&!Q.isMuxed?"audio":"video"}),te&&te.length&&u(n,te),A(null,n,{})};ss({action:"probeMp4StartTime",timescales:n.map.timescales,data:D,transmuxer:n.transmuxer,callback:function(te){var re=te.data,Le=te.startTime;r=re.buffer,n.bytes=D=re,Q.hasAudio&&!Q.isMuxed&&t(n,"audio","start",Le),Q.hasVideo&&t(n,"video","start",Le),M.video&&re.byteLength&&n.transmuxer?ss({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:n.transmuxer,data:D,timescales:n.map.timescales,trackIds:[M.video.id],callback:function(oe){r=oe.data.buffer,n.bytes=D=oe.data,oe.logs.forEach(function(ke){I(q.mergeOptions(ke,{stream:"mp4CaptionParser"}))}),me(oe.captions)}}):me()}})}else{if(n.transmuxer)return void 0===n.container&&(n.container=co(D)),"ts"!==n.container&&"aac"!==n.container?(e(n,{hasAudio:!1,hasVideo:!1}),void A(null,n,{})):void Tg({segment:n,bytes:r,trackInfoFn:e,timingInfoFn:t,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:u,isEndOfTimeline:c,endedTimelineFn:_,dataFn:y,doneFn:A,onTransmuxerLog:I});A(null,n,{})}},_c=function(i,n){var l,r=i.id,e=i.key,t=i.encryptedBytes,a=i.decryptionWorker;a.addEventListener("message",function u(c){if(c.data.source===r){a.removeEventListener("message",u);var _=c.data.decrypted;n(new Uint8Array(_.bytes,_.byteOffset,_.byteLength))}}),l=e.bytes.slice?e.bytes.slice():new Uint32Array(Array.prototype.slice.call(e.bytes)),a.postMessage(ec({source:r,encrypted:t,key:l,iv:e.iv}),[t.buffer,l.buffer])},Eg=function(i){var n=i.xhr,r=i.xhrOptions,t=i.segment,a=i.abortFn,o=i.progressFn,l=i.trackInfoFn,u=i.timingInfoFn,c=i.videoSegmentTimingInfoFn,_=i.audioSegmentTimingInfoFn,y=i.id3Fn,A=i.captionsFn,I=i.isEndOfTimeline,D=i.endedTimelineFn,M=i.dataFn,Fe=[],te=function(i){var n=i.activeXhrs,r=i.decryptionWorker,e=i.trackInfoFn,t=i.timingInfoFn,a=i.videoSegmentTimingInfoFn,o=i.audioSegmentTimingInfoFn,l=i.id3Fn,u=i.captionsFn,c=i.isEndOfTimeline,_=i.endedTimelineFn,y=i.dataFn,A=i.doneFn,I=i.onTransmuxerLog,D=0,M=!1;return function(Q,me){if(!M){if(Q)return M=!0,Cl(n),A(Q,me);if((D+=1)===n.length){var Fe=function(){if(me.encryptedBytes)return function(i){var r=i.segment,e=i.trackInfoFn,t=i.timingInfoFn,a=i.videoSegmentTimingInfoFn,o=i.audioSegmentTimingInfoFn,l=i.id3Fn,u=i.captionsFn,c=i.isEndOfTimeline,_=i.endedTimelineFn,y=i.dataFn,A=i.doneFn,I=i.onTransmuxerLog;_c({id:r.requestId,key:r.key,encryptedBytes:r.encryptedBytes,decryptionWorker:i.decryptionWorker},function(D){r.bytes=D,yc({segment:r,bytes:r.bytes,trackInfoFn:e,timingInfoFn:t,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:u,isEndOfTimeline:c,endedTimelineFn:_,dataFn:y,doneFn:A,onTransmuxerLog:I})})}({decryptionWorker:r,segment:me,trackInfoFn:e,timingInfoFn:t,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:u,isEndOfTimeline:c,endedTimelineFn:_,dataFn:y,doneFn:A,onTransmuxerLog:I});yc({segment:me,bytes:me.bytes,trackInfoFn:e,timingInfoFn:t,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:u,isEndOfTimeline:c,endedTimelineFn:_,dataFn:y,doneFn:A,onTransmuxerLog:I})};if(me.endOfAllRequests=Date.now(),me.map&&me.map.encryptedBytes&&!me.map.bytes)return _c({decryptionWorker:r,id:me.requestId+"-init",encryptedBytes:me.map.encryptedBytes,key:me.map.key},function(te){me.map.bytes=te,vc(me,function(re){if(re)return Cl(n),A(re,me);Fe()})});Fe()}}}}({activeXhrs:Fe,decryptionWorker:i.decryptionWorker,trackInfoFn:l,timingInfoFn:u,videoSegmentTimingInfoFn:c,audioSegmentTimingInfoFn:_,id3Fn:y,captionsFn:A,isEndOfTimeline:I,endedTimelineFn:D,dataFn:M,doneFn:i.doneFn,onTransmuxerLog:i.onTransmuxerLog});if(t.key&&!t.key.bytes){var re=[t.key];t.map&&!t.map.bytes&&t.map.key&&t.map.key.resolvedUri===t.key.resolvedUri&&re.push(t.map.key);var oe=n(q.mergeOptions(r,{uri:t.key.resolvedUri,responseType:"arraybuffer"}),mc(t,re,te));Fe.push(oe)}if(t.map&&!t.map.bytes){if(t.map.key&&(!t.key||t.key.resolvedUri!==t.map.key.resolvedUri)){var Xe=n(q.mergeOptions(r,{uri:t.map.key.resolvedUri,responseType:"arraybuffer"}),mc(t,[t.map.key],te));Fe.push(Xe)}var ut=q.mergeOptions(r,{uri:t.map.resolvedUri,responseType:"arraybuffer",headers:Tl(t.map)}),Lt=function(i){var n=i.segment,r=i.finishProcessingFn;return function(e,t){var a=El(e,t);if(a)return r(a,n);var o=new Uint8Array(t.response);if(n.map.key)return n.map.encryptedBytes=o,r(null,n);n.map.bytes=o,vc(n,function(l){if(l)return l.xhr=t,l.status=t.status,r(l,n);r(null,n)})}}({segment:t,finishProcessingFn:te}),Nt=n(ut,Lt);Fe.push(Nt)}var Xt=q.mergeOptions(r,{uri:t.part&&t.part.resolvedUri||t.resolvedUri,responseType:"arraybuffer",headers:Tl(t)}),Ut=n(Xt,function(i){var n=i.segment,r=i.finishProcessingFn,e=i.responseType;return function(t,a){var o=El(t,a);if(o)return r(o,n);var l="arraybuffer"!==e&&a.responseText?function(i){for(var n=new Uint8Array(new ArrayBuffer(i.length)),r=0;r<i.length;r++)n[r]=i.charCodeAt(r);return n.buffer}(a.responseText.substring(n.lastReachedChar||0)):a.response;return n.stats=function(i){return{bandwidth:i.bandwidth,bytesReceived:i.bytesReceived||0,roundTripTime:i.roundTripTime||0}}(a),n.key?n.encryptedBytes=new Uint8Array(l):n.bytes=new Uint8Array(l),r(null,n)}}({segment:t,finishProcessingFn:te,responseType:Xt.responseType}));Ut.addEventListener("progress",function(i){var n=i.segment,r=i.progressFn;return function(e){if(!e.target.aborted)return n.stats=q.mergeOptions(n.stats,function(i){var n=i.target,e={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-n.requestTime||0};return e.bytesReceived=i.loaded,e.bandwidth=Math.floor(e.bytesReceived/e.roundTripTime*8*1e3),e}(e)),!n.stats.firstBytesReceivedAt&&n.stats.bytesReceived&&(n.stats.firstBytesReceivedAt=Date.now()),r(e,n)}}({segment:t,progressFn:o,trackInfoFn:l,timingInfoFn:u,videoSegmentTimingInfoFn:c,audioSegmentTimingInfoFn:_,id3Fn:y,captionsFn:A,isEndOfTimeline:I,endedTimelineFn:D,dataFn:M})),Fe.push(Ut);var gi={};return Fe.forEach(function(Et){Et.addEventListener("loadend",function(i){var n=i.loadendState,r=i.abortFn;return function(e){e.target.aborted&&r&&!n.calledAbortFn&&(r(),n.calledAbortFn=!0)}}({loadendState:gi,abortFn:a}))}),function(){return Cl(Fe)}},Ag=Ki("CodecUtils"),Tc=function(i,n){var r=n.attributes||{};return i&&i.mediaGroups&&i.mediaGroups.AUDIO&&r.AUDIO&&i.mediaGroups.AUDIO[r.AUDIO]},os=function(i){var n={};return i.forEach(function(r){var e=r.mediaType,t=r.type,a=r.details;n[e]=n[e]||[],n[e].push(we(""+t+a))}),Object.keys(n).forEach(function(r){if(n[r].length>1)return Ag("multiple "+r+" codecs found as attributes: "+n[r].join(", ")+". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."),void(n[r]=null);n[r]=n[r][0]}),n},bc=function(i){var n=0;return i.audio&&n++,i.video&&n++,n},da=function(i,n){var r=n.attributes||{},e=os(function(i){var n=i.attributes||{};if(n.CODECS)return _t(n.CODECS)}(n)||[]);if(Tc(i,n)&&!e.audio&&!function(i,n){if(!Tc(i,n))return!0;var e=i.mediaGroups.AUDIO[(n.attributes||{}).AUDIO];for(var t in e)if(!e[t].uri&&!e[t].playlists)return!0;return!1}(i,n)){var t=os(function(i,n){if(!i.mediaGroups.AUDIO||!n)return null;var r=i.mediaGroups.AUDIO[n];if(!r)return null;for(var e in r){var t=r[e];if(t.default&&t.playlists)return _t(t.playlists[0].attributes.CODECS)}return null}(i,r.AUDIO)||[]);t.audio&&(e.audio=t.audio)}return e},ls=Ki("PlaylistSelector"),Sc=function(i){if(i&&i.playlist){var n=i.playlist;return JSON.stringify({id:n.id,bandwidth:i.bandwidth,width:i.width,height:i.height,codecs:n.attributes&&n.attributes.CODECS||""})}},us=function(i,n){if(!i)return"";var r=p().getComputedStyle(i);return r?r[n]:""},Ln=function(i,n){var r=i.slice();i.sort(function(e,t){var a=n(e,t);return 0===a?r.indexOf(e)-r.indexOf(t):a})},Al=function(i,n){var r,e;return i.attributes.BANDWIDTH&&(r=i.attributes.BANDWIDTH),r=r||p().Number.MAX_VALUE,n.attributes.BANDWIDTH&&(e=n.attributes.BANDWIDTH),r-(e||p().Number.MAX_VALUE)},xc=function(i,n,r,e,t,a){if(i){var o={bandwidth:n,width:r,height:e,limitRenditionByPlayerDimensions:t},l=i.playlists;ki.isAudioOnly(i)&&(l=a.getAudioTrackPlaylists_(),o.audioOnly=!0);var u=l.map(function(ce){var Xe=ce.attributes&&ce.attributes.RESOLUTION&&ce.attributes.RESOLUTION.width,ut=ce.attributes&&ce.attributes.RESOLUTION&&ce.attributes.RESOLUTION.height;return{bandwidth:ce.attributes&&ce.attributes.BANDWIDTH||p().Number.MAX_VALUE,width:Xe,height:ut,playlist:ce}});Ln(u,function(ce,nt){return ce.bandwidth-nt.bandwidth});var c=(u=u.filter(function(ce){return!ki.isIncompatible(ce.playlist)})).filter(function(ce){return ki.isEnabled(ce.playlist)});c.length||(c=u.filter(function(ce){return!ki.isDisabled(ce.playlist)}));var _=c.filter(function(ce){return ce.bandwidth*li.BANDWIDTH_VARIANCE<n}),y=_[_.length-1],A=_.filter(function(ce){return ce.bandwidth===y.bandwidth})[0];if(!1===t){var I=A||c[0]||u[0];if(I&&I.playlist){var D="sortedPlaylistReps";return A&&(D="bandwidthBestRep"),c[0]&&(D="enabledPlaylistReps"),ls("choosing "+Sc(I)+" using "+D+" with options",o),I.playlist}return ls("could not choose a playlist with options",o),null}var M=_.filter(function(ce){return ce.width&&ce.height});Ln(M,function(ce,nt){return ce.width-nt.width});var Q=M.filter(function(ce){return ce.width===r&&ce.height===e});y=Q[Q.length-1];var Fe,te,re,Le,me=Q.filter(function(ce){return ce.bandwidth===y.bandwidth})[0];if(me||(te=(Fe=M.filter(function(ce){return ce.width>r||ce.height>e})).filter(function(ce){return ce.width===Fe[0].width&&ce.height===Fe[0].height}),y=te[te.length-1],re=te.filter(function(ce){return ce.bandwidth===y.bandwidth})[0]),a.experimentalLeastPixelDiffSelector){var le=M.map(function(ce){return ce.pixelDiff=Math.abs(ce.width-r)+Math.abs(ce.height-e),ce});Ln(le,function(ce,nt){return ce.pixelDiff===nt.pixelDiff?nt.bandwidth-ce.bandwidth:ce.pixelDiff-nt.pixelDiff}),Le=le[0]}var oe=Le||re||me||A||c[0]||u[0];if(oe&&oe.playlist){var ke="sortedPlaylistReps";return Le?ke="leastPixelDiffRep":re?ke="resolutionPlusOneRep":me?ke="resolutionBestRep":A?ke="bandwidthBestRep":c[0]&&(ke="enabledPlaylistReps"),ls("choosing "+Sc(oe)+" using "+ke+" with options",o),oe.playlist}return ls("could not choose a playlist with options",o),null}},Cc=function(){var i=this.useDevicePixelRatio&&p().devicePixelRatio||1;return xc(this.playlists.master,this.systemBandwidth,parseInt(us(this.tech_.el(),"width"),10)*i,parseInt(us(this.tech_.el(),"height"),10)*i,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)},ca=function(i,n,r){var e,t;if(r&&r.cues)for(e=r.cues.length;e--;)(t=r.cues[e]).startTime>=i&&t.endTime<=n&&r.removeCue(t)},Ac=function(i){return"number"==typeof i&&isFinite(i)},ds=1/60,Dn=function(i){var n=i.startOfSegment,r=i.duration,e=i.segment,t=i.part,a=i.playlist,o=a.mediaSequence,l=a.id,u=a.segments,_=i.mediaIndex,y=i.partIndex,A=i.timeline,I=(void 0===u?[]:u).length-1,D="mediaIndex/partIndex increment";i.getMediaInfoForTime?D="getMediaInfoForTime ("+i.getMediaInfoForTime+")":i.isSyncRequest&&(D="getSyncSegmentCandidate (isSyncRequest)"),i.independent&&(D+=" with independent "+i.independent);var M="number"==typeof y,Q=i.segment.uri?"segment":"pre-segment",me=M?Ud({preloadSegment:e})-1:0;return Q+" ["+(o+_)+"/"+(o+I)+"]"+(M?" part ["+y+"/"+me+"]":"")+" segment start/end ["+e.start+" => "+e.end+"]"+(M?" part start/end ["+t.start+" => "+t.end+"]":"")+" startOfSegment ["+n+"] duration ["+r+"] timeline ["+A+"] selected by ["+D+"] playlist ["+l+"]"},Pc=function(i){return i+"TimingInfo"},wc=function(i){var n=i.timelineChangeController,e=i.segmentTimeline,t=i.loaderType,a=i.audioDisabled;if(i.currentTimeline===e)return!1;if("audio"===t){var o=n.lastTimelineChange({type:"main"});return!o||o.to!==e}if("main"===t&&a){var l=n.pendingTimelineChange({type:"audio"});return!(l&&l.to===e)}return!1},kc=function(i){var n=i.segmentDuration,r=i.maxDuration;return!!n&&Math.round(n)>r+Mr},Pl=function(s){function i(r,e){var t;if(t=s.call(this)||this,!r)throw new TypeError("Initialization settings are required");if("function"!=typeof r.currentTime)throw new TypeError("No currentTime getter specified");if(!r.mediaSource)throw new TypeError("No MediaSource specified");return t.bandwidth=r.bandwidth,t.throughput={rate:0,count:0},t.roundTrip=NaN,t.resetStats_(),t.mediaIndex=null,t.partIndex=null,t.hasPlayed_=r.hasPlayed,t.currentTime_=r.currentTime,t.seekable_=r.seekable,t.seeking_=r.seeking,t.duration_=r.duration,t.mediaSource_=r.mediaSource,t.vhs_=r.vhs,t.loaderType_=r.loaderType,t.currentMediaInfo_=void 0,t.startingMediaInfo_=void 0,t.segmentMetadataTrack_=r.segmentMetadataTrack,t.goalBufferLength_=r.goalBufferLength,t.sourceType_=r.sourceType,t.sourceUpdater_=r.sourceUpdater,t.inbandTextTracks_=r.inbandTextTracks,t.state_="INIT",t.timelineChangeController_=r.timelineChangeController,t.shouldSaveSegmentTimingInfo_=!0,t.parse708captions_=r.parse708captions,t.useDtsForTimestampOffset_=r.useDtsForTimestampOffset,t.captionServices_=r.captionServices,t.experimentalExactManifestTimings=r.experimentalExactManifestTimings,t.checkBufferTimeout_=null,t.error_=void 0,t.currentTimeline_=-1,t.pendingSegment_=null,t.xhrOptions_=null,t.pendingSegments_=[],t.audioDisabled_=!1,t.isPendingTimestampOffset_=!1,t.gopBuffer_=[],t.timeMapping_=0,t.safeAppend_=q.browser.IE_VERSION>=11,t.appendInitSegment_={audio:!0,video:!0},t.playlistOfLastInitSegment_={audio:null,video:null},t.callQueue_=[],t.loadQueue_=[],t.metadataQueue_={id3:[],caption:[]},t.waitingOnRemove_=!1,t.quotaExceededErrorRetryTimeout_=null,t.activeInitSegmentId_=null,t.initSegments_={},t.cacheEncryptionKeys_=r.cacheEncryptionKeys,t.keyCache_={},t.decrypter_=r.decrypter,t.syncController_=r.syncController,t.syncPoint_={segmentIndex:0,time:0},t.transmuxer_=t.createTransmuxer_(),t.triggerSyncInfoUpdate_=function(){return t.trigger("syncinfoupdate")},t.syncController_.on("syncinfoupdate",t.triggerSyncInfoUpdate_),t.mediaSource_.addEventListener("sourceopen",function(){t.isEndOfStream_()||(t.ended_=!1)}),t.fetchAtBuffer_=!1,t.logger_=Ki("SegmentLoader["+t.loaderType_+"]"),Object.defineProperty(X(t),"state",{get:function(){return this.state_},set:function(o){o!==this.state_&&(this.logger_(this.state_+" -> "+o),this.state_=o,this.trigger("statechange"))}}),t.sourceUpdater_.on("ready",function(){t.hasEnoughInfoToAppend_()&&t.processCallQueue_()}),"main"===t.loaderType_&&t.timelineChangeController_.on("pendingtimelinechange",function(){t.hasEnoughInfoToAppend_()&&t.processCallQueue_()}),"audio"===t.loaderType_&&t.timelineChangeController_.on("timelinechange",function(){t.hasEnoughInfoToLoad_()&&t.processLoadQueue_(),t.hasEnoughInfoToAppend_()&&t.processCallQueue_()}),t}U(i,s);var n=i.prototype;return n.createTransmuxer_=function(){return function(i){var n=new ug;n.currentTransmux=null,n.transmuxQueue=[];var r=n.terminate;return n.terminate=function(){return n.currentTransmux=null,n.transmuxQueue.length=0,r.call(n)},n.postMessage({action:"init",options:i}),n}({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})},n.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0},n.dispose=function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&p().clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},n.setAudio=function(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},n.abort=function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)},n.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,p().clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null},n.checkForAbort_=function(e){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==e:(this.state="READY",!0)},n.error=function(e){return void 0!==e&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_},n.endOfStream=function(){this.ended_=!0,this.transmuxer_&&xl_reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},n.buffered_=function(){var e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return q.createTimeRanges();if("main"===this.loaderType_){var a=e.hasVideo;if(a&&e.hasAudio&&!this.audioDisabled_&&!e.isMuxed)return this.sourceUpdater_.buffered();if(a)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},n.initSegmentForMap=function(e,t){if(void 0===t&&(t=!1),!e)return null;var a=as(e),o=this.initSegments_[a];return t&&!o&&e.bytes&&(this.initSegments_[a]=o={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),o||e},n.segmentKey=function(e,t){if(void 0===t&&(t=!1),!e)return null;var a=tc(e),o=this.keyCache_[a];this.cacheEncryptionKeys_&&t&&!o&&e.bytes&&(this.keyCache_[a]=o={resolvedUri:e.resolvedUri,bytes:e.bytes});var l={resolvedUri:(o||e).resolvedUri};return o&&(l.bytes=o.bytes),l},n.couldBeginLoading_=function(){return this.playlist_&&!this.paused()},n.load=function(){if(this.monitorBuffer_(),this.playlist_){if("INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}},n.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},n.playlist=function(e,t){if(void 0===t&&(t={}),e){var a=this.playlist_,o=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,"INIT"===this.state&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},"main"===this.loaderType_&&this.syncController_.setDateTimeMappingForStart(e));var l=null;if(a&&(a.id?l=a.id:a.uri&&(l=a.uri)),this.logger_("playlist update ["+l+" => "+(e.id||e.uri)+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!a||a.uri!==e.uri)return null!==this.mediaIndex&&(e.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,void this.trigger("playlistupdate");var u=e.mediaSequence-a.mediaSequence;if(this.logger_("live window shift ["+u+"]"),null!==this.mediaIndex)if(this.mediaIndex-=u,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{var c=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!c.parts||!c.parts.length||!c.parts[this.partIndex])){var _=this.mediaIndex;this.logger_("currently processing part (index "+this.partIndex+") no longer exists."),this.resetLoader(),this.mediaIndex=_}}o&&(o.mediaIndex-=u,o.mediaIndex<0?(o.mediaIndex=null,o.partIndex=null):(o.mediaIndex>=0&&(o.segment=e.segments[o.mediaIndex]),o.partIndex>=0&&o.segment.parts&&(o.part=o.segment.parts[o.partIndex]))),this.syncController_.saveExpiredSegmentInfo(a,e)}},n.pause=function(){this.checkBufferTimeout_&&(p().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},n.paused=function(){return null===this.checkBufferTimeout_},n.resetEverything=function(e){this.ended_=!1,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))},n.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},n.resyncLoader=function(){this.transmuxer_&&xl_reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},n.remove=function(e,t,a,o){if(void 0===a&&(a=function(){}),void 0===o&&(o=!1),t===1/0&&(t=this.duration_()),t<=e)this.logger_("skipping remove because end ${end} is <= start ${start}");else if(this.sourceUpdater_&&this.getMediaInfo_()){var l=1,u=function(){0==--l&&a()};for(var c in(o||!this.audioDisabled_)&&(l++,this.sourceUpdater_.removeAudio(e,t,u)),(o||"main"===this.loaderType_)&&(this.gopBuffer_=function(i,n,r,e){for(var t=Math.ceil((n-e)*Aa.ONE_SECOND_IN_TS),a=Math.ceil((r-e)*Aa.ONE_SECOND_IN_TS),o=i.slice(),l=i.length;l--&&!(i[l].pts<=a););if(-1===l)return o;for(var u=l+1;u--&&!(i[u].pts<=t););return u=Math.max(u,0),o.splice(u,l-u+1),o}(this.gopBuffer_,e,t,this.timeMapping_),l++,this.sourceUpdater_.removeVideo(e,t,u)),this.inbandTextTracks_)ca(e,t,this.inbandTextTracks_[c]);ca(e,t,this.segmentMetadataTrack_),u()}else this.logger_("skipping remove because no source updater or starting media info")},n.monitorBuffer_=function(){this.checkBufferTimeout_&&p().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=p().setTimeout(this.monitorBufferTick_.bind(this),1)},n.monitorBufferTick_=function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&p().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=p().setTimeout(this.monitorBufferTick_.bind(this),500)},n.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){var e=this.chooseNextRequest_();!e||("number"==typeof e.timestampOffset&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e))}},n.isEndOfStream_=function(e,t,a){if(void 0===e&&(e=this.mediaIndex),void 0===t&&(t=this.playlist_),void 0===a&&(a=this.partIndex),!t||!this.mediaSource_)return!1;var o="number"==typeof e&&t.segments[e];return t.endList&&"open"===this.mediaSource_.readyState&&e+1===t.segments.length&&(!o||!o.parts||a+1===o.parts.length)},n.chooseNextRequest_=function(){var e=this.buffered_(),t=Nd(e)||0,a=dl(e,this.currentTime_()),o=!this.hasPlayed_()&&a>=1,l=a>=this.goalBufferLength_(),u=this.playlist_.segments;if(!u.length||o||l)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());var c={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)};if(c.isSyncRequest)c.mediaIndex=function(i,n,r){n=n||[];for(var e=[],t=0,a=0;a<n.length;a++){var o=n[a];if(i===o.timeline&&(e.push(a),(t+=o.duration)>r))return a}return 0===e.length?0:e[e.length-1]}(this.currentTimeline_,u,t);else if(null!==this.mediaIndex){var _=u[this.mediaIndex],y="number"==typeof this.partIndex?this.partIndex:-1;c.startOfSegment=_.end?_.end:t,_.parts&&_.parts[y+1]?(c.mediaIndex=this.mediaIndex,c.partIndex=y+1):c.mediaIndex=this.mediaIndex+1}else{var A=ki.getMediaInfoForTime({experimentalExactManifestTimings:this.experimentalExactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?t:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time}),I=A.segmentIndex,D=A.startTime,M=A.partIndex;c.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd "+t:"currentTime "+this.currentTime_(),c.mediaIndex=I,c.startOfSegment=D,c.partIndex=M}var Q=u[c.mediaIndex],me=Q&&"number"==typeof c.partIndex&&Q.parts&&Q.parts[c.partIndex];if(!Q||"number"==typeof c.partIndex&&!me)return null;if("number"!=typeof c.partIndex&&Q.parts&&(c.partIndex=0,me=Q.parts[0]),!a&&me&&!me.independent)if(0===c.partIndex){var Fe=u[c.mediaIndex-1],te=Fe.parts&&Fe.parts.length&&Fe.parts[Fe.parts.length-1];te&&te.independent&&(c.mediaIndex-=1,c.partIndex=Fe.parts.length-1,c.independent="previous segment")}else Q.parts[c.partIndex-1].independent&&(c.partIndex-=1,c.independent="previous part");return c.mediaIndex>=u.length-1&&this.mediaSource_&&"ended"===this.mediaSource_.readyState&&!this.seeking_()?null:this.generateSegmentInfo_(c)},n.generateSegmentInfo_=function(e){var t=e.independent,a=e.playlist,o=e.mediaIndex,l=e.startOfSegment,u=e.isSyncRequest,c=e.partIndex,_=e.forceTimestampOffset,y=e.getMediaInfoForTime,A=a.segments[o],I="number"==typeof c&&A.parts[c],D={requestId:"segment-loader-"+Math.random(),uri:I&&I.resolvedUri||A.resolvedUri,mediaIndex:o,partIndex:I?c:null,isSyncRequest:u,startOfSegment:l,playlist:a,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:A.timeline,duration:I&&I.duration||A.duration,segment:A,part:I,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:y,independent:t},M=void 0!==_?_:this.isPendingTimestampOffset_;D.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:A.timeline,currentTimeline:this.currentTimeline_,startOfSegment:l,buffered:this.buffered_(),overrideCheck:M});var Q=Nd(this.sourceUpdater_.audioBuffered());return"number"==typeof Q&&(D.audioAppendStart=Q-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(D.gopsToAlignWith=function(i,n,r){if(null==n||!i.length)return[];var t,e=Math.ceil((n-r+3)*Aa.ONE_SECOND_IN_TS);for(t=0;t<i.length&&!(i[t].pts>e);t++);return i.slice(t)}(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),D},n.timestampOffsetForSegment_=function(e){return function(i){var n=i.segmentTimeline,r=i.currentTimeline,e=i.startOfSegment,t=i.buffered;return i.overrideCheck||n!==r?n<r?e:t.length?t.end(t.length-1):e:null}(e)},n.earlyAbortWhenNeeded_=function(e){if(!this.vhs_.tech_.paused()&&this.xhrOptions_.timeout&&this.playlist_.attributes.BANDWIDTH&&!(Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)){var t=this.currentTime_(),a=e.bandwidth,o=this.pendingSegment_.duration,l=ki.estimateSegmentRequestTime(o,a,this.playlist_,e.bytesReceived),u=function(i,n,r){return void 0===r&&(r=1),((i.length?i.end(i.length-1):0)-n)/r}(this.buffered_(),t,this.vhs_.tech_.playbackRate())-1;if(!(l<=u)){var c=function(i){var r=i.currentTime,e=i.bandwidth,t=i.duration,a=i.segmentDuration,o=i.timeUntilRebuffer,l=i.currentTimeline,u=i.syncController,c=i.master.playlists.filter(function(D){return!ki.isIncompatible(D)}),_=c.filter(ki.isEnabled);_.length||(_=c.filter(function(D){return!ki.isDisabled(D)}));var A=_.filter(ki.hasAttribute.bind(null,"BANDWIDTH")).map(function(D){var Q=u.getSyncPoint(D,t,l,r)?1:2;return{playlist:D,rebufferingImpact:ki.estimateSegmentRequestTime(a,e,D)*Q-o}}),I=A.filter(function(D){return D.rebufferingImpact<=0});return Ln(I,function(D,M){return Al(M.playlist,D.playlist)}),I.length?I[0]:(Ln(A,function(D,M){return D.rebufferingImpact-M.rebufferingImpact}),A[0]||null)}({master:this.vhs_.playlists.master,currentTime:t,bandwidth:a,duration:this.duration_(),segmentDuration:o,timeUntilRebuffer:u,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(c){var A=.5;u<=Mr&&(A=1),c.playlist&&c.playlist.uri!==this.playlist_.uri&&!(l-u-c.rebufferingImpact<A)&&(this.bandwidth=c.playlist.attributes.BANDWIDTH*li.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}}}},n.handleAbort_=function(e){this.logger_("Aborting "+Dn(e)),this.mediaRequestsAborted+=1},n.handleProgress_=function(e,t){this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)&&this.trigger("progress")},n.handleTrackInfo_=function(e,t){this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)&&(this.checkForIllegalMediaSwitch(t)||(function(i,n){if(!i&&!n||!i&&n||i&&!n)return!1;if(i===n)return!0;var r=Object.keys(i).sort(),e=Object.keys(n).sort();if(r.length!==e.length)return!1;for(var t=0;t<r.length;t++){var a=r[t];if(a!==e[t]||i[a]!==n[a])return!1}return!0}(this.currentMediaInfo_,t=t||{})||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=t,this.currentMediaInfo_=t,this.logger_("trackinfo update",t),this.trigger("trackinfo")),!this.checkForAbort_(e.requestId)&&(this.pendingSegment_.trackInfo=t,this.hasEnoughInfoToAppend_()&&this.processCallQueue_())))},n.handleTimingInfo_=function(e,t,a,o){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)){var l=this.pendingSegment_,u=Pc(t);l[u]=l[u]||{},l[u][a]=o,this.logger_("timinginfo: "+t+" - "+a+" - "+o),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}},n.handleCaptions_=function(e,t){var a=this;if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)){if(0===t.length)return void this.logger_("SegmentLoader received no captions from a caption event");if(!this.pendingSegment_.hasAppendedData_)return void this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,t));var l=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),u={};t.forEach(function(c){u[c.stream]=u[c.stream]||{startTime:1/0,captions:[],endTime:0};var _=u[c.stream];_.startTime=Math.min(_.startTime,c.startTime+l),_.endTime=Math.max(_.endTime,c.endTime+l),_.captions.push(c)}),Object.keys(u).forEach(function(c){var _=u[c],y=_.startTime,A=_.endTime,I=_.captions,D=a.inbandTextTracks_;a.logger_("adding cues from "+y+" -> "+A+" for "+c),function(i,n,r){if(!i[r]){n.trigger({type:"usage",name:"vhs-608"}),n.trigger({type:"usage",name:"hls-608"});var e=r;/^cc708_/.test(r)&&(e="SERVICE"+r.split("_")[1]);var t=n.textTracks().getTrackById(e);if(t)i[r]=t;else{var o=r,l=r,u=!1,c=(n.options_.vhs&&n.options_.vhs.captionServices||{})[e];c&&(o=c.label,l=c.language,u=c.default),i[r]=n.addRemoteTextTrack({kind:"captions",id:e,default:u,label:o,language:l},!1).track}}}(D,a.vhs_.tech_,c),ca(y,A,D[c]),function(i){var n=i.inbandTextTracks,r=i.captionArray,e=i.timestampOffset;if(r){var t=p().WebKitDataCue||p().VTTCue;r.forEach(function(a){n[a.stream].addCue(new t(a.startTime+e,a.endTime+e,a.text))})}}({captionArray:I,inbandTextTracks:D,timestampOffset:l})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}},n.handleId3_=function(e,t,a){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)){if(!this.pendingSegment_.hasAppendedData_)return void this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,t,a));var l=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();(function(i,n,r){i.metadataTrack_||(i.metadataTrack_=r.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,i.metadataTrack_.inBandMetadataTrackDispatchType=n)})(this.inbandTextTracks_,a,this.vhs_.tech_),function(i){var n=i.inbandTextTracks,r=i.metadataArray,e=i.timestampOffset,t=i.videoDuration;if(r){var a=p().WebKitDataCue||p().VTTCue,o=n.metadataTrack_;if(o&&(r.forEach(function(A){var I=A.cueTime+e;"number"!=typeof I||p().isNaN(I)||I<0||!(I<1/0)||A.frames.forEach(function(D){var M=new a(I,I,D.value||D.url||D.data||"");M.frame=D,M.value=D,function(i){Object.defineProperties(i.frame,{id:{get:function(){return q.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),i.value.key}},value:{get:function(){return q.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),i.value.data}},privateData:{get:function(){return q.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),i.value.data}}})}(M),o.addCue(M)})}),o.cues&&o.cues.length)){for(var l=o.cues,u=[],c=0;c<l.length;c++)l[c]&&u.push(l[c]);var _=u.reduce(function(A,I){var D=A[I.startTime]||[];return D.push(I),A[I.startTime]=D,A},{}),y=Object.keys(_).sort(function(A,I){return Number(A)-Number(I)});y.forEach(function(A,I){var D=_[A],M=Number(y[I+1])||t;D.forEach(function(Q){Q.endTime=M})})}}}({inbandTextTracks:this.inbandTextTracks_,metadataArray:t,timestampOffset:l,videoDuration:this.duration_()})}},n.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach(function(e){return e()}),this.metadataQueue_.caption.forEach(function(e){return e()}),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},n.processCallQueue_=function(){var e=this.callQueue_;this.callQueue_=[],e.forEach(function(t){return t()})},n.processLoadQueue_=function(){var e=this.loadQueue_;this.loadQueue_=[],e.forEach(function(t){return t()})},n.hasEnoughInfoToLoad_=function(){if("audio"!==this.loaderType_)return!0;var e=this.pendingSegment_;return!(!e||this.getCurrentMediaInfo_()&&wc({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},n.getCurrentMediaInfo_=function(e){return void 0===e&&(e=this.pendingSegment_),e&&e.trackInfo||this.currentMediaInfo_},n.getMediaInfo_=function(e){return void 0===e&&(e=this.pendingSegment_),this.getCurrentMediaInfo_(e)||this.startingMediaInfo_},n.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;var e=this.pendingSegment_,t=this.getCurrentMediaInfo_();return!(!e||!t||t.hasVideo&&!e.videoTimingInfo||t.hasAudio&&!this.audioDisabled_&&!t.isMuxed&&!e.audioTimingInfo||wc({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},n.handleData_=function(e,t){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)){if(this.callQueue_.length||!this.hasEnoughInfoToAppend_())return void this.callQueue_.push(this.handleData_.bind(this,e,t));var a=this.pendingSegment_;if(this.setTimeMapping_(a.timeline),this.updateMediaSecondsLoaded_(a.part||a.segment),"closed"!==this.mediaSource_.readyState){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),a.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),a.isFmp4=e.isFmp4,a.timingInfo=a.timingInfo||{},a.isFmp4)this.trigger("fmp4"),a.timingInfo.start=a[Pc(t.type)].start;else{var u,o=this.getCurrentMediaInfo_(),l="main"===this.loaderType_&&o&&o.hasVideo;l&&(u=a.videoTimingInfo.start),a.timingInfo.start=this.trueSegmentStart_({currentStart:a.timingInfo.start,playlist:a.playlist,mediaIndex:a.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:l,firstVideoFrameTimeForData:u,videoTimingInfo:a.videoTimingInfo,audioTimingInfo:a.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(a,t.type),this.updateSourceBufferTimestampOffset_(a),a.isSyncRequest){this.updateTimingInfoEnd_(a),this.syncController_.saveSegmentTimingInfo({segmentInfo:a,shouldSaveTimelineMapping:"main"===this.loaderType_});var c=this.chooseNextRequest_();if(c.mediaIndex!==a.mediaIndex||c.partIndex!==a.partIndex)return void this.logger_("sync segment was incorrect, not appending");this.logger_("sync segment was correct, appending")}a.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(a,t)}}},n.updateAppendInitSegmentStatus=function(e,t){"main"===this.loaderType_&&"number"==typeof e.timestampOffset&&!e.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[t]!==e.playlist&&(this.appendInitSegment_[t]=!0)},n.getInitSegmentAndUpdateState_=function(e){var t=e.type,a=e.initSegment,o=e.map,l=e.playlist;if(o){var u=as(o);if(this.activeInitSegmentId_===u)return null;a=this.initSegmentForMap(o,!0).bytes,this.activeInitSegmentId_=u}return a&&this.appendInitSegment_[t]?(this.playlistOfLastInitSegment_[t]=l,this.appendInitSegment_[t]=!1,this.activeInitSegmentId_=null,a):null},n.handleQuotaExceededError_=function(e,t){var a=this,o=e.segmentInfo,l=e.type,u=e.bytes,c=this.sourceUpdater_.audioBuffered(),_=this.sourceUpdater_.videoBuffered();c.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+Jr(c).join(", ")),_.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+Jr(_).join(", "));var y=c.length?c.start(0):0,A=c.length?c.end(c.length-1):0,I=_.length?_.start(0):0,D=_.length?_.end(_.length-1):0;if(A-y<=1&&D-I<=1)return this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: "+u.byteLength+", audio buffer: "+Jr(c).join(", ")+", video buffer: "+Jr(_).join(", ")+", "),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),void this.trigger("error");this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:o,type:l,bytes:u}));var Q=this.currentTime_()-1;this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to "+Q),this.remove(0,Q,function(){a.logger_("On QUOTA_EXCEEDED_ERR, retrying append in 1s"),a.waitingOnRemove_=!1,a.quotaExceededErrorRetryTimeout_=p().setTimeout(function(){a.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),a.quotaExceededErrorRetryTimeout_=null,a.processCallQueue_()},1e3)},!0)},n.handleAppendError_=function(e,t){var a=e.segmentInfo,o=e.type,l=e.bytes;if(t){if(22===t.code)return void this.handleQuotaExceededError_({segmentInfo:a,type:o,bytes:l});this.logger_("Received non QUOTA_EXCEEDED_ERR on append",t),this.error(o+" append of "+l.length+"b failed for segment #"+a.mediaIndex+" in playlist "+a.playlist.id),this.trigger("appenderror")}},n.appendToSourceBuffer_=function(e){var t=e.segmentInfo,a=e.type,o=e.initSegment,l=e.data,u=e.bytes;if(!u){var c=[l],_=l.byteLength;o&&(c.unshift(o),_+=o.byteLength),u=function(i){var r,n=0;return i.bytes&&(r=new Uint8Array(i.bytes),i.segments.forEach(function(e){r.set(e,n),n+=e.byteLength})),r}({bytes:_,segments:c})}this.sourceUpdater_.appendBuffer({segmentInfo:t,type:a,bytes:u},this.handleAppendError_.bind(this,{segmentInfo:t,type:a,bytes:u}))},n.handleSegmentTimingInfo_=function(e,t,a){if(this.pendingSegment_&&t===this.pendingSegment_.requestId){var o=this.pendingSegment_.segment,l=e+"TimingInfo";o[l]||(o[l]={}),o[l].transmuxerPrependedSeconds=a.prependedContentDuration||0,o[l].transmuxedPresentationStart=a.start.presentation,o[l].transmuxedDecodeStart=a.start.decode,o[l].transmuxedPresentationEnd=a.end.presentation,o[l].transmuxedDecodeEnd=a.end.decode,o[l].baseMediaDecodeTime=a.baseMediaDecodeTime}},n.appendData_=function(e,t){var a=t.type,o=t.data;if(o&&o.byteLength&&("audio"!==a||!this.audioDisabled_)){var l=this.getInitSegmentAndUpdateState_({type:a,initSegment:t.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:a,initSegment:l,data:o})}},n.loadSegment_=function(e){var t=this;this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),"number"==typeof e.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(e):this.loadQueue_.push(function(){var a=he({},e,{forceTimestampOffset:!0});he(e,t.generateSegmentInfo_(a)),t.isPendingTimestampOffset_=!1,t.updateTransmuxerAndRequestSegment_(e)})},n.updateTransmuxerAndRequestSegment_=function(e){var t=this;this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));var a=this.createSimplifiedSegmentObj_(e),c=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)||null!==this.mediaIndex&&e.timeline!==this.currentTimeline_&&e.timeline>0;this.logger_("Requesting "+Dn(e)),a.map&&!a.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=Eg({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:a,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:c,endedTimelineFn:function(){t.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:function(y){var A=y.message,I=y.level,D=y.stream;t.logger_(Dn(e)+" logged from transmuxer stream "+D+" as a "+I+": "+A)}})},n.trimBackBuffer_=function(e){var t=function(i,n,r){var e=n-li.BACK_BUFFER_LENGTH;return i.length&&(e=Math.max(e,i.start(0))),Math.min(n-r,e)}(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);t>0&&this.remove(0,t)},n.createSimplifiedSegmentObj_=function(e){var t=e.segment,a=e.part,o={resolvedUri:a?a.resolvedUri:t.resolvedUri,byterange:a?a.byterange:t.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part},l=e.playlist.segments[e.mediaIndex-1];if(l&&l.timeline===t.timeline&&(l.videoTimingInfo?o.baseStartTime=l.videoTimingInfo.transmuxedDecodeEnd:l.audioTimingInfo&&(o.baseStartTime=l.audioTimingInfo.transmuxedDecodeEnd)),t.key){var u=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);o.key=this.segmentKey(t.key),o.key.iv=u}return t.map&&(o.map=this.initSegmentForMap(t.map)),o},n.saveTransferStats_=function(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)},n.saveBandwidthRelatedStats_=function(e,t){this.pendingSegment_.byteLength=t.bytesReceived,e<ds?this.logger_("Ignoring segment's bandwidth because its duration of "+e+" is less than the min to record "+ds):(this.bandwidth=t.bandwidth,this.roundTrip=t.roundTripTime)},n.handleTimeout_=function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate")},n.segmentRequestFinished_=function(e,t,a){if(this.callQueue_.length)this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,t,a));else if(this.saveTransferStats_(t.stats),this.pendingSegment_&&t.requestId===this.pendingSegment_.requestId){if(e){if(this.pendingSegment_=null,this.state="READY",-102===e.code)return;return this.pause(),-101===e.code?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(e),void this.trigger("error"))}var o=this.pendingSegment_;this.saveBandwidthRelatedStats_(o.duration,t.stats),o.endOfAllRequests=t.endOfAllRequests,a.gopInfo&&(this.gopBuffer_=function(i,n,r){if(!n.length)return i;if(r)return n.slice();for(var e=n[0].pts,t=0;t<i.length&&!(i[t].pts>=e);t++);return i.slice(0,t).concat(n)}(this.gopBuffer_,a.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(o)}},n.setTimeMapping_=function(e){var t=this.syncController_.mappingForTimeline(e);null!==t&&(this.timeMapping_=t)},n.updateMediaSecondsLoaded_=function(e){this.mediaSecondsLoaded+="number"==typeof e.start&&"number"==typeof e.end?e.end-e.start:e.duration},n.shouldUpdateTransmuxerTimestampOffset_=function(e){return null!==e&&("main"===this.loaderType_&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset())},n.trueSegmentStart_=function(e){var t=e.currentStart,o=e.mediaIndex,l=e.firstVideoFrameTimeForData;if(void 0!==t)return t;if(!e.useVideoTimingInfo)return e.audioTimingInfo.start;var A=e.playlist.segments[o-1];return 0!==o&&A&&void 0!==A.start&&A.end===l+e.currentVideoTimestampOffset?e.videoTimingInfo.start:l},n.waitForAppendsToComplete_=function(e){var t=this.getCurrentMediaInfo_(e);if(!t)return this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),void this.trigger("error");var u="main"===this.loaderType_&&t.hasVideo,c=!this.audioDisabled_&&t.hasAudio&&!t.isMuxed;if(e.waitingOnAppends=0,!e.hasAppendedData_)return!e.timingInfo&&"number"==typeof e.timestampOffset&&(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),void this.checkAppendsDone_(e);u&&e.waitingOnAppends++,c&&e.waitingOnAppends++,u&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),c&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))},n.checkAppendsDone_=function(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,0===e.waitingOnAppends&&this.handleAppendsDone_())},n.checkForIllegalMediaSwitch=function(e){var t=function(i,n,r){return"main"===i&&n&&r?r.hasAudio||r.hasVideo?n.hasVideo&&!r.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!n.hasVideo&&r.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null}(this.loaderType_,this.getCurrentMediaInfo_(),e);return!!t&&(this.error({message:t,blacklistDuration:1/0}),this.trigger("error"),!0)},n.updateSourceBufferTimestampOffset_=function(e){if(null!==e.timestampOffset&&"number"==typeof e.timingInfo.start&&!e.changedTimestampOffset&&"main"===this.loaderType_){var t=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),t=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),t=!0),t&&this.trigger("timestampoffset")}},n.getSegmentStartTimeForTimestampOffsetCalculation_=function(e){var t=e.videoTimingInfo,a=e.audioTimingInfo,o=e.timingInfo;return this.useDtsForTimestampOffset_?t&&"number"==typeof t.transmuxedDecodeStart?t.transmuxedDecodeStart:a&&"number"==typeof a.transmuxedDecodeStart?a.transmuxedDecodeStart:o.start:o.start},n.updateTimingInfoEnd_=function(e){e.timingInfo=e.timingInfo||{};var t=this.getMediaInfo_(),o="main"===this.loaderType_&&t&&t.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;!o||(e.timingInfo.end="number"==typeof o.end?o.end:o.start+e.duration)},n.handleAppendsDone_=function(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var e=this.pendingSegment_;this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:"main"===this.loaderType_});var t=function(i,n){if("hls"!==n)return null;var r=function(i){var n=0;return["video","audio"].forEach(function(r){var e=i[r+"TimingInfo"];if(e){var o,t=e.start,a=e.end;"bigint"==typeof t||"bigint"==typeof a?o=p().BigInt(a)-p().BigInt(t):"number"==typeof t&&"number"==typeof a&&(o=a-t),void 0!==o&&o>n&&(n=o)}}),"bigint"==typeof n&&n<Number.MAX_SAFE_INTEGER&&(n=Number(n)),n}({audioTimingInfo:i.audioTimingInfo,videoTimingInfo:i.videoTimingInfo});if(!r)return null;var e=i.playlist.targetDuration,t=kc({segmentDuration:r,maxDuration:2*e}),a=kc({segmentDuration:r,maxDuration:e});return t||a?{severity:t?"warn":"info",message:"Segment with index "+i.mediaIndex+" from playlist "+i.playlist.id+" has a duration of "+r+" when the reported duration is "+i.duration+" and the target duration is "+e+". For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1"}:null}(e,this.sourceType_);if(t&&("warn"===t.severity?q.log.warn(t.message):this.logger_(t.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",!e.isSyncRequest||(this.trigger("syncinfoupdate"),e.hasAppendedData_)){this.logger_("Appended "+Dn(e)),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),"main"===this.loaderType_&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");var a=e.segment,o=e.part,l=a.end&&this.currentTime_()-a.end>3*e.playlist.targetDuration,u=o&&o.end&&this.currentTime_()-o.end>3*e.playlist.partTargetDuration;if(l||u)return this.logger_("bad "+(l?"segment":"part")+" "+Dn(e)),void this.resetEverything();null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}else this.logger_("Throwing away un-appended sync request "+Dn(e))},n.recordThroughput_=function(e){if(e.duration<ds)this.logger_("Ignoring segment's throughput because its duration of "+e.duration+" is less than the min to record "+ds);else{var t=this.throughput.rate,a=Date.now()-e.endOfAllRequests+1,o=Math.floor(e.byteLength/a*8*1e3);this.throughput.rate+=(o-t)/++this.throughput.count}},n.addSegmentMetadataCue_=function(e){if(this.segmentMetadataTrack_){var t=e.segment,a=t.start,o=t.end;if(Ac(a)&&Ac(o)){ca(a,o,this.segmentMetadataTrack_);var l=p().WebKitDataCue||p().VTTCue,u={custom:t.custom,dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:a,end:o},_=new l(a,o,JSON.stringify(u));_.value=u,this.segmentMetadataTrack_.addCue(_)}}},i}(q.EventTarget);function vr(){}var yr,Ic=function(i){return"string"!=typeof i?i:i.replace(/./,function(n){return n.toUpperCase()})},Yg=["video","audio"],wl=function(i,n){var r=n[i+"Buffer"];return r&&r.updating||n.queuePending[i]},kl=function s(i,n){if(0!==n.queue.length){var r=0,e=n.queue[r];if("mediaSource"===e.type)return void(!n.updating()&&"closed"!==n.mediaSource.readyState&&(n.queue.shift(),e.action(n),e.doneFn&&e.doneFn(),s("audio",n),s("video",n)));if("mediaSource"!==i&&n.ready()&&"closed"!==n.mediaSource.readyState&&!wl(i,n)){if(e.type!==i){if(r=function(i,n){for(var r=0;r<n.length;r++){var e=n[r];if("mediaSource"===e.type)return null;if(e.type===i)return r}return null}(i,n.queue),null===r)return;e=n.queue[r]}if(n.queue.splice(r,1),n.queuePending[i]=e,e.action(i,n),!e.doneFn)return n.queuePending[i]=null,void s(i,n)}}},Lc=function(i,n){var r=n[i+"Buffer"],e=Ic(i);!r||(r.removeEventListener("updateend",n["on"+e+"UpdateEnd_"]),r.removeEventListener("error",n["on"+e+"Error_"]),n.codecs[i]=null,n[i+"Buffer"]=null)},tr=function(i,n){return i&&n&&-1!==Array.prototype.indexOf.call(i.sourceBuffers,n)},Mi_appendBuffer=function(i,n,r){return function(e,t){var a=t[e+"Buffer"];if(tr(t.mediaSource,a)){t.logger_("Appending segment "+n.mediaIndex+"'s "+i.length+" bytes to "+e+"Buffer");try{a.appendBuffer(i)}catch(o){t.logger_("Error with code "+o.code+" "+(22===o.code?"(QUOTA_EXCEEDED_ERR) ":"")+"when appending segment "+n.mediaIndex+" to "+e+"Buffer"),t.queuePending[e]=null,r(o)}}}},Mi_remove=function(i,n){return function(r,e){var t=e[r+"Buffer"];if(tr(e.mediaSource,t)){e.logger_("Removing "+i+" to "+n+" from "+r+"Buffer");try{t.remove(i,n)}catch(a){e.logger_("Remove "+i+" to "+n+" from "+r+"Buffer failed")}}}},Mi_timestampOffset=function(i){return function(n,r){var e=r[n+"Buffer"];!tr(r.mediaSource,e)||(r.logger_("Setting "+n+"timestampOffset to "+i),e.timestampOffset=i)}},Mi_callback=function(i){return function(n,r){i()}},Mi_endOfStream=function(i){return function(n){if("open"===n.mediaSource.readyState){n.logger_("Calling mediaSource endOfStream("+(i||"")+")");try{n.mediaSource.endOfStream(i)}catch(r){q.log.warn("Failed to call media source endOfStream",r)}}}},Mi_duration=function(i){return function(n){n.logger_("Setting mediaSource duration to "+i);try{n.mediaSource.duration=i}catch(r){q.log.warn("Failed to set media source duration",r)}}},Mi_addSourceBuffer=function(i,n){return function(r){var e=Ic(i),t=Pi(n);r.logger_("Adding "+i+"Buffer with codec "+n+" to mediaSource");var a=r.mediaSource.addSourceBuffer(t);a.addEventListener("updateend",r["on"+e+"UpdateEnd_"]),a.addEventListener("error",r["on"+e+"Error_"]),r.codecs[i]=n,r[i+"Buffer"]=a}},Mi_removeSourceBuffer=function(i){return function(n){var r=n[i+"Buffer"];if(Lc(i,n),tr(n.mediaSource,r)){n.logger_("Removing "+i+"Buffer with codec "+n.codecs[i]+" from mediaSource");try{n.mediaSource.removeSourceBuffer(r)}catch(e){q.log.warn("Failed to removeSourceBuffer "+i+"Buffer",e)}}}},Mi_changeType=function(i){return function(n,r){var e=r[n+"Buffer"],t=Pi(i);!tr(r.mediaSource,e)||r.codecs[n]!==i&&(r.logger_("changing "+n+"Buffer codec from "+r.codecs[n]+" to "+i),e.changeType(t),r.codecs[n]=i)}},Oi=function(i){var n=i.type,r=i.sourceUpdater;r.queue.push({type:n,action:i.action,doneFn:i.doneFn,name:i.name}),kl(n,r)},Dc=function(i,n){return function(r){if(n.queuePending[i]){var e=n.queuePending[i].doneFn;n.queuePending[i]=null,e&&e(n[i+"Error_"])}kl(i,n)}},Mc=function(s){function i(r){var e;return(e=s.call(this)||this).mediaSource=r,e.sourceopenListener_=function(){return kl("mediaSource",X(e))},e.mediaSource.addEventListener("sourceopen",e.sourceopenListener_),e.logger_=Ki("SourceUpdater"),e.audioTimestampOffset_=0,e.videoTimestampOffset_=0,e.queue=[],e.queuePending={audio:null,video:null},e.delayedAudioAppendQueue_=[],e.videoAppendQueued_=!1,e.codecs={},e.onVideoUpdateEnd_=Dc("video",X(e)),e.onAudioUpdateEnd_=Dc("audio",X(e)),e.onVideoError_=function(t){e.videoError_=t},e.onAudioError_=function(t){e.audioError_=t},e.createdSourceBuffers_=!1,e.initializedEme_=!1,e.triggeredReady_=!1,e}U(i,s);var n=i.prototype;return n.initializedEme=function(){this.initializedEme_=!0,this.triggerReady()},n.hasCreatedSourceBuffers=function(){return this.createdSourceBuffers_},n.hasInitializedAnyEme=function(){return this.initializedEme_},n.ready=function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()},n.createSourceBuffers=function(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())},n.triggerReady=function(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))},n.addSourceBuffer=function(e,t){Oi({type:"mediaSource",sourceUpdater:this,action:Mi_addSourceBuffer(e,t),name:"addSourceBuffer"})},n.abort=function(e){Oi({type:e,sourceUpdater:this,action:function(i,n){if("open"===n.mediaSource.readyState){var r=n[i+"Buffer"];if(tr(n.mediaSource,r)){n.logger_("calling abort on "+i+"Buffer");try{r.abort()}catch(e){q.log.warn("Failed to abort on "+i+"Buffer",e)}}}},name:"abort"})},n.removeSourceBuffer=function(e){this.canRemoveSourceBuffer()?Oi({type:"mediaSource",sourceUpdater:this,action:Mi_removeSourceBuffer(e),name:"removeSourceBuffer"}):q.log.error("removeSourceBuffer is not supported!")},n.canRemoveSourceBuffer=function(){return!q.browser.IE_VERSION&&!q.browser.IS_FIREFOX&&p().MediaSource&&p().MediaSource.prototype&&"function"==typeof p().MediaSource.prototype.removeSourceBuffer},i.canChangeType=function(){return p().SourceBuffer&&p().SourceBuffer.prototype&&"function"==typeof p().SourceBuffer.prototype.changeType},n.canChangeType=function(){return this.constructor.canChangeType()},n.changeType=function(e,t){this.canChangeType()?Oi({type:e,sourceUpdater:this,action:Mi_changeType(t),name:"changeType"}):q.log.error("changeType is not supported!")},n.addOrChangeSourceBuffers=function(e){var t=this;if(!e||"object"!=typeof e||0===Object.keys(e).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach(function(a){var o=e[a];if(!t.hasCreatedSourceBuffers())return t.addSourceBuffer(a,o);t.canChangeType()&&t.changeType(a,o)})},n.appendBuffer=function(e,t){var a=this,o=e.segmentInfo,l=e.type,u=e.bytes;if(this.processedAppend_=!0,"audio"===l&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([e,t]),void this.logger_("delayed audio append of "+u.length+" until video append");if(Oi({type:l,sourceUpdater:this,action:Mi_appendBuffer(u,o||{mediaIndex:-1},t),doneFn:t,name:"appendBuffer"}),"video"===l){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;var _=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio "+_.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,_.forEach(function(y){a.appendBuffer.apply(a,y)})}},n.audioBuffered=function(){return tr(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:q.createTimeRange()},n.videoBuffered=function(){return tr(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:q.createTimeRange()},n.buffered=function(){var e=tr(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,t=tr(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return t&&!e?this.audioBuffered():e&&!t?this.videoBuffered():function(i,n){var r=null,e=null,t=0,a=[],o=[];if(!(i&&i.length&&n&&n.length))return q.createTimeRange();for(var l=i.length;l--;)a.push({time:i.start(l),type:"start"}),a.push({time:i.end(l),type:"end"});for(l=n.length;l--;)a.push({time:n.start(l),type:"start"}),a.push({time:n.end(l),type:"end"});for(a.sort(function(u,c){return u.time-c.time}),l=0;l<a.length;l++)"start"===a[l].type?2==++t&&(r=a[l].time):"end"===a[l].type&&1==--t&&(e=a[l].time),null!==r&&null!==e&&(o.push([r,e]),r=null,e=null);return q.createTimeRanges(o)}(this.audioBuffered(),this.videoBuffered())},n.setDuration=function(e,t){void 0===t&&(t=vr),Oi({type:"mediaSource",sourceUpdater:this,action:Mi_duration(e),name:"duration",doneFn:t})},n.endOfStream=function(e,t){void 0===e&&(e=null),void 0===t&&(t=vr),"string"!=typeof e&&(e=void 0),Oi({type:"mediaSource",sourceUpdater:this,action:Mi_endOfStream(e),name:"endOfStream",doneFn:t})},n.removeAudio=function(e,t,a){void 0===a&&(a=vr),this.audioBuffered().length&&0!==this.audioBuffered().end(0)?Oi({type:"audio",sourceUpdater:this,action:Mi_remove(e,t),doneFn:a,name:"remove"}):a()},n.removeVideo=function(e,t,a){void 0===a&&(a=vr),this.videoBuffered().length&&0!==this.videoBuffered().end(0)?Oi({type:"video",sourceUpdater:this,action:Mi_remove(e,t),doneFn:a,name:"remove"}):a()},n.updating=function(){return!(!wl("audio",this)&&!wl("video",this))},n.audioTimestampOffset=function(e){return void 0!==e&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(Oi({type:"audio",sourceUpdater:this,action:Mi_timestampOffset(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_},n.videoTimestampOffset=function(e){return void 0!==e&&this.videoBuffer&&this.videoTimestampOffset!==e&&(Oi({type:"video",sourceUpdater:this,action:Mi_timestampOffset(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_},n.audioQueueCallback=function(e){!this.audioBuffer||Oi({type:"audio",sourceUpdater:this,action:Mi_callback(e),name:"callback"})},n.videoQueueCallback=function(e){!this.videoBuffer||Oi({type:"video",sourceUpdater:this,action:Mi_callback(e),name:"callback"})},n.dispose=function(){var e=this;this.trigger("dispose"),Yg.forEach(function(t){e.abort(t),e.canRemoveSourceBuffer()?e.removeSourceBuffer(t):e[t+"QueueCallback"](function(){return Lc(t,e)})}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},i}(q.EventTarget),Oc=function(i){return decodeURIComponent(escape(String.fromCharCode.apply(null,i)))},Rc=new Uint8Array("\n\n".split("").map(function(s){return s.charCodeAt(0)})),Zg=function(s){function i(r,e){var t;return void 0===e&&(e={}),(t=s.call(this,r,e)||this).mediaSource_=null,t.subtitlesTrack_=null,t.loaderType_="subtitle",t.featuresNativeTextTracks_=r.featuresNativeTextTracks,t.shouldSaveSegmentTimingInfo_=!1,t}U(i,s);var n=i.prototype;return n.createTransmuxer_=function(){return null},n.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return q.createTimeRanges();var e=this.subtitlesTrack_.cues;return q.createTimeRanges([[e[0].startTime,e[e.length-1].startTime]])},n.initSegmentForMap=function(e,t){if(void 0===t&&(t=!1),!e)return null;var a=as(e),o=this.initSegments_[a];if(t&&!o&&e.bytes){var u=new Uint8Array(Rc.byteLength+e.bytes.byteLength);u.set(e.bytes),u.set(Rc,e.bytes.byteLength),this.initSegments_[a]=o={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:u}}return o||e},n.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},n.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},n.track=function(e){return void 0===e||(this.subtitlesTrack_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_},n.remove=function(e,t){ca(e,t,this.subtitlesTrack_)},n.fillBuffer_=function(){var e=this,t=this.chooseNextRequest_();if(t){if(null===this.syncController_.timestampOffsetForTimeline(t.timeline))return this.syncController_.one("timestampoffset",function(){e.state="READY",e.paused()||e.monitorBuffer_()}),void(this.state="WAITING_ON_TIMELINE");this.loadSegment_(t)}},n.timestampOffsetForSegment_=function(){return null},n.chooseNextRequest_=function(){return this.skipEmptySegments_(s.prototype.chooseNextRequest_.call(this))},n.skipEmptySegments_=function(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e},n.stopForError=function(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")},n.segmentRequestFinished_=function(e,t,a){var o=this;if(this.subtitlesTrack_){if(this.saveTransferStats_(t.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(e)return-101===e.code&&this.handleTimeout_(),-102===e.code?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(e);var l=this.pendingSegment_;this.saveBandwidthRelatedStats_(l.duration,t.stats),t.key&&this.segmentKey(t.key,!0),this.state="APPENDING",this.trigger("appending");var u=l.segment;if(u.map&&(u.map.bytes=t.map.bytes),l.bytes=t.bytes,"function"!=typeof p().WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var c,_=function(){o.subtitlesTrack_.tech_.off("vttjsloaded",c),o.stopForError({message:"Error loading vtt.js"})};return c=function(){o.subtitlesTrack_.tech_.off("vttjserror",_),o.segmentRequestFinished_(e,t,a)},this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",c),void this.subtitlesTrack_.tech_.one("vttjserror",_)}u.requested=!0;try{this.parseVTTCues_(l)}catch(y){return void this.stopForError({message:y.message})}if(this.updateTimeMapping_(l,this.syncController_.timelines[l.timeline],this.playlist_),l.timingInfo=l.cues.length?{start:l.cues[0].startTime,end:l.cues[l.cues.length-1].endTime}:{start:l.startOfSegment,end:l.startOfSegment+l.duration},l.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");l.byteLength=l.bytes.byteLength,this.mediaSecondsLoaded+=u.duration,l.cues.forEach(function(y){o.subtitlesTrack_.addCue(o.featuresNativeTextTracks_?new(p().VTTCue)(y.startTime,y.endTime,y.text):y)}),function(i){var n=i.cues;if(n)for(var r=0;r<n.length;r++){for(var e=[],t=0,a=0;a<n.length;a++)n[r].startTime===n[a].startTime&&n[r].endTime===n[a].endTime&&n[r].text===n[a].text&&++t>1&&e.push(n[a]);e.length&&e.forEach(function(o){return i.removeCue(o)})}}(this.subtitlesTrack_),this.handleAppendsDone_()}else this.state="READY"},n.handleData_=function(){},n.updateTimingInfoEnd_=function(){},n.parseVTTCues_=function(e){var t,a=!1;"function"==typeof p().TextDecoder?t=new(p().TextDecoder)("utf8"):(t=p().WebVTT.StringDecoder(),a=!0);var o=new(p().WebVTT.Parser)(p(),p().vttjs,t);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},o.oncue=e.cues.push.bind(e.cues),o.ontimestampmap=function(c){e.timestampmap=c},o.onparsingerror=function(c){q.log.warn("Error encountered when parsing cues: "+c.message)},e.segment.map){var l=e.segment.map.bytes;a&&(l=Oc(l)),o.parse(l)}var u=e.bytes;a&&(u=Oc(u)),o.parse(u),o.flush()},n.updateTimeMapping_=function(e,t,a){var o=e.segment;if(t){if(!e.cues.length)return void(o.empty=!0);var l=e.timestampmap,u=l.MPEGTS/Aa.ONE_SECOND_IN_TS-l.LOCAL+t.mapping;e.cues.forEach(function(y){y.startTime+=u,y.endTime+=u}),a.syncInfo||(a.syncInfo={mediaSequence:a.mediaSequence+e.mediaIndex,time:Math.min(e.cues[0].startTime,e.cues[e.cues.length-1].startTime-o.duration)})}},i}(Pl),em=function(i,n){for(var r=i.cues,e=0;e<r.length;e++){var t=r[e];if(n>=t.adStartTime&&n<=t.adEndTime)return t}return null},Nc=[{name:"VOD",run:function(i,n,r,e,t){return r!==1/0?{time:0,segmentIndex:0,partIndex:null}:null}},{name:"ProgramDateTime",run:function(i,n,r,e,t){if(!Object.keys(i.timelineToDatetimeMappings).length)return null;var a=null,o=null,l=hl(n);t=t||0;for(var u=0;u<l.length;u++){var _=l[n.endList||0===t?u:l.length-(u+1)],y=_.segment,A=i.timelineToDatetimeMappings[y.timeline];if(A&&y.dateTimeObject){var D=y.dateTimeObject.getTime()/1e3+A;if(y.parts&&"number"==typeof _.partIndex)for(var M=0;M<_.partIndex;M++)D+=y.parts[M].duration;var Q=Math.abs(t-D);if(null!==o&&(0===Q||o<Q))break;o=Q,a={time:D,segmentIndex:_.segmentIndex,partIndex:_.partIndex}}}return a}},{name:"Segment",run:function(i,n,r,e,t){var a=null,o=null;t=t||0;for(var l=hl(n),u=0;u<l.length;u++){var _=l[n.endList||0===t?u:l.length-(u+1)],y=_.segment,A=_.part&&_.part.start||y&&y.start;if(y.timeline===e&&void 0!==A){var I=Math.abs(t-A);if(null!==o&&o<I)break;(!a||null===o||o>=I)&&(o=I,a={time:A,segmentIndex:_.segmentIndex,partIndex:_.partIndex})}}return a}},{name:"Discontinuity",run:function(i,n,r,e,t){var a=null;if(t=t||0,n.discontinuityStarts&&n.discontinuityStarts.length)for(var o=null,l=0;l<n.discontinuityStarts.length;l++){var u=n.discontinuityStarts[l],_=i.discontinuities[n.discontinuitySequence+l+1];if(_){var y=Math.abs(t-_.time);if(null!==o&&o<y)break;(!a||null===o||o>=y)&&(o=y,a={time:_.time,segmentIndex:u,partIndex:null})}}return a}},{name:"Playlist",run:function(i,n,r,e,t){return n.syncInfo?{time:n.syncInfo.time,segmentIndex:n.syncInfo.mediaSequence-n.mediaSequence,partIndex:null}:null}}],rm=function(s){function i(r){var e;return(e=s.call(this)||this).timelines=[],e.discontinuities=[],e.timelineToDatetimeMappings={},e.logger_=Ki("SyncController"),e}U(i,s);var n=i.prototype;return n.getSyncPoint=function(e,t,a,o){var l=this.runStrategies_(e,t,a,o);return l.length?this.selectSyncPoint_(l,{key:"time",value:o}):null},n.getExpiredTime=function(e,t){if(!e||!e.segments)return null;var a=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!a.length)return null;var o=this.selectSyncPoint_(a,{key:"segmentIndex",value:0});return o.segmentIndex>0&&(o.time*=-1),Math.abs(o.time+oa({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:o.segmentIndex,endIndex:0}))},n.runStrategies_=function(e,t,a,o){for(var l=[],u=0;u<Nc.length;u++){var c=Nc[u],_=c.run(this,e,t,a,o);_&&(_.strategy=c.name,l.push({strategy:c.name,syncPoint:_}))}return l},n.selectSyncPoint_=function(e,t){for(var a=e[0].syncPoint,o=Math.abs(e[0].syncPoint[t.key]-t.value),l=e[0].strategy,u=1;u<e.length;u++){var c=Math.abs(e[u].syncPoint[t.key]-t.value);c<o&&(o=c,a=e[u].syncPoint,l=e[u].strategy)}return this.logger_("syncPoint for ["+t.key+": "+t.value+"] chosen with strategy ["+l+"]: [time:"+a.time+", segmentIndex:"+a.segmentIndex+("number"==typeof a.partIndex?",partIndex:"+a.partIndex:"")+"]"),a},n.saveExpiredSegmentInfo=function(e,t){var a=t.mediaSequence-e.mediaSequence;if(a>86400)q.log.warn("Not saving expired segment info. Media sequence gap "+a+" is too large.");else for(var o=a-1;o>=0;o--){var l=e.segments[o];if(l&&void 0!==l.start){t.syncInfo={mediaSequence:e.mediaSequence+o,time:l.start},this.logger_("playlist refresh sync: [time:"+t.syncInfo.time+", mediaSequence: "+t.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}},n.setDateTimeMappingForStart=function(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){var t=e.segments[0],a=t.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[t.timeline]=-a}},n.saveSegmentTimingInfo=function(e){var t=e.segmentInfo,a=e.shouldSaveTimelineMapping,o=this.calculateSegmentTimeMapping_(t,t.timingInfo,a),l=t.segment;o&&(this.saveDiscontinuitySyncInfo_(t),t.playlist.syncInfo||(t.playlist.syncInfo={mediaSequence:t.playlist.mediaSequence+t.mediaIndex,time:l.start}));var u=l.dateTimeObject;l.discontinuity&&a&&u&&(this.timelineToDatetimeMappings[l.timeline]=-u.getTime()/1e3)},n.timestampOffsetForTimeline=function(e){return void 0===this.timelines[e]?null:this.timelines[e].time},n.mappingForTimeline=function(e){return void 0===this.timelines[e]?null:this.timelines[e].mapping},n.calculateSegmentTimeMapping_=function(e,t,a){var c,_,o=e.segment,l=e.part,u=this.timelines[e.timeline];if("number"==typeof e.timestampOffset)u={time:e.startOfSegment,mapping:e.startOfSegment-t.start},a&&(this.timelines[e.timeline]=u,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+e.timeline+": [time: "+u.time+"] [mapping: "+u.mapping+"]")),c=e.startOfSegment,_=t.end+u.mapping;else{if(!u)return!1;c=t.start+u.mapping,_=t.end+u.mapping}return l&&(l.start=c,l.end=_),(!o.start||c<o.start)&&(o.start=c),o.end=_,!0},n.saveDiscontinuitySyncInfo_=function(e){var t=e.playlist,a=e.segment;if(a.discontinuity)this.discontinuities[a.timeline]={time:a.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(var o=0;o<t.discontinuityStarts.length;o++){var l=t.discontinuityStarts[o],u=t.discontinuitySequence+o+1,c=l-e.mediaIndex,_=Math.abs(c);if(!this.discontinuities[u]||this.discontinuities[u].accuracy>_){var y;y=c<0?a.start-oa({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex,endIndex:l}):a.end+oa({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex+1,endIndex:l}),this.discontinuities[u]={time:y,accuracy:_}}}},n.dispose=function(){this.trigger("dispose"),this.off()},i}(q.EventTarget),nm=function(s){function i(){var r;return(r=s.call(this)||this).pendingTimelineChanges_={},r.lastTimelineChanges_={},r}U(i,s);var n=i.prototype;return n.clearPendingTimelineChange=function(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")},n.pendingTimelineChange=function(e){var t=e.type,a=e.from,o=e.to;return"number"==typeof a&&"number"==typeof o&&(this.pendingTimelineChanges_[t]={type:t,from:a,to:o},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[t]},n.lastTimelineChange=function(e){var t=e.type,a=e.from,o=e.to;return"number"==typeof a&&"number"==typeof o&&(this.lastTimelineChanges_[t]={type:t,from:a,to:o},delete this.pendingTimelineChanges_[t],this.trigger("timelinechange")),this.lastTimelineChanges_[t]},n.dispose=function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},i}(q.EventTarget),am=uc(dc(function(){var s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function i(te,re,Le){return te(Le={path:re,exports:{},require:function(oe,ke){return function n(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},Le.exports),Le.exports}var r=i(function(te){function re(le,oe){for(var ke=0;ke<oe.length;ke++){var ce=oe[ke];ce.enumerable=ce.enumerable||!1,ce.configurable=!0,"value"in ce&&(ce.writable=!0),Object.defineProperty(le,ce.key,ce)}}te.exports=function Le(le,oe,ke){return oe&&re(le.prototype,oe),ke&&re(le,ke),le},te.exports.default=te.exports,te.exports.__esModule=!0}),e=i(function(te){function re(Le,le){return te.exports=re=Object.setPrototypeOf||function(ke,ce){return ke.__proto__=ce,ke},te.exports.default=te.exports,te.exports.__esModule=!0,re(Le,le)}te.exports=re,te.exports.default=te.exports,te.exports.__esModule=!0}),t=i(function(te){te.exports=function re(Le,le){Le.prototype=Object.create(le.prototype),Le.prototype.constructor=Le,e(Le,le)},te.exports.default=te.exports,te.exports.__esModule=!0}),a=function(){function te(){this.listeners={}}var re=te.prototype;return re.on=function(le,oe){this.listeners[le]||(this.listeners[le]=[]),this.listeners[le].push(oe)},re.off=function(le,oe){if(!this.listeners[le])return!1;var ke=this.listeners[le].indexOf(oe);return this.listeners[le]=this.listeners[le].slice(0),this.listeners[le].splice(ke,1),ke>-1},re.trigger=function(le){var oe=this.listeners[le];if(oe)if(2===arguments.length)for(var ke=oe.length,ce=0;ce<ke;++ce)oe[ce].call(this,arguments[1]);else for(var nt=Array.prototype.slice.call(arguments,1),Xe=oe.length,ut=0;ut<Xe;++ut)oe[ut].apply(this,nt)},re.dispose=function(){this.listeners={}},re.pipe=function(le){this.on("data",function(oe){le.push(oe)})},te}(),u=null,c=function(){function te(Le){u||(u=function(){var ce,nt,Xe,Nt,Xt,Ut,gi,Et,re=[[[],[],[],[],[]],[[],[],[],[],[]]],Le=re[0],le=re[1],oe=Le[4],ke=le[4],ut=[],Lt=[];for(ce=0;ce<256;ce++)Lt[(ut[ce]=ce<<1^283*(ce>>7))^ce]=ce;for(nt=Xe=0;!oe[nt];nt^=Nt||1,Xe=Lt[Xe]||1)for(oe[nt]=Ut=(Ut=Xe^Xe<<1^Xe<<2^Xe<<3^Xe<<4)>>8^255&Ut^99,ke[Ut]=nt,Et=16843009*ut[Xt=ut[Nt=ut[nt]]]^65537*Xt^257*Nt^16843008*nt,gi=257*ut[Ut]^16843008*Ut,ce=0;ce<4;ce++)Le[ce][nt]=gi=gi<<24^gi>>>8,le[ce][Ut]=Et=Et<<24^Et>>>8;for(ce=0;ce<5;ce++)Le[ce]=Le[ce].slice(0),le[ce]=le[ce].slice(0);return re}()),this._tables=[[u[0][0].slice(),u[0][1].slice(),u[0][2].slice(),u[0][3].slice(),u[0][4].slice()],[u[1][0].slice(),u[1][1].slice(),u[1][2].slice(),u[1][3].slice(),u[1][4].slice()]];var le,oe,ke,ce=this._tables[0][4],nt=this._tables[1],Xe=Le.length,ut=1;if(4!==Xe&&6!==Xe&&8!==Xe)throw new Error("Invalid aes key size");var Lt=Le.slice(0),Nt=[];for(this._key=[Lt,Nt],le=Xe;le<4*Xe+28;le++)ke=Lt[le-1],(le%Xe==0||8===Xe&&le%Xe==4)&&(ke=ce[ke>>>24]<<24^ce[ke>>16&255]<<16^ce[ke>>8&255]<<8^ce[255&ke],le%Xe==0&&(ke=ke<<8^ke>>>24^ut<<24,ut=ut<<1^283*(ut>>7))),Lt[le]=Lt[le-Xe]^ke;for(oe=0;le;oe++,le--)ke=Lt[3&oe?le:le-4],Nt[oe]=le<=4||oe<4?ke:nt[0][ce[ke>>>24]]^nt[1][ce[ke>>16&255]]^nt[2][ce[ke>>8&255]]^nt[3][ce[255&ke]]}return te.prototype.decrypt=function(le,oe,ke,ce,nt,Xe){var Ut,gi,Et,Hi,ut=this._key[1],Lt=le^ut[0],Nt=ce^ut[1],Xt=ke^ut[2],Zt=oe^ut[3],ps=ut.length/4-2,_r=4,Or=this._tables[1],Zr=Or[0],ir=Or[1],Mn=Or[2],On=Or[3],Rn=Or[4];for(Hi=0;Hi<ps;Hi++)Ut=Zr[Lt>>>24]^ir[Nt>>16&255]^Mn[Xt>>8&255]^On[255&Zt]^ut[_r],gi=Zr[Nt>>>24]^ir[Xt>>16&255]^Mn[Zt>>8&255]^On[255&Lt]^ut[_r+1],Et=Zr[Xt>>>24]^ir[Zt>>16&255]^Mn[Lt>>8&255]^On[255&Nt]^ut[_r+2],Zt=Zr[Zt>>>24]^ir[Lt>>16&255]^Mn[Nt>>8&255]^On[255&Xt]^ut[_r+3],_r+=4,Lt=Ut,Nt=gi,Xt=Et;for(Hi=0;Hi<4;Hi++)nt[(3&-Hi)+Xe]=Rn[Lt>>>24]<<24^Rn[Nt>>16&255]<<16^Rn[Xt>>8&255]<<8^Rn[255&Zt]^ut[_r++],Ut=Lt,Lt=Nt,Nt=Xt,Xt=Zt,Zt=Ut},te}(),_=function(te){function re(){var le;return(le=te.call(this,a)||this).jobs=[],le.delay=1,le.timeout_=null,le}t(re,te);var Le=re.prototype;return Le.processJob_=function(){this.jobs.shift()(),this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null},Le.push=function(oe){this.jobs.push(oe),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},re}(a),y=function(re){return re<<24|(65280&re)<<8|(16711680&re)>>8|re>>>24},I=function(){function te(Le,le,oe,ke){var ce=te.STEP,nt=new Int32Array(Le.buffer),Xe=new Uint8Array(Le.byteLength),ut=0;for(this.asyncStream_=new _,this.asyncStream_.push(this.decryptChunk_(nt.subarray(ut,ut+ce),le,oe,Xe)),ut=ce;ut<nt.length;ut+=ce)oe=new Uint32Array([y(nt[ut-4]),y(nt[ut-3]),y(nt[ut-2]),y(nt[ut-1])]),this.asyncStream_.push(this.decryptChunk_(nt.subarray(ut,ut+ce),le,oe,Xe));this.asyncStream_.push(function(){ke(null,function o(te){return te.subarray(0,te.byteLength-te[te.byteLength-1])}(Xe))})}return te.prototype.decryptChunk_=function(le,oe,ke,ce){return function(){var nt=function(re,Le,le){var Xe,ut,Lt,Nt,Xt,Zt,Ut,gi,Et,oe=new Int32Array(re.buffer,re.byteOffset,re.byteLength>>2),ke=new c(Array.prototype.slice.call(Le)),ce=new Uint8Array(re.byteLength),nt=new Int32Array(ce.buffer);for(Xe=le[0],ut=le[1],Lt=le[2],Nt=le[3],Et=0;Et<oe.length;Et+=4)Xt=y(oe[Et]),Zt=y(oe[Et+1]),Ut=y(oe[Et+2]),gi=y(oe[Et+3]),ke.decrypt(Xt,Zt,Ut,gi,nt,Et),nt[Et]=y(nt[Et]^Xe),nt[Et+1]=y(nt[Et+1]^ut),nt[Et+2]=y(nt[Et+2]^Lt),nt[Et+3]=y(nt[Et+3]^Nt),Xe=Xt,ut=Zt,Lt=Ut,Nt=gi;return ce}(le,oe,ke);ce.set(nt,le.byteOffset)}},r(te,null,[{key:"STEP",get:function(){return 32e3}}]),te}(),me=("undefined"!=typeof window?window:void 0!==s?s:"undefined"!=typeof self?self:{}).BigInt||Number;me("0x1"),me("0x100"),me("0x10000"),me("0x1000000"),me("0x100000000"),me("0x10000000000"),me("0x1000000000000"),me("0x100000000000000"),me("0x10000000000000000");self.onmessage=function(te){var re=te.data,Le=new Uint8Array(re.encrypted.bytes,re.encrypted.byteOffset,re.encrypted.byteLength),le=new Uint32Array(re.key.bytes,re.key.byteOffset,re.key.byteLength/4),oe=new Uint32Array(re.iv.bytes,re.iv.byteOffset,re.iv.byteLength/4);new I(Le,le,oe,function(ke,ce){self.postMessage(function(re){var Le={};return Object.keys(re).forEach(function(le){var oe=re[le];Le[le]=function(re){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(re):re&&re.buffer instanceof ArrayBuffer}(oe)?{bytes:oe.buffer,byteOffset:oe.byteOffset,byteLength:oe.byteLength}:oe}),Le}({source:re.source,decrypted:ce}),[ce.buffer])})}})),sm=lc(am),om=function(i){var n=i.default?"main":"alternative";return i.characteristics&&i.characteristics.indexOf("public.accessibility.describes-video")>=0&&(n="main-desc"),n},cs=function(i,n){i.abort(),i.pause(),n&&n.activePlaylistLoader&&(n.activePlaylistLoader.pause(),n.activePlaylistLoader=null)},Il=function(i,n){n.activePlaylistLoader=i,i.load()},hs={AUDIO:function(i,n){return function(){var e=n.mediaTypes[i],t=n.blacklistCurrentPlaylist;cs(n.segmentLoaders[i],e);var a=e.activeTrack(),o=e.activeGroup(),l=(o.filter(function(_){return _.default})[0]||o[0]).id,u=e.tracks[l];if(a!==u){for(var c in q.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),e.tracks)e.tracks[c].enabled=e.tracks[c]===u;e.onTrackChanged()}else t({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(i,n){return function(){var r=n.segmentLoaders[i],e=n.mediaTypes[i];q.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),cs(r,e);var t=e.activeTrack();t&&(t.mode="disabled"),e.onTrackChanged()}}},Fc={AUDIO:function(i,n,r){if(n){var e=r.tech,t=r.requestOptions,a=r.segmentLoaders[i];n.on("loadedmetadata",function(){var o=n.media();a.playlist(o,t),(!e.paused()||o.endList&&"none"!==e.preload())&&a.load()}),n.on("loadedplaylist",function(){a.playlist(n.media(),t),e.paused()||a.load()}),n.on("error",hs[i](i,r))}},SUBTITLES:function(i,n,r){var e=r.tech,t=r.requestOptions,a=r.segmentLoaders[i],o=r.mediaTypes[i];n.on("loadedmetadata",function(){var l=n.media();a.playlist(l,t),a.track(o.activeTrack()),(!e.paused()||l.endList&&"none"!==e.preload())&&a.load()}),n.on("loadedplaylist",function(){a.playlist(n.media(),t),e.paused()||a.load()}),n.on("error",hs[i](i,r))}},cm={AUDIO:function(i,n){var r=n.vhs,e=n.sourceType,t=n.segmentLoaders[i],a=n.requestOptions,o=n.master.mediaGroups,l=n.mediaTypes[i],u=l.groups,c=l.tracks,_=l.logger_,y=n.masterPlaylistLoader,A=la(y.master);for(var I in(!o[i]||0===Object.keys(o[i]).length)&&(o[i]={main:{default:{default:!0}}},A&&(o[i].main.default.playlists=y.master.playlists)),o[i])for(var D in u[I]||(u[I]=[]),o[i][I]){var M=o[i][I][D],Q=void 0;if(A?(_("AUDIO group '"+I+"' label '"+D+"' is a master playlist"),M.isMasterPlaylist=!0,Q=null):Q="vhs-json"===e&&M.playlists?new In(M.playlists[0],r,a):M.resolvedUri?new In(M.resolvedUri,r,a):M.playlists&&"dash"===e?new Sl(M.playlists[0],r,a,y):null,M=q.mergeOptions({id:D,playlistLoader:Q},M),Fc[i](i,M.playlistLoader,n),u[I].push(M),void 0===c[D]){var me=new q.AudioTrack({id:D,kind:om(M),enabled:!1,language:M.language,default:M.default,label:D});c[D]=me}}t.on("error",hs[i](i,n))},SUBTITLES:function(i,n){var r=n.tech,e=n.vhs,t=n.sourceType,a=n.segmentLoaders[i],o=n.requestOptions,l=n.master.mediaGroups,u=n.mediaTypes[i],c=u.groups,_=u.tracks,y=n.masterPlaylistLoader;for(var A in l[i])for(var I in c[A]||(c[A]=[]),l[i][A])if(!l[i][A][I].forced){var D=l[i][A][I],M=void 0;if("hls"===t)M=new In(D.resolvedUri,e,o);else if("dash"===t){if(!D.playlists.filter(function(Fe){return Fe.excludeUntil!==1/0}).length)return;M=new Sl(D.playlists[0],e,o,y)}else"vhs-json"===t&&(M=new In(D.playlists?D.playlists[0]:D.resolvedUri,e,o));if(D=q.mergeOptions({id:I,playlistLoader:M},D),Fc[i](i,D.playlistLoader,n),c[A].push(D),void 0===_[I]){var me=r.addRemoteTextTrack({id:I,kind:"subtitles",default:D.default&&D.autoselect,language:D.language,label:I},!1).track;_[I]=me}}a.on("error",hs[i](i,n))},"CLOSED-CAPTIONS":function(i,n){var r=n.tech,e=n.master.mediaGroups,t=n.mediaTypes[i],a=t.groups,o=t.tracks;for(var l in e[i])for(var u in a[l]||(a[l]=[]),e[i][l]){var c=e[i][l][u];if(/^(?:CC|SERVICE)/.test(c.instreamId)){var _=r.options_.vhs&&r.options_.vhs.captionServices||{},y={label:u,language:c.language,instreamId:c.instreamId,default:c.default&&c.autoselect};if(_[y.instreamId]&&(y=q.mergeOptions(y,_[y.instreamId])),void 0===y.default&&delete y.default,a[l].push(q.mergeOptions({id:u},c)),void 0===o[u]){var A=r.addRemoteTextTrack({id:y.instreamId,kind:"captions",default:y.default,language:y.language,label:y.label},!1).track;o[u]=A}}}}},hm=function s(i,n){for(var r=0;r<i.length;r++)if(gl(n,i[r])||i[r].playlists&&s(i[r].playlists,n))return!0;return!1},pm={AUDIO:function(i,n){return function(){var r=n.mediaTypes[i].tracks;for(var e in r)if(r[e].enabled)return r[e];return null}},SUBTITLES:function(i,n){return function(){var r=n.mediaTypes[i].tracks;for(var e in r)if("showing"===r[e].mode||"hidden"===r[e].mode)return r[e];return null}}},_m=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],Tm=function(i){return this.audioSegmentLoader_[i]+this.mainSegmentLoader_[i]},Sm=function(s){function i(r){var e;e=s.call(this)||this;var t=r.src,a=r.handleManifestRedirects,o=r.withCredentials,l=r.tech,u=r.bandwidth,c=r.externVhs,_=r.useCueTags,y=r.blacklistDuration,A=r.enableLowInitialPlaylist,I=r.sourceType,D=r.cacheEncryptionKeys,M=r.experimentalBufferBasedABR,Q=r.experimentalLeastPixelDiffSelector,me=r.captionServices;if(!t)throw new Error("A non-empty playlist URL or JSON manifest string is required");var Fe=r.maxPlaylistRetries;null==Fe&&(Fe=1/0),yr=c,e.experimentalBufferBasedABR=Boolean(M),e.experimentalLeastPixelDiffSelector=Boolean(Q),e.withCredentials=o,e.tech_=l,e.vhs_=l.vhs,e.sourceType_=I,e.useCueTags_=_,e.blacklistDuration=y,e.maxPlaylistRetries=Fe,e.enableLowInitialPlaylist=A,e.useCueTags_&&(e.cueTagsTrack_=e.tech_.addTextTrack("metadata","ad-cues"),e.cueTagsTrack_.inBandMetadataTrackDispatchType=""),e.requestOptions_={withCredentials:o,handleManifestRedirects:a,maxPlaylistRetries:Fe,timeout:null},e.on("error",e.pauseLoading),e.mediaTypes_=function(){var i={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(n){i[n]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:vr,activeTrack:vr,getActiveGroup:vr,onGroupChanged:vr,onTrackChanged:vr,lastTrack_:null,logger_:Ki("MediaGroups["+n+"]")}}),i}(),e.mediaSource=new(p().MediaSource),e.handleDurationChange_=e.handleDurationChange_.bind(X(e)),e.handleSourceOpen_=e.handleSourceOpen_.bind(X(e)),e.handleSourceEnded_=e.handleSourceEnded_.bind(X(e)),e.mediaSource.addEventListener("durationchange",e.handleDurationChange_),e.mediaSource.addEventListener("sourceopen",e.handleSourceOpen_),e.mediaSource.addEventListener("sourceended",e.handleSourceEnded_),e.seekable_=q.createTimeRanges(),e.hasPlayed_=!1,e.syncController_=new rm(r),e.segmentMetadataTrack_=l.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,e.decrypter_=new sm,e.sourceUpdater_=new Mc(e.mediaSource),e.inbandTextTracks_={},e.timelineChangeController_=new nm;var te={vhs:e.vhs_,parse708captions:r.parse708captions,useDtsForTimestampOffset:r.useDtsForTimestampOffset,captionServices:me,mediaSource:e.mediaSource,currentTime:e.tech_.currentTime.bind(e.tech_),seekable:function(){return e.seekable()},seeking:function(){return e.tech_.seeking()},duration:function(){return e.duration()},hasPlayed:function(){return e.hasPlayed_},goalBufferLength:function(){return e.goalBufferLength()},bandwidth:u,syncController:e.syncController_,decrypter:e.decrypter_,sourceType:e.sourceType_,inbandTextTracks:e.inbandTextTracks_,cacheEncryptionKeys:D,sourceUpdater:e.sourceUpdater_,timelineChangeController:e.timelineChangeController_,experimentalExactManifestTimings:r.experimentalExactManifestTimings};e.masterPlaylistLoader_="dash"===e.sourceType_?new Sl(t,e.vhs_,e.requestOptions_):new In(t,e.vhs_,e.requestOptions_),e.setupMasterPlaylistLoaderListeners_(),e.mainSegmentLoader_=new Pl(q.mergeOptions(te,{segmentMetadataTrack:e.segmentMetadataTrack_,loaderType:"main"}),r),e.audioSegmentLoader_=new Pl(q.mergeOptions(te,{loaderType:"audio"}),r),e.subtitleSegmentLoader_=new Zg(q.mergeOptions(te,{loaderType:"vtt",featuresNativeTextTracks:e.tech_.featuresNativeTextTracks}),r),e.setupSegmentLoaderListeners_(),e.experimentalBufferBasedABR&&(e.masterPlaylistLoader_.one("loadedplaylist",function(){return e.startABRTimer_()}),e.tech_.on("pause",function(){return e.stopABRTimer_()}),e.tech_.on("play",function(){return e.startABRTimer_()})),_m.forEach(function(Le){e[Le+"_"]=Tm.bind(X(e),Le)}),e.logger_=Ki("MPC"),e.triggeredFmp4Usage=!1,"none"===e.tech_.preload()?(e.loadOnPlay_=function(){e.loadOnPlay_=null,e.masterPlaylistLoader_.load()},e.tech_.one("play",e.loadOnPlay_)):e.masterPlaylistLoader_.load(),e.timeToLoadedData__=-1,e.mainAppendsToLoadedData__=-1,e.audioAppendsToLoadedData__=-1;var re="none"===e.tech_.preload()?"play":"loadstart";return e.tech_.one(re,function(){var Le=Date.now();e.tech_.one("loadeddata",function(){e.timeToLoadedData__=Date.now()-Le,e.mainAppendsToLoadedData__=e.mainSegmentLoader_.mediaAppends,e.audioAppendsToLoadedData__=e.audioSegmentLoader_.mediaAppends})}),e}U(i,s);var n=i.prototype;return n.mainAppendsToLoadedData_=function(){return this.mainAppendsToLoadedData__},n.audioAppendsToLoadedData_=function(){return this.audioAppendsToLoadedData__},n.appendsToLoadedData_=function(){var e=this.mainAppendsToLoadedData_(),t=this.audioAppendsToLoadedData_();return-1===e||-1===t?-1:e+t},n.timeToLoadedData_=function(){return this.timeToLoadedData__},n.checkABR_=function(){var e=this.selectPlaylist();e&&this.shouldSwitchToMedia_(e)&&this.switchMedia_(e,"abr")},n.switchMedia_=function(e,t,a){var o=this.media(),l=o&&(o.id||o.uri),u=e.id||e.uri;l&&l!==u&&(this.logger_("switch media "+l+" -> "+u+" from "+t),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-"+t})),this.masterPlaylistLoader_.media(e,a)},n.startABRTimer_=function(){var e=this;this.stopABRTimer_(),this.abrTimer_=p().setInterval(function(){return e.checkABR_()},250)},n.stopABRTimer_=function(){this.tech_.scrubbing&&this.tech_.scrubbing()||(p().clearInterval(this.abrTimer_),this.abrTimer_=null)},n.getAudioTrackPlaylists_=function(){var e=this.master(),t=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return t;var l,a=e.mediaGroups.AUDIO,o=Object.keys(a);if(Object.keys(this.mediaTypes_.AUDIO.groups).length)l=this.mediaTypes_.AUDIO.activeTrack();else{var u=a.main||o.length&&a[o[0]];for(var c in u)if(u[c].default){l={label:c};break}}if(!l)return t;var _=[];for(var y in a)if(a[y][l.label]){var A=a[y][l.label];if(A.playlists&&A.playlists.length)_.push.apply(_,A.playlists);else if(A.uri)_.push(A);else if(e.playlists.length)for(var I=0;I<e.playlists.length;I++){var D=e.playlists[I];D.attributes&&D.attributes.AUDIO&&D.attributes.AUDIO===y&&_.push(D)}}return _.length?_:t},n.setupMasterPlaylistLoaderListeners_=function(){var e=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var t=e.masterPlaylistLoader_.media(),a=1.5*t.targetDuration*1e3;e.requestOptions_.timeout=pl(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?0:a,t.endList&&"none"!==e.tech_.preload()&&(e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load()),function(i){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(I){cm[I](I,i)});var n=i.mediaTypes,r=i.masterPlaylistLoader,e=i.tech,t=i.vhs,a=i.segmentLoaders,o=a.AUDIO,l=a.main;["AUDIO","SUBTITLES"].forEach(function(I){n[I].activeGroup=function(i,n){return function(r){var t=n.mediaTypes[i].groups,a=n.masterPlaylistLoader.media();if(!a)return null;var o=null;a.attributes[i]&&(o=t[a.attributes[i]]);var l=Object.keys(t);if(!o)if("AUDIO"===i&&l.length>1&&la(n.master))for(var u=0;u<l.length;u++){var c=t[l[u]];if(hm(c,a)){o=c;break}}else t.main?o=t.main:1===l.length&&(o=t[l[0]]);return void 0===r?o:null!==r&&o&&o.filter(function(_){return _.id===r.id})[0]||null}}(I,i),n[I].activeTrack=pm[I](I,i),n[I].onGroupChanged=function(i,n){return function(){var r=n.segmentLoaders,e=r[i],t=r.main,a=n.mediaTypes[i],o=a.activeTrack(),l=a.getActiveGroup(),u=a.activePlaylistLoader,c=a.lastGroup_;if((!l||!c||l.id!==c.id)&&(a.lastGroup_=l,a.lastTrack_=o,cs(e,a),l&&!l.isMasterPlaylist)){if(!l.playlistLoader)return void(u&&t.resetEverything());e.resyncLoader(),Il(l.playlistLoader,a)}}}(I,i),n[I].onGroupChanging=function(i,n){return function(){var r=n.segmentLoaders[i];n.mediaTypes[i].lastGroup_=null,r.abort(),r.pause()}}(I,i),n[I].onTrackChanged=function(i,n){return function(){var r=n.masterPlaylistLoader,e=n.segmentLoaders,t=e[i],a=e.main,o=n.mediaTypes[i],l=o.activeTrack(),u=o.getActiveGroup(),c=o.activePlaylistLoader,_=o.lastTrack_;if((!_||!l||_.id!==l.id)&&(o.lastGroup_=u,o.lastTrack_=l,cs(t,o),u)){if(u.isMasterPlaylist){if(!l||!_||l.id===_.id)return;var y=n.vhs.masterPlaylistController_,A=y.selectPlaylist();if(y.media()===A)return;return o.logger_("track change. Switching master audio from "+_.id+" to "+l.id),r.pause(),a.resetEverything(),void y.fastQualityChange_(A)}if("AUDIO"===i){if(!u.playlistLoader)return a.setAudio(!0),void a.resetEverything();t.setAudio(!0),a.setAudio(!1)}if(c===u.playlistLoader)return void Il(u.playlistLoader,o);t.track&&t.track(l),t.resetEverything(),Il(u.playlistLoader,o)}}}(I,i),n[I].getActiveGroup=function(i,n){var r=n.mediaTypes;return function(){var e=r[i].activeTrack();return e?r[i].activeGroup(e):null}}(I,i)});var u=n.AUDIO.activeGroup();if(u){var c=(u.filter(function(I){return I.default})[0]||u[0]).id;n.AUDIO.tracks[c].enabled=!0,n.AUDIO.onGroupChanged(),n.AUDIO.onTrackChanged(),n.AUDIO.getActiveGroup().playlistLoader?(l.setAudio(!1),o.setAudio(!0)):l.setAudio(!0)}r.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(I){return n[I].onGroupChanged()})}),r.on("mediachanging",function(){["AUDIO","SUBTITLES"].forEach(function(I){return n[I].onGroupChanging()})});var y=function(){n.AUDIO.onTrackChanged(),e.trigger({type:"usage",name:"vhs-audio-change"}),e.trigger({type:"usage",name:"hls-audio-change"})};for(var A in e.audioTracks().addEventListener("change",y),e.remoteTextTracks().addEventListener("change",n.SUBTITLES.onTrackChanged),t.on("dispose",function(){e.audioTracks().removeEventListener("change",y),e.remoteTextTracks().removeEventListener("change",n.SUBTITLES.onTrackChanged)}),e.clearTracks("audio"),n.AUDIO.tracks)e.audioTracks().addTrack(n.AUDIO.tracks[A])}({sourceType:e.sourceType_,segmentLoaders:{AUDIO:e.audioSegmentLoader_,SUBTITLES:e.subtitleSegmentLoader_,main:e.mainSegmentLoader_},tech:e.tech_,requestOptions:e.requestOptions_,masterPlaylistLoader:e.masterPlaylistLoader_,vhs:e.vhs_,master:e.master(),mediaTypes:e.mediaTypes_,blacklistCurrentPlaylist:e.blacklistCurrentPlaylist.bind(e)}),e.triggerPresenceUsage_(e.master(),t),e.setupFirstPlay(),!e.mediaTypes_.AUDIO.activePlaylistLoader||e.mediaTypes_.AUDIO.activePlaylistLoader.media()?e.trigger("selectedinitialmedia"):e.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){e.trigger("selectedinitialmedia")})}),this.masterPlaylistLoader_.on("loadedplaylist",function(){e.loadOnPlay_&&e.tech_.off("play",e.loadOnPlay_);var t=e.masterPlaylistLoader_.media();if(!t){var a;if(e.excludeUnsupportedVariants_(),e.enableLowInitialPlaylist&&(a=e.selectInitialPlaylist()),a||(a=e.selectPlaylist()),!a||!e.shouldSwitchToMedia_(a))return;if(e.initialMedia_=a,e.switchMedia_(e.initialMedia_,"initial"),"vhs-json"!==e.sourceType_||!e.initialMedia_.segments)return;t=e.initialMedia_}e.handleUpdatedMediaPlaylist(t)}),this.masterPlaylistLoader_.on("error",function(){e.blacklistCurrentPlaylist(e.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){e.mainSegmentLoader_.abort(),e.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var t=e.masterPlaylistLoader_.media(),a=1.5*t.targetDuration*1e3;e.requestOptions_.timeout=pl(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?0:a,e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load(),e.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var t=e.masterPlaylistLoader_.media();"playlist-unchanged"!==t.lastExcludeReason_&&e.stuckAtPlaylistEnd_(t)&&(e.blacklistCurrentPlaylist({message:"Playlist no longer updating.",reason:"playlist-unchanged"}),e.tech_.trigger("playliststuck"))}),this.masterPlaylistLoader_.on("renditiondisabled",function(){e.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),e.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){e.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),e.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})},n.handleUpdatedMediaPlaylist=function(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},n.triggerPresenceUsage_=function(e,t){var a=e.mediaGroups||{},o=!0,l=Object.keys(a.AUDIO);for(var u in a.AUDIO)for(var c in a.AUDIO[u])a.AUDIO[u][c].uri||(o=!1);o&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(a.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),yr.Playlist.isAes(t)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),l.length&&Object.keys(a.AUDIO[l[0]]).length>1&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},n.shouldSwitchToMedia_=function(e){var t=this.masterPlaylistLoader_.media()||this.masterPlaylistLoader_.pendingMedia_,a=this.tech_.currentTime(),o=this.bufferLowWaterLine(),l=this.bufferHighWaterLine();return function(i){var n=i.currentPlaylist,r=i.buffered,e=i.currentTime,t=i.nextPlaylist,a=i.bufferLowWaterLine,o=i.bufferHighWaterLine,l=i.duration,u=i.experimentalBufferBasedABR,c=i.log;if(!t)return q.log.warn("We received no playlist to switch to. Please check your stream."),!1;var _="allowing switch "+(n&&n.id||"null")+" -> "+t.id;if(!n)return c(_+" as current playlist is not set"),!0;if(t.id===n.id)return!1;var y=Boolean(kn(r,e).length);if(!n.endList)return y||"number"!=typeof n.partTargetDuration?(c(_+" as current playlist is live"),!0):(c("not "+_+" as current playlist is live llhls, but currentTime isn't in buffered."),!1);var A=dl(r,e),I=u?li.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:li.MAX_BUFFER_LOW_WATER_LINE;if(l<I)return c(_+" as duration < max low water line ("+l+" < "+I+")"),!0;var D=t.attributes.BANDWIDTH,M=n.attributes.BANDWIDTH;if(D<M&&(!u||A<o)){var Q=_+" as next bandwidth < current bandwidth ("+D+" < "+M+")";return u&&(Q+=" and forwardBuffer < bufferHighWaterLine ("+A+" < "+o+")"),c(Q),!0}if((!u||D>M)&&A>=a){var me=_+" as forwardBuffer >= bufferLowWaterLine ("+A+" >= "+a+")";return u&&(me+=" and next bandwidth > current bandwidth ("+D+" > "+M+")"),c(me),!0}return c("not "+_+" as no switching criteria met"),!1}({buffered:this.tech_.buffered(),currentTime:a,currentPlaylist:t,nextPlaylist:e,bufferLowWaterLine:o,bufferHighWaterLine:l,duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})},n.setupSegmentLoaderListeners_=function(){var e=this;this.experimentalBufferBasedABR||(this.mainSegmentLoader_.on("bandwidthupdate",function(){var a=e.selectPlaylist();e.shouldSwitchToMedia_(a)&&e.switchMedia_(a,"bandwidthupdate"),e.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("progress",function(){e.trigger("progress")})),this.mainSegmentLoader_.on("error",function(){e.blacklistCurrentPlaylist(e.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("appenderror",function(){e.error=e.mainSegmentLoader_.error_,e.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",function(){e.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){e.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),e.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){e.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",function(){e.error=e.audioSegmentLoader_.error_,e.trigger("error")}),this.mainSegmentLoader_.on("ended",function(){e.logger_("main segment loader ended"),e.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(a){e.experimentalBufferBasedABR||(e.delegateLoaders_("all",["abort"]),e.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120))});var t=function(){if(!e.sourceUpdater_.hasCreatedSourceBuffers())return e.tryToCreateSourceBuffers_();var o=e.getCodecsOrExclude_();!o||e.sourceUpdater_.addOrChangeSourceBuffers(o)};this.mainSegmentLoader_.on("trackinfo",t),this.audioSegmentLoader_.on("trackinfo",t),this.mainSegmentLoader_.on("fmp4",function(){e.triggeredFmp4Usage||(e.tech_.trigger({type:"usage",name:"vhs-fmp4"}),e.tech_.trigger({type:"usage",name:"hls-fmp4"}),e.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",function(){e.triggeredFmp4Usage||(e.tech_.trigger({type:"usage",name:"vhs-fmp4"}),e.tech_.trigger({type:"usage",name:"hls-fmp4"}),e.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",function(){e.logger_("audioSegmentLoader ended"),e.onEndOfStream()})},n.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},n.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},n.smoothQualityChange_=function(e){void 0===e&&(e=this.selectPlaylist()),this.fastQualityChange_(e)},n.fastQualityChange_=function(e){var t=this;void 0===e&&(e=this.selectPlaylist()),e!==this.masterPlaylistLoader_.media()?(this.switchMedia_(e,"fast-quality"),this.mainSegmentLoader_.resetEverything(function(){t.tech_.setCurrentTime(q.browser.IE_VERSION||q.browser.IS_EDGE?t.tech_.currentTime()+.04:t.tech_.currentTime())})):this.logger_("skipping fastQualityChange because new media is same as old")},n.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var e=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0))return this.tech_.setCurrentTime(e.end(e.length-1))}},n.setupFirstPlay=function(){var e=this,t=this.masterPlaylistLoader_.media();if(!t||this.tech_.paused()||this.hasPlayed_)return!1;if(!t.endList){var a=this.seekable();if(!a.length)return!1;if(q.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",function(){e.trigger("firstplay"),e.tech_.setCurrentTime(a.end(0)),e.hasPlayed_=!0}),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(a.end(0))}return this.hasPlayed_=!0,this.load(),!0},n.handleSourceOpen_=function(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){var e=this.tech_.play();void 0!==e&&"function"==typeof e.then&&e.then(null,function(t){})}this.trigger("sourceopen")},n.handleSourceEnded_=function(){if(this.inbandTextTracks_.metadataTrack_){var e=this.inbandTextTracks_.metadataTrack_.cues;if(e&&e.length){var t=this.duration();e[e.length-1].endTime=isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t}}},n.handleDurationChange_=function(){this.tech_.trigger("durationchange")},n.onEndOfStream=function(){var e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){var t=this.mainSegmentLoader_.getCurrentMediaInfo_();e=!t||t.hasVideo?e&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_}!e||(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},n.stuckAtPlaylistEnd_=function(e){if(!this.seekable().length)return!1;var a=this.syncController_.getExpiredTime(e,this.duration());if(null===a)return!1;var o=yr.Playlist.playlistEnd(e,a),l=this.tech_.currentTime(),u=this.tech_.buffered();if(!u.length)return o-l<=Zi;var c=u.end(u.length-1);return c-l<=Zi&&o-c<=Zi},n.blacklistCurrentPlaylist=function(e,t){void 0===e&&(e={});var a=e.playlist||this.masterPlaylistLoader_.media();if(t=t||e.blacklistDuration||this.blacklistDuration,!a)return this.error=e,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));a.playlistErrors_++;var _,o=this.masterPlaylistLoader_.master.playlists,l=o.filter(rs),u=1===l.length&&l[0]===a;if(1===o.length&&t!==1/0)return q.log.warn("Problem encountered with playlist "+a.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(u);if(u){var c=!1;o.forEach(function(Q){if(Q!==a){var me=Q.excludeUntil;void 0!==me&&me!==1/0&&(c=!0,delete Q.excludeUntil)}}),c&&(q.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}_=a.playlistErrors_>this.maxPlaylistRetries?1/0:Date.now()+1e3*t,a.excludeUntil=_,e.reason&&(a.lastExcludeReason_=e.reason),this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});var y=this.selectPlaylist();if(!y)return this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error");(e.internal?this.logger_:q.log.warn)((e.internal?"Internal problem":"Problem")+" encountered with playlist "+a.id+"."+(e.message?" "+e.message:"")+" Switching to playlist "+y.id+"."),y.attributes.AUDIO!==a.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),y.attributes.SUBTITLES!==a.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);var D=y.targetDuration/2*1e3||5e3,M="number"==typeof y.lastRequest&&Date.now()-y.lastRequest<=D;return this.switchMedia_(y,"exclude",u||M)},n.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},n.delegateLoaders_=function(e,t){var a=this,o=[],l="all"===e;(l||"main"===e)&&o.push(this.masterPlaylistLoader_);var u=[];(l||"audio"===e)&&u.push("AUDIO"),(l||"subtitle"===e)&&(u.push("CLOSED-CAPTIONS"),u.push("SUBTITLES")),u.forEach(function(c){var _=a.mediaTypes_[c]&&a.mediaTypes_[c].activePlaylistLoader;_&&o.push(_)}),["main","audio","subtitle"].forEach(function(c){var _=a[c+"SegmentLoader_"];_&&(e===c||"all"===e)&&o.push(_)}),o.forEach(function(c){return t.forEach(function(_){"function"==typeof c[_]&&c[_]()})})},n.setCurrentTime=function(e){var t=kn(this.tech_.buffered(),e);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?t&&t.length?e:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0},n.duration=function(){if(!this.masterPlaylistLoader_)return 0;var e=this.masterPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:yr.Playlist.duration(e):1/0:0},n.seekable=function(){return this.seekable_},n.onSyncInfoUpdate_=function(){var e;if(this.masterPlaylistLoader_){var t=this.masterPlaylistLoader_.media();if(t){var a=this.syncController_.getExpiredTime(t,this.duration());if(null!==a){var u,c,o=this.masterPlaylistLoader_.master,l=yr.Playlist.seekable(t,a,yr.Playlist.liveEdgeDelay(o,t));0===l.length||this.mediaTypes_.AUDIO.activePlaylistLoader&&(t=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(a=this.syncController_.getExpiredTime(t,this.duration()))||0===(e=yr.Playlist.seekable(t,a,yr.Playlist.liveEdgeDelay(o,t))).length)||(this.seekable_&&this.seekable_.length&&(u=this.seekable_.end(0),c=this.seekable_.start(0)),this.seekable_=e?e.start(0)>l.end(0)||l.start(0)>e.end(0)?l:q.createTimeRanges([[e.start(0)>l.start(0)?e.start(0):l.start(0),e.end(0)<l.end(0)?e.end(0):l.end(0)]]):l,(!this.seekable_||!this.seekable_.length||this.seekable_.end(0)!==u||this.seekable_.start(0)!==c)&&(this.logger_("seekable updated ["+Rd(this.seekable_)+"]"),this.tech_.trigger("seekablechanged")))}}}},n.updateDuration=function(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,e),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(e){var t=this.seekable();if(!t.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<t.end(t.length-1))&&this.sourceUpdater_.setDuration(t.end(t.length-1))}else{var a=this.tech_.buffered(),o=yr.Playlist.duration(this.masterPlaylistLoader_.media());a.length>0&&(o=Math.max(o,a.end(a.length-1))),this.mediaSource.duration!==o&&this.sourceUpdater_.setDuration(o)}},n.dispose=function(){var e=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(function(t){var a=e.mediaTypes_[t].groups;for(var o in a)a[o].forEach(function(l){l.playlistLoader&&l.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},n.master=function(){return this.masterPlaylistLoader_.master},n.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},n.areMediaTypesKnown_=function(){var e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,t=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),a=!e||!!this.audioSegmentLoader_.getCurrentMediaInfo_();return!(!t||!a)},n.getCodecsOrExclude_=function(){var e=this,t={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}};t.video=t.main;var a=da(this.master(),this.media()),o={},l=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(t.main.hasVideo&&(o.video=a.video||t.main.videoCodec||"avc1.4d400d"),t.main.isMuxed&&(o.video+=","+(a.audio||t.main.audioCodec||ci)),(t.main.hasAudio&&!t.main.isMuxed||t.audio.hasAudio||l)&&(o.audio=a.audio||t.main.audioCodec||t.audio.audioCodec||ci,t.audio.isFmp4=t.main.hasAudio&&!t.main.isMuxed?t.main.isFmp4:t.audio.isFmp4),o.audio||o.video){var _,c={};if(["video","audio"].forEach(function(D){if(o.hasOwnProperty(D)&&!function(M,Q){return M?pt(Q):Bt(Q)}(t[D].isFmp4,o[D])){var M=t[D].isFmp4?"browser":"muxer";c[M]=c[M]||[],c[M].push(o[D]),"audio"===D&&(_=M)}}),l&&_&&this.media().attributes.AUDIO){var y=this.media().attributes.AUDIO;this.master().playlists.forEach(function(D){(D.attributes&&D.attributes.AUDIO)===y&&D!==e.media()&&(D.excludeUntil=1/0)}),this.logger_("excluding audio group "+y+" as "+_+' does not support codec(s): "'+o.audio+'"')}if(!Object.keys(c).length){if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var I=[];if(["video","audio"].forEach(function(D){var M=(_t(e.sourceUpdater_.codecs[D]||"")[0]||{}).type,Q=(_t(o[D]||"")[0]||{}).type;M&&Q&&M.toLowerCase()!==Q.toLowerCase()&&I.push('"'+e.sourceUpdater_.codecs[D]+'" -> "'+o[D]+'"')}),I.length)return void this.blacklistCurrentPlaylist({playlist:this.media(),message:"Codec switching not supported: "+I.join(", ")+".",blacklistDuration:1/0,internal:!0})}return o}var A=Object.keys(c).reduce(function(D,M){return D&&(D+=", "),D+(M+' does not support codec(s): "')+c[M].join(",")+'"'},"")+".";this.blacklistCurrentPlaylist({playlist:this.media(),internal:!0,message:A,blacklistDuration:1/0})}else this.blacklistCurrentPlaylist({playlist:this.media(),message:"Could not determine codecs for playlist.",blacklistDuration:1/0})},n.tryToCreateSourceBuffers_=function(){if("open"===this.mediaSource.readyState&&!this.sourceUpdater_.hasCreatedSourceBuffers()&&this.areMediaTypesKnown_()){var e=this.getCodecsOrExclude_();if(e){this.sourceUpdater_.createSourceBuffers(e);var t=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(t)}}},n.excludeUnsupportedVariants_=function(){var e=this,t=this.master().playlists,a=[];Object.keys(t).forEach(function(o){var l=t[o];if(-1===a.indexOf(l.id)){a.push(l.id);var u=da(e.master,l),c=[];u.audio&&!Bt(u.audio)&&!pt(u.audio)&&c.push("audio codec "+u.audio),u.video&&!Bt(u.video)&&!pt(u.video)&&c.push("video codec "+u.video),u.text&&"stpp.ttml.im1t"===u.text&&c.push("text codec "+u.text),c.length&&(l.excludeUntil=1/0,e.logger_("excluding "+l.id+" for unsupported: "+c.join(", ")))}})},n.excludeIncompatibleVariants_=function(e){var t=this,a=[],o=this.master().playlists,l=os(_t(e)),u=bc(l),c=l.video&&_t(l.video)[0]||null,_=l.audio&&_t(l.audio)[0]||null;Object.keys(o).forEach(function(y){var A=o[y];if(-1===a.indexOf(A.id)&&A.excludeUntil!==1/0){a.push(A.id);var I=[],D=da(t.masterPlaylistLoader_.master,A),M=bc(D);if(D.audio||D.video){if(M!==u&&I.push('codec count "'+M+'" !== "'+u+'"'),!t.sourceUpdater_.canChangeType()){var Q=D.video&&_t(D.video)[0]||null,me=D.audio&&_t(D.audio)[0]||null;Q&&c&&Q.type.toLowerCase()!==c.type.toLowerCase()&&I.push('video codec "'+Q.type+'" !== "'+c.type+'"'),me&&_&&me.type.toLowerCase()!==_.type.toLowerCase()&&I.push('audio codec "'+me.type+'" !== "'+_.type+'"')}I.length&&(A.excludeUntil=1/0,t.logger_("blacklisting "+A.id+": "+I.join(" && ")))}}})},n.updateAdCues_=function(e){var t=0,a=this.seekable();a.length&&(t=a.start(0)),function(i,n,r){if(void 0===r&&(r=0),i.segments)for(var t,e=r,a=0;a<i.segments.length;a++){var o=i.segments[a];if(t||(t=em(n,e+o.duration/2)),t){if("cueIn"in o){t.endTime=e,t.adEndTime=e,e+=o.duration,t=null;continue}if(e<t.endTime){e+=o.duration;continue}t.endTime+=o.duration}else if("cueOut"in o&&((t=new(p().VTTCue)(e,e+o.duration,o.cueOut)).adStartTime=e,t.adEndTime=e+parseFloat(o.cueOut),n.addCue(t)),"cueOutCont"in o){var l=o.cueOutCont.split("/").map(parseFloat),u=l[0],c=l[1];(t=new(p().VTTCue)(e,e+o.duration,"")).adStartTime=e-u,t.adEndTime=t.adStartTime+c,n.addCue(t)}e+=o.duration}}(e,this.cueTagsTrack_,t)},n.goalBufferLength=function(){var e=this.tech_.currentTime(),t=li.GOAL_BUFFER_LENGTH,a=li.GOAL_BUFFER_LENGTH_RATE,o=Math.max(t,li.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*a,o)},n.bufferLowWaterLine=function(){var e=this.tech_.currentTime(),t=li.BUFFER_LOW_WATER_LINE,a=li.BUFFER_LOW_WATER_LINE_RATE,o=Math.max(t,li.MAX_BUFFER_LOW_WATER_LINE),l=Math.max(t,li.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*a,this.experimentalBufferBasedABR?l:o)},n.bufferHighWaterLine=function(){return li.BUFFER_HIGH_WATER_LINE},i}(q.EventTarget),Cm=function(i,n,r){var e=i.masterPlaylistController_,o=e[(i.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(e);if(n.attributes){var l=n.attributes.RESOLUTION;this.width=l&&l.width,this.height=l&&l.height,this.bandwidth=n.attributes.BANDWIDTH}this.codecs=da(e.master(),n),this.playlist=n,this.id=r,this.enabled=function(i,n,r){return function(e){var t=i.master.playlists[n],a=fl(t),o=rs(t);return void 0===e?o:(e?delete t.disabled:t.disabled=!0,e!==o&&!a&&(r(),i.trigger(e?"renditionenabled":"renditiondisabled")),e)}}(i.playlists,n.id,o)},Bc=["seeking","seeked","pause","playing","error"],Am=function(){function s(n){var r=this;this.masterPlaylistController_=n.masterPlaylistController,this.tech_=n.tech,this.seekable=n.seekable,this.allowSeeksWithinUnsafeLiveWindow=n.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=n.liveRangeSafeTimeDelta,this.media=n.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=Ki("PlaybackWatcher"),this.logger_("initialize");var e=function(){return r.monitorCurrentTime_()},t=function(){return r.monitorCurrentTime_()},a=function(){return r.techWaiting_()},o=function(){return r.cancelTimer_()},l=this.masterPlaylistController_,u=["main","subtitle","audio"],c={};u.forEach(function(y){c[y]={reset:function(){return r.resetSegmentDownloads_(y)},updateend:function(){return r.checkSegmentDownloads_(y)}},l[y+"SegmentLoader_"].on("appendsdone",c[y].updateend),l[y+"SegmentLoader_"].on("playlistupdate",c[y].reset),r.tech_.on(["seeked","seeking"],c[y].reset)});var _=function(A){["main","audio"].forEach(function(I){l[I+"SegmentLoader_"][A]("appended",r.seekingAppendCheck_)})};this.seekingAppendCheck_=function(){r.fixesBadSeeks_()&&(r.consecutiveUpdates=0,r.lastRecordedTime=r.tech_.currentTime(),_("off"))},this.clearSeekingAppendCheck_=function(){return _("off")},this.watchForBadSeeking_=function(){r.clearSeekingAppendCheck_(),_("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",a),this.tech_.on(Bc,o),this.tech_.on("canplay",t),this.tech_.one("play",e),this.dispose=function(){r.clearSeekingAppendCheck_(),r.logger_("dispose"),r.tech_.off("waiting",a),r.tech_.off(Bc,o),r.tech_.off("canplay",t),r.tech_.off("play",e),r.tech_.off("seeking",r.watchForBadSeeking_),r.tech_.off("seeked",r.clearSeekingAppendCheck_),u.forEach(function(y){l[y+"SegmentLoader_"].off("appendsdone",c[y].updateend),l[y+"SegmentLoader_"].off("playlistupdate",c[y].reset),r.tech_.off(["seeked","seeking"],c[y].reset)}),r.checkCurrentTimeTimeout_&&p().clearTimeout(r.checkCurrentTimeTimeout_),r.cancelTimer_()}}var i=s.prototype;return i.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&p().clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=p().setTimeout(this.monitorCurrentTime_.bind(this),250)},i.resetSegmentDownloads_=function(r){var e=this.masterPlaylistController_[r+"SegmentLoader_"];this[r+"StalledDownloads_"]>0&&this.logger_("resetting possible stalled download count for "+r+" loader"),this[r+"StalledDownloads_"]=0,this[r+"Buffered_"]=e.buffered_()},i.checkSegmentDownloads_=function(r){var e=this.masterPlaylistController_,t=e[r+"SegmentLoader_"],a=t.buffered_(),o=function(i,n){if(i===n)return!1;if(!i&&n||!n&&i||i.length!==n.length)return!0;for(var r=0;r<i.length;r++)if(i.start(r)!==n.start(r)||i.end(r)!==n.end(r))return!0;return!1}(this[r+"Buffered_"],a);this[r+"Buffered_"]=a,o?this.resetSegmentDownloads_(r):(this[r+"StalledDownloads_"]++,this.logger_("found #"+this[r+"StalledDownloads_"]+" "+r+" appends that did not increase buffer (possible stalled download)",{playlistId:t.playlist_&&t.playlist_.id,buffered:Jr(a)}),!(this[r+"StalledDownloads_"]<10)&&(this.logger_(r+" loader stalled download exclusion"),this.resetSegmentDownloads_(r),this.tech_.trigger({type:"usage",name:"vhs-"+r+"-download-exclusion"}),"subtitle"!==r&&e.blacklistCurrentPlaylist({message:"Excessive "+r+" segment downloading detected."},1/0)))},i.checkCurrentTime_=function(){if(!this.tech_.paused()&&!this.tech_.seeking()){var r=this.tech_.currentTime(),e=this.tech_.buffered();if(this.lastRecordedTime===r&&(!e.length||r+Zi>=e.end(e.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&r===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):r===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=r)}},i.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},i.fixesBadSeeks_=function(){if(!this.tech_.seeking())return!1;var o,e=this.seekable(),t=this.tech_.currentTime();if(this.afterSeekableWindow_(e,t,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(o=e.end(e.length-1)),this.beforeSeekableWindow_(e,t)){var u=e.start(0);o=u+(u===e.end(0)?0:Zi)}if(void 0!==o)return this.logger_("Trying to seek outside of seekable at time "+t+" with seekable range "+Rd(e)+". Seeking to "+o+"."),this.tech_.setCurrentTime(o),!0;for(var c=this.masterPlaylistController_.sourceUpdater_,_=this.tech_.buffered(),y=c.audioBuffer?c.audioBuffered():null,A=c.videoBuffer?c.videoBuffered():null,I=this.media(),D=I.partTargetDuration?I.partTargetDuration:2*(I.targetDuration-Mr),M=[y,A],Q=0;Q<M.length;Q++)if(M[Q]&&dl(M[Q],t)<D)return!1;var Fe=is(_,t);return 0!==Fe.length&&(o=Fe.start(0)+Zi,this.logger_("Buffered region starts ("+Fe.start(0)+")  just beyond seek point ("+t+"). Seeking to "+o+"."),this.tech_.setCurrentTime(o),!0)},i.waiting_=function(){if(!this.techWaiting_()){var r=this.tech_.currentTime(),e=this.tech_.buffered(),t=kn(e,r);if(t.length&&r+3<=t.end(0))return this.cancelTimer_(),this.tech_.setCurrentTime(r),this.logger_("Stopped at "+r+" while inside a buffered region ["+t.start(0)+" -> "+t.end(0)+"]. Attempting to resume playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})}},i.techWaiting_=function(){var r=this.seekable(),e=this.tech_.currentTime();if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(r,e)){var t=r.end(r.length-1);return this.logger_("Fell out of live window at time "+e+". Seeking to live point (seekable end) "+t),this.cancelTimer_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var a=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,o=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:a.audioBuffered(),videoBuffered:a.videoBuffered(),currentTime:e}))return this.cancelTimer_(),this.tech_.setCurrentTime(e),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;var u=is(o,e);if(u.length>0){var c=u.start(0)-e;return this.logger_("Stopped at "+e+", setting timer for "+c+", seeking to "+u.start(0)),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*c,e),!0}return!1},i.afterSeekableWindow_=function(r,e,t,a){if(void 0===a&&(a=!1),!r.length)return!1;var o=r.end(r.length-1)+Zi;return!t.endList&&a&&(o=r.end(r.length-1)+3*t.targetDuration),e>o},i.beforeSeekableWindow_=function(r,e){return!!(r.length&&r.start(0)>0&&e<r.start(0)-this.liveRangeSafeTimeDelta)},i.videoUnderflow_=function(r){var e=r.videoBuffered,t=r.audioBuffered,a=r.currentTime;if(e){var o;if(e.length&&t.length){var l=kn(e,a-3),u=kn(e,a),c=kn(t,a);c.length&&!u.length&&l.length&&(o={start:l.end(0),end:c.end(0)})}else is(e,a).length||(o=this.gapFromVideoUnderflow_(e,a));return!!o&&(this.logger_("Encountered a gap in video from "+o.start+" to "+o.end+". Seeking to current time "+a),!0)}},i.skipTheGap_=function(r){var e=this.tech_.buffered(),t=this.tech_.currentTime(),a=is(e,t);this.cancelTimer_(),0!==a.length&&t===r&&(this.logger_("skipTheGap_:","currentTime:",t,"scheduled currentTime:",r,"nextRange start:",a.start(0)),this.tech_.setCurrentTime(a.start(0)+Mr),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},i.gapFromVideoUnderflow_=function(r,e){for(var t=function(i){if(i.length<2)return q.createTimeRanges();for(var n=[],r=1;r<i.length;r++){var e=i.end(r-1),t=i.start(r);n.push([e,t])}return q.createTimeRanges(n)}(r),a=0;a<t.length;a++){var o=t.start(a),l=t.end(a);if(e-o<4&&e-o>2)return{start:o,end:l}}return null},s}(),Pm={errorInterval:30,getSource:function(i){return i(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},wm=function s(i,n){var r=0,e=0,t=q.mergeOptions(Pm,n);i.ready(function(){i.trigger({type:"usage",name:"vhs-error-reload-initialized"}),i.trigger({type:"usage",name:"hls-error-reload-initialized"})});var a=function(){e&&i.currentTime(e)},o=function(y){null!=y&&(e=i.duration()!==1/0&&i.currentTime()||0,i.one("loadedmetadata",a),i.src(y),i.trigger({type:"usage",name:"vhs-error-reload"}),i.trigger({type:"usage",name:"hls-error-reload"}),i.play())},l=function(){return Date.now()-r<1e3*t.errorInterval?(i.trigger({type:"usage",name:"vhs-error-reload-canceled"}),void i.trigger({type:"usage",name:"hls-error-reload-canceled"})):t.getSource&&"function"==typeof t.getSource?(r=Date.now(),t.getSource.call(i,o)):void q.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")},u=function _(){i.off("loadedmetadata",a),i.off("error",l),i.off("dispose",_)};i.on("error",l),i.on("dispose",u),i.reloadSourceOnError=function(y){u(),s(i,y)}},ui={PlaylistLoader:In,Playlist:ki,utils:qp,STANDARD_PLAYLIST_SELECTOR:Cc,INITIAL_PLAYLIST_SELECTOR:function(){var i=this,n=this.playlists.master.playlists.filter(ki.isEnabled);return Ln(n,function(e,t){return Al(e,t)}),n.filter(function(e){return!!da(i.playlists.master,e).video})[0]||null},lastBandwidthSelector:Cc,movingAverageBandwidthSelector:function(i){var n=-1,r=-1;if(i<0||i>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var e=this.useDevicePixelRatio&&p().devicePixelRatio||1;return n<0&&(n=this.systemBandwidth,r=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==r&&(n=i*this.systemBandwidth+(1-i)*n,r=this.systemBandwidth),xc(this.playlists.master,n,parseInt(us(this.tech_.el(),"width"),10)*e,parseInt(us(this.tech_.el(),"height"),10)*e,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)}},comparePlaylistBandwidth:Al,comparePlaylistResolution:function(i,n){var r,e;return i.attributes.RESOLUTION&&i.attributes.RESOLUTION.width&&(r=i.attributes.RESOLUTION.width),r=r||p().Number.MAX_VALUE,n.attributes.RESOLUTION&&n.attributes.RESOLUTION.width&&(e=n.attributes.RESOLUTION.width),r===(e=e||p().Number.MAX_VALUE)&&i.attributes.BANDWIDTH&&n.attributes.BANDWIDTH?i.attributes.BANDWIDTH-n.attributes.BANDWIDTH:r-e},xhr:Zd()};Object.keys(li).forEach(function(s){Object.defineProperty(ui,s,{get:function(){return q.log.warn("using Vhs."+s+" is UNSAFE be sure you know what you are doing"),li[s]},set:function(n){q.log.warn("using Vhs."+s+" is UNSAFE be sure you know what you are doing"),"number"!=typeof n||n<0?q.log.warn("value of Vhs."+s+" must be greater than or equal to 0"):li[s]=n}})});var jc="videojs-vhs",Vc=function(i,n){for(var r=n.media(),e=-1,t=0;t<i.length;t++)if(i[t].id===r.id){e=t;break}i.selectedIndex_=e,i.trigger({selectedIndex:e,type:"change"})};ui.canPlaySource=function(){return q.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Hc=function(){if(!p().localStorage)return null;var i=p().localStorage.getItem(jc);if(!i)return null;try{return JSON.parse(i)}catch(n){return null}};ui.supportsNativeHls=function(){if(!W()||!W().createElement)return!1;var s=W().createElement("video");return!!q.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(n){return/maybe|probably/i.test(s.canPlayType(n))})}(),ui.supportsNativeDash=!!(W()&&W().createElement&&q.getTech("Html5").isSupported())&&/maybe|probably/i.test(W().createElement("video").canPlayType("application/dash+xml")),ui.supportsTypeNatively=function(s){return"hls"===s?ui.supportsNativeHls:"dash"===s&&ui.supportsNativeDash},ui.isSupported=function(){return q.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Ll=function(s){function i(r,e,t){var a;if(a=s.call(this,e,q.mergeOptions(t.hls,t.vhs))||this,t.hls&&Object.keys(t.hls).length&&q.log.warn("Using hls options is deprecated. Please rename `hls` to `vhs` in your options object."),"number"==typeof t.initialBandwidth&&(a.options_.bandwidth=t.initialBandwidth),a.logger_=Ki("VhsHandler"),e.options_&&e.options_.playerId){var o=q(e.options_.playerId);o.hasOwnProperty("hls")||Object.defineProperty(o,"hls",{get:function(){return q.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),e.trigger({type:"usage",name:"hls-player-access"}),X(a)},configurable:!0}),o.hasOwnProperty("vhs")||Object.defineProperty(o,"vhs",{get:function(){return q.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),e.trigger({type:"usage",name:"vhs-player-access"}),X(a)},configurable:!0}),o.hasOwnProperty("dash")||Object.defineProperty(o,"dash",{get:function(){return q.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),X(a)},configurable:!0}),a.player_=o}if(a.tech_=e,a.source_=r,a.stats={},a.ignoreNextSeekingEvent_=!1,a.setOptions_(),a.options_.overrideNative&&e.overrideNativeAudioTracks&&e.overrideNativeVideoTracks)e.overrideNativeAudioTracks(!0),e.overrideNativeVideoTracks(!0);else if(a.options_.overrideNative&&(e.featuresNativeVideoTracks||e.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return a.on(W(),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(l){var u=W().fullscreenElement||W().webkitFullscreenElement||W().mozFullScreenElement||W().msFullscreenElement;u&&u.contains(a.tech_.el())?a.masterPlaylistController_.fastQualityChange_():a.masterPlaylistController_.checkABR_()}),a.on(a.tech_,"seeking",function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())}),a.on(a.tech_,"error",function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),a.on(a.tech_,"play",a.play),a}U(i,s);var n=i.prototype;return n.setOptions_=function(){var e=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=!1!==this.options_.handleManifestRedirects,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=void 0!==this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var t=Hc();t&&t.bandwidth&&(this.options_.bandwidth=t.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),t&&t.throughput&&(this.options_.throughput=t.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=li.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===li.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta","experimentalLLHLS","useNetworkInformationApi","useDtsForTimestampOffset","experimentalExactManifestTimings","experimentalLeastPixelDiffSelector"].forEach(function(a){void 0!==e.source_[a]&&(e.options_[a]=e.source_[a])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},n.src=function(e,t){var a=this;if(e){this.setOptions_(),this.options_.src=function(i){return 0===i.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(i.substring(i.indexOf(",")+1)):i}(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=ui,this.options_.sourceType=Ni(t),this.options_.seekTo=function(u){a.tech_.setCurrentTime(u)},this.options_.smoothQualityChange&&q.log.warn("smoothQualityChange is deprecated and will be removed in the next major version"),this.masterPlaylistController_=new Sm(this.options_);var o=q.mergeOptions({liveRangeSafeTimeDelta:Zi},this.options_,{seekable:function(){return a.seekable()},media:function(){return a.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_});this.playbackWatcher_=new Am(o),this.masterPlaylistController_.on("error",function(){var u=q.players[a.tech_.options_.playerId],c=a.masterPlaylistController_.error;"object"!=typeof c||c.code?"string"==typeof c&&(c={message:c,code:3}):c.code=3,u.error(c)});var l=this.options_.experimentalBufferBasedABR?ui.movingAverageBandwidthSelector(.55):ui.STANDARD_PLAYLIST_SELECTOR;this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):l.bind(this),this.masterPlaylistController_.selectInitialPlaylist=ui.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(c){this.masterPlaylistController_.selectPlaylist=c.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(c){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=c,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){var c=this.masterPlaylistController_.mainSegmentLoader_.bandwidth,_=p().navigator.connection||p().navigator.mozConnection||p().navigator.webkitConnection,y=1e7;if(this.options_.useNetworkInformationApi&&_){var A=1e3*_.downlink*1e3;c=A>=y&&c>=y?Math.max(c,A):A}return c},set:function(c){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=c,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){return Math.floor(1/(1/(this.bandwidth||1)+(this.throughput>0?1/this.throughput:0)))},set:function(){q.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return a.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return a.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return a.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return a.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return a.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return a.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return a.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return a.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},mediaAppends:{get:function(){return a.masterPlaylistController_.mediaAppends_()||0},enumerable:!0},mainAppendsToLoadedData:{get:function(){return a.masterPlaylistController_.mainAppendsToLoadedData_()||0},enumerable:!0},audioAppendsToLoadedData:{get:function(){return a.masterPlaylistController_.audioAppendsToLoadedData_()||0},enumerable:!0},appendsToLoadedData:{get:function(){return a.masterPlaylistController_.appendsToLoadedData_()||0},enumerable:!0},timeToLoadedData:{get:function(){return a.masterPlaylistController_.timeToLoadedData_()||0},enumerable:!0},buffered:{get:function(){return Jr(a.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return a.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return a.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return a.tech_.name_},enumerable:!0},duration:{get:function(){return a.tech_.duration()},enumerable:!0},master:{get:function(){return a.playlists.master},enumerable:!0},playerDimensions:{get:function(){return a.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return Jr(a.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return a.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){a.options_.useBandwidthFromLocalStorage&&function(i){if(!p().localStorage)return!1;var n=Hc();n=n?q.mergeOptions(n,i):i;try{p().localStorage.setItem(jc,JSON.stringify(n))}catch(r){return!1}}({bandwidth:a.bandwidth,throughput:Math.round(a.throughput)})}),this.masterPlaylistController_.on("selectedinitialmedia",function(){!function(i){i.representations=function(){var n=i.masterPlaylistController_.master(),r=la(n)?i.masterPlaylistController_.getAudioTrackPlaylists_():n.playlists;return r?r.filter(function(e){return!fl(e)}).map(function(e,t){return new Cm(i,e,e.id)}):[]}}(a)}),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",function(){a.setupEme_()}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=p().URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}},n.createKeySessions_=function(){var e=this,t=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),function(i){var n=i.player,r=i.sourceKeySystems,e=i.audioMedia,t=i.mainPlaylists;if(!n.eme.initializeMediaKeys)return Promise.resolve();var o=function(i,n){return i.reduce(function(r,e){if(!e.contentProtection)return r;var t=n.reduce(function(a,o){var l=e.contentProtection[o];return l&&l.pssh&&(a[o]={pssh:l.pssh}),a},{});return Object.keys(t).length&&r.push(t),r},[])}(e?t.concat([e]):t,Object.keys(r)),l=[],u=[];return o.forEach(function(c){u.push(new Promise(function(_,y){n.tech_.one("keysessioncreated",_)})),l.push(new Promise(function(_,y){n.eme.initializeMediaKeys({keySystems:c},function(A){A?y(A):_()})}))}),Promise.race([Promise.all(l),Promise.race(u)])}({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:t&&t.media(),mainPlaylists:this.playlists.master.playlists}).then(function(){e.logger_("created EME key session"),e.masterPlaylistController_.sourceUpdater_.initializedEme()}).catch(function(a){e.logger_("error while creating EME key session",a),e.player_.error({message:"Failed to initialize media keys for EME",code:3})})},n.handleWaitingForKey_=function(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()},n.setupEme_=function(){var e=this,t=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,a=function(i){var n=i.player,a=function(i,n,r){if(!i)return i;var e={};n&&n.attributes&&n.attributes.CODECS&&(e=os(_t(n.attributes.CODECS))),r&&r.attributes&&r.attributes.CODECS&&(e.audio=r.attributes.CODECS);var t=Pi(e.video),a=Pi(e.audio),o={};for(var l in i)o[l]={},a&&(o[l].audioContentType=a),t&&(o[l].videoContentType=t),n.contentProtection&&n.contentProtection[l]&&n.contentProtection[l].pssh&&(o[l].pssh=n.contentProtection[l].pssh),"string"==typeof i[l]&&(o[l].url=i[l]);return q.mergeOptions(i,o)}(i.sourceKeySystems,i.media,i.audioMedia);return!(!a||(n.currentSource().keySystems=a,a&&!n.eme&&(q.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),1)))}({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:t&&t.media()});this.player_.tech_.on("keystatuschange",function(o){if("output-restricted"===o.status){var l=e.masterPlaylistController_.master();if(l&&l.playlists){var c,u=[];l.playlists.forEach(function(_){_&&_.attributes&&_.attributes.RESOLUTION&&_.attributes.RESOLUTION.height>=720&&(!_.excludeUntil||_.excludeUntil<1/0)&&(_.excludeUntil=1/0,u.push(_))}),u.length&&((c=q.log).warn.apply(c,['DRM keystatus changed to "output-restricted." Removing the following HD playlists that will most likely fail to play and clearing the buffer. This may be due to HDCP restrictions on the stream and the capabilities of the current device.'].concat(u)),e.masterPlaylistController_.fastQualityChange_())}}}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),11!==q.browser.IE_VERSION&&a?this.createKeySessions_():this.masterPlaylistController_.sourceUpdater_.initializedEme()},n.setupQualityLevels_=function(){var e=this,t=q.players[this.tech_.options_.playerId];!t||!t.qualityLevels||this.qualityLevels_||(this.qualityLevels_=t.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){!function(i,n){n.representations().forEach(function(r){i.addQualityLevel(r)}),Vc(i,n.playlists)}(e.qualityLevels_,e)}),this.playlists.on("mediachange",function(){Vc(e.qualityLevels_,e.playlists)}))},i.version=function(){return{"@videojs/http-streaming":"2.14.3","mux.js":"6.0.1","mpd-parser":"0.21.1","m3u8-parser":"4.7.1","aes-decrypter":"3.1.3"}},n.version=function(){return this.constructor.version()},n.canChangeType=function(){return Mc.canChangeType()},n.play=function(){this.masterPlaylistController_.play()},n.setCurrentTime=function(e){this.masterPlaylistController_.setCurrentTime(e)},n.duration=function(){return this.masterPlaylistController_.duration()},n.seekable=function(){return this.masterPlaylistController_.seekable()},n.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&p().URL.revokeObjectURL&&(p().URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),s.prototype.dispose.call(this)},n.convertToProgramTime=function(e,t){return function(i){var n=i.playlist,r=i.time,e=void 0===r?void 0:r,t=i.callback;if(!t)throw new Error("getProgramTime: callback must be provided");if(!n||void 0===e)return t({message:"getProgramTime: playlist and time must be provided"});var a=function(i,n){if(!n||!n.segments||0===n.segments.length)return null;for(var e,r=0,t=0;t<n.segments.length&&!(i<=(r=(e=n.segments[t]).videoTimingInfo?e.videoTimingInfo.transmuxedPresentationEnd:r+e.duration));t++);var a=n.segments[n.segments.length-1];if(a.videoTimingInfo&&a.videoTimingInfo.transmuxedPresentationEnd<i)return null;if(i>r){if(i>r+.25*a.duration)return null;e=a}return{segment:e,estimatedStart:e.videoTimingInfo?e.videoTimingInfo.transmuxedPresentationStart:r-e.duration,type:e.videoTimingInfo?"accurate":"estimate"}}(e,n);if(!a)return t({message:"valid programTime was not found"});if("estimate"===a.type)return t({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:a.estimatedStart});var o={mediaSeconds:e},l=function(i,n){if(!n.dateTimeObject)return null;var a=i-(n.videoTimingInfo.transmuxedPresentationStart+n.videoTimingInfo.transmuxerPrependedSeconds);return new Date(n.dateTimeObject.getTime()+1e3*a)}(e,a.segment);return l&&(o.programDateTime=l.toISOString()),t(null,o)}({playlist:this.masterPlaylistController_.media(),time:e,callback:t})},n.seekToProgramTime=function(e,t,a,o){return void 0===a&&(a=!0),void 0===o&&(o=2),Zp({programTime:e,playlist:this.masterPlaylistController_.media(),retryCount:o,pauseAfterSeek:a,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})},i}(q.getComponent("Component")),fs={name:"videojs-http-streaming",VERSION:"2.14.3",canHandleSource:function(i,n){void 0===n&&(n={});var r=q.mergeOptions(q.options,n);return fs.canPlayType(i.type,r)},handleSource:function(i,n,r){void 0===r&&(r={});var e=q.mergeOptions(q.options,r);return n.vhs=new Ll(i,n,e),q.hasOwnProperty("hls")||Object.defineProperty(n,"hls",{get:function(){return q.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),n.vhs},configurable:!0}),n.vhs.xhr=Zd(),n.vhs.src(i.src,i.type),n.vhs},canPlayType:function(i,n){void 0===n&&(n={});var r=q.mergeOptions(q.options,n),e=r.vhs,t=(e=void 0===e?{}:e).overrideNative,a=void 0===t?!q.browser.IS_ANY_SAFARI:t,o=r.hls,l=(o=void 0===o?{}:o).overrideNative,u=void 0!==l&&l,c=Ni(i);return c&&(!ui.supportsTypeNatively(c)||u||a)?"maybe":""}};pt("avc1.4d400d,mp4a.40.2")&&q.getTech("Html5").registerSourceHandler(fs,0),q.VhsHandler=Ll,Object.defineProperty(q,"HlsHandler",{get:function(){return q.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),Ll},configurable:!0}),q.VhsSourceHandler=fs,Object.defineProperty(q,"HlsSourceHandler",{get:function(){return q.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),fs},configurable:!0}),q.Vhs=ui,Object.defineProperty(q,"Hls",{get:function(){return q.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),ui},configurable:!0}),q.use||(q.registerComponent("Hls",ui),q.registerComponent("Vhs",ui)),q.options.vhs=q.options.vhs||{},q.options.hls=q.options.hls||{},q.getPlugin&&q.getPlugin("reloadSourceOnError")||(q.registerPlugin||q.plugin)("reloadSourceOnError",function(i){wm(this,i)});const Wm=q},3478:(at,je,J)=>{"use strict";J.r(je),J.d(je,{default:()=>Ae});var j=J(17);function p(){return p=Object.assign||function(De){for(var Te=1;Te<arguments.length;Te++){var ue=arguments[Te];for(var be in ue)Object.prototype.hasOwnProperty.call(ue,be)&&(De[be]=ue[be])}return De},p.apply(this,arguments)}var W,he=!1,z={seekLeft:{handleClick:function(Te){var ue=Number(Te.currentTime())-10;Te.currentTime(ue)},doubleTap:!0},play:{handleClick:function(Te){Te.paused()?Te.play():Te.pause()}},seekRight:{handleClick:function(Te){var ue=Number(Te.currentTime())+10;Te.currentTime(ue)},doubleTap:!0},lockButton:!1},ee={previous:{icon:"backward",className:"previous-button"},seekLeft:{icon:"history",className:"seek-left"},play:{icon:"play",className:"play-button"},seekRight:{icon:"history",className:"seek-right",extra:"fa-flip-horizontal"},next:{icon:"forward",className:"next-button"}},Z=function(Te){var be=Te.children[0],Ne=document.querySelector(".vjs-control-bar");be.addEventListener("click",function(){var _e=Array.from(document.querySelectorAll(".overlay-button:not(.lock-button)"));if(he)return be.innerHTML='<i class="icon fa fa-2x fa-lock"></i>',_e.forEach(function(k){k.classList.remove("d-none")}),Ne.classList.remove("d-none"),void(he=!1);be.innerHTML='<i class="icon fa fa-2x fa-unlock"></i>',_e.forEach(function(k){k.classList.add("d-none")}),Ne.classList.add("d-none"),he=!0})},Be=function(Te,ue){(Te=Te.filter(function(be){return be.options.doubleTap&&be.options.handleClick})).forEach(function(be){be.element.addEventListener("click",function(){Ye(function(){be.options.handleClick(ue)})})})},it=function(Te,ue){(Te=Te.filter(function(be){return be.options.handleClick})).forEach(function(be){be.element.children[0].addEventListener("click",function(){return be.options.handleClick(ue)})})},ft=function(Te){var ue=Te.icon,be=Te.extra,Ne=void 0===be?"":be,_e=Te.className,k=void 0===_e?"":_e,O=Te.size,G=void 0===O?"4x":O,ye=document.createElement("i");ye.className="icon fa fa-"+G+" fa-"+ue+" "+Ne;var se=document.createElement("div");se.className="button-wrapper",se.append(ye);var Se=document.createElement("div");return Se.className="overlay-button vjs-button "+k,Se.append(se),Se},Ye=function(Te){var be=(new Date).getTime()-W;be<400&&be>0&&Te(),W=(new Date).getTime()},de=function(Te,ue){for(var be in Te){var Ne=Te[be],_e=ue[be];if(_e)for(var k in _e)!Ne.hasOwnProperty(k)&&_e.hasOwnProperty(k)&&(Ne[k]=_e[k])}return Te},We=function(Te){var ue=this;this.ready(function(){!function(Te,ue){Te.addClass("vjs-touch-overlay");var be=function(Te,ue){ue=ue&&Object.keys(ue).length?de(ue,z):p({},z);var be=document.createElement("div"),Ne=document.createElement("div"),_e=document.createElement("div");_e.className="overlay-col-12 mx-auto control-overlay-buttons",Ne.className="overlay-row",be.className="overlay-container-fluid vjs-overlay";var O=Object.keys(ue).filter(function(Se){return ee.hasOwnProperty(Se)}).map(function(Se){var Ke=ft(ee[Se]);return{options:ue[Se],element:Ke}});if(it(O,Te),Be(O,Te),ue.lockButton){var G=document.createElement("div");G.className="overlay-col-1 lock-overlay",_e.classList.remove("overlay-col-12","mx-auto"),_e.classList.add("overlay-col-11");var se=ft({icon:"lock",className:"lock-button",size:"2x"});Z(se),G.append(se),Ne.append(G)}return O.forEach(function(Se){return _e.append(Se.element)}),Ne.append(_e),be.append(Ne),be}(Te,ue);Te.el().append(be),function(Te,ue){var be=document.querySelector(".overlay-row");Te.on("play",function(){document.querySelector(".play-button .button-wrapper").innerHTML='<i class="icon fa fa-4x fa-pause"></i>'}),Te.on("pause",function(){document.querySelector(".play-button .button-wrapper").innerHTML='<i class="icon fa fa-4x fa-play"></i>'}),Te.on("userinactive",function(){ue.classList.add("d-none"),be.classList.add("d-none")}),Te.on("useractive",function(){ue.classList.remove("d-none"),be.classList.remove("d-none")}),ue.addEventListener("click",function(Ne){var _e=document.querySelector(".vjs-control-bar");Ne.target.classList.contains("icon")||(be.classList.contains("d-none")?(be.classList.remove("d-none"),he||_e.classList.remove("d-none")):(be.classList.add("d-none"),_e.classList.add("d-none")))})}(Te,be)}(ue,Te)})};(j.default.registerPlugin||j.default.plugin)("touchOverlay",We),We.VERSION="1.2.9";const Ae=We},735:(at,je,J)=>{"use strict";J.r(je),J.d(je,{default:()=>U});var j=J(17),W=j.default.getComponent("Button"),he={forwardIndex:1,backIndex:1},z=j.default.registerPlugin||j.default.plugin,X=function(Z){var Be=this;this.ready(function(){!function(Z,Be){Z.addClass("vjs-seek-buttons"),Be.forward&&Be.forward>0&&(Z.controlBar.seekForward=Z.controlBar.addChild("seekButton",{direction:"forward",seconds:Be.forward},Be.forwardIndex)),Be.back&&Be.back>0&&(Z.controlBar.seekBack=Z.controlBar.addChild("seekButton",{direction:"back",seconds:Be.back},Be.backIndex))}(Be,j.default.mergeOptions(he,Z))})};X.VERSION="1.6.0",j.default.registerComponent("SeekButton",function(Me){function Z(it,ft){var Ye;return"forward"===(Ye=Me.call(this,it,ft)||this).options_.direction?Ye.controlText(Ye.localize("Seek forward {{seconds}} seconds").replace("{{seconds}}",Ye.options_.seconds)):"back"===Ye.options_.direction&&Ye.controlText(Ye.localize("Seek back {{seconds}} seconds").replace("{{seconds}}",Ye.options_.seconds)),Ye}!function p(Me,Z){Me.prototype=Object.create(Z.prototype),Me.prototype.constructor=Me,Me.__proto__=Z}(Z,Me);var Be=Z.prototype;return Be.buildCSSClass=function(){return"vjs-seek-button skip-"+this.options_.direction+" skip-"+this.options_.seconds+" "+Me.prototype.buildCSSClass.call(this)},Be.handleClick=function(){var ft=this.player_.currentTime();"forward"===this.options_.direction?this.player_.currentTime(ft+this.options_.seconds):"back"===this.options_.direction&&this.player_.currentTime(ft-this.options_.seconds)},Z}(W)),z("seekButtons",X);const U=X},3652:function(at,je,J){at.exports=function(j,p){"use strict";function ae(Ye){return Ye&&"object"==typeof Ye&&"default"in Ye?Ye:{default:Ye}}var W=ae(j),he=ae(p);function z(Ye,de,We){return Ye(We={path:de,exports:{},require:function(Ae,De){return function ee(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},We.exports),We.exports}var X=z(function(Ye){Ye.exports=function de(We){if(void 0===We)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return We},Ye.exports.default=Ye.exports,Ye.exports.__esModule=!0}),Y=z(function(Ye){function de(We,Ae){return Ye.exports=de=Object.setPrototypeOf||function(Te,ue){return Te.__proto__=ue,Te},Ye.exports.default=Ye.exports,Ye.exports.__esModule=!0,de(We,Ae)}Ye.exports=de,Ye.exports.default=Ye.exports,Ye.exports.__esModule=!0}),U=z(function(Ye){Ye.exports=function de(We,Ae){We.prototype=Object.create(Ae.prototype),We.prototype.constructor=We,Y(We,Ae)},Ye.exports.default=Ye.exports,Ye.exports.__esModule=!0}),Be=W.default.getPlugin("plugin"),it={url:"",width:0,height:0,interval:1,responsive:600,downlink:2},ft=function(Ye){function de(We,Ae){var De;De=Ye.call(this,We)||this;var Te=X(De),ue=Te.log;return Te.options=W.default.mergeOptions(it,Ae),Te.setState({ready:!1}),Te.on("statechanged",function(){ue.debug("will"+(Te.state.ready?"":" not")+" show thumbnails")}),Te.player.ready(function(){!function(de,We,Ae){var De=Ae.url,Te=Ae.height,ue=Ae.width,be=!1,Ne={},_e=W.default.dom||W.default,k=de.controlBar,O=k&&k.progressControl,G=O&&O.seekBar,ye=G&&G.mouseTimeDisplay&&G.mouseTimeDisplay.timeTooltip,se=function(ge){var fe=ye.el().style;Object.keys(ge).forEach(function(Pe){var ze=ge[Pe];""!==ze?fe.setProperty(Pe,ze):fe.removeProperty(Pe)})},Se=function(){se({width:"",height:"","background-image":"","background-repeat":"","background-position":"","background-size":"",top:"",color:"","text-shadow":"",border:"",margin:""})},xe=function(ge){var fe=Ne[De],Pe=fe.naturalWidth,ze=fe.naturalHeight,lt=G.el();if(fe.complete&&Pe&&ze){var dt=_e.getPointerPosition(lt,ge).x*de.duration();dt/=Ae.interval;var we=Ae.responsive,et=de.currentWidth(),mt=we&&et<we?et/we:1,_t=Pe/ue,Ct=ue*mt,wt=Te*mt,Wt=Math.floor(dt%_t)*-Ct,ii=Math.floor(dt/_t)*-wt,Pi=Pe*mt+"px "+ze*mt+"px",pt=_e.findPosition(k.el()).top,Bt=_e.findPosition(lt).top,ci=-wt-Math.max(0,Bt-pt);se({width:Ct+"px",height:wt+"px","background-image":"url("+De+")","background-repeat":"no-repeat","background-position":Wt+"px "+ii+"px","background-size":Pi,top:ci+"px",color:"#fff","text-shadow":"1px 1px #000",border:"1px solid #000",margin:"0 1px"})}else Se()},Ke=function(ge){var fe=["mousemove","touchmove"],Pe=he.default,ze=Pe.navigator,lt=We.log,dt=Ae.downlink,we=ze.connection||ze.mozConnection||ze.webkitConnection,et=!we||we.downlink>=dt,mt=ye&&(ue&&Te||ge),_t=Ne[De],Ct=function(ii){We.setState({ready:ii})};if(ye&&Se(),mt&&(De&&et||_t)){var wt="loading "+De;_t?wt="re"+wt:(Ne[De]=new Pe.Image,Ne[De].src=De,ge&&(be=!0,wt="pre"+wt)),lt.debug(wt),O.on(fe,xe),Ct(!0)}else ge||(O.off(fe,xe),Ct(),["url","width","height"].forEach(function(Wt){Ae[Wt]||lt("no thumbnails "+Wt+" given")}),et||lt.warn("connection.downlink < "+dt))};Ke(!0),de.on("loadstart",function(){be?be=!1:(de.currentSources().forEach(function(Ie){var ge=Ie.spriteThumbnails;ge&&(Ae=W.default.mergeOptions(Ae,ge),De=Ae.url,Te=Ae.height,ue=Ae.width)}),Ke())}),de.addClass("vjs-sprite-thumbnails")}(Te.player,Te,Te.options)}),De}return U(de,Ye),de}(Be);return ft.defaultState={},ft.VERSION="0.6.0",W.default.registerPlugin("spriteThumbnails",ft),ft}(J(17),J(9226))},3629:(at,je,J)=>{var j=J(9226),p=at.exports={WebVTT:J(8318),VTTCue:J(5713),VTTRegion:J(3872)};j.vttjs=p,j.WebVTT=p.WebVTT;var ae=p.VTTCue,W=p.VTTRegion,he=j.VTTCue,z=j.VTTRegion;p.shim=function(){j.VTTCue=ae,j.VTTRegion=W},p.restore=function(){j.VTTCue=he,j.VTTRegion=z},j.VTTCue||p.shim()},8318:(at,je,J)=>{var j=J(1421),p=Object.create||function(){function k(){}return function(O){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return k.prototype=O,new k}}();function ae(k,O){this.name="ParsingError",this.code=k.code,this.message=O||k.message}function W(k){function O(ye,se,Se,xe){return 3600*(0|ye)+60*(0|se)+(0|Se)+(0|xe)/1e3}var G=k.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return G?G[3]?O(G[1],G[2],G[3].replace(":",""),G[4]):G[1]>59?O(G[1],G[2],0,G[4]):O(0,G[1],G[2],G[4]):null}function he(){this.values=p(null)}function z(k,O,G,ye){var se=ye?k.split(ye):[k];for(var Se in se)if("string"==typeof se[Se]){var xe=se[Se].split(G);2===xe.length&&O(xe[0].trim(),xe[1].trim())}}function ee(k,O,G){var ye=k;function se(){var Ke=W(k);if(null===Ke)throw new ae(ae.Errors.BadTimeStamp,"Malformed timestamp: "+ye);return k=k.replace(/^[^\sa-zA-Z-]+/,""),Ke}function xe(){k=k.replace(/^\s+/,"")}if(xe(),O.startTime=se(),xe(),"--\x3e"!==k.substr(0,3))throw new ae(ae.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+ye);k=k.substr(3),xe(),O.endTime=se(),xe(),function Se(Ke,Ie){var ge=new he;z(Ke,function(fe,Pe){switch(fe){case"region":for(var ze=G.length-1;ze>=0;ze--)if(G[ze].id===Pe){ge.set(fe,G[ze].region);break}break;case"vertical":ge.alt(fe,Pe,["rl","lr"]);break;case"line":var lt=Pe.split(","),dt=lt[0];ge.integer(fe,dt),ge.percent(fe,dt)&&ge.set("snapToLines",!1),ge.alt(fe,dt,["auto"]),2===lt.length&&ge.alt("lineAlign",lt[1],["start","center","end"]);break;case"position":lt=Pe.split(","),ge.percent(fe,lt[0]),2===lt.length&&ge.alt("positionAlign",lt[1],["start","center","end"]);break;case"size":ge.percent(fe,Pe);break;case"align":ge.alt(fe,Pe,["start","center","end","left","right"])}},/:/,/\s/),Ie.region=ge.get("region",null),Ie.vertical=ge.get("vertical","");try{Ie.line=ge.get("line","auto")}catch(fe){}Ie.lineAlign=ge.get("lineAlign","start"),Ie.snapToLines=ge.get("snapToLines",!0),Ie.size=ge.get("size",100);try{Ie.align=ge.get("align","center")}catch(fe){Ie.align=ge.get("align","middle")}try{Ie.position=ge.get("position","auto")}catch(fe){Ie.position=ge.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},Ie.align)}Ie.positionAlign=ge.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},Ie.align)}(k,O)}(ae.prototype=p(Error.prototype)).constructor=ae,ae.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},he.prototype={set:function(k,O){!this.get(k)&&""!==O&&(this.values[k]=O)},get:function(k,O,G){return G?this.has(k)?this.values[k]:O[G]:this.has(k)?this.values[k]:O},has:function(k){return k in this.values},alt:function(k,O,G){for(var ye=0;ye<G.length;++ye)if(O===G[ye]){this.set(k,O);break}},integer:function(k,O){/^-?\d+$/.test(O)&&this.set(k,parseInt(O,10))},percent:function(k,O){return!!(O.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(O=parseFloat(O),O>=0&&O<=100))&&(this.set(k,O),!0)}};var X=j.createElement&&j.createElement("textarea"),Y={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},U={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},Me={v:"title",lang:"lang"},Z={rt:"ruby"};function Be(k,O){function G(){if(!O)return null;var we=O.match(/^([^<]*)(<[^>]*>?)?/);return function dt(et){return O=O.substr(et.length),et}(we[1]?we[1]:we[2])}function ye(dt){return X.innerHTML=dt,dt=X.textContent,X.textContent="",dt}function Se(dt,we){var et=Y[dt];if(!et)return null;var mt=k.document.createElement(et),_t=Me[dt];return _t&&we&&(mt[_t]=we.trim()),mt}for(var Ie,xe=k.document.createElement("div"),Ke=xe,ge=[];null!==(Ie=G());)if("<"!==Ie[0])Ke.appendChild(k.document.createTextNode(ye(Ie)));else{if("/"===Ie[1]){ge.length&&ge[ge.length-1]===Ie.substr(2).replace(">","")&&(ge.pop(),Ke=Ke.parentNode);continue}var Pe,fe=W(Ie.substr(1,Ie.length-2));if(fe){Pe=k.document.createProcessingInstruction("timestamp",fe),Ke.appendChild(Pe);continue}var ze=Ie.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!ze||!(Pe=Se(ze[1],ze[3]))||Z[(we=Pe).localName]&&Z[we.localName]!==Ke.localName)continue;if(ze[2]){var lt=ze[2].split(".");lt.forEach(function(dt){var we=/^bg_/.test(dt),et=we?dt.slice(3):dt;U.hasOwnProperty(et)&&(Pe.style[we?"background-color":"color"]=U[et])}),Pe.className=lt.join(" ")}ge.push(ze[1]),Ke.appendChild(Pe),Ke=Pe}var we;return xe}var it=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function ft(k){for(var O=0;O<it.length;O++){var G=it[O];if(k>=G[0]&&k<=G[1])return!0}return!1}function Ye(k){var O=[],G="";if(!k||!k.childNodes)return"ltr";function se(Ke,Ie){for(var ge=Ie.childNodes.length-1;ge>=0;ge--)Ke.push(Ie.childNodes[ge])}function Se(Ke){if(!Ke||!Ke.length)return null;var Ie=Ke.pop(),ge=Ie.textContent||Ie.innerText;if(ge){var fe=ge.match(/^.*(\n|\r)/);return fe?(Ke.length=0,fe[0]):ge}return"ruby"===Ie.tagName?Se(Ke):Ie.childNodes?(se(Ke,Ie),Se(Ke)):void 0}for(se(O,k);G=Se(O);)for(var xe=0;xe<G.length;xe++)if(ft(G.charCodeAt(xe)))return"rtl";return"ltr"}function We(){}function Ae(k,O,G){We.call(this),this.cue=O,this.cueDiv=Be(k,O.text);var ye={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===O.vertical?"horizontal-tb":"lr"===O.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(ye,this.cueDiv),this.div=k.document.createElement("div"),ye={direction:Ye(this.cueDiv),writingMode:""===O.vertical?"horizontal-tb":"lr"===O.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===O.align?"center":O.align,font:G.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(ye),this.div.appendChild(this.cueDiv);var se=0;switch(O.positionAlign){case"start":se=O.position;break;case"center":se=O.position-O.size/2;break;case"end":se=O.position-O.size}this.applyStyles(""===O.vertical?{left:this.formatStyle(se,"%"),width:this.formatStyle(O.size,"%")}:{top:this.formatStyle(se,"%"),height:this.formatStyle(O.size,"%")}),this.move=function(Se){this.applyStyles({top:this.formatStyle(Se.top,"px"),bottom:this.formatStyle(Se.bottom,"px"),left:this.formatStyle(Se.left,"px"),right:this.formatStyle(Se.right,"px"),height:this.formatStyle(Se.height,"px"),width:this.formatStyle(Se.width,"px")})}}function De(k){var O,G,ye,se;if(k.div){G=k.div.offsetHeight,ye=k.div.offsetWidth,se=k.div.offsetTop;var Se=(Se=k.div.childNodes)&&(Se=Se[0])&&Se.getClientRects&&Se.getClientRects();k=k.div.getBoundingClientRect(),O=Se?Math.max(Se[0]&&Se[0].height||0,k.height/Se.length):0}this.left=k.left,this.right=k.right,this.top=k.top||se,this.height=k.height||G,this.bottom=k.bottom||se+(k.height||G),this.width=k.width||ye,this.lineHeight=void 0!==O?O:k.lineHeight}function Te(k,O,G,ye){var Se=new De(O),xe=O.cue,Ke=function de(k){if("number"==typeof k.line&&(k.snapToLines||k.line>=0&&k.line<=100))return k.line;if(!k.track||!k.track.textTrackList||!k.track.textTrackList.mediaElement)return-1;for(var O=k.track,G=O.textTrackList,ye=0,se=0;se<G.length&&G[se]!==O;se++)"showing"===G[se].mode&&ye++;return-1*++ye}(xe),Ie=[];if(xe.snapToLines){var ge;switch(xe.vertical){case"":Ie=["+y","-y"],ge="height";break;case"rl":Ie=["+x","-x"],ge="width";break;case"lr":Ie=["-x","+x"],ge="width"}var fe=Se.lineHeight,Pe=fe*Math.round(Ke),ze=G[ge]+fe,lt=Ie[0];Math.abs(Pe)>ze&&(Pe=Pe<0?-1:1,Pe*=Math.ceil(ze/fe)*fe),Ke<0&&(Pe+=""===xe.vertical?G.height:G.width,Ie=Ie.reverse()),Se.move(lt,Pe)}else{var dt=Se.lineHeight/G.height*100;switch(xe.lineAlign){case"center":Ke-=dt/2;break;case"end":Ke-=dt}switch(xe.vertical){case"":O.applyStyles({top:O.formatStyle(Ke,"%")});break;case"rl":O.applyStyles({left:O.formatStyle(Ke,"%")});break;case"lr":O.applyStyles({right:O.formatStyle(Ke,"%")})}Ie=["+y","-x","+x","-y"],Se=new De(O)}var we=function se(et,mt){for(var _t,Ct=new De(et),wt=1,Wt=0;Wt<mt.length;Wt++){for(;et.overlapsOppositeAxis(G,mt[Wt])||et.within(G)&&et.overlapsAny(ye);)et.move(mt[Wt]);if(et.within(G))return et;var ii=et.intersectPercentage(G);wt>ii&&(_t=new De(et),wt=ii),et=new De(Ct)}return _t||Ct}(Se,Ie);O.move(we.toCSSCompatValues(G))}function ue(){}We.prototype.applyStyles=function(k,O){for(var G in O=O||this.div,k)k.hasOwnProperty(G)&&(O.style[G]=k[G])},We.prototype.formatStyle=function(k,O){return 0===k?0:k+O},(Ae.prototype=p(We.prototype)).constructor=Ae,De.prototype.move=function(k,O){switch(O=void 0!==O?O:this.lineHeight,k){case"+x":this.left+=O,this.right+=O;break;case"-x":this.left-=O,this.right-=O;break;case"+y":this.top+=O,this.bottom+=O;break;case"-y":this.top-=O,this.bottom-=O}},De.prototype.overlaps=function(k){return this.left<k.right&&this.right>k.left&&this.top<k.bottom&&this.bottom>k.top},De.prototype.overlapsAny=function(k){for(var O=0;O<k.length;O++)if(this.overlaps(k[O]))return!0;return!1},De.prototype.within=function(k){return this.top>=k.top&&this.bottom<=k.bottom&&this.left>=k.left&&this.right<=k.right},De.prototype.overlapsOppositeAxis=function(k,O){switch(O){case"+x":return this.left<k.left;case"-x":return this.right>k.right;case"+y":return this.top<k.top;case"-y":return this.bottom>k.bottom}},De.prototype.intersectPercentage=function(k){return Math.max(0,Math.min(this.right,k.right)-Math.max(this.left,k.left))*Math.max(0,Math.min(this.bottom,k.bottom)-Math.max(this.top,k.top))/(this.height*this.width)},De.prototype.toCSSCompatValues=function(k){return{top:this.top-k.top,bottom:k.bottom-this.bottom,left:this.left-k.left,right:k.right-this.right,height:this.height,width:this.width}},De.getSimpleBoxPosition=function(k){var O=k.div?k.div.offsetHeight:k.tagName?k.offsetHeight:0,G=k.div?k.div.offsetWidth:k.tagName?k.offsetWidth:0,ye=k.div?k.div.offsetTop:k.tagName?k.offsetTop:0;return{left:(k=k.div?k.div.getBoundingClientRect():k.tagName?k.getBoundingClientRect():k).left,right:k.right,top:k.top||ye,height:k.height||O,bottom:k.bottom||ye+(k.height||O),width:k.width||G}},ue.StringDecoder=function(){return{decode:function(k){if(!k)return"";if("string"!=typeof k)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(k))}}},ue.convertCueToDOMTree=function(k,O){return k&&O?Be(k,O):null},ue.processCues=function(k,O,G){if(!k||!O||!G)return null;for(;G.firstChild;)G.removeChild(G.firstChild);var ye=k.document.createElement("div");if(ye.style.position="absolute",ye.style.left="0",ye.style.right="0",ye.style.top="0",ye.style.bottom="0",ye.style.margin="1.5%",G.appendChild(ye),function se(fe){for(var Pe=0;Pe<fe.length;Pe++)if(fe[Pe].hasBeenReset||!fe[Pe].displayState)return!0;return!1}(O)){var xe=[],Ke=De.getSimpleBoxPosition(ye),ge={font:Math.round(.05*Ke.height*100)/100+"px sans-serif"};!function(){for(var fe,Pe,ze=0;ze<O.length;ze++)fe=new Ae(k,Pe=O[ze],ge),ye.appendChild(fe.div),Te(0,fe,Ke,xe),Pe.displayState=fe.div,xe.push(De.getSimpleBoxPosition(fe))}()}else for(var Se=0;Se<O.length;Se++)ye.appendChild(O[Se].displayState)},(ue.Parser=function(k,O,G){G||(G=O,O={}),O||(O={}),this.window=k,this.vttjs=O,this.state="INITIAL",this.buffer="",this.decoder=G||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(k){if(!(k instanceof ae))throw k;this.onparsingerror&&this.onparsingerror(k)},parse:function(k){var fe,O=this;function G(){for(var fe=O.buffer,Pe=0;Pe<fe.length&&"\r"!==fe[Pe]&&"\n"!==fe[Pe];)++Pe;var ze=fe.substr(0,Pe);return"\r"===fe[Pe]&&++Pe,"\n"===fe[Pe]&&++Pe,O.buffer=fe.substr(Pe),ze}k&&(O.buffer+=O.decoder.decode(k,{stream:!0}));try{var xe;if("INITIAL"===O.state){if(!/\r\n|\n/.test(O.buffer))return this;var Ke=(xe=G()).match(/^WEBVTT([ \t].*)?$/);if(!Ke||!Ke[0])throw new ae(ae.Errors.BadSignature);O.state="HEADER"}for(var Ie=!1;O.buffer;){if(!/\r\n|\n/.test(O.buffer))return this;switch(Ie?Ie=!1:xe=G(),O.state){case"HEADER":/:/.test(xe)?(fe=xe).match(/X-TIMESTAMP-MAP/)?z(fe,function(Pe,ze){"X-TIMESTAMP-MAP"===Pe&&function se(fe){var Pe=new he;z(fe,function(ze,lt){switch(ze){case"MPEGT":Pe.integer(ze+"S",lt);break;case"LOCA":Pe.set(ze+"L",W(lt))}},/[^\d]:/,/,/),O.ontimestampmap&&O.ontimestampmap({MPEGTS:Pe.get("MPEGTS"),LOCAL:Pe.get("LOCAL")})}(ze)},/=/):z(fe,function(Pe,ze){"Region"===Pe&&function ye(fe){var Pe=new he;if(z(fe,function(lt,dt){switch(lt){case"id":Pe.set(lt,dt);break;case"width":Pe.percent(lt,dt);break;case"lines":Pe.integer(lt,dt);break;case"regionanchor":case"viewportanchor":var we=dt.split(",");if(2!==we.length)break;var et=new he;if(et.percent("x",we[0]),et.percent("y",we[1]),!et.has("x")||!et.has("y"))break;Pe.set(lt+"X",et.get("x")),Pe.set(lt+"Y",et.get("y"));break;case"scroll":Pe.alt(lt,dt,["up"])}},/=/,/\s/),Pe.has("id")){var ze=new(O.vttjs.VTTRegion||O.window.VTTRegion);ze.width=Pe.get("width",100),ze.lines=Pe.get("lines",3),ze.regionAnchorX=Pe.get("regionanchorX",0),ze.regionAnchorY=Pe.get("regionanchorY",100),ze.viewportAnchorX=Pe.get("viewportanchorX",0),ze.viewportAnchorY=Pe.get("viewportanchorY",100),ze.scroll=Pe.get("scroll",""),O.onregion&&O.onregion(ze),O.regionList.push({id:Pe.get("id"),region:ze})}}(ze)},/:/):xe||(O.state="ID");continue;case"NOTE":xe||(O.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(xe)){O.state="NOTE";break}if(!xe)continue;O.cue=new(O.vttjs.VTTCue||O.window.VTTCue)(0,0,"");try{O.cue.align="center"}catch(fe){O.cue.align="middle"}if(O.state="CUE",-1===xe.indexOf("--\x3e")){O.cue.id=xe;continue}case"CUE":try{ee(xe,O.cue,O.regionList)}catch(fe){O.reportOrThrowError(fe),O.cue=null,O.state="BADCUE";continue}O.state="CUETEXT";continue;case"CUETEXT":var ge=-1!==xe.indexOf("--\x3e");if(!xe||ge&&(Ie=!0)){O.oncue&&O.oncue(O.cue),O.cue=null,O.state="ID";continue}O.cue.text&&(O.cue.text+="\n"),O.cue.text+=xe.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":xe||(O.state="ID");continue}}}catch(fe){O.reportOrThrowError(fe),"CUETEXT"===O.state&&O.cue&&O.oncue&&O.oncue(O.cue),O.cue=null,O.state="INITIAL"===O.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var k=this;try{if(k.buffer+=k.decoder.decode(),(k.cue||"HEADER"===k.state)&&(k.buffer+="\n\n",k.parse()),"INITIAL"===k.state)throw new ae(ae.Errors.BadSignature)}catch(O){k.reportOrThrowError(O)}return k.onflush&&k.onflush(),this}},at.exports=ue},5713:at=>{var J={"":1,lr:1,rl:1},j={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function ae(he){return"string"==typeof he&&!!j[he.toLowerCase()]&&he.toLowerCase()}function W(he,z,ee){this.hasBeenReset=!1;var X="",Y=!1,U=he,Me=z,Z=ee,Be=null,it="",ft=!0,Ye="auto",de="start",We="auto",Ae="auto",De=100,Te="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return X},set:function(ue){X=""+ue}},pauseOnExit:{enumerable:!0,get:function(){return Y},set:function(ue){Y=!!ue}},startTime:{enumerable:!0,get:function(){return U},set:function(ue){if("number"!=typeof ue)throw new TypeError("Start time must be set to a number.");U=ue,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return Me},set:function(ue){if("number"!=typeof ue)throw new TypeError("End time must be set to a number.");Me=ue,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return Z},set:function(ue){Z=""+ue,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return Be},set:function(ue){Be=ue,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return it},set:function(ue){var be=function p(he){return"string"==typeof he&&!!J[he.toLowerCase()]&&he.toLowerCase()}(ue);if(!1===be)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");it=be,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return ft},set:function(ue){ft=!!ue,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return Ye},set:function(ue){if("number"!=typeof ue&&"auto"!==ue)throw new SyntaxError("Line: an invalid number or illegal string was specified.");Ye=ue,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return de},set:function(ue){var be=ae(ue);be?(de=be,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return We},set:function(ue){if(ue<0||ue>100)throw new Error("Position must be between 0 and 100.");We=ue,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return Ae},set:function(ue){var be=ae(ue);be?(Ae=be,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return De},set:function(ue){if(ue<0||ue>100)throw new Error("Size must be between 0 and 100.");De=ue,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return Te},set:function(ue){var be=ae(ue);if(!be)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");Te=be,this.hasBeenReset=!0}}}),this.displayState=void 0}W.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},at.exports=W},3872:at=>{var je={"":!0,up:!0};function j(ae){return"number"==typeof ae&&ae>=0&&ae<=100}at.exports=function p(){var ae=100,W=3,he=0,z=100,ee=0,X=100,Y="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return ae},set:function(U){if(!j(U))throw new Error("Width must be between 0 and 100.");ae=U}},lines:{enumerable:!0,get:function(){return W},set:function(U){if("number"!=typeof U)throw new TypeError("Lines must be set to a number.");W=U}},regionAnchorY:{enumerable:!0,get:function(){return z},set:function(U){if(!j(U))throw new Error("RegionAnchorX must be between 0 and 100.");z=U}},regionAnchorX:{enumerable:!0,get:function(){return he},set:function(U){if(!j(U))throw new Error("RegionAnchorY must be between 0 and 100.");he=U}},viewportAnchorY:{enumerable:!0,get:function(){return X},set:function(U){if(!j(U))throw new Error("ViewportAnchorY must be between 0 and 100.");X=U}},viewportAnchorX:{enumerable:!0,get:function(){return ee},set:function(U){if(!j(U))throw new Error("ViewportAnchorX must be between 0 and 100.");ee=U}},scroll:{enumerable:!0,get:function(){return Y},set:function(U){var Me=function J(ae){return"string"==typeof ae&&!!je[ae.toLowerCase()]&&ae.toLowerCase()}(U);!1===Me?console.warn("Scroll: an invalid or illegal string was specified."):Y=Me}}})}},5893:()=>{},434:at=>{function je(){return at.exports=je=Object.assign?Object.assign.bind():function(J){for(var j=1;j<arguments.length;j++){var p=arguments[j];for(var ae in p)Object.prototype.hasOwnProperty.call(p,ae)&&(J[ae]=p[ae])}return J},at.exports.__esModule=!0,at.exports.default=at.exports,je.apply(this,arguments)}at.exports=je,at.exports.__esModule=!0,at.exports.default=at.exports},1461:(at,je,J)=>{"use strict";J.d(je,{Sv:()=>ee,Xg:()=>z,vE:()=>he});var j=J(9808),p=J(5e3),ae=J(3075);const W=["*"];let he=(()=>{class X{constructor(U,Me,Z){this.el=U,this.zone=Me,this.platformId=Z,this.afterChange=new p.vpe,this.beforeChange=new p.vpe,this.breakpoint=new p.vpe,this.destroy=new p.vpe,this.init=new p.vpe,this.currentIndex=0,this.slides=[],this.initialized=!1,this._removedSlides=[],this._addedSlides=[]}ngOnDestroy(){this.unslick()}ngAfterViewInit(){this.ngAfterViewChecked()}ngAfterViewChecked(){if(!(0,j.PM)(this.platformId)&&(this._addedSlides.length>0||this._removedSlides.length>0)){const U=this.slides.length-this._removedSlides.length+this._addedSlides.length;this.initialized?0===U?this.unslick():(this._addedSlides.forEach(Me=>{this.slides.push(Me),this.zone.runOutsideAngular(()=>{this.$instance.slick("slickAdd",Me.el.nativeElement)})}),this._addedSlides=[],this._removedSlides.forEach(Me=>{const Z=this.slides.indexOf(Me);this.slides=this.slides.filter(Be=>Be!==Me),this.zone.runOutsideAngular(()=>{this.$instance.slick("slickRemove",Z)})}),this._removedSlides=[]):U>0&&this.initSlick()}}initSlick(){this.slides=this._addedSlides,this._addedSlides=[],this._removedSlides=[],this.zone.runOutsideAngular(()=>{this.$instance=jQuery(this.el.nativeElement),this.$instance.on("init",(U,Me)=>{this.zone.run(()=>{this.init.emit({event:U,slick:Me})})}),this.$instance.slick(this.config),this.zone.run(()=>{var U;this.initialized=!0,this.currentIndex=(null===(U=this.config)||void 0===U?void 0:U.initialSlide)||0}),this.$instance.on("afterChange",(U,Me,Z)=>{this.zone.run(()=>{this.afterChange.emit({event:U,slick:Me,currentSlide:Z,first:0===Z,last:Me.$slides.length===Z+Me.options.slidesToScroll}),this.currentIndex=Z})}),this.$instance.on("beforeChange",(U,Me,Z,Be)=>{this.zone.run(()=>{this.beforeChange.emit({event:U,slick:Me,currentSlide:Z,nextSlide:Be}),this.currentIndex=Be})}),this.$instance.on("breakpoint",(U,Me,Z)=>{this.zone.run(()=>{this.breakpoint.emit({event:U,slick:Me,breakpoint:Z})})}),this.$instance.on("destroy",(U,Me)=>{this.zone.run(()=>{this.destroy.emit({event:U,slick:Me}),this.initialized=!1})})})}addSlide(U){this._addedSlides.push(U)}removeSlide(U){this._removedSlides.push(U)}slickGoTo(U){this.zone.runOutsideAngular(()=>{this.$instance.slick("slickGoTo",U)})}slickNext(){this.zone.runOutsideAngular(()=>{this.$instance.slick("slickNext")})}slickPrev(){this.zone.runOutsideAngular(()=>{this.$instance.slick("slickPrev")})}slickPause(){this.zone.runOutsideAngular(()=>{this.$instance.slick("slickPause")})}slickPlay(){this.zone.runOutsideAngular(()=>{this.$instance.slick("slickPlay")})}unslick(){this.$instance&&(this.zone.runOutsideAngular(()=>{this.$instance.slick("unslick")}),this.$instance=void 0),this.initialized=!1}ngOnChanges(U){if(this.initialized){const Me=U.config;if(Me.previousValue!==Me.currentValue&&void 0!==Me.currentValue){const Z=Me.currentValue.refresh,Be=Object.assign({},Me.currentValue);delete Be.refresh,this.zone.runOutsideAngular(()=>{this.$instance.slick("slickSetOption",Be,Z)})}}}}return X.\u0275fac=function(U){return new(U||X)(p.Y36(p.SBq),p.Y36(p.R0b),p.Y36(p.Lbi))},X.\u0275cmp=p.Xpm({type:X,selectors:[["ngx-slick-carousel"]],inputs:{config:"config"},outputs:{afterChange:"afterChange",beforeChange:"beforeChange",breakpoint:"breakpoint",destroy:"destroy",init:"init"},exportAs:["slick-carousel"],features:[p._Bn([{provide:ae.JU,useExisting:(0,p.Gpc)(()=>X),multi:!0}]),p.TTD],ngContentSelectors:W,decls:1,vars:0,template:function(U,Me){1&U&&(p.F$t(),p.Hsn(0))},encapsulation:2}),X})(),z=(()=>{class X{constructor(U,Me,Z){this.el=U,this.platformId=Me,this.carousel=Z}ngOnInit(){(0,j.NF)(this.platformId)&&this.carousel.addSlide(this)}ngOnDestroy(){(0,j.NF)(this.platformId)&&this.carousel.removeSlide(this)}}return X.\u0275fac=function(U){return new(U||X)(p.Y36(p.SBq),p.Y36(p.Lbi),p.Y36(he,1))},X.\u0275dir=p.lG2({type:X,selectors:[["","ngxSlickItem",""]]}),X})(),ee=(()=>{class X{}return X.\u0275fac=function(U){return new(U||X)},X.\u0275mod=p.oAB({type:X}),X.\u0275inj=p.cJS({imports:[[j.ez]]}),X})()}}]);